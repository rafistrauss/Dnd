import{f as g,e as D,a as v,s as k,c as lt,t as gt}from"../chunks/DByWoho_.js";import{i as yt}from"../chunks/B8VD8sBm.js";import{c as Mt,o as qt}from"../chunks/rdJCzvYT.js";import{a6 as ma,i as _a,b1 as Aa,b2 as Ra,b3 as va,J as jt,e as ya,b4 as ka,ay as Ia,b as i,r as xa,R as $a,g as Ma,B as kt,b5 as ze,b6 as Lt,E as M,F as xt,s as o,a3 as I,G as l,I as a,H as s,d as e,C as Ue,k as Ke,z as B,b7 as St,b8 as Tt,b9 as Ca,aI as Sa,ba as Ea}from"../chunks/BMWhyEAP.js";import{a as Ze,c as K,b as dt,r as $e,e as nt,i as vt,d as La,u as Pa,f as wt,s as ot,g as Qt,j as Jt,k as Ba,t as sa,h as Ua,l as Ha,m as Na}from"../chunks/D9whcMjT.js";import{i as j,s as Ct,a as He,b as Qe,d as Ta}from"../chunks/D39sVKQV.js";import{p as Rt,b as na}from"../chunks/Ds54jWm4.js";import{b as Nt,r as Ga}from"../chunks/DH_QQMJF.js";function Kt(r,p,t=!1){if(r.multiple){if(p==null)return;if(!_a(p))return Aa();for(var d of r.options)d.selected=p.includes(Gt(d));return}for(d of r.options){var $=Gt(d);if(Ra($,p)){d.selected=!0;return}}(!t||p!==void 0)&&(r.selectedIndex=-1)}function oa(r){var p=new MutationObserver(()=>{Kt(r,r.__value)});p.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ma(()=>{p.disconnect()})}function ja(r,p,t=p){var d=new WeakSet,$=!0;va(r,"change",x=>{var w=x?"[selected]":":checked",T;if(r.multiple)T=[].map.call(r.querySelectorAll(w),Gt);else{var b=r.querySelector(w)??r.querySelector("option:not([disabled])");T=b&&Gt(b)}t(T),jt!==null&&d.add(jt)}),ya(()=>{var x=p();if(r===document.activeElement){var w=ka??jt;if(d.has(w))return}if(Kt(r,x,$),$&&x===void 0){var T=r.querySelector(":checked");T!==null&&(x=Gt(T),t(x))}r.__value=x,$=!1}),oa(r)}function Gt(r){return"__value"in r?r.__value:r.value}function Le(r,p,t=p){var d=new WeakSet;va(r,"input",async $=>{var x=$?r.defaultValue:r.value;if(x=la(r)?ia(x):x,t(x),jt!==null&&d.add(jt),await Ia(),x!==(x=p())){var w=r.selectionStart,T=r.selectionEnd,b=r.value.length;if(r.value=x??"",T!==null){var O=r.value.length;w===T&&T===b&&O>b?(r.selectionStart=O,r.selectionEnd=O):(r.selectionStart=w,r.selectionEnd=Math.min(T,O))}}}),($a&&r.defaultValue!==r.value||i(p)==null&&r.value)&&(t(la(r)?ia(r.value):r.value),jt!==null&&d.add(jt)),xa(()=>{var $=p();if(r===document.activeElement){var x=ka??jt;if(d.has(x))return}la(r)&&$===ia(r.value)||r.type==="date"&&!$&&!r.value||$!==r.value&&(r.value=$??"")})}function da(r,p,t=p){va(r,"change",d=>{var $=d?r.defaultChecked:r.checked;t($)}),($a&&r.defaultChecked!==r.checked||i(p)==null)&&t(r.checked),xa(()=>{var d=p();r.checked=!!d})}function la(r){var p=r.type;return p==="number"||p==="range"}function ia(r){return r===""?null:+r}function Oa(r,p,t){var d=Ma(r,p);d&&d.set&&(r[p]=t,ma(()=>{r[p]=null}))}function ua(r){return function(...p){var t=p[0];return t.stopPropagation(),r?.apply(this,p)}}function It(r,p){var t=r.$$events?.[p.type],d=_a(t)?t.slice():t==null?[]:[t];for(var $ of d)$.call(this,p)}const qa="";function wa(...r){return Nt+qa+Ga(r[0],r[1])}const ca={paladin:{name:"Paladin",hitDice:"d10",spellcaster:!0,spellcastingAbility:"charisma",spellSlotsByLevel:{1:0,2:2,3:3,4:3,5:4,6:4,7:4,8:4,9:4,10:4,11:4,12:4,13:4,14:4,15:4,16:4,17:4,18:4,19:4,20:4},features:[{name:"Divine Sense",type:"uses",maxUses:(r,p=1)=>1+Math.max(1,p),resetOn:"long",description:"Detect celestials, fiends, and undead within 60 feet",minLevel:1},{name:"Lay on Hands",type:"pool",maxPool:r=>r*5,resetOn:"long",description:"Heal wounds or cure disease",minLevel:1},{name:"Divine Smite",type:"spellSlot",description:"Expend spell slot to deal extra radiant damage",minLevel:2,rollable:!0},{name:"Channel Divinity",type:"pool",maxPool:r=>r>=18?3:r>=6?2:1,resetOn:"short",description:"Sacred Weapon or Turn Undead",minLevel:3}]},fighter:{name:"Fighter",hitDice:"d10",spellcaster:!1,features:[{name:"Second Wind",type:"uses",maxUses:1,resetOn:"short",description:"Regain 1d10 + fighter level HP as bonus action",minLevel:1,rollable:!0,rollFormula:r=>`1d10+${r}`},{name:"Action Surge",type:"uses",maxUses:r=>r>=17?2:1,resetOn:"short",description:"Take one additional action on your turn",minLevel:2},{name:"Indomitable",type:"uses",maxUses:r=>r>=17?3:r>=13?2:1,resetOn:"long",description:"Reroll a failed saving throw",minLevel:9}],subclasses:{champion:{name:"Champion",features:[{name:"Improved Critical",type:"info",description:"Critical hit on 19-20",minLevel:3},{name:"Remarkable Athlete",type:"info",description:"Add half proficiency to STR/DEX/CON checks, increase long jump distance",minLevel:7},{name:"Additional Fighting Style",type:"info",description:"Choose a second fighting style",minLevel:10},{name:"Superior Critical",type:"info",description:"Critical hit on 18-20",minLevel:15},{name:"Survivor",type:"info",description:"Regain 5 + CON mod HP at start of turn if below half HP",minLevel:18}]},battlemaster:{name:"Battle Master",features:[{name:"Combat Superiority",type:"uses",maxUses:r=>r>=15?6:r>=7?5:4,resetOn:"short",description:r=>`Use superiority dice (${r>=18?"d12":r>=10?"d10":"d8"}) for maneuvers`,minLevel:3},{name:"Know Your Enemy",type:"info",description:"Learn capabilities of creatures you observe",minLevel:7},{name:"Improved Combat Superiority",type:"info",description:"Superiority dice become d10",minLevel:10},{name:"Relentless",type:"info",description:"Regain 1 superiority die if you have none at start of turn",minLevel:15}]}}},rogue:{name:"Rogue",hitDice:"d8",spellcaster:!1,features:[{name:"Sneak Attack",type:"info",description:r=>`Deal ${Math.ceil(r/2)}d6 extra damage once per turn with advantage or ally nearby`,minLevel:1,rollable:!0,rollFormula:r=>`${Math.ceil(r/2)}d6`},{name:"Cunning Action",type:"info",description:"Dash, Disengage, or Hide as a bonus action",minLevel:2},{name:"Uncanny Dodge",type:"info",description:"Use reaction to halve damage from an attack",minLevel:5},{name:"Evasion",type:"info",description:"Take no damage on successful Dex save (half on fail)",minLevel:7}]},wizard:{name:"Wizard",hitDice:"d6",spellcaster:!0,spellcastingAbility:"intelligence",spellSlotsByLevel:{1:2,2:3,3:4,4:4,5:4,6:4,7:4,8:4,9:4,10:4,11:4,12:4,13:4,14:4,15:4,16:4,17:4,18:4,19:4,20:4},features:[{name:"Arcane Recovery",type:"uses",maxUses:1,resetOn:"long",description:r=>`Recover spell slots totaling up to ${Math.ceil(r/2)} levels during short rest`,minLevel:1},{name:"Spell Mastery",type:"info",description:"Cast one 1st-level and one 2nd-level spell at will",minLevel:18}]},cleric:{name:"Cleric",hitDice:"d8",spellcaster:!0,spellcastingAbility:"wisdom",spellSlotsByLevel:{1:2,2:3,3:4,4:4,5:4,6:4,7:4,8:4,9:4,10:4,11:4,12:4,13:4,14:4,15:4,16:4,17:4,18:4,19:4,20:4},features:[{name:"Channel Divinity",type:"pool",maxPool:r=>r>=18?3:r>=6?2:1,resetOn:"short",description:"Turn Undead or domain-specific ability",minLevel:2},{name:"Destroy Undead",type:"info",description:r=>`Channel Divinity destroys undead of CR ${r>=17?4:r>=14?3:r>=11?2:r>=8?1:.5} or lower`,minLevel:5},{name:"Divine Intervention",type:"uses",maxUses:1,resetOn:"long",description:r=>`${r}% chance to succeed, implore deity for aid`,minLevel:10}],subclasses:{war:{name:"War Domain",features:[{name:"War Priest",type:"uses",maxUses:(r,p=1)=>Math.max(1,p),resetOn:"long",description:"Make one weapon attack as a bonus action",minLevel:1},{name:"Guided Strike",type:"channelDivinity",description:"Use your Channel Divinity to gain +10 to an attack roll. Make this choice after you see the roll, but before the DM says whether the attack hits or misses.",minLevel:2,resetOn:"short"},{name:"War God's Blessing",type:"channelDivinity",description:"Use reaction to grant +10 to an ally's attack roll within 30 feet. Consumes one use of Channel Divinity.",minLevel:6,resetOn:"short"},{name:"Divine Strike",type:"info",description:r=>`Deal extra ${r>=14?"2d8":"1d8"} weapon damage once per turn`,minLevel:8,rollable:!0,rollFormula:r=>r>=14?"2d8":"1d8"},{name:"Avatar of Battle",type:"info",description:"Gain resistance to nonmagical weapon damage",minLevel:17}]},life:{name:"Life Domain",features:[{name:"Disciple of Life",type:"info",description:"Healing spells restore additional 2 + spell level HP",minLevel:1},{name:"Preserve Life",type:"pool",maxPool:r=>r*5,resetOn:"short",description:"Restore HP to creatures within 30 feet",minLevel:2},{name:"Blessed Healer",type:"info",description:"Regain 2 + spell level HP when you cast healing spell",minLevel:6},{name:"Divine Strike",type:"info",description:r=>`Deal extra ${r>=14?"2d8":"1d8"} radiant damage once per turn`,minLevel:8,rollable:!0,rollFormula:r=>r>=14?"2d8":"1d8"},{name:"Supreme Healing",type:"info",description:"Maximize healing dice instead of rolling",minLevel:17}]}}},barbarian:{name:"Barbarian",hitDice:"d12",spellcaster:!1,features:[{name:"Rage",type:"uses",maxUses:r=>r>=20?1/0:r>=17?6:r>=12?5:r>=6?4:r>=3?3:2,resetOn:"long",description:r=>`+${r>=16?4:r>=9?3:2} damage, resistance to physical damage`,minLevel:1},{name:"Reckless Attack",type:"info",description:"Gain advantage on melee attacks, enemies get advantage on you",minLevel:2},{name:"Danger Sense",type:"info",description:"Advantage on Dex saves against effects you can see",minLevel:2}],subclasses:{berserker:{name:"Path of the Berserker",features:[{name:"Frenzy",type:"info",description:"While raging, make melee attack as bonus action (gain 1 exhaustion after rage)",minLevel:3},{name:"Mindless Rage",type:"info",description:"Cannot be charmed or frightened while raging",minLevel:6},{name:"Intimidating Presence",type:"info",description:"Use action to frighten creature within 30 feet",minLevel:10},{name:"Retaliation",type:"info",description:"When damaged by creature within 5 feet, make melee attack as reaction",minLevel:14}]}}}};function _t(r){const p=r.toLowerCase();return ca[p]||null}function Ot(r,p,t){const d=_t(r);if(!d)return[];const $=d.features.filter(x=>!x.minLevel||x.minLevel<=p);if(t&&d.subclasses&&d.subclasses[t]){const x=d.subclasses[t].features.filter(w=>!w.minLevel||w.minLevel<=p);return[...$,...x]}return $}function pa(r){const p=_t(r);return!p||!p.subclasses?[]:Object.keys(p.subclasses).map(t=>({id:t,name:p.subclasses[t].name}))}function fa(r,p){const t=_t(r);return!t||!t.spellcaster||!t.spellSlotsByLevel?0:t.spellSlotsByLevel[p]||0}function ba(r,p,t){const d=_t(r);return!d||!d.spellcaster?0:Math.max(1,t+p)}function za(r,p,t){const d=_t(r);return!d||!d.spellcaster?null:8+p+t}function Wa(){return Object.keys(ca).map(r=>({id:r,name:ca[r].name}))}var Va=g("<option> </option>"),Ja=g("<option> </option>"),Ka=g('<div class="form-group svelte-172i2fj"><label for="characterSubclass" class="svelte-172i2fj">Subclass</label> <select id="characterSubclass" class="svelte-172i2fj"><option>Select Subclass</option><!></select></div>'),Qa=g('<div class="info-grid svelte-172i2fj"><div class="form-group svelte-172i2fj"><label for="characterName" class="svelte-172i2fj">Character Name</label> <input type="text" id="characterName" placeholder="Enter name" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterClass" class="svelte-172i2fj">Class</label> <select id="characterClass" class="svelte-172i2fj"><option>Select Class</option><!></select></div> <!> <div class="form-group svelte-172i2fj"><label for="characterLevel" class="svelte-172i2fj">Level</label> <input type="number" id="characterLevel" min="1" max="20" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterRace" class="svelte-172i2fj">Race</label> <input type="text" id="characterRace" placeholder="e.g., Human" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterBackground" class="svelte-172i2fj">Background</label> <input type="text" id="characterBackground" placeholder="e.g., Soldier" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterAlignment" class="svelte-172i2fj">Alignment</label> <input type="text" id="characterAlignment" placeholder="e.g., Lawful Good" class="svelte-172i2fj"/></div></div>'),Xa=g('<section class="character-info svelte-172i2fj"><div class="header svelte-172i2fj"><h2 class="svelte-172i2fj">Character Info</h2> <button class="collapse-btn svelte-172i2fj"> </button></div> <!></section>');function Ya(r,p){kt(p,!1);const t=()=>He(K,"$character",$),d=()=>He(dt,"$collapsedStates",$),[$,x]=Ct(),w=I(),T=Wa();function b(ie){const ce=ie.target;K.update(Q=>(Q.class=ce.value,Q.subclass="",Q))}function O(ie){const ce=ie.target;K.update(Q=>(Q.subclass=ce.value,Q))}function se(ie){const ce=ie.target;K.update(Q=>(Q.level=parseInt(ce.value)||1,Q)),Pa()}function H(){dt.update(ie=>({...ie,characterInfo:!ie.characterInfo}))}ze(()=>(t(),pa),()=>{o(w,t().class?pa(t().class):[])}),Lt(),yt();var W=Xa(),ue=l(W),oe=a(l(ue),2),he=l(oe,!0);s(oe),s(ue);var fe=a(ue,2);{var G=ie=>{var ce=Qa(),Q=l(ce),re=a(l(Q),2);$e(re),s(Q);var Z=a(Q,2),E=a(l(Z),2),ne=l(E);ne.value=ne.__value="";var ve=a(ne);nt(ve,1,()=>T,vt,(te,Ae)=>{var _e=Va(),Te=l(_e,!0);s(_e);var de={};M(()=>{k(Te,(e(Ae),i(()=>e(Ae).name))),de!==(de=(e(Ae),i(()=>e(Ae).id)))&&(_e.value=(_e.__value=(e(Ae),i(()=>e(Ae).id)))??"")}),v(te,_e)}),s(E);var ee;oa(E),s(Z);var Re=a(Z,2);{var C=te=>{var Ae=Ka(),_e=a(l(Ae),2),Te=l(_e);Te.value=Te.__value="";var de=a(Te);nt(de,1,()=>e(w),vt,(Ie,Ne)=>{var Be=Ja(),qe=l(Be,!0);s(Be);var h={};M(()=>{k(qe,(e(Ne),i(()=>e(Ne).name))),h!==(h=(e(Ne),i(()=>e(Ne).id)))&&(Be.value=(Be.__value=(e(Ne),i(()=>e(Ne).id)))??"")}),v(Ie,Be)}),s(_e);var y;oa(_e),s(Ae),M(()=>{y!==(y=(t(),i(()=>t().subclass)))&&(_e.value=(_e.__value=(t(),i(()=>t().subclass)))??"",Kt(_e,(t(),i(()=>t().subclass))))}),D("change",_e,O),v(te,Ae)};j(Re,te=>{e(w),i(()=>e(w).length>0)&&te(C)})}var V=a(Re,2),le=a(l(V),2);$e(le),s(V);var _=a(V,2),R=a(l(_),2);$e(R),s(_);var f=a(_,2),N=a(l(f),2);$e(N),s(f);var X=a(f,2),U=a(l(X),2);$e(U),s(X),s(ce),M(()=>{ee!==(ee=(t(),i(()=>t().class)))&&(E.value=(E.__value=(t(),i(()=>t().class)))??"",Kt(E,(t(),i(()=>t().class)))),La(le,(t(),i(()=>t().level)))}),Le(re,()=>t().name,te=>Qe(K,i(t).name=te,i(t))),D("change",E,b),D("change",le,se),Le(R,()=>t().race,te=>Qe(K,i(t).race=te,i(t))),Le(N,()=>t().background,te=>Qe(K,i(t).background=te,i(t))),Le(U,()=>t().alignment,te=>Qe(K,i(t).alignment=te,i(t))),v(ie,ce)};j(fe,ie=>{d(),i(()=>!d().characterInfo)&&ie(G)})}s(W),M(()=>{Ze(oe,"aria-label",(d(),i(()=>d().characterInfo?"Expand":"Collapse"))),k(he,(d(),i(()=>d().characterInfo?"â–¼":"â–²")))}),D("click",oe,H),v(r,W),xt(),x()}var Za=g('<div class="ability-card svelte-bbv1xt"><h3 class="svelte-bbv1xt"> </h3> <input type="number" class="ability-score svelte-bbv1xt" min="1" max="30"/> <div class="ability-modifier svelte-bbv1xt"> </div> <button class="roll-btn svelte-bbv1xt">Check</button> <div class="save-row svelte-bbv1xt"><input type="checkbox" class="svelte-bbv1xt"/> <label class="svelte-bbv1xt">Save</label> <button class="roll-btn-small svelte-bbv1xt">Roll</button></div></div>'),es=g('<div class="proficiency-bonus svelte-bbv1xt"><label for="profBonus">Proficiency Bonus</label> <input type="number" id="profBonus" class="prof-input svelte-bbv1xt"/></div> <div class="abilities-grid svelte-bbv1xt"></div>',1),ts=g('<section><div class="header svelte-bbv1xt"><h2 class="svelte-bbv1xt">Ability Scores</h2> <button class="collapse-btn svelte-bbv1xt"> </button></div> <!></section>');function as(r,p){kt(p,!1);const t=()=>He(Qt,"$abilityModifiers",w),d=()=>He(K,"$character",w),$=()=>He(wt,"$searchFilter",w),x=()=>He(dt,"$collapsedStates",w),[w,T]=Ct(),b=I(),O=I(),se=Mt(),H=[{key:"strength",label:"Strength"},{key:"dexterity",label:"Dexterity"},{key:"constitution",label:"Constitution"},{key:"intelligence",label:"Intelligence"},{key:"wisdom",label:"Wisdom"},{key:"charisma",label:"Charisma"}];function W(){updateProficiencyBonus()}function ue(E){const ne=t()[E],ve=`1d20${ne>=0?"+":""}${ne}`;se("roll",ve)}function oe(E){const ne=t()[E],ve=d().saveProficiencies[E]?d().proficiencyBonus:0,ee=ne+ve,Re=`1d20${ee>=0?"+":""}${ee}`;se("roll",Re)}function he(){dt.update(E=>({...E,abilityScores:!E.abilityScores}))}ze(()=>$(),()=>{o(b,H.filter(({label:E})=>$()?E.toLowerCase().includes($().toLowerCase()):!0))}),ze(()=>(e(b),$()),()=>{o(O,e(b).length>0||!$()||$().toLowerCase().includes("proficiency"))}),Lt(),yt();var fe=ts();let G;var ie=l(fe),ce=a(l(ie),2),Q=l(ce,!0);s(ce),s(ie);var re=a(ie,2);{var Z=E=>{var ne=es(),ve=Ue(ne),ee=a(l(ve),2);$e(ee),s(ve);var Re=a(ve,2);nt(Re,5,()=>e(b),vt,(C,V)=>{let le=()=>e(V).key,_=()=>e(V).label;var R=Za(),f=l(R),N=l(f,!0);s(f);var X=a(f,2);$e(X);var U=a(X,2),te=l(U);s(U);var Ae=a(U,2),_e=a(Ae,2),Te=l(_e);$e(Te);var de=a(Te,2),y=a(de,2);s(_e),s(R),M(Ie=>{k(N,Ie),k(te,`${t(),le(),i(()=>t()[le()]>=0?"+":"")??""}${t(),le(),i(()=>t()[le()])??""}`),Ze(Te,"id",`${le()}-save`),Ze(de,"for",`${le()}-save`)},[()=>(_(),i(()=>_().substring(0,3).toUpperCase()))]),Le(X,()=>d().abilities[le()],Ie=>Qe(K,i(d).abilities[le()]=Ie,i(d))),D("change",X,W),D("click",Ae,()=>ue(le())),da(Te,()=>d().saveProficiencies[le()],Ie=>Qe(K,i(d).saveProficiencies[le()]=Ie,i(d))),D("click",y,()=>oe(le())),v(C,R)}),s(Re),Le(ee,()=>d().proficiencyBonus,C=>Qe(K,i(d).proficiencyBonus=C,i(d))),v(E,ne)};j(re,E=>{x(),i(()=>!x().abilityScores)&&E(Z)})}s(fe),M(()=>{G=ot(fe,1,"ability-scores svelte-bbv1xt",null,G,{hidden:!e(O)}),Ze(ce,"aria-label",(x(),i(()=>x().abilityScores?"Expand":"Collapse"))),k(Q,(x(),i(()=>x().abilityScores?"â–¼":"â–²")))}),D("click",ce,he),v(r,fe),xt(),T()}var ss=g('<span class="hit-dice-type"> </span>'),ls=g('<div class="stats-grid svelte-1r5hyyb"><div class="stat-box svelte-1r5hyyb"><label for="armorClass" class="svelte-1r5hyyb">Armor Class</label> <input type="number" id="armorClass" class="stat-input svelte-1r5hyyb"/></div> <div class="stat-box svelte-1r5hyyb"><label for="initiative" class="svelte-1r5hyyb">Initiative</label> <input type="number" id="initiative" class="stat-input svelte-1r5hyyb"/></div> <div class="stat-box svelte-1r5hyyb"><label for="speed" class="svelte-1r5hyyb">Speed</label> <input type="text" id="speed" class="stat-input svelte-1r5hyyb"/></div></div> <div class="hp-section svelte-1r5hyyb"><h3 class="svelte-1r5hyyb">Hit Points</h3> <div class="hp-display svelte-1r5hyyb"><div class="hp-inputs svelte-1r5hyyb"><input type="number" class="hp-current svelte-1r5hyyb" min="0"/> <span class="hp-separator svelte-1r5hyyb">/</span> <input type="number" class="hp-max svelte-1r5hyyb" min="0"/></div> <div class="hp-controls svelte-1r5hyyb"><button class="hp-btn svelte-1r5hyyb">âˆ’</button> <button class="hp-btn svelte-1r5hyyb">+</button> <button class="hp-btn svelte-1r5hyyb">âˆ’5</button> <button class="hp-btn svelte-1r5hyyb">+5</button></div></div> <div class="temp-hp svelte-1r5hyyb"><label for="tempHP" class="svelte-1r5hyyb">Temp HP</label> <input type="number" id="tempHP" min="0" class="svelte-1r5hyyb"/></div></div> <div class="hit-dice-section svelte-1r5hyyb"><h3 class="svelte-1r5hyyb">Hit Dice</h3> <div class="hit-dice-display svelte-1r5hyyb"><input type="number" class="hit-dice-input svelte-1r5hyyb" min="0"/> <span>/</span> <input type="number" class="hit-dice-input svelte-1r5hyyb" min="0"/> <!></div> <div class="hit-dice-controls"><label for="hitDiceCount" class="svelte-1r5hyyb">Roll</label> <input type="number" id="hitDiceCount" class="hit-dice-count-input svelte-1r5hyyb" min="1" value="1"/> <button class="btn btn-primary roll-hit-dice use-enabled svelte-1r5hyyb">ðŸŽ² Roll</button></div></div>',1),is=g('<section><div class="header svelte-1r5hyyb"><h2 class="svelte-1r5hyyb">Combat Stats</h2> <button class="collapse-btn svelte-1r5hyyb"> </button></div> <!></section>');function rs(r,p){kt(p,!1);const t=()=>He(K,"$character",w),d=()=>He(Qt,"$abilityModifiers",w),$=()=>He(wt,"$searchFilter",w),x=()=>He(dt,"$collapsedStates",w),[w,T]=Ct(),b=I(),O=Mt();function se(Q){K.update(re=>(re.currentHP=Math.max(0,Math.min(re.maxHP,re.currentHP+Q)),re))}function H(Q=1){if(t().hitDice.current<=0){alert("No hit dice remaining!");return}if(!t().class){alert("Please select a class first!");return}const re=_t(t().class);if(!re){alert("Invalid class configuration!");return}const Z=Math.min(Q,t().hitDice.current),E=re.hitDice,ne=d().constitution,ve=ne>=0?`+${ne}`:`${ne}`,ee=`${Z}${E}${ve}`;O("rollHitDice",{notation:ee,hitDie:E,count:Z})}function W(){dt.update(Q=>({...Q,combatStats:!Q.combatStats}))}ze(()=>$(),()=>{o(b,!$()||"armor class".includes($().toLowerCase())||"initiative".includes($().toLowerCase())||"speed".includes($().toLowerCase())||"hit points".includes($().toLowerCase())||"hp".includes($().toLowerCase())||"hit dice".includes($().toLowerCase())||"combat".includes($().toLowerCase()))}),Lt(),yt();var ue=is();let oe;var he=l(ue),fe=a(l(he),2),G=l(fe,!0);s(fe),s(he);var ie=a(he,2);{var ce=Q=>{var re=ls(),Z=Ue(re),E=l(Z),ne=a(l(E),2);$e(ne),s(E);var ve=a(E,2),ee=a(l(ve),2);$e(ee),s(ve);var Re=a(ve,2),C=a(l(Re),2);$e(C),s(Re),s(Z);var V=a(Z,2),le=a(l(V),2),_=l(le),R=l(_);$e(R);var f=a(R,4);$e(f),s(_);var N=a(_,2),X=l(N),U=a(X,2),te=a(U,2),Ae=a(te,2);s(N),s(le);var _e=a(le,2),Te=a(l(_e),2);$e(Te),s(_e),s(V);var de=a(V,2),y=a(l(de),2),Ie=l(y);$e(Ie);var Ne=a(Ie,4);$e(Ne);var Be=a(Ne,2);{var qe=P=>{const Ce=Ke(()=>(B(_t),t(),i(()=>_t(t().class))));var ye=lt(),je=Ue(ye);{var me=S=>{const be=Ke(()=>(d(),i(()=>d().constitution)));var ge=ss(),De=l(ge);s(ge),M(()=>k(De,`(${B(e(Ce)),i(()=>e(Ce).hitDice)??""}${(e(be)>=0?`+${e(be)}`:e(be))??""})`)),v(S,ge)};j(je,S=>{e(Ce)&&S(me)})}v(P,ye)};j(Be,P=>{t(),i(()=>t().class)&&P(qe)})}s(y);var h=a(y,2),J=a(l(h),2),Y=a(J,2);s(h),s(de),M(()=>{Ze(R,"max",(t(),i(()=>t().maxHP))),Ze(Ie,"max",(t(),i(()=>t().hitDice.max))),Ze(J,"max",(t(),i(()=>t().hitDice.current))),Y.disabled=(t(),i(()=>t().hitDice.current<=0||!t().class))}),Le(ne,()=>t().armorClass,P=>Qe(K,i(t).armorClass=P,i(t))),Le(ee,()=>t().initiative,P=>Qe(K,i(t).initiative=P,i(t))),Le(C,()=>t().speed,P=>Qe(K,i(t).speed=P,i(t))),Le(R,()=>t().currentHP,P=>Qe(K,i(t).currentHP=P,i(t))),Le(f,()=>t().maxHP,P=>Qe(K,i(t).maxHP=P,i(t))),D("click",X,()=>se(-1)),D("click",U,()=>se(1)),D("click",te,()=>se(-5)),D("click",Ae,()=>se(5)),Le(Te,()=>t().tempHP,P=>Qe(K,i(t).tempHP=P,i(t))),Le(Ie,()=>t().hitDice.current,P=>Qe(K,i(t).hitDice.current=P,i(t))),Le(Ne,()=>t().hitDice.max,P=>Qe(K,i(t).hitDice.max=P,i(t))),D("input",J,P=>{const Ce=P.target,ye=parseInt(Ce.value);ye>t().hitDice.current&&(Ce.value=String(t().hitDice.current)),ye<1&&(Ce.value="1")}),D("click",Y,()=>{const P=document.getElementById("hitDiceCount"),Ce=parseInt(P?.value||"1");H(Ce)}),v(Q,re)};j(ie,Q=>{x(),i(()=>!x().combatStats)&&Q(ce)})}s(ue),M(()=>{oe=ot(ue,1,"combat-stats svelte-1r5hyyb",null,oe,{hidden:!e(b)}),Ze(fe,"aria-label",(x(),i(()=>x().combatStats?"Expand":"Collapse"))),k(G,(x(),i(()=>x().combatStats?"â–¼":"â–²")))}),D("click",fe,W),v(r,ue),xt(),T()}const ra={acrobatics:"dexterity",animalHandling:"wisdom",arcana:"intelligence",athletics:"strength",deception:"charisma",history:"intelligence",insight:"wisdom",intimidation:"charisma",investigation:"intelligence",medicine:"wisdom",nature:"intelligence",perception:"wisdom",performance:"charisma",persuasion:"charisma",religion:"intelligence",sleightOfHand:"dexterity",stealth:"dexterity",survival:"wisdom"};var ns=g('<div class="skill-row svelte-1f1pl16"><input type="checkbox" class="svelte-1f1pl16"/> <label class="svelte-1f1pl16"> <span class="ability-tag svelte-1f1pl16"> </span></label> <span class="skill-modifier svelte-1f1pl16"> </span> <button class="roll-btn svelte-1f1pl16">Roll</button></div>'),os=g('<div class="skills-grid svelte-1f1pl16"></div>'),cs=g('<section><div class="header svelte-1f1pl16"><h2 class="svelte-1f1pl16">Skills</h2> <button class="collapse-btn svelte-1f1pl16"> </button></div> <!></section>');function vs(r,p){kt(p,!1);const t=()=>He(Qt,"$abilityModifiers",w),d=()=>He(K,"$character",w),$=()=>He(wt,"$searchFilter",w),x=()=>He(dt,"$collapsedStates",w),[w,T]=Ct(),b=I(),O=I(),se=Mt(),H=[{key:"acrobatics",label:"Acrobatics"},{key:"animalHandling",label:"Animal Handling"},{key:"arcana",label:"Arcana"},{key:"athletics",label:"Athletics"},{key:"deception",label:"Deception"},{key:"history",label:"History"},{key:"insight",label:"Insight"},{key:"intimidation",label:"Intimidation"},{key:"investigation",label:"Investigation"},{key:"medicine",label:"Medicine"},{key:"nature",label:"Nature"},{key:"perception",label:"Perception"},{key:"performance",label:"Performance"},{key:"persuasion",label:"Persuasion"},{key:"religion",label:"Religion"},{key:"sleightOfHand",label:"Sleight of Hand"},{key:"stealth",label:"Stealth"},{key:"survival",label:"Survival"}];function W(Z){const E=ra[Z],ne=t()[E],ve=d().skillProficiencies[Z]?d().proficiencyBonus:0;return ne+ve}function ue(Z){const E=W(Z),ne=`1d20${E>=0?"+":""}${E}`;se("roll",ne)}function oe(){dt.update(Z=>({...Z,skills:!Z.skills}))}ze(()=>$(),()=>{o(b,H.filter(({label:Z})=>$()?Z.toLowerCase().includes($().toLowerCase()):!0))}),ze(()=>e(b),()=>{o(O,e(b).length>0)}),Lt(),yt();var he=cs();let fe;var G=l(he),ie=a(l(G),2),ce=l(ie,!0);s(ie),s(G);var Q=a(G,2);{var re=Z=>{var E=os();nt(E,5,()=>e(b),vt,(ne,ve)=>{let ee=()=>e(ve).key,Re=()=>e(ve).label;const C=Ke(()=>(B(ra),ee(),i(()=>ra[ee()]))),V=Ke(()=>(ee(),i(()=>W(ee()))));var le=ns(),_=l(le);$e(_);var R=a(_,2),f=l(R),N=a(f),X=l(N);s(N),s(R);var U=a(R,2),te=l(U);s(U);var Ae=a(U,2);s(le),M(_e=>{Ze(_,"id",ee()),Ze(R,"for",ee()),k(f,`${Re()??""} `),k(X,`(${_e??""})`),k(te,`${e(V)>=0?"+":""}${e(V)??""}`)},[()=>(B(e(C)),i(()=>e(C).substring(0,3).toUpperCase()))]),da(_,()=>d().skillProficiencies[ee()],_e=>Qe(K,i(d).skillProficiencies[ee()]=_e,i(d))),D("click",Ae,()=>ue(ee())),v(ne,le)}),s(E),v(Z,E)};j(Q,Z=>{x(),i(()=>!x().skills)&&Z(re)})}s(he),M(()=>{fe=ot(he,1,"skills svelte-1f1pl16",null,fe,{hidden:!e(O)}),Ze(ie,"aria-label",(x(),i(()=>x().skills?"Expand":"Collapse"))),k(ce,(x(),i(()=>x().skills?"â–¼":"â–²")))}),D("click",ie,oe),v(r,he),xt(),T()}let Wt=null,Vt=null;async function Da(){if(Wt)return Wt;try{return Wt=await(await fetch(wa("/data/spells.json"))).json(),Wt||[]}catch(r){return console.error("Failed to load spells:",r),[]}}async function ds(){if(Vt)return Vt;try{return Vt=await(await fetch(wa("/data/feats.json"))).json(),Vt||[]}catch(r){return console.error("Failed to load feats:",r),[]}}function ga(r,p){if(!p.trim())return r;const t=p.toLowerCase();return r.filter(d=>d.name.toLowerCase().includes(t)||d.school.toLowerCase().includes(t)||d.classes.some($=>$.toLowerCase().includes(t))||d.description.toLowerCase().includes(t))}function us(r,p){return p===null?r:r.filter(t=>t.level===p)}function ps(r,p){if(!p.trim())return r;const t=p.toLowerCase();return r.filter(d=>d.name.toLowerCase().includes(t)||d.description.toLowerCase().includes(t))}var fs=g('<button class="btn-remove svelte-14o91c5">Ã—</button>'),bs=g('<div class="spell-info-loading svelte-14o91c5">Loading spell info...</div>'),gs=g('<div class="spell-notes svelte-14o91c5"><h4 class="svelte-14o91c5">General Notes</h4> <p> </p></div>'),hs=g('<li class="svelte-14o91c5"><strong>At Higher Levels:</strong> </li>'),ms=g('<ul class="svelte-14o91c5"><li class="svelte-14o91c5"><strong>Level:</strong> </li> <li class="svelte-14o91c5"><strong>Casting Time:</strong> </li> <li class="svelte-14o91c5"><strong>Range:</strong> </li> <li class="svelte-14o91c5"><strong>Components:</strong> <!></li> <li class="svelte-14o91c5"><strong>Duration:</strong> <!> </li> <li class="svelte-14o91c5"><strong>Description:</strong> </li> <!></ul>'),_s=g("<option> </option>"),ys=g('<span class="scaled-damage svelte-14o91c5"> </span>'),ks=g('<span class="scaled-damage svelte-14o91c5"> </span>'),xs=g('<div class="target-condition svelte-14o91c5"><label class="svelte-14o91c5"><input type="checkbox" class="use-enabled svelte-14o91c5"/> Target is Fiend or Undead <!></label></div>'),$s=g('<div class="spell-level-selector svelte-14o91c5"><label class="svelte-14o91c5">Cast at Level:</label> <select class="spell-level-select use-enabled svelte-14o91c5"></select> <!></div> <!>',1),Cs=g('<div class="spell-level-selector svelte-14o91c5"><span style="color: #dc3545; font-weight: bold;">No spell slots available!</span></div>'),Ss=g('<!> <div class="spell-info svelte-14o91c5"><div class="spell-info-header svelte-14o91c5" role="button" tabindex="0"><h4 class="svelte-14o91c5">Spell Info</h4> <button class="collapse-btn-small svelte-14o91c5"> </button></div> <!></div> <!>',1),Ls=g('<div class="spell-info-missing svelte-14o91c5">Spell info not found.</div>'),js=g('<div class="attack-notes svelte-14o91c5"><label class="svelte-14o91c5">Notes</label> <textarea placeholder="e.g., DC 15 Dex save, Range 120 ft, Concentration" class="notes-input svelte-14o91c5" rows="2"></textarea></div>'),ws=g('<button class="btn btn-primary">Roll Attack</button>'),Ds=g('<button class="btn btn-secondary"><!></button>'),Fs=g('<button class="btn btn-secondary">Roll Damage</button>'),As=g('<div class="attack-card svelte-14o91c5"><div class="attack-header svelte-14o91c5"><input type="text" placeholder="Attack name" class="attack-name svelte-14o91c5"/> <!></div> <div class="attack-details svelte-14o91c5"><div class="attack-field svelte-14o91c5"><label class="svelte-14o91c5">Bonus</label> <input type="number" class="attack-bonus svelte-14o91c5"/></div> <div class="attack-field svelte-14o91c5"><label class="svelte-14o91c5">Damage</label> <input type="text" placeholder="e.g., 2d6+3" class="attack-damage svelte-14o91c5"/></div> <div class="attack-field svelte-14o91c5"><label class="svelte-14o91c5">Type</label> <input type="text" placeholder="e.g., slashing" class="attack-type svelte-14o91c5"/></div></div> <!> <!> <div class="attack-actions svelte-14o91c5"><!> <!></div></div>'),Rs=g('<p class="no-attacks svelte-14o91c5">No attacks added yet. Click "Add Attack" to create one.</p>'),Is=g('<p class="no-attacks svelte-14o91c5">No attacks match your search.</p>'),Ms=g('<button class="btn btn-secondary">Add Attack</button> <div class="attacks-list svelte-14o91c5"><!> <!></div>',1),Es=g('<section><div class="header svelte-14o91c5"><h2 class="svelte-14o91c5">Attacks & Spells</h2> <button class="collapse-btn svelte-14o91c5"> </button></div> <!></section>');function Ps(r,p){kt(p,!1);const t=()=>He(K,"$character",w),d=()=>He(wt,"$searchFilter",w),$=()=>He(dt,"$collapsedStates",w),x=()=>He(Jt,"$isEditMode",w),[w,T]=Ct(),b=I(),O=I(),se=Mt();let H=I({});function W(f){Ca(H,e(H)[f]=!e(H)[f]),o(H,{...e(H)})}function ue(f){return f.description.toLowerCase().includes("regain")&&(f.description.toLowerCase().includes("hit point")||f.description.toLowerCase().includes("hp"))}function oe(){K.update(f=>(f.attacks=[...f.attacks,{id:crypto.randomUUID(),name:"",bonus:0,damage:"",damageType:"",notes:""}],f))}function he(f){K.update(N=>(N.attacks=N.attacks.filter(X=>X.id!==f),N))}function fe(f){let N=f.damage;if(f.spellRef){const U=re(f.spellRef);if(U&&U.level>0){const te=f.castAtLevel||U.level;if(!Z(te)){alert(`No level ${te} spell slots available!`);return}N=E(f,U)}}const X=`1d20${f.bonus>=0?"+":""}${f.bonus}`;se("roll",{notation:X,damageNotation:N,attackName:f.name})}function G(f){if(!f.damage){alert(`${f.name}: No damage specified`);return}let N=f.damage;if(f.spellRef){const X=re(f.spellRef);if(X&&X.level>0){const U=f.castAtLevel||X.level;if(!Z(U)){alert(`No level ${U} spell slots available!`);return}N=E(f,X)}}se("roll",{notation:N,attackName:f.name})}function ie(){dt.update(f=>({...f,attacks:!f.attacks}))}let ce=I([]),Q=I(!1);qt(async()=>{o(ce,await Da()),o(Q,!0)});function re(f){return e(ce).find(N=>N.name===f)}function Z(f){t().classFeatures.spellSlotsByLevel||Qe(K,i(t).classFeatures.spellSlotsByLevel={},i(t)),t().classFeatures.spellSlotsByLevel[f]||Qe(K,i(t).classFeatures.spellSlotsByLevel[f]=Array(2).fill(!1),i(t));const X=t().classFeatures.spellSlotsByLevel[f].findIndex(U=>!U);return X===-1?!1:(K.update(U=>(U.classFeatures.spellSlotsByLevel||(U.classFeatures.spellSlotsByLevel={}),U.classFeatures.spellSlotsByLevel[f]||(U.classFeatures.spellSlotsByLevel[f]=Array(2).fill(!1)),U.classFeatures.spellSlotsByLevel[f][X]=!0,U)),!0)}function E(f,N){let X=f.damage,U=0;if(N.higherLevelSlot&&f.castAtLevel){const de=N.level,Ie=(f.castAtLevel||de)-de;if(Ie>0){const Ne=N.higherLevelSlot.match(/(\d+)d(\d+)\s+for\s+each.*?level\s+above/i);if(Ne){const[,Be]=Ne;U+=Ie*parseInt(Be)}}}if(f.targetIsFiendOrUndead&&N.description.includes("Fiend or an Undead")){const de=N.description.match(/increases by (\d+)d(\d+) if.*?Fiend or.*?Undead/i);if(de){const[,y]=de;U+=parseInt(y)}}const te=X.match(/(\d+)d(\d+)/);if(!te)return X;const[,Ae,_e]=te;return`${parseInt(Ae)+U}d${_e}`}function ne(f){const N=[];for(let U=f.level;U<=9;U++){const te=t().classFeatures.spellSlotsByLevel?.[U];te&&te.length>0&&N.push(U)}return N}function ve(f){const N=t().classFeatures.spellSlotsByLevel?.[f]||[],X=N.length,U=N.filter(te=>te).length;return{available:X-U,total:X}}ze(()=>(t(),d()),()=>{o(b,t().attacks.filter(f=>{if(!d())return!0;const N=d().toLowerCase();return f.name.toLowerCase().includes(N)||f.damageType.toLowerCase().includes(N)}).sort((f,N)=>!f.spellRef&&N.spellRef?-1:f.spellRef&&!N.spellRef?1:0))}),ze(()=>(d(),e(b)),()=>{o(O,!d()||e(b).length>0||"attack".includes(d().toLowerCase())||"spell".includes(d().toLowerCase()))}),Lt(),yt();var ee=Es();let Re;var C=l(ee),V=a(l(C),2),le=l(V,!0);s(V),s(C);var _=a(C,2);{var R=f=>{var N=Ms(),X=Ue(N),U=a(X,2),te=l(U);nt(te,1,()=>e(b),de=>de.id,(de,y,Ie)=>{var Ne=As(),Be=l(Ne),qe=l(Be);$e(qe);var h=a(qe,2);{var J=F=>{var c=fs();D("click",c,()=>he(e(y).id)),v(F,c)};j(h,F=>{x()&&F(J)})}s(Be);var Y=a(Be,2),P=l(Y),Ce=a(l(P),2);$e(Ce),s(P);var ye=a(P,2),je=a(l(ye),2);$e(je),s(ye);var me=a(ye,2),S=a(l(me),2);$e(S),s(me),s(Y);var be=a(Y,2);{var ge=F=>{var c=lt(),L=Ue(c);{var q=m=>{var u=bs();v(m,u)},n=m=>{const u=Ke(()=>(e(y),i(()=>re(e(y).spellRef))));var A=lt(),z=Ue(A);{var Fe=Ee=>{var Xe=Ss(),Ye=Ue(Xe);{var Ve=Je=>{var it=gs(),mt=a(l(it),2),Et=l(mt,!0);s(mt),s(it),M(()=>k(Et,(e(y),i(()=>e(y).generalNotes)))),v(Je,it)};j(Ye,Je=>{e(y),i(()=>e(y).generalNotes)&&Je(Ve)})}var tt=a(Ye,2),at=l(tt),Pe=a(l(at),2),et=l(Pe,!0);s(Pe),s(at);var bt=a(at,2);{var pe=Je=>{var it=ms(),mt=l(it),Et=a(l(mt));s(mt);var Pt=a(mt,2),Yt=a(l(Pt));s(Pt);var $t=a(Pt,2),At=a(l($t));s($t);var Dt=a($t,2),Bt=a(l(Dt)),Ft=a(Bt);{var Zt=st=>{var ct=gt();M(()=>k(ct,`(${B(e(u)),i(()=>e(u).material)??""})`)),v(st,ct)};j(Ft,st=>{B(e(u)),i(()=>e(u).material)&&st(Zt)})}s(Dt);var Ut=a(Dt,2),zt=a(l(Ut),2);{var ea=st=>{var ct=gt("Concentration,");v(st,ct)};j(zt,st=>{B(e(u)),i(()=>e(u).concentration)&&st(ea)})}var ut=a(zt,1,!0);s(Ut);var rt=a(Ut,2),pt=a(l(rt));s(rt);var ft=a(rt,2);{var Ht=st=>{var ct=hs(),ta=a(l(ct));s(ct),M(()=>k(ta,` ${B(e(u)),i(()=>e(u).higherLevelSlot)??""}`)),v(st,ct)};j(ft,st=>{B(e(u)),i(()=>e(u).higherLevelSlot)&&st(Ht)})}s(it),M(st=>{k(Et,` ${B(e(u)),i(()=>e(u).level)??""}`),k(Yt,` ${B(e(u)),i(()=>e(u).castingTime||e(u).actionType)??""}`),k(At,` ${B(e(u)),i(()=>e(u).range)??""}`),k(Bt,` ${st??""}`),k(ut,(B(e(u)),i(()=>e(u).duration))),k(pt,` ${B(e(u)),i(()=>e(u).description)??""}`)},[()=>(B(e(u)),i(()=>e(u).components.join(", ")))]),v(Je,it)};j(bt,Je=>{e(H),e(y),i(()=>!e(H)[e(y).id])&&Je(pe)})}s(tt);var Oe=a(tt,2);{var ht=Je=>{const it=Ke(()=>(B(e(u)),i(()=>ne(e(u)))));var mt=lt(),Et=Ue(mt);{var Pt=$t=>{var At=$s(),Dt=Ue(At),Bt=l(Dt),Ft=a(Bt,2);M(()=>{e(y),St(()=>{e(it)})}),nt(Ft,5,()=>e(it),vt,(ut,rt)=>{const pt=Ke(()=>(e(rt),i(()=>ve(e(rt)))));var ft=_s(),Ht=l(ft);s(ft);var st={};M(()=>{k(Ht,`Level ${e(rt)??""} (${B(e(pt)),i(()=>e(pt).available)??""}/${B(e(pt)),i(()=>e(pt).total)??""} slots)`),st!==(st=e(rt))&&(ft.value=(ft.__value=e(rt))??"")}),v(ut,ft)}),s(Ft);var Zt=a(Ft,2);{var Ut=ut=>{const rt=Ke(()=>(e(y),B(e(u)),i(()=>E(e(y),e(u)))));var pt=ys(),ft=l(pt);s(pt),M(()=>k(ft,`Damage: ${e(rt)??""}`)),v(ut,pt)};j(Zt,ut=>{e(y),B(e(u)),i(()=>e(y).castAtLevel&&e(y).castAtLevel>e(u).level)&&ut(Ut)})}s(Dt);var zt=a(Dt,2);{var ea=ut=>{var rt=xs(),pt=l(rt),ft=l(pt);$e(ft);var Ht=a(ft,2);{var st=ct=>{const ta=Ke(()=>(e(y),B(e(u)),i(()=>E(e(y),e(u)))));var aa=ks(),Fa=l(aa);s(aa),M(()=>k(Fa,`(+1d8, total: ${e(ta)??""})`)),v(ct,aa)};j(Ht,ct=>{e(y),i(()=>e(y).targetIsFiendOrUndead)&&ct(st)})}s(pt),s(rt),da(ft,()=>e(y).targetIsFiendOrUndead,ct=>(e(y).targetIsFiendOrUndead=ct,St(()=>(e(b),t(),d())))),v(ut,rt)};j(zt,ut=>{B(e(u)),i(()=>e(u).description.includes("Fiend or an Undead"))&&ut(ea)})}M(()=>{Ze(Bt,"for",`castLevel-${e(y),i(()=>e(y).id)??""}`),Ze(Ft,"id",`castLevel-${e(y),i(()=>e(y).id)??""}`)}),ja(Ft,()=>e(y).castAtLevel,ut=>(e(y).castAtLevel=ut,St(()=>(e(b),t(),d())))),v($t,At)},Yt=$t=>{var At=Cs();v($t,At)};j(Et,$t=>{B(e(it)),i(()=>e(it).length>0)?$t(Pt):$t(Yt,!1)})}v(Je,mt)};j(Oe,Je=>{B(e(u)),i(()=>e(u).higherLevelSlot&&e(u).level>0)&&Je(ht)})}M(()=>{Ze(Pe,"aria-label",(e(H),e(y),i(()=>e(H)[e(y).id]?"Expand":"Collapse"))),k(et,(e(H),e(y),i(()=>e(H)[e(y).id]?"â–¼":"â–²")))}),D("click",at,()=>W(e(y).id)),D("keydown",at,Je=>Je.key==="Enter"&&W(e(y).id)),v(Ee,Xe)},we=Ee=>{var Xe=Ls();v(Ee,Xe)};j(z,Ee=>{e(u)?Ee(Fe):Ee(we,!1)})}v(m,A)};j(L,m=>{e(ce),i(()=>e(ce).length===0)?m(q):m(n,!1)})}v(F,c)};j(be,F=>{e(y),i(()=>e(y).spellRef)&&F(ge)})}var De=a(be,2);{var Ge=F=>{var c=js(),L=a(l(c),2);Tt(L),s(c),Le(L,()=>e(y).notes,q=>(e(y).notes=q,St(()=>(e(b),t(),d())))),v(F,c)};j(De,F=>{e(y),i(()=>!e(y).spellRef)&&F(Ge)})}var We=a(De,2),xe=l(We);{var ae=F=>{var c=ws();D("click",c,()=>fe(e(y))),v(F,c)};j(xe,F=>{e(y),i(()=>e(y).bonus!==0||!e(y).spellRef)&&F(ae)})}var ke=a(xe,2);{var Me=F=>{const c=Ke(()=>(e(y),i(()=>re(e(y).spellRef))));var L=Ds(),q=l(L);{var n=u=>{var A=gt("Roll Healing");v(u,A)},m=u=>{var A=gt("Roll Damage");v(u,A)};j(q,u=>{B(e(c)),i(()=>e(c)&&ue(e(c)))?u(n):u(m,!1)})}s(L),D("click",L,()=>G(e(y))),v(F,L)},Se=F=>{var c=Fs();D("click",c,()=>G(e(y))),v(F,c)};j(ke,F=>{e(y),e(Q),i(()=>e(y).spellRef&&e(Q))?F(Me):F(Se,!1)})}s(We),s(Ne),Le(qe,()=>e(y).name,F=>(e(y).name=F,St(()=>(e(b),t(),d())))),Le(Ce,()=>e(y).bonus,F=>(e(y).bonus=F,St(()=>(e(b),t(),d())))),Le(je,()=>e(y).damage,F=>(e(y).damage=F,St(()=>(e(b),t(),d())))),Le(S,()=>e(y).damageType,F=>(e(y).damageType=F,St(()=>(e(b),t(),d())))),v(de,Ne)});var Ae=a(te,2);{var _e=de=>{var y=Rs();v(de,y)},Te=de=>{var y=lt(),Ie=Ue(y);{var Ne=Be=>{var qe=Is();v(Be,qe)};j(Ie,Be=>{e(b),i(()=>e(b).length===0)&&Be(Ne)},!0)}v(de,y)};j(Ae,de=>{t(),i(()=>t().attacks.length===0)?de(_e):de(Te,!1)})}s(U),D("click",X,oe),v(f,N)};j(_,f=>{$(),i(()=>!$().attacks)&&f(R)})}s(ee),M(()=>{Re=ot(ee,1,"attacks svelte-14o91c5",null,Re,{hidden:!e(O)}),Ze(V,"aria-label",($(),i(()=>$().attacks?"Expand":"Collapse"))),k(le,($(),i(()=>$().attacks?"â–¼":"â–²")))}),D("click",V,ie),v(r,ee),xt(),T()}var Bs=g('<p class="no-features svelte-1kpvv0n">Select a class to see available features</p>'),Us=g('<p class="no-features svelte-1kpvv0n">No class features available at this level</p>'),Hs=g('<input type="checkbox" class="slot-checkbox svelte-1kpvv0n"/>'),Ns=g('<div class="spell-slots svelte-1kpvv0n"><label class="svelte-1kpvv0n"> </label> <div class="slots-tracker svelte-1kpvv0n"></div></div>'),Ts=g('<div class="all-spell-slots"></div>'),Gs=g('<div class="feature-box spellcasting svelte-1kpvv0n"><h3 class="svelte-1kpvv0n"> </h3> <div class="spell-stats svelte-1kpvv0n"><div class="spell-stat svelte-1kpvv0n"><label class="svelte-1kpvv0n">Spell Save DC</label> <div class="spell-value svelte-1kpvv0n"> </div></div> <div class="spell-stat svelte-1kpvv0n"><label class="svelte-1kpvv0n">Prepared Spells</label> <div class="spell-value svelte-1kpvv0n"> </div></div></div> <!> <div class="prepared-spells svelte-1kpvv0n"><label class="svelte-1kpvv0n">Prepared Spells</label> <textarea placeholder="List your prepared spells..." class="svelte-1kpvv0n"></textarea></div></div>'),Os=g('<p class="unlimited svelte-1kpvv0n">Unlimited Uses</p>'),qs=g('<p class="no-uses svelte-1kpvv0n">No uses remaining</p>'),zs=g('<div class="uses-with-button svelte-1kpvv0n"><button class="btn btn-primary use-enabled"> </button> <div class="uses-info svelte-1kpvv0n"><span class="uses-remaining svelte-1kpvv0n"> </span> <span class="reset-info svelte-1kpvv0n"> </span></div> <!></div>'),Ws=g('<div class="uses-tracker svelte-1kpvv0n"><!></div>'),Vs=g('<div class="pool-tracker svelte-1kpvv0n"><input type="number" min="0" class="pool-input svelte-1kpvv0n"/> <span> </span> <button class="btn-small svelte-1kpvv0n"> </button></div>'),Js=g('<p class="no-uses svelte-1kpvv0n">No Channel Divinity uses remaining</p>'),Ks=g('<div class="channel-divinity-option svelte-1kpvv0n"><button class="btn btn-primary use-enabled svelte-1kpvv0n">Use Channel Divinity</button> <div class="uses-info svelte-1kpvv0n"><span class="reset-info svelte-1kpvv0n"> </span></div> <!></div>'),Qs=g('<div class="feature-box svelte-1kpvv0n"><h3 class="svelte-1kpvv0n"><!> </h3> <p class="feature-description svelte-1kpvv0n"> </p> <!></div>'),Xs=g('<div class="features-grid svelte-1kpvv0n"><!> <!></div>'),Ys=g('<section><div class="header svelte-1kpvv0n"><h2 class="svelte-1kpvv0n">Class Features</h2> <button class="collapse-btn svelte-1kpvv0n"> </button></div> <!></section>');function Zs(r,p){kt(p,!1);const t=()=>He(K,"$character",w),d=()=>He(Qt,"$abilityModifiers",w),$=()=>He(wt,"$searchFilter",w),x=()=>He(dt,"$collapsedStates",w),[w,T]=Ct(),b=I(),O=I(),se=I(),H=I(),W=I(),ue=I(),oe=I();let he=I(0),fe=I(0);function G(_,R){K.update(f=>(f.classFeatures.features[_]=R,f))}function ie(){K.update(_=>(_.classFeatures.spellSlotsByLevel||(_.classFeatures.spellSlotsByLevel={}),e(H).forEach(({level:R,slots:f})=>{_.classFeatures.spellSlotsByLevel[R]||(_.classFeatures.spellSlotsByLevel[R]=Array(f).fill(!1))}),_))}function ce(_){if(typeof _.maxUses=="function"){if((_.name==="Divine Sense"||_.name==="War Priest")&&e(b)?.spellcastingAbility){const R=d()[e(b).spellcastingAbility];return _.maxUses(t().level,R)}return _.maxUses(t().level)}return _.maxUses||0}function Q(_){return typeof _.maxPool=="function"?_.maxPool(t().level):_.maxPool||0}function re(_){return typeof _.description=="function"?_.description(t().level):_.description}function Z(){const _="ChannelDivinity";K.update(R=>{const f=R.classFeatures.features[_];return typeof f=="number"&&f>0&&(R.classFeatures.features[_]=f-1),R})}function E(){dt.update(_=>({..._,classFeatures:!_.classFeatures}))}ze(()=>(t(),_t),()=>{o(b,t().class?_t(t().class):null)}),ze(()=>(t(),Ot),()=>{o(O,t().class?Ot(t().class,t().level,t().subclass):[])}),ze(()=>(t(),fa),()=>{o(se,t().class?fa(t().class,t().level):0)}),ze(()=>(e(b),t()),()=>{o(H,(()=>{if(!e(b)?.spellcaster)return[];const _=t().level,R=[];return _>=1&&R.push({level:1,slots:Math.min(4,2+Math.floor(_/3))}),_>=3&&R.push({level:2,slots:Math.min(3,2+Math.floor((_-3)/4))}),_>=5&&R.push({level:3,slots:Math.min(3,2+Math.floor((_-5)/5))}),_>=7&&R.push({level:4,slots:Math.min(3,1+Math.floor((_-7)/6))}),_>=9&&R.push({level:5,slots:Math.min(2,1+Math.floor((_-9)/8))}),_>=11&&R.push({level:6,slots:1}),_>=13&&R.push({level:7,slots:1}),_>=15&&R.push({level:8,slots:1}),_>=17&&R.push({level:9,slots:1}),R})())}),ze(()=>(e(b),d(),t(),ba),()=>{if(e(b)?.spellcaster&&e(b).spellcastingAbility){const _=d()[e(b).spellcastingAbility];o(he,za(t().class,_,t().proficiencyBonus)||0),o(fe,ba(t().class,t().level,_))}}),ze(()=>(t(),e(b),e(H)),()=>{t().class&&e(b)?.spellcaster&&e(H).length>0&&ie()}),ze(()=>t(),()=>{o(W,(()=>{const R=t().classFeatures.features["ChannelDivinity"];return typeof R=="number"?R:0})())}),ze(()=>(e(O),$()),()=>{o(ue,e(O).filter(_=>{if(!$())return!0;const R=$().toLowerCase();return _.name.toLowerCase().includes(R)||re(_).toLowerCase().includes(R)}))}),ze(()=>($(),t(),e(ue)),()=>{o(oe,!$()||t().class||"class features".includes($().toLowerCase())||"spellcasting".includes($().toLowerCase())||e(ue).length>0)}),Lt(),yt();var ne=Ys();let ve;var ee=l(ne),Re=a(l(ee),2),C=l(Re,!0);s(Re),s(ee);var V=a(ee,2);{var le=_=>{var R=lt(),f=Ue(R);{var N=U=>{var te=Bs();v(U,te)},X=U=>{var te=lt(),Ae=Ue(te);{var _e=de=>{var y=Us();v(de,y)},Te=de=>{var y=Xs(),Ie=l(y);{var Ne=qe=>{var h=Gs(),J=l(h),Y=l(J);s(J);var P=a(J,2),Ce=l(P),ye=a(l(Ce),2),je=l(ye,!0);s(ye),s(Ce);var me=a(Ce,2),S=a(l(me),2),be=l(S,!0);s(S),s(me),s(P);var ge=a(P,2);{var De=xe=>{var ae=Ts();nt(ae,5,()=>e(H),vt,(ke,Me)=>{let Se=()=>e(Me).level,F=()=>e(Me).slots;const c=Ke(()=>(t(),Se(),F(),i(()=>t().classFeatures.spellSlotsByLevel?.[Se()]||Array(F()).fill(!1))));var L=Ns(),q=l(L),n=l(q);s(q);var m=a(q,2);nt(m,5,()=>(F(),i(()=>Array(F()))),vt,(u,A,z)=>{var Fe=Hs();$e(Fe),M(()=>Ba(Fe,(B(e(c)),i(()=>e(c)[z]||!1)))),D("change",Fe,we=>{K.update(Ee=>(Ee.classFeatures.spellSlotsByLevel||(Ee.classFeatures.spellSlotsByLevel={}),Ee.classFeatures.spellSlotsByLevel[Se()]||(Ee.classFeatures.spellSlotsByLevel[Se()]=Array(F()).fill(!1)),Ee.classFeatures.spellSlotsByLevel[Se()][z]=we.currentTarget.checked,Ee))}),v(u,Fe)}),s(m),s(L),M(()=>k(n,`${Se()===1?"1st":Se()===2?"2nd":Se()===3?"3rd":`${Se()}th`} Level Spell Slots`)),v(ke,L)}),s(ae),v(xe,ae)};j(ge,xe=>{e(H),i(()=>e(H).length>0)&&xe(De)})}var Ge=a(ge,2),We=a(l(Ge),2);Tt(We),s(Ge),s(h),M(xe=>{k(Y,`Spellcasting (${xe??""})`),k(je,e(he)),k(be,e(fe))},[()=>(e(b),i(()=>e(b).spellcastingAbility?.toUpperCase()))]),Le(We,()=>t().classFeatures.preparedSpells,xe=>Qe(K,i(t).classFeatures.preparedSpells=xe,i(t))),v(qe,h)};j(Ie,qe=>{e(b),i(()=>e(b)?.spellcaster)&&qe(Ne)})}var Be=a(Ie,2);nt(Be,1,()=>e(ue),vt,(qe,h)=>{const J=Ke(()=>(e(h),i(()=>e(h).name.replace(/\s+/g,"")))),Y=Ke(()=>(t(),B(e(J)),i(()=>t().classFeatures.features[e(J)]))),P=Ke(()=>(B(e(Y)),i(()=>Array.isArray(e(Y))))),Ce=Ke(()=>typeof e(Y)=="number");var ye=Qs(),je=l(ye),me=l(je);{var S=ae=>{var ke=gt("Channel Divinity:");v(ae,ke)};j(me,ae=>{e(h),i(()=>e(h).type==="channelDivinity")&&ae(S)})}var be=a(me);s(je);var ge=a(je,2),De=l(ge,!0);s(ge);var Ge=a(ge,2);{var We=ae=>{const ke=Ke(()=>(e(h),i(()=>ce(e(h))))),Me=Ke(()=>(B(e(P)),B(e(ke)),B(e(Y)),i(()=>e(P)?e(Y).filter(n=>!n).length:e(ke))));var Se=Ws(),F=l(Se);{var c=q=>{var n=Os();v(q,n)},L=q=>{var n=zs(),m=l(n),u=l(m);s(m);var A=a(m,2),z=l(A),Fe=l(z);s(z);var we=a(z,2),Ee=l(we);s(we),s(A);var Xe=a(A,2);{var Ye=Ve=>{var tt=qs();v(Ve,tt)};j(Xe,Ve=>{e(Me)<=0&&Ve(Ye)})}s(n),M(()=>{m.disabled=e(Me)<=0,k(u,`Use ${e(h),i(()=>e(h).name)??""}`),k(Fe,`${e(Me)??""} / ${e(ke)??""} uses`),k(Ee,`Resets on ${e(h),i(()=>e(h).resetOn==="short"?"Short Rest":"Long Rest")??""}`)}),D("click",m,()=>{K.update(Ve=>{Ve.classFeatures.features[e(J)]||(Ve.classFeatures.features[e(J)]=Array(e(ke)).fill(!1));const tt=Ve.classFeatures.features[e(J)],at=tt.findIndex(Pe=>!Pe);return at!==-1&&(tt[at]=!0),Ve})}),v(q,n)};j(F,q=>{e(ke)===1/0?q(c):q(L,!1)})}s(Se),v(ae,Se)},xe=ae=>{var ke=lt(),Me=Ue(ke);{var Se=c=>{const L=Ke(()=>(e(h),i(()=>Q(e(h)))));var q=Vs(),n=l(q);$e(n);var m=a(n,2),u=l(m);s(m);var A=a(m,2),z=l(A,!0);s(A),s(q),M(()=>{La(n,e(Ce)&&e(Y)!==void 0?e(Y):e(L)),Ze(n,"max",e(L)),k(u,`/ ${e(L)??""}`),k(z,(e(h),i(()=>e(h).resetOn==="short"?"Short Rest":"Long Rest")))}),D("input",n,Fe=>{K.update(we=>(we.classFeatures.features[e(J)]=parseInt(Fe.currentTarget.value)||0,we))}),D("click",A,()=>G(e(J),e(L))),v(c,q)},F=c=>{var L=lt(),q=Ue(L);{var n=m=>{var u=Ks(),A=l(u),z=a(A,2),Fe=l(z),we=l(Fe);s(Fe),s(z);var Ee=a(z,2);{var Xe=Ye=>{var Ve=Js();v(Ye,Ve)};j(Ee,Ye=>{e(W)<=0&&Ye(Xe)})}s(u),M(()=>{A.disabled=e(W)<=0,k(we,`Resets on ${e(h),i(()=>e(h).resetOn==="short"?"Short Rest":"Long Rest")??""}`)}),D("click",A,Z),v(m,u)};j(q,m=>{e(h),i(()=>e(h).type==="channelDivinity")&&m(n)},!0)}v(c,L)};j(Me,c=>{e(h),i(()=>e(h).type==="pool")?c(Se):c(F,!1)},!0)}v(ae,ke)};j(Ge,ae=>{e(h),i(()=>e(h).type==="uses")?ae(We):ae(xe,!1)})}s(ye),M(ae=>{k(be,` ${e(h),i(()=>e(h).name)??""}`),k(De,ae)},[()=>(e(h),i(()=>re(e(h))))]),v(qe,ye)}),s(y),v(de,y)};j(Ae,de=>{e(O),i(()=>e(O).length===0)?de(_e):de(Te,!1)},!0)}v(U,te)};j(f,U=>{t(),i(()=>!t().class)?U(N):U(X,!1)})}v(_,R)};j(V,_=>{x(),i(()=>!x().classFeatures)&&_(le)})}s(ne),M(()=>{ve=ot(ne,1,"class-features svelte-1kpvv0n",null,ve,{hidden:!e(oe)}),Ze(Re,"aria-label",(x(),i(()=>x().classFeatures?"Expand":"Collapse"))),k(C,(x(),i(()=>x().classFeatures?"â–¼":"â–²")))}),D("click",Re,E),v(r,ne),xt(),T()}var el=g('<textarea placeholder="Enter features, traits, and special abilities..." class="svelte-wttn0l"></textarea> <h3 class="svelte-wttn0l">Equipment</h3> <textarea placeholder="List your equipment and inventory..." class="svelte-wttn0l"></textarea> <h3 class="svelte-wttn0l">Notes</h3> <textarea placeholder="Additional notes..." class="svelte-wttn0l"></textarea>',1),tl=g('<section><div class="header svelte-wttn0l"><h2 class="svelte-wttn0l">Features & Traits</h2> <button class="collapse-btn svelte-wttn0l"> </button></div> <!></section>');function al(r,p){kt(p,!1);const t=()=>He(wt,"$searchFilter",x),d=()=>He(K,"$character",x),$=()=>He(dt,"$collapsedStates",x),[x,w]=Ct(),T=I();function b(){dt.update(fe=>({...fe,notes:!fe.notes}))}ze(()=>(t(),d()),()=>{o(T,!t()||"features".includes(t().toLowerCase())||"traits".includes(t().toLowerCase())||"equipment".includes(t().toLowerCase())||"notes".includes(t().toLowerCase())||d().features.toLowerCase().includes(t().toLowerCase())||d().equipment.toLowerCase().includes(t().toLowerCase())||d().notes.toLowerCase().includes(t().toLowerCase()))}),Lt(),yt();var O=tl();let se;var H=l(O),W=a(l(H),2),ue=l(W,!0);s(W),s(H);var oe=a(H,2);{var he=fe=>{var G=el(),ie=Ue(G);Tt(ie);var ce=a(ie,4);Tt(ce);var Q=a(ce,4);Tt(Q),Le(ie,()=>d().features,re=>Qe(K,i(d).features=re,i(d))),Le(ce,()=>d().equipment,re=>Qe(K,i(d).equipment=re,i(d))),Le(Q,()=>d().notes,re=>Qe(K,i(d).notes=re,i(d))),v(fe,G)};j(oe,fe=>{$(),i(()=>!$().notes)&&fe(he)})}s(O),M(()=>{se=ot(O,1,"notes svelte-wttn0l",null,se,{hidden:!e(T)}),Ze(W,"aria-label",($(),i(()=>$().notes?"Expand":"Collapse"))),k(ue,($(),i(()=>$().notes?"â–¼":"â–²")))}),D("click",W,b),v(r,O),xt(),w()}var sl=g('<div class="color-picker-section svelte-1r90jgp"><h3 class="svelte-1r90jgp">Dice Colors</h3> <div class="color-inputs svelte-1r90jgp"><div class="color-input-group svelte-1r90jgp"><label for="dice-color" class="svelte-1r90jgp">Dice Color</label> <input type="color" id="dice-color" class="svelte-1r90jgp"/></div> <div class="color-input-group svelte-1r90jgp"><label for="label-color" class="svelte-1r90jgp">Label Color</label> <input type="color" id="label-color" class="svelte-1r90jgp"/></div> <div class="color-input-group svelte-1r90jgp"><label for="desk-color" class="svelte-1r90jgp">Background Color</label> <input type="color" id="desk-color" class="svelte-1r90jgp"/></div></div></div>'),ll=g('<div class="loading svelte-1r90jgp"><p class="svelte-1r90jgp">Loading 3D dice...</p></div>'),il=g('<div class="custom-dice-selector svelte-1r90jgp"><h3 class="svelte-1r90jgp">Choose Dice to Roll</h3> <div class="dice-inputs svelte-1r90jgp"><div class="dice-input-group svelte-1r90jgp"><label for="d4" class="svelte-1r90jgp">d4</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d4" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d6" class="svelte-1r90jgp">d6</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d6" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d8" class="svelte-1r90jgp">d8</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d8" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d10" class="svelte-1r90jgp">d10</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d10" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d12" class="svelte-1r90jgp">d12</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d12" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d20" class="svelte-1r90jgp">d20</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d20" min="0" max="10"/></div></div> <div class="dice-controls svelte-1r90jgp"><button class="btn btn-primary use-enabled svelte-1r90jgp"> </button> <button class="btn btn-secondary use-enabled svelte-1r90jgp">Reset</button></div></div>'),rl=g('<span class="crit-badge svelte-1r90jgp">CRITICAL!</span>'),nl=g('<p class="svelte-1r90jgp"> </p>'),ol=g('<p class="modifier-text svelte-1r90jgp"> </p>'),cl=g('<button class="btn btn-follow-up svelte-1r90jgp"> </button>'),vl=g('<button class="btn btn-guided-strike svelte-1r90jgp">âš¡ Use Guided Strike (+10)</button>'),dl=g('<div class="follow-up-actions svelte-1r90jgp"><!> <!></div>'),ul=g('<div class="result-header svelte-1r90jgp"><h3 class="svelte-1r90jgp"> </h3> <!></div> <div class="result-total svelte-1r90jgp"> </div> <div class="result-details svelte-1r90jgp"><!> <!></div> <!>',1),pl=g('<div role="button" tabindex="-1"><div class="modal-content svelte-1r90jgp" role="dialog" tabindex="0"><div class="modal-header svelte-1r90jgp"><h2 class="svelte-1r90jgp">Dice Roller</h2> <div class="header-buttons svelte-1r90jgp"><button class="color-btn svelte-1r90jgp" title="Customize dice colors">ðŸŽ¨</button> <button class="close-btn svelte-1r90jgp">Ã—</button></div></div> <!> <!> <div class="dice-main-area svelte-1r90jgp"><div class="dice-container svelte-1r90jgp"></div> <!></div> <div><!></div></div></div>');function fl(r,p){kt(p,!1);const t=()=>He(K,"$character",d),[d,$]=Ct(),x=I(),w=I(),T=I(),b=Mt();let O=Rt(p,"notation",12,""),se=Rt(p,"visible",8,!1),H=Rt(p,"damageNotation",12,""),W=Rt(p,"attackName",12,""),ue=null,oe=I(void 0),he=I(!1),fe=I(""),G=I(null);function ie(){return e(G)?.resultTotal??null}let ce=I(0),Q=I(0),re=I(0),Z=I(0),E=I(0),ne=I(0),ve=I(0),ee=I([]),Re=I(!1),C=I("other"),V=I(!1),le=I("#051e0a"),_=I("#ffffff"),R=I("#3a2004"),f=I(!1);function N(c){return c.length===9&&c.startsWith("#")?c.substring(0,7):c}function X(c,L="ff"){return c.length===7&&c.startsWith("#")?c+L:c}function U(){if(window.DICE&&e(oe))try{ue&&e(oe)&&Ca(oe,e(oe).innerHTML="");const c=e(oe).clientWidth||500,L=e(oe).clientHeight||300;ue=new window.DICE.dice_box(e(oe),{w:c,h:L}),o(he,!0)}catch(c){console.error("Error initializing dice box:",c)}}qt(()=>{const c=n=>new Promise((m,u)=>{if(document.querySelector(`script[src="${n}"]`)){console.log(`Script already loaded: ${n}`),m(null);return}const z=document.createElement("script");z.src=n,z.onload=()=>{console.log(`Loaded: ${n}`),m(null)},z.onerror=()=>{console.error(`Failed to load: ${n}`),u(new Error(`Failed to load ${n}`))},document.head.appendChild(z)});setTimeout(()=>{c(`${Nt}/libs/three.min.js`).then(()=>c(`${Nt}/libs/cannon.min.js`)).then(()=>c(`${Nt}/libs/teal.js`)).then(()=>c(`${Nt}/dice.js`)).then(()=>{if(console.log("All scripts loaded, initializing dice box..."),console.log("DICE available:",!!window.DICE),console.log("Container available:",!!e(oe)),window.DICE){const n=window.DICE.getColors();o(le,N(n.dice_color)),o(_,N(n.label_color)),o(R,N(n.desk_color))}U()}).catch(n=>{console.error("Failed to load dice libraries:",n)})},100);const L=()=>{e(he)&&(console.log("Window resized, reinitializing dice box..."),U())},q=n=>{se()&&n.key==="Escape"&&Be()};return window.addEventListener("resize",L),window.addEventListener("keydown",q),()=>{window.removeEventListener("resize",L),window.removeEventListener("keydown",q)}});function te(c,L="other"){if(!ue||!e(he))return;console.log("Rolling dice:",c,"type:",L),o(C,L),o(V,!1),ue.diceToRoll=c;const q=m=>(console.log("Before roll:",m),null),n=m=>{if(console.log("After roll:",m),console.log("Result:",m.resultTotal),o(G,m),L==="attack"||L==="check"||L==="save"){const u=m.results?.filter(A=>A.sides===20)||[];if(u.length>0){const A=u[0].value;o(Re,A===20)}}if(o(ee,[]),L==="attack"&&H())if(e(Re)){const u=Te(H());e(ee).push({label:`Roll Critical Damage (${u})`,notation:u})}else e(ee).push({label:`Roll Damage (${H()})`,notation:H()})};ue.start_throw(q,n)}function Ae(){const c=[];e(ce)>0&&c.push(`${e(ce)}d4`),e(Q)>0&&c.push(`${e(Q)}d6`),e(re)>0&&c.push(`${e(re)}d8`),e(Z)>0&&c.push(`${e(Z)}d10`),e(E)>0&&c.push(`${e(E)}d12`),e(ne)>0&&c.push(`${e(ne)}d20`);let L=c.join("+")||"1d20";return e(ve)!==0&&(L+=e(ve)>=0?`+${e(ve)}`:`${e(ve)}`),L}function _e(){const c=Ae();te(c)}function Te(c){return c.replace(/(\d+)d(\d+)/g,(L,q,n)=>`${parseInt(q)*2}d${n}`)}function de(){o(ce,0),o(Q,0),o(re,0),o(Z,0),o(E,0),o(ne,0),o(ve,0),o(G,null),o(ee,[]),o(Re,!1),o(C,"other"),o(V,!1)}function y(){window.DICE&&(window.DICE.setColors({dice_color:X(e(le),"ff"),label_color:X(e(_),"ff"),desk_color:e(R)}),ue&&(ue.updateDeskColor(e(R)),ue.updateDiceColors()))}function Ie(){o(f,!e(f))}function Ne(){!e(G)||e(w)<=0||e(V)||(o(G,{...e(G),resultTotal:e(G).resultTotal+10,resultString:e(G).resultString+" + 10 (Guided Strike)"}),K.update(c=>{const L="ChannelDivinity",q=c.classFeatures.features[L];return typeof q=="number"&&q>0&&(c.classFeatures.features[L]=q-1),c}),o(V,!0))}function Be(){b("close"),O(""),H(""),W(""),o(fe,""),o(G,null),o(V,!1),de()}ze(()=>(t(),Ot),()=>{o(x,t().class?Ot(t().class,t().level,t().subclass).some(L=>L.name==="Guided Strike"):!1)}),ze(()=>t(),()=>{o(w,(()=>{const L=t().classFeatures.features["ChannelDivinity"];return typeof L=="number"?L:0})())}),ze(()=>(e(ce),e(Q),e(re),e(Z),e(E),e(ne),e(ve)),()=>{o(T,(()=>{const c=[];e(ce)>0&&c.push(`${e(ce)}d4`),e(Q)>0&&c.push(`${e(Q)}d6`),e(re)>0&&c.push(`${e(re)}d8`),e(Z)>0&&c.push(`${e(Z)}d10`),e(E)>0&&c.push(`${e(E)}d12`),e(ne)>0&&c.push(`${e(ne)}d20`);let L=c.join("+")||"1d20";return e(ve)!==0&&(L+=e(ve)>=0?`+${e(ve)}`:`${e(ve)}`),L})())}),ze(()=>(B(O()),e(he),B(se()),e(fe),B(H()),B(W())),()=>{if(O()&&e(he)&&se()&&O()!==e(fe)){o(fe,O()),o(G,null),o(ee,[]),o(Re,!1),o(V,!1);const c=O().includes("1d20")?"attack":"other";console.log("Auto-roll triggered. notation:",O(),"damageNotation:",H(),"attackName:",W()),setTimeout(()=>te(O(),c),200)}}),Lt();var qe={getLastRollTotal:ie};yt();var h=pl();let J;var Y=l(h),P=l(Y),Ce=a(l(P),2),ye=l(Ce),je=a(ye,2);s(Ce),s(P);var me=a(P,2);{var S=c=>{var L=sl(),q=a(l(L),2),n=l(q),m=a(l(n),2);$e(m),s(n);var u=a(n,2),A=a(l(u),2);$e(A),s(u);var z=a(u,2),Fe=a(l(z),2);$e(Fe),s(z),s(q),s(L),Le(m,()=>e(le),we=>o(le,we)),D("change",m,y),Le(A,()=>e(_),we=>o(_,we)),D("change",A,y),Le(Fe,()=>e(R),we=>o(R,we)),D("change",Fe,y),v(c,L)};j(me,c=>{e(f)&&c(S)})}var be=a(me,2);{var ge=c=>{var L=ll();v(c,L)};j(be,c=>{e(he)||c(ge)})}var De=a(be,2),Ge=l(De);na(Ge,c=>o(oe,c),()=>e(oe));var We=a(Ge,2);{var xe=c=>{var L=il(),q=a(l(L),2),n=l(q),m=a(l(n),2);$e(m),s(n);var u=a(n,2),A=a(l(u),2);$e(A),s(u);var z=a(u,2),Fe=a(l(z),2);$e(Fe),s(z);var we=a(z,2),Ee=a(l(we),2);$e(Ee),s(we);var Xe=a(we,2),Ye=a(l(Xe),2);$e(Ye),s(Xe);var Ve=a(Xe,2),tt=a(l(Ve),2);$e(tt),s(Ve),s(q);var at=a(q,2),Pe=l(at),et=l(Pe);s(Pe);var bt=a(Pe,2);s(at),s(L),M(()=>{Pe.disabled=!e(he),k(et,`Roll ${e(T)??""}`)}),Le(m,()=>e(ce),pe=>o(ce,pe)),Le(A,()=>e(Q),pe=>o(Q,pe)),Le(Fe,()=>e(re),pe=>o(re,pe)),Le(Ee,()=>e(Z),pe=>o(Z,pe)),Le(Ye,()=>e(E),pe=>o(E,pe)),Le(tt,()=>e(ne),pe=>o(ne,pe)),D("click",Pe,_e),D("click",bt,de),v(c,L)};j(We,c=>{O()||c(xe)})}s(De);var ae=a(De,2);let ke;var Me=l(ae);{var Se=c=>{var L=ul(),q=Ue(L),n=l(q),m=l(n,!0);s(n);var u=a(n,2);{var A=Pe=>{var et=rl();v(Pe,et)};j(u,Pe=>{e(Re)&&Pe(A)})}s(q);var z=a(q,2),Fe=l(z,!0);s(z);var we=a(z,2),Ee=l(we);{var Xe=Pe=>{var et=nl(),bt=l(et,!0);s(et),M(()=>k(bt,(e(G),i(()=>e(G).resultString)))),v(Pe,et)};j(Ee,Pe=>{e(G),i(()=>e(G).resultString)&&Pe(Xe)})}var Ye=a(Ee,2);{var Ve=Pe=>{var et=ol(),bt=l(et);s(et),M(()=>k(bt,`Modifier: ${e(G),i(()=>e(G).constant>=0?"+":"")??""}${e(G),i(()=>e(G).constant)??""}`)),v(Pe,et)};j(Ye,Pe=>{e(G),i(()=>e(G).constant)&&Pe(Ve)})}s(we);var tt=a(we,2);{var at=Pe=>{var et=dl(),bt=l(et);nt(bt,1,()=>e(ee),vt,(ht,Je)=>{var it=cl(),mt=l(it,!0);s(it),M(()=>k(mt,(e(Je),i(()=>e(Je).label)))),D("click",it,()=>te(e(Je).notation,"damage")),v(ht,it)});var pe=a(bt,2);{var Oe=ht=>{var Je=vl();M(()=>{Je.disabled=e(w)<=0,Ze(Je,"title",e(w)<=0?"No Channel Divinity uses remaining":"Use Channel Divinity to add +10 to this attack roll")}),D("click",Je,Ne),v(ht,Je)};j(pe,ht=>{e(x)&&e(C)==="attack"&&!e(V)&&ht(Oe)})}s(et),v(Pe,et)};j(tt,Pe=>{e(ee),e(x),e(C),e(V),i(()=>e(ee).length>0||e(x)&&e(C)==="attack"&&!e(V))&&Pe(at)})}M(()=>{k(m,W()?`${W()} - Result`:"Result"),k(Fe,(e(G),i(()=>e(G).resultTotal)))}),v(c,L)};j(Me,c=>{e(G)&&c(Se)})}s(ae),s(Y),s(h),M(()=>{J=ot(h,1,"modal-overlay svelte-1r90jgp",null,J,{hidden:!se()}),ke=ot(ae,1,"roll-result svelte-1r90jgp",null,ke,{"has-result":e(G)})}),D("click",ye,Ie),D("click",je,Be),D("click",Y,ua(function(c){It.call(this,p,c)})),D("keydown",Y,function(c){It.call(this,p,c)}),D("click",h,Be),D("keydown",h,c=>c.key==="Escape"&&Be()),v(r,h),Oa(p,"getLastRollTotal",ie);var F=xt(qe);return $(),F}const Xt="https://api.github.com/gists";async function bl(r,p,t){if(!p)throw new Error("GitHub token is required");const d=JSON.stringify(r,null,2),$=`${r.name||"character"}_dnd.json`,x={description:t||`D&D Character: ${r.name}`,public:!1,files:{[$]:{content:d}}},w=await fetch(Xt,{method:"POST",headers:{Authorization:`token ${p}`,"Content-Type":"application/json"},body:JSON.stringify(x)});if(!w.ok)throw new Error(`Failed to create gist: ${w.statusText}`);return(await w.json()).id}async function gl(r,p,t){if(!p||!t)throw new Error("GitHub token and Gist ID are required");const d=JSON.stringify(r,null,2),x={files:{[`${r.name||"character"}_dnd.json`]:{content:d}}},w=await fetch(`${Xt}/${t}`,{method:"PATCH",headers:{Authorization:`token ${p}`,"Content-Type":"application/json"},body:JSON.stringify(x)});if(!w.ok)throw new Error(`Failed to update gist: ${w.statusText}`)}async function hl(r,p){if(!r)throw new Error("Gist ID is required");const t={"Content-Type":"application/json"};p&&(t.Authorization=`token ${p}`);const d=await fetch(`${Xt}/${r}`,{method:"GET",headers:t});if(!d.ok)throw new Error(`Failed to load gist: ${d.statusText}`);const $=await d.json(),x=Object.values($.files);if(x.length===0)throw new Error("No files found in gist");const T=x[0].content;try{const b=JSON.parse(T);return b.attacks&&Array.isArray(b.attacks)&&(b.attacks=b.attacks.map(O=>({...O,id:O.id||crypto.randomUUID()}))),b.classFeatures?(b.classFeatures.features||(b.classFeatures.features={}),b.classFeatures.spellSlots||(b.classFeatures.spellSlots=[]),b.classFeatures.preparedSpells===void 0&&(b.classFeatures.preparedSpells="")):b.classFeatures={features:{},spellSlots:[],preparedSpells:""},b}catch{throw new Error("Invalid character data in gist")}}function ha(r){typeof window<"u"&&localStorage.setItem("dnd_gist_config",JSON.stringify(r))}function ml(){if(typeof window<"u"){const r=localStorage.getItem("dnd_gist_config");if(r)return JSON.parse(r)}return{}}async function _l(r,p=30){if(!r)throw new Error("GitHub token is required to list gists");const t=await fetch(`${Xt}?per_page=${p}`,{method:"GET",headers:{Authorization:`token ${r}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Failed to list gists: ${t.statusText}`);return await t.json()}var yl=g('<div class="error-message svelte-1jb5ckg"> </div>'),kl=g('<div class="toggle-container svelte-1jb5ckg"><button type="button" class="toggle-btn svelte-1jb5ckg"> </button></div>'),xl=g('<div class="form-group svelte-1jb5ckg"><label for="gistId" class="svelte-1jb5ckg">Gist ID (leave empty to create new)</label> <input type="text" id="gistId" placeholder="Optional: existing Gist ID to update" class="svelte-1jb5ckg"/></div>'),$l=g('<div class="loading-message svelte-1jb5ckg">Loading your gists...</div>'),Cl=g('<button type="button"><div class="gist-item-header svelte-1jb5ckg"><span class="gist-description svelte-1jb5ckg"> </span> <span class="gist-visibility svelte-1jb5ckg"> </span></div> <div class="gist-item-meta svelte-1jb5ckg"><span class="gist-id svelte-1jb5ckg"> </span> <span class="gist-date svelte-1jb5ckg"> </span></div></button>'),Sl=g('<div class="form-group svelte-1jb5ckg"><div class="gist-list-label svelte-1jb5ckg">Select a Gist to Update (or leave unselected to create new)</div> <div class="gist-list svelte-1jb5ckg"></div></div>'),Ll=g('<div class="info-message svelte-1jb5ckg">No gists found. A new one will be created.</div>'),jl=g('<!> <div class="form-group svelte-1jb5ckg"><label for="description" class="svelte-1jb5ckg"> </label> <input type="text" id="description" placeholder="D&amp;D Character Sheet" class="svelte-1jb5ckg"/></div>',1),wl=g('<div class="form-group svelte-1jb5ckg"><label for="gistId" class="svelte-1jb5ckg">Gist ID *</label> <input type="text" id="gistId" placeholder="Enter Gist ID (for public or your private gists)" required class="svelte-1jb5ckg"/></div>'),Dl=g('<div class="loading-message svelte-1jb5ckg">Loading your gists...</div>'),Fl=g('<button type="button"><div class="gist-item-header svelte-1jb5ckg"><span class="gist-description svelte-1jb5ckg"> </span> <span class="gist-visibility svelte-1jb5ckg"> </span></div> <div class="gist-item-meta svelte-1jb5ckg"><span class="gist-id svelte-1jb5ckg"> </span> <span class="gist-date svelte-1jb5ckg"> </span></div></button>'),Al=g('<div class="form-group svelte-1jb5ckg"><div class="gist-list-label svelte-1jb5ckg">Select a Gist to Load</div> <div class="gist-list svelte-1jb5ckg"></div></div>'),Rl=g('<div class="info-message svelte-1jb5ckg">No gists found. Enter a Gist ID manually or create a new one in Save mode.</div>'),Il=g('<div class="modal-overlay svelte-1jb5ckg" role="button" tabindex="-1"><div class="modal-content svelte-1jb5ckg" role="dialog" tabindex="0"><div class="modal-header svelte-1jb5ckg"><h2 class="svelte-1jb5ckg"> </h2> <button class="close-btn svelte-1jb5ckg">Ã—</button></div> <div class="modal-body svelte-1jb5ckg"><!> <div class="form-group svelte-1jb5ckg"><label for="token" class="svelte-1jb5ckg"> <a href="https://github.com/settings/tokens" target="_blank" rel="noopener" class="svelte-1jb5ckg">Get token</a></label> <input type="password" id="token" placeholder="ghp_xxxxxxxxxxxxx" class="svelte-1jb5ckg"/></div> <!> <!> <div class="modal-actions svelte-1jb5ckg"><button class="btn btn-primary svelte-1jb5ckg"><!></button> <button class="btn btn-secondary svelte-1jb5ckg">Cancel</button></div></div></div></div>');function Ml(r,p){kt(p,!1);const t=()=>He(K,"$character",d),[d,$]=Ct(),x=Mt();let w=Rt(p,"mode",8,"save"),T=I(""),b=I(""),O=I(""),se=I(!1),H=I(""),W=I(!1),ue=I(!1),oe=I([]),he=I(null);const fe=ml();fe.token&&o(T,fe.token),fe.gistId&&o(b,fe.gistId),qt(async()=>{e(T)&&!e(W)&&await G()});async function G(){if(e(T)){o(ue,!0),o(H,"");try{o(oe,await _l(e(T))),e(b)&&o(he,e(oe).find(h=>h.id===e(b))||null)}catch(h){o(H,h.message||"Failed to load gists"),o(oe,[])}finally{o(ue,!1)}}}function ie(h){o(he,h),o(b,h.id)}function ce(){o(W,!e(W)),o(H,""),!e(W)&&e(T)&&G()}async function Q(){if(!e(T)){o(H,"GitHub token is required");return}const h=e(he)?.id||e(b);o(se,!0),o(H,"");try{if(h)await gl(t(),e(T),h),o(b,h),sa.add("Character updated in Gist successfully!","success");else{const J=await bl(t(),e(T),e(O));o(b,J),sa.add(`Character saved to Gist! ID: ${J}`,"success")}ha({token:e(T),gistId:e(b)}),x("close")}catch(J){o(H,J.message||"Failed to save to Gist")}finally{o(se,!1)}}async function re(){const h=e(he)?.id||e(b);if(!h){o(H,"Please select a gist or enter a Gist ID");return}o(se,!0),o(H,"");try{const J=await hl(h,e(T)||void 0);K.set(J),o(b,h),ha({token:e(T),gistId:e(b)}),sa.add("Character loaded from Gist successfully!","success"),x("close")}catch(J){o(H,J.message||"Failed to load from Gist")}finally{o(se,!1)}}function Z(){x("close")}yt();var E=Il(),ne=l(E),ve=l(ne),ee=l(ve),Re=l(ee,!0);s(ee);var C=a(ee,2);s(ve);var V=a(ve,2),le=l(V);{var _=h=>{var J=yl(),Y=l(J,!0);s(J),M(()=>k(Y,e(H))),v(h,J)};j(le,h=>{e(H)&&h(_)})}var R=a(le,2),f=l(R),N=l(f);Sa(),s(f);var X=a(f,2);$e(X),s(R);var U=a(R,2);{var te=h=>{var J=kl(),Y=l(J),P=l(Y,!0);s(Y),s(J),M(()=>{Y.disabled=e(se),k(P,e(W)?"ðŸ“‹ Show My Gists":"âœï¸ Enter Gist ID Manually")}),D("click",Y,ce),v(h,J)};j(U,h=>{(w()==="load"||w()==="save"&&e(T))&&h(te)})}var Ae=a(U,2);{var _e=h=>{var J=jl(),Y=Ue(J);{var P=be=>{var ge=xl(),De=a(l(ge),2);$e(De),s(ge),M(()=>De.disabled=e(se)),Le(De,()=>e(b),Ge=>o(b,Ge)),v(be,ge)},Ce=be=>{var ge=lt(),De=Ue(ge);{var Ge=xe=>{var ae=$l();v(xe,ae)},We=xe=>{var ae=lt(),ke=Ue(ae);{var Me=F=>{var c=Sl(),L=a(l(c),2);nt(L,5,()=>e(oe),vt,(q,n)=>{var m=Cl();let u;var A=l(m),z=l(A),Fe=l(z,!0);s(z);var we=a(z,2),Ee=l(we,!0);s(we),s(A);var Xe=a(A,2),Ye=l(Xe),Ve=l(Ye);s(Ye);var tt=a(Ye,2),at=l(tt);s(tt),s(Xe),s(m),M(Pe=>{u=ot(m,1,"gist-item svelte-1jb5ckg",null,u,{selected:e(he)?.id===e(n).id}),m.disabled=e(se),k(Fe,(e(n),i(()=>e(n).description||"Untitled"))),k(Ee,(e(n),i(()=>e(n).public?"ðŸŒ Public":"ðŸ”’ Private"))),k(Ve,`ID: ${e(n),i(()=>e(n).id)??""}`),k(at,`Updated: ${Pe??""}`)},[()=>(e(n),i(()=>new Date(e(n).updated_at).toLocaleDateString()))]),D("click",m,()=>ie(e(n))),v(q,m)}),s(L),s(c),v(F,c)},Se=F=>{var c=lt(),L=Ue(c);{var q=n=>{var m=Ll();v(n,m)};j(L,n=>{e(T)&&n(q)},!0)}v(F,c)};j(ke,F=>{e(oe),i(()=>e(oe).length>0)?F(Me):F(Se,!1)},!0)}v(xe,ae)};j(De,xe=>{e(ue)?xe(Ge):xe(We,!1)},!0)}v(be,ge)};j(Y,be=>{e(W)||!e(T)?be(P):be(Ce,!1)})}var ye=a(Y,2),je=l(ye),me=l(je);s(je);var S=a(je,2);$e(S),s(ye),M(()=>{k(me,`Description ${e(b)?"(optional)":""}`),S.disabled=e(se)}),Le(S,()=>e(O),be=>o(O,be)),v(h,J)},Te=h=>{var J=lt(),Y=Ue(J);{var P=ye=>{var je=wl(),me=a(l(je),2);$e(me),s(je),M(()=>me.disabled=e(se)),Le(me,()=>e(b),S=>o(b,S)),v(ye,je)},Ce=ye=>{var je=lt(),me=Ue(je);{var S=ge=>{var De=Dl();v(ge,De)},be=ge=>{var De=lt(),Ge=Ue(De);{var We=ae=>{var ke=Al(),Me=a(l(ke),2);nt(Me,5,()=>e(oe),vt,(Se,F)=>{var c=Fl();let L;var q=l(c),n=l(q),m=l(n,!0);s(n);var u=a(n,2),A=l(u,!0);s(u),s(q);var z=a(q,2),Fe=l(z),we=l(Fe);s(Fe);var Ee=a(Fe,2),Xe=l(Ee);s(Ee),s(z),s(c),M(Ye=>{L=ot(c,1,"gist-item svelte-1jb5ckg",null,L,{selected:e(he)?.id===e(F).id}),c.disabled=e(se),k(m,(e(F),i(()=>e(F).description||"Untitled"))),k(A,(e(F),i(()=>e(F).public?"ðŸŒ Public":"ðŸ”’ Private"))),k(we,`ID: ${e(F),i(()=>e(F).id)??""}`),k(Xe,`Updated: ${Ye??""}`)},[()=>(e(F),i(()=>new Date(e(F).updated_at).toLocaleDateString()))]),D("click",c,()=>ie(e(F))),v(Se,c)}),s(Me),s(ke),v(ae,ke)},xe=ae=>{var ke=lt(),Me=Ue(ke);{var Se=F=>{var c=Rl();v(F,c)};j(Me,F=>{e(T)&&F(Se)},!0)}v(ae,ke)};j(Ge,ae=>{e(oe),i(()=>e(oe).length>0)?ae(We):ae(xe,!1)},!0)}v(ge,De)};j(me,ge=>{e(ue)?ge(S):ge(be,!1)},!0)}v(ye,je)};j(Y,ye=>{e(W)||!e(T)?ye(P):ye(Ce,!1)})}v(h,J)};j(Ae,h=>{w()==="save"?h(_e):h(Te,!1)})}var de=a(Ae,2),y=l(de),Ie=l(y);{var Ne=h=>{var J=gt();M(()=>k(J,w()==="save"?"Saving...":"Loading...")),v(h,J)},Be=h=>{var J=gt();M(()=>k(J,w()==="save"?"Save":"Load")),v(h,J)};j(Ie,h=>{e(se)?h(Ne):h(Be,!1)})}s(y);var qe=a(y,2);s(de),s(V),s(ne),s(E),M(()=>{k(Re,w()==="save"?"Save to GitHub Gist":"Load from GitHub Gist"),k(N,`GitHub Token ${w()==="load"?"(optional for public gists)":"(required)"} `),X.disabled=e(se),y.disabled=e(se),qe.disabled=e(se)}),D("click",C,Z),Le(X,()=>e(T),h=>o(T,h)),D("blur",X,()=>{e(T)&&!e(W)&&G()}),D("click",y,function(...h){(w()==="save"?Q:re)?.apply(this,h)}),D("click",qe,Z),D("click",ne,ua(function(h){It.call(this,p,h)})),D("keydown",ne,function(h){It.call(this,p,h)}),D("click",E,Z),D("keydown",E,h=>h.key==="Escape"&&Z()),v(r,E),xt(),$()}var El=g('<div class="loading svelte-1ngjemu">Loading D&D data...</div>'),Pl=g("<option> </option>"),Bl=g('<select class="level-filter svelte-1ngjemu"><option>All Levels</option><option>Cantrip</option><!></select>'),Ul=g('<div class="no-results svelte-1ngjemu"> </div>'),Hl=g('<div class="item-meta svelte-1ngjemu"> </div>'),Nl=g('<div class="item-meta svelte-1ngjemu"> </div>'),Tl=g('<button><div class="item-name svelte-1ngjemu"> </div> <!></button>'),Gl=g('<p class="higher-levels"><strong>At Higher Levels:</strong> </p>'),Ol=g('<p class="cantrip-upgrade"><strong>Cantrip Upgrade:</strong> </p>'),ql=g('<h3 class="svelte-1ngjemu"> </h3> <p class="spell-meta svelte-1ngjemu"><!> <!></p> <p class="spell-classes"><strong>Classes:</strong> </p> <div class="spell-stats svelte-1ngjemu"><div><strong>Casting Time:</strong> </div> <div><strong>Range:</strong> </div> <div><strong>Components:</strong> <!></div> <div><strong>Duration:</strong> <!> </div></div> <p class="description svelte-1ngjemu"> </p> <!> <!>',1),zl=g('<p class="prerequisite svelte-1ngjemu"><strong>Prerequisite:</strong> </p>'),Wl=g('<h3 class="svelte-1ngjemu"> </h3> <!> <p class="description svelte-1ngjemu"> </p> <a target="_blank" rel="noopener" class="source-link svelte-1ngjemu">View Full Details â†’</a>',1),Vl=g('<div class="item-details svelte-1ngjemu"><!></div>'),Jl=g('<div class="controls svelte-1ngjemu"><div class="tabs svelte-1ngjemu"><button> </button> <button> </button></div> <div class="search-controls svelte-1ngjemu"><input type="text" placeholder="Search by name or description..." class="search-input svelte-1ngjemu"/> <!></div></div> <div class="content-container svelte-1ngjemu"><div class="items-list svelte-1ngjemu"><!></div> <!></div>',1),Kl=g('<div class="modal-backdrop svelte-1ngjemu" role="presentation"><div class="modal svelte-1ngjemu" role="dialog" aria-modal="true" tabindex="-1"><div class="modal-header svelte-1ngjemu"><h2 class="svelte-1ngjemu">Browse D&D Spells & Feats</h2> <button class="close-btn svelte-1ngjemu" aria-label="Close">&times;</button></div> <div class="modal-body svelte-1ngjemu"><!></div> <div class="modal-footer svelte-1ngjemu"><button class="btn-secondary svelte-1ngjemu">Cancel</button> <button class="btn-primary svelte-1ngjemu">Add to Character Sheet</button></div></div></div>');function Ql(r,p){kt(p,!1);const t=I(),d=I(),$=I();let x=Rt(p,"onClose",8),w=I("spell"),T=I(!0),b=I(""),O=I(null),se=I([]),H=I([]),W=I(null);qt(async()=>{o(T,!0);try{o(se,await Da()),o(H,await ds())}catch(C){console.error("Failed to load data:",C)}finally{o(T,!1)}});function ue(C){o(W,C)}function oe(C){const V=C.match(/(\d+d\d+(?:\s*\+\s*\d+)?)/i);return V?V[1]:""}function he(C){const V=C.split(/\.( |$)/)[0].trim(),le=Array.from(C.matchAll(/\*\*(.*?)\*\*/g)).map(R=>R[1].replace(/\.$/,""));let _=V;return le.length&&(_+=" | Effects: "+le.join(", ")),_}function fe(){if(e(W)){if(e(w)==="spell"){const C=e(W);K.update(V=>{const _=[];C.range&&_.push(`Range: ${C.range}`),C.castingTime&&_.push(`Cast: ${C.castingTime}`),C.duration&&_.push(`Duration: ${C.duration}`),C.actionType==="Save"&&_.push("Saving throw spell"),C.components&&C.components.length>0&&_.push(`Components: ${C.components.join(", ")}`),C.material&&_.push(`Material: ${C.material}`);const R=_.join(" | "),f=he(C.description),N={id:crypto.randomUUID(),name:`${C.name}${C.concentration?" (C)":""}${C.ritual?" (R)":""}`,bonus:C.actionType==="Attack"?5:0,damage:oe(C.description),damageType:`${C.school} (Lvl ${C.level})`,spellRef:C.name,infoNotes:R,generalNotes:f,castAtLevel:C.level};return V.attacks=[...V.attacks,N],V})}else if(e(w)==="feat"){const C=e(W);K.update(V=>{const le=`${C.name}${C.prerequisite?` (Req: ${C.prerequisite})`:""}
${C.description}
`;return V.features=V.features?`${V.features}
${le}`:le,V})}o(W,null),x()()}}ze(()=>(e(O),e(se),e(b)),()=>{o(t,e(O)!==null?us(ga(e(se),e(b)),e(O)):ga(e(se),e(b)))}),ze(()=>(e(H),e(b)),()=>{o(d,ps(e(H),e(b)))}),ze(()=>(e(w),e(t),e(d)),()=>{o($,e(w)==="spell"?e(t):e(d))}),Lt(),yt();var G=Kl(),ie=l(G),ce=l(ie),Q=a(l(ce),2);s(ce);var re=a(ce,2),Z=l(re);{var E=C=>{var V=El();v(C,V)},ne=C=>{var V=Jl(),le=Ue(V),_=l(le),R=l(_);let f;var N=l(R);s(R);var X=a(R,2);let U;var te=l(X);s(X),s(_);var Ae=a(_,2),_e=l(Ae);$e(_e);var Te=a(_e,2);{var de=Y=>{var P=Bl();M(()=>{e(O),St(()=>{})});var Ce=l(P);Ce.value=(Ce.__value=null)??"";var ye=a(Ce);ye.value=ye.__value=0;var je=a(ye);nt(je,0,()=>[1,2,3,4,5,6,7,8,9],vt,(me,S)=>{var be=Pl(),ge=l(be);s(be);var De={};M(()=>{k(ge,`Level ${S??""}`),De!==(De=S)&&(be.value=(be.__value=S)??"")}),v(me,be)}),s(P),ja(P,()=>e(O),me=>o(O,me)),v(Y,P)};j(Te,Y=>{e(w)==="spell"&&Y(de)})}s(Ae),s(le);var y=a(le,2),Ie=l(y),Ne=l(Ie);{var Be=Y=>{var P=Ul(),Ce=l(P);s(P),M(()=>k(Ce,`No ${e(w)??""}s found`)),v(Y,P)},qe=Y=>{var P=lt(),Ce=Ue(P);nt(Ce,1,()=>e($),vt,(ye,je)=>{var me=Tl();let S;var be=l(me),ge=l(be,!0);s(be);var De=a(be,2);{var Ge=xe=>{const ae=Ke(()=>e(je));var ke=Hl(),Me=l(ke);s(ke),M(()=>k(Me,`Level ${B(e(ae)),i(()=>e(ae).level)??""} â€¢ ${B(e(ae)),i(()=>e(ae).school)??""}`)),v(xe,ke)},We=xe=>{const ae=Ke(()=>e(je));var ke=lt(),Me=Ue(ke);{var Se=F=>{var c=Nl(),L=l(c,!0);s(c),M(()=>k(L,(B(e(ae)),i(()=>e(ae).prerequisite)))),v(F,c)};j(Me,F=>{B(e(ae)),i(()=>e(ae).prerequisite)&&F(Se)})}v(xe,ke)};j(De,xe=>{e(w)==="spell"?xe(Ge):xe(We,!1)})}s(me),M(()=>{S=ot(me,1,"item-card svelte-1ngjemu",null,S,{selected:e(W)?.name===e(je).name}),k(ge,(e(je),i(()=>e(je).name)))}),D("click",me,()=>ue(e(je))),v(ye,me)}),v(Y,P)};j(Ne,Y=>{e($),i(()=>e($).length===0)?Y(Be):Y(qe,!1)})}s(Ie);var h=a(Ie,2);{var J=Y=>{var P=Vl(),Ce=l(P);{var ye=me=>{const S=Ke(()=>e(W));var be=ql(),ge=Ue(be),De=l(ge,!0);s(ge);var Ge=a(ge,2),We=l(Ge);{var xe=pe=>{var Oe=gt();M(()=>k(Oe,`${B(e(S)),i(()=>e(S).school)??""} cantrip`)),v(pe,Oe)},ae=pe=>{var Oe=gt();M(()=>k(Oe,`Level ${B(e(S)),i(()=>e(S).level)??""} ${B(e(S)),i(()=>e(S).school)??""}`)),v(pe,Oe)};j(We,pe=>{B(e(S)),i(()=>e(S).level===0)?pe(xe):pe(ae,!1)})}var ke=a(We,2);{var Me=pe=>{var Oe=gt("(ritual)");v(pe,Oe)};j(ke,pe=>{B(e(S)),i(()=>e(S).ritual)&&pe(Me)})}s(Ge);var Se=a(Ge,2),F=a(l(Se));s(Se);var c=a(Se,2),L=l(c),q=a(l(L));s(L);var n=a(L,2),m=a(l(n));s(n);var u=a(n,2),A=a(l(u)),z=a(A);{var Fe=pe=>{var Oe=gt();M(()=>k(Oe,`(${B(e(S)),i(()=>e(S).material)??""})`)),v(pe,Oe)};j(z,pe=>{B(e(S)),i(()=>e(S).material)&&pe(Fe)})}s(u);var we=a(u,2),Ee=a(l(we),2);{var Xe=pe=>{var Oe=gt("Concentration,");v(pe,Oe)};j(Ee,pe=>{B(e(S)),i(()=>e(S).concentration)&&pe(Xe)})}var Ye=a(Ee,1,!0);s(we),s(c);var Ve=a(c,2),tt=l(Ve,!0);s(Ve);var at=a(Ve,2);{var Pe=pe=>{var Oe=Gl(),ht=a(l(Oe));s(Oe),M(()=>k(ht,` ${B(e(S)),i(()=>e(S).higherLevelSlot)??""}`)),v(pe,Oe)};j(at,pe=>{B(e(S)),i(()=>e(S).higherLevelSlot)&&pe(Pe)})}var et=a(at,2);{var bt=pe=>{var Oe=Ol(),ht=a(l(Oe));s(Oe),M(()=>k(ht,` ${B(e(S)),i(()=>e(S).cantripUpgrade)??""}`)),v(pe,Oe)};j(et,pe=>{B(e(S)),i(()=>e(S).cantripUpgrade)&&pe(bt)})}M((pe,Oe)=>{k(De,(B(e(S)),i(()=>e(S).name))),k(F,` ${pe??""}`),k(q,` ${B(e(S)),i(()=>e(S).castingTime||e(S).actionType)??""}`),k(m,` ${B(e(S)),i(()=>e(S).range)??""}`),k(A,` ${Oe??""}`),k(Ye,(B(e(S)),i(()=>e(S).duration))),k(tt,(B(e(S)),i(()=>e(S).description)))},[()=>(B(e(S)),i(()=>e(S).classes.join(", "))),()=>(B(e(S)),i(()=>e(S).components.join(", ").toUpperCase()))]),v(me,be)},je=me=>{const S=Ke(()=>e(W));var be=Wl(),ge=Ue(be),De=l(ge,!0);s(ge);var Ge=a(ge,2);{var We=Me=>{var Se=zl(),F=a(l(Se));s(Se),M(()=>k(F,` ${B(e(S)),i(()=>e(S).prerequisite)??""}`)),v(Me,Se)};j(Ge,Me=>{B(e(S)),i(()=>e(S).prerequisite)&&Me(We)})}var xe=a(Ge,2),ae=l(xe,!0);s(xe);var ke=a(xe,2);M(()=>{k(De,(B(e(S)),i(()=>e(S).name))),k(ae,(B(e(S)),i(()=>e(S).description))),Ze(ke,"href",(B(e(S)),i(()=>e(S).source)))}),v(me,be)};j(Ce,me=>{e(w)==="spell"?me(ye):me(je,!1)})}s(P),v(Y,P)};j(h,Y=>{e(W)&&Y(J)})}s(y),M(()=>{f=ot(R,1,"tab svelte-1ngjemu",null,f,{active:e(w)==="spell"}),k(N,`ðŸ“œ Spells (${e(se),i(()=>e(se).length)??""})`),U=ot(X,1,"tab svelte-1ngjemu",null,U,{active:e(w)==="feat"}),k(te,`â­ Feats (${e(H),i(()=>e(H).length)??""})`)}),D("click",R,()=>{o(w,"spell"),o(W,null),o(b,"")}),D("click",X,()=>{o(w,"feat"),o(W,null),o(b,"")}),Le(_e,()=>e(b),Y=>o(b,Y)),v(C,V)};j(Z,C=>{e(T)?C(E):C(ne,!1)})}s(re);var ve=a(re,2),ee=l(ve),Re=a(ee,2);s(ve),s(ie),s(G),M(()=>Re.disabled=!e(W)),D("click",Q,function(...C){x()?.apply(this,C)}),D("click",ee,function(...C){x()?.apply(this,C)}),D("click",Re,fe),D("click",ie,ua(function(C){It.call(this,p,C)})),D("keydown",ie,function(C){It.call(this,p,C)}),D("click",G,function(...C){x()?.apply(this,C)}),D("keydown",G,C=>C.key==="Escape"&&x()()),v(r,G),xt()}var Xl=g('<link rel="icon" type="image/png" href="/favicon.png"/> <meta name="viewport" content="width=device-width, initial-scale=1"/>',1),Yl=g('<span class="character-name svelte-1uha8ag"> </span>'),Zl=g("<span> </span>"),ei=g('<div class="spell-slots-header svelte-1uha8ag"></div>'),ti=g('<div class="rest-menu svelte-1uha8ag"><button class="rest-option svelte-1uha8ag">â˜• Short Rest</button> <button class="rest-option svelte-1uha8ag">ðŸ›ï¸ Long Rest</button></div>'),ai=g('<div class="container svelte-1uha8ag"><header class="svelte-1uha8ag"><div class="header-top svelte-1uha8ag"><div class="header-title svelte-1uha8ag"><h1 class="svelte-1uha8ag">D&D Character Sheet</h1> <!> <!> <input type="text" placeholder="ðŸ” Search (e.g., Religion, Strength, Attack...)" class="search-input use-enabled svelte-1uha8ag"/></div> <div class="header-controls svelte-1uha8ag"><button class="btn btn-secondary use-enabled">ðŸŽ² Roll Dice</button> <div class="rest-button-container svelte-1uha8ag"><button class="btn btn-secondary use-enabled">ðŸ˜´ Rest</button> <!></div> <div class="mode-toggle"><button> </button></div></div></div> <div class="header-actions svelte-1uha8ag"><button class="btn btn-mode svelte-1uha8ag">ðŸ“š Browse Spells & Feats</button> <button class="btn btn-secondary">Save to Gist</button> <button class="btn btn-secondary">Load from Gist</button> <button class="btn btn-secondary">Export JSON</button> <button class="btn btn-secondary">Import JSON</button> <input type="file" accept=".json" style="display: none;"/></div></header> <main class="svelte-1uha8ag"><!> <!> <!> <!> <!> <!> <!></main></div> <!> <!> <!>',1);function di(r,p){kt(p,!1);const t=()=>He(K,"$character",x),d=()=>He(Jt,"$isEditMode",x),$=()=>He(wt,"$searchFilter",x),[x,w]=Ct();function T(){const n=[],m=t().classFeatures.spellSlotsByLevel||{};for(let u=1;u<=9;u++){const A=m[u];if(A&&A.length>0){const z=A.length,Fe=A.filter(we=>we).length;n.push({level:u,available:z-Fe,total:z})}}return n}let b=I(!1),O=I(!1),se=I(!1),H=I("save"),W=I(void 0),ue=I(""),oe=I(""),he=I(""),fe=I(),G=!1,ie=I(!1);function ce(){K.update(n=>(n.hitDice.current=Math.min(n.hitDice.max,n.hitDice.current+Math.max(1,Math.floor(n.hitDice.max/2))),n.classFeatures.features&&Object.keys(n.classFeatures.features).forEach(m=>{const u=re(m);if(u?.resetOn==="short"){if(Array.isArray(n.classFeatures.features[m])){const A=u.maxUses,z=typeof A=="function"?A(n.level):A;n.classFeatures.features[m]=Array(z).fill(!1)}else if(typeof n.classFeatures.features[m]=="number"){const A=u.maxPool,z=typeof A=="function"?A(n.level):A;z!==void 0&&(n.classFeatures.features[m]=z)}}}),n)),o(ie,!1)}function Q(){K.update(n=>(n.currentHP=n.maxHP,n.tempHP=0,n.hitDice.current=n.hitDice.max,n.classFeatures.spellSlotsByLevel&&Object.keys(n.classFeatures.spellSlotsByLevel).forEach(m=>{const u=n.classFeatures.spellSlotsByLevel[parseInt(m)];u&&(n.classFeatures.spellSlotsByLevel[parseInt(m)]=Array(u.length).fill(!1))}),n.classFeatures.features&&Object.keys(n.classFeatures.features).forEach(m=>{const u=re(m);if(u){if(Array.isArray(n.classFeatures.features[m])){const A=u.maxUses,z=typeof A=="function"?A(n.level):A;n.classFeatures.features[m]=Array(z).fill(!1)}else if(typeof n.classFeatures.features[m]=="number"){const A=u.maxPool,z=typeof A=="function"?A(n.level):A;z!==void 0&&(n.classFeatures.features[m]=z)}}}),n)),o(ie,!1)}function re(n){return(t().class?_t(t().class):null)?Ot(t().class,t().level,t().subclass).find(A=>A.name.replace(/\s+/g,"")===n):null}function Z(n){o(ue,""),o(oe,""),o(he,""),G=!1,typeof n=="string"?o(ue,n):(o(ue,n.notation),o(oe,n.damageNotation||""),o(he,n.attackName||"")),o(b,!0)}function E(n){const{notation:m}=n.detail;o(ue,""),G=!0,setTimeout(()=>{o(ue,m),o(oe,""),o(he,"Hit Die")},0),o(b,!0)}function ne(){if(o(b,!1),G&&e(fe)){const n=e(fe).getLastRollTotal();if(n!==null){const m=Math.max(1,n);K.update(u=>(u.hitDice.current=Math.max(0,u.hitDice.current-1),u.currentHP=Math.min(u.maxHP,u.currentHP+m),u))}G=!1}}function ve(){console.log("toggleMode called, current isEditMode:",d()),Jt.update(n=>(console.log("Updating isEditMode from",n,"to",!n),!n))}function ee(n){n.target.closest(".rest-button-container")||o(ie,!1)}qt(()=>{console.log("onMount - initial isEditMode:",d()),console.log("onMount - body classes:",document.body.className);const n=Jt.subscribe(m=>{console.log("isEditMode subscription triggered, value:",m),console.log("Body classes before:",document.body.className),m?(document.body.classList.remove("use-mode"),console.log("Removed use-mode class (Edit Mode)")):(document.body.classList.add("use-mode"),console.log("Added use-mode class (Use Mode)")),console.log("Body classes after:",document.body.className)});return document.addEventListener("click",ee),()=>{n(),document.removeEventListener("click",ee)}});function Re(){Ha(t())}function C(){e(W)?.click()}async function V(n){const u=n.target.files?.[0];if(u)try{const A=await Na(u);K.set(A),alert("Character imported successfully!")}catch{alert("Failed to import character file")}}yt();var le=ai();Ua("1uha8ag",n=>{var m=Xl();Sa(2),ya(()=>{Ea.title="D&D Character Sheet"}),v(n,m)});var _=Ue(le),R=l(_),f=l(R),N=l(f),X=a(l(N),2);{var U=n=>{var m=Yl(),u=l(m,!0);s(m),M(()=>k(u,t().name)),v(n,m)};j(X,n=>{t().name&&n(U)})}var te=a(X,2);{var Ae=n=>{var m=ei();nt(m,5,T,vt,(u,A)=>{var z=Zl();let Fe;var we=l(z);s(z),M(()=>{Fe=ot(z,1,"slot-badge svelte-1uha8ag",null,Fe,{depleted:e(A).available===0}),k(we,`Lv${e(A).level??""}: ${e(A).available??""}/${e(A).total??""}`)}),v(u,z)}),s(m),v(n,m)};j(te,n=>{T().length>0&&n(Ae)})}var _e=a(te,2);$e(_e),s(N);var Te=a(N,2),de=l(Te),y=a(de,2),Ie=l(y),Ne=a(Ie,2);{var Be=n=>{var m=ti(),u=l(m),A=a(u,2);s(m),D("click",u,ce),D("click",A,Q),v(n,m)};j(Ne,n=>{e(ie)&&n(Be)})}s(y);var qe=a(y,2),h=l(qe);let J;var Y=l(h,!0);s(h),s(qe),s(Te),s(f);var P=a(f,2),Ce=l(P),ye=a(Ce,2),je=a(ye,2),me=a(je,2),S=a(me,2),be=a(S,2);na(be,n=>o(W,n),()=>e(W)),s(P),s(R);var ge=a(R,2),De=l(ge);Ya(De,{});var Ge=a(De,2);rs(Ge,{$$events:{rollHitDice:E}});var We=a(Ge,2);as(We,{$$events:{roll:n=>Z(n.detail)}});var xe=a(We,2);vs(xe,{$$events:{roll:n=>Z(n.detail)}});var ae=a(xe,2);Ps(ae,{$$events:{roll:n=>Z(n.detail)}});var ke=a(ae,2);Zs(ke,{});var Me=a(ke,2);al(Me,{}),s(ge),s(_);var Se=a(_,2);na(fl(Se,{get notation(){return e(ue)},get damageNotation(){return e(oe)},get attackName(){return e(he)},get visible(){return e(b)},$$events:{close:ne},$$legacy:!0}),n=>o(fe,n),()=>e(fe));var F=a(Se,2);{var c=n=>{Ml(n,{get mode(){return e(H)},$$events:{close:()=>o(O,!1)}})};j(F,n=>{e(O)&&n(c)})}var L=a(F,2);{var q=n=>{Ql(n,{onClose:()=>o(se,!1)})};j(L,n=>{e(se)&&n(q)})}M(()=>{J=ot(h,1,"btn btn-mode svelte-1uha8ag",null,J,{"use-mode":!d()}),k(Y,d()?"ðŸ“ Edit Mode":"ðŸŽ² Use Mode")}),Le(_e,$,n=>Ta(wt,n)),D("click",de,()=>o(b,!0)),D("click",Ie,()=>o(ie,!e(ie))),D("click",h,ve),D("click",Ce,()=>o(se,!0)),D("click",ye,()=>{o(H,"save"),o(O,!0)}),D("click",je,()=>{o(H,"load"),o(O,!0)}),D("click",me,Re),D("click",S,C),D("change",be,V),v(r,le),xt(),w()}export{di as component};
