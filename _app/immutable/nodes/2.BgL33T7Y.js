import{f as b,e as D,a as c,s as y,c as lt,t as gt}from"../chunks/DByWoho_.js";import{i as yt}from"../chunks/B8VD8sBm.js";import{c as Mt,o as qt}from"../chunks/rdJCzvYT.js";import{a6 as ma,i as _a,b1 as Aa,b2 as Ra,b3 as va,J as jt,e as ya,b4 as ka,ay as Ia,b as i,r as xa,R as $a,g as Ma,B as kt,b5 as Ve,b6 as Lt,E as M,F as xt,s as n,a3 as I,G as l,I as a,H as s,d as e,C as Ge,k as Ze,z as B,b7 as St,b8 as Tt,b9 as Ca,aI as Sa,ba as Ea}from"../chunks/BMWhyEAP.js";import{a as tt,c as Z,b as dt,r as we,e as nt,i as vt,d as La,u as Pa,f as wt,s as ot,g as Qt,j as Jt,k as Ba,t as sa,h as Ua,l as Ha,m as Na}from"../chunks/D9whcMjT.js";import{i as L,s as Ct,a as Oe,b as et,d as Ta}from"../chunks/D39sVKQV.js";import{p as Rt,b as na}from"../chunks/Ds54jWm4.js";import{b as Nt,r as Ga}from"../chunks/DAP6O0-K.js";function Kt(r,u,t=!1){if(r.multiple){if(u==null)return;if(!_a(u))return Aa();for(var v of r.options)v.selected=u.includes(Gt(v));return}for(v of r.options){var x=Gt(v);if(Ra(x,u)){v.selected=!0;return}}(!t||u!==void 0)&&(r.selectedIndex=-1)}function oa(r){var u=new MutationObserver(()=>{Kt(r,r.__value)});u.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ma(()=>{u.disconnect()})}function ja(r,u,t=u){var v=new WeakSet,x=!0;va(r,"change",k=>{var j=k?"[selected]":":checked",G;if(r.multiple)G=[].map.call(r.querySelectorAll(j),Gt);else{var f=r.querySelector(j)??r.querySelector("option:not([disabled])");G=f&&Gt(f)}t(G),jt!==null&&v.add(jt)}),ya(()=>{var k=u();if(r===document.activeElement){var j=ka??jt;if(v.has(j))return}if(Kt(r,k,x),x&&k===void 0){var G=r.querySelector(":checked");G!==null&&(k=Gt(G),t(k))}r.__value=k,x=!1}),oa(r)}function Gt(r){return"__value"in r?r.__value:r.value}function Fe(r,u,t=u){var v=new WeakSet;va(r,"input",async x=>{var k=x?r.defaultValue:r.value;if(k=la(r)?ia(k):k,t(k),jt!==null&&v.add(jt),await Ia(),k!==(k=u())){var j=r.selectionStart,G=r.selectionEnd,f=r.value.length;if(r.value=k??"",G!==null){var z=r.value.length;j===G&&G===f&&z>f?(r.selectionStart=z,r.selectionEnd=z):(r.selectionStart=j,r.selectionEnd=Math.min(G,z))}}}),($a&&r.defaultValue!==r.value||i(u)==null&&r.value)&&(t(la(r)?ia(r.value):r.value),jt!==null&&v.add(jt)),xa(()=>{var x=u();if(r===document.activeElement){var k=ka??jt;if(v.has(k))return}la(r)&&x===ia(r.value)||r.type==="date"&&!x&&!r.value||x!==r.value&&(r.value=x??"")})}function da(r,u,t=u){va(r,"change",v=>{var x=v?r.defaultChecked:r.checked;t(x)}),($a&&r.defaultChecked!==r.checked||i(u)==null)&&t(r.checked),xa(()=>{var v=u();r.checked=!!v})}function la(r){var u=r.type;return u==="number"||u==="range"}function ia(r){return r===""?null:+r}function Oa(r,u,t){var v=Ma(r,u);v&&v.set&&(r[u]=t,ma(()=>{r[u]=null}))}function ua(r){return function(...u){var t=u[0];return t.stopPropagation(),r?.apply(this,u)}}function It(r,u){var t=r.$$events?.[u.type],v=_a(t)?t.slice():t==null?[]:[t];for(var x of v)x.call(this,u)}const qa="";function wa(...r){return Nt+qa+Ga(r[0],r[1])}const ca={paladin:{name:"Paladin",hitDice:"d10",spellcaster:!0,spellcastingAbility:"charisma",spellSlotsByLevel:{1:0,2:2,3:3,4:3,5:4,6:4,7:4,8:4,9:4,10:4,11:4,12:4,13:4,14:4,15:4,16:4,17:4,18:4,19:4,20:4},features:[{name:"Divine Sense",type:"uses",maxUses:(r,u=1)=>1+Math.max(1,u),resetOn:"long",description:"Detect celestials, fiends, and undead within 60 feet",minLevel:1},{name:"Lay on Hands",type:"pool",maxPool:r=>r*5,resetOn:"long",description:"Heal wounds or cure disease",minLevel:1},{name:"Divine Smite",type:"spellSlot",description:"Expend spell slot to deal extra radiant damage",minLevel:2,rollable:!0},{name:"Channel Divinity",type:"pool",maxPool:r=>r>=18?3:r>=6?2:1,resetOn:"short",description:"Sacred Weapon or Turn Undead",minLevel:3}]},fighter:{name:"Fighter",hitDice:"d10",spellcaster:!1,features:[{name:"Second Wind",type:"uses",maxUses:1,resetOn:"short",description:"Regain 1d10 + fighter level HP as bonus action",minLevel:1,rollable:!0,rollFormula:r=>`1d10+${r}`},{name:"Action Surge",type:"uses",maxUses:r=>r>=17?2:1,resetOn:"short",description:"Take one additional action on your turn",minLevel:2},{name:"Indomitable",type:"uses",maxUses:r=>r>=17?3:r>=13?2:1,resetOn:"long",description:"Reroll a failed saving throw",minLevel:9}],subclasses:{champion:{name:"Champion",features:[{name:"Improved Critical",type:"info",description:"Critical hit on 19-20",minLevel:3},{name:"Remarkable Athlete",type:"info",description:"Add half proficiency to STR/DEX/CON checks, increase long jump distance",minLevel:7},{name:"Additional Fighting Style",type:"info",description:"Choose a second fighting style",minLevel:10},{name:"Superior Critical",type:"info",description:"Critical hit on 18-20",minLevel:15},{name:"Survivor",type:"info",description:"Regain 5 + CON mod HP at start of turn if below half HP",minLevel:18}]},battlemaster:{name:"Battle Master",features:[{name:"Combat Superiority",type:"uses",maxUses:r=>r>=15?6:r>=7?5:4,resetOn:"short",description:r=>`Use superiority dice (${r>=18?"d12":r>=10?"d10":"d8"}) for maneuvers`,minLevel:3},{name:"Know Your Enemy",type:"info",description:"Learn capabilities of creatures you observe",minLevel:7},{name:"Improved Combat Superiority",type:"info",description:"Superiority dice become d10",minLevel:10},{name:"Relentless",type:"info",description:"Regain 1 superiority die if you have none at start of turn",minLevel:15}]}}},rogue:{name:"Rogue",hitDice:"d8",spellcaster:!1,features:[{name:"Sneak Attack",type:"info",description:r=>`Deal ${Math.ceil(r/2)}d6 extra damage once per turn with advantage or ally nearby`,minLevel:1,rollable:!0,rollFormula:r=>`${Math.ceil(r/2)}d6`},{name:"Cunning Action",type:"info",description:"Dash, Disengage, or Hide as a bonus action",minLevel:2},{name:"Uncanny Dodge",type:"info",description:"Use reaction to halve damage from an attack",minLevel:5},{name:"Evasion",type:"info",description:"Take no damage on successful Dex save (half on fail)",minLevel:7}]},wizard:{name:"Wizard",hitDice:"d6",spellcaster:!0,spellcastingAbility:"intelligence",spellSlotsByLevel:{1:2,2:3,3:4,4:4,5:4,6:4,7:4,8:4,9:4,10:4,11:4,12:4,13:4,14:4,15:4,16:4,17:4,18:4,19:4,20:4},features:[{name:"Arcane Recovery",type:"uses",maxUses:1,resetOn:"long",description:r=>`Recover spell slots totaling up to ${Math.ceil(r/2)} levels during short rest`,minLevel:1},{name:"Spell Mastery",type:"info",description:"Cast one 1st-level and one 2nd-level spell at will",minLevel:18}]},cleric:{name:"Cleric",hitDice:"d8",spellcaster:!0,spellcastingAbility:"wisdom",spellSlotsByLevel:{1:2,2:3,3:4,4:4,5:4,6:4,7:4,8:4,9:4,10:4,11:4,12:4,13:4,14:4,15:4,16:4,17:4,18:4,19:4,20:4},features:[{name:"Channel Divinity",type:"pool",maxPool:r=>r>=18?3:r>=6?2:1,resetOn:"short",description:"Turn Undead or domain-specific ability",minLevel:2},{name:"Destroy Undead",type:"info",description:r=>`Channel Divinity destroys undead of CR ${r>=17?4:r>=14?3:r>=11?2:r>=8?1:.5} or lower`,minLevel:5},{name:"Divine Intervention",type:"uses",maxUses:1,resetOn:"long",description:r=>`${r}% chance to succeed, implore deity for aid`,minLevel:10}],subclasses:{war:{name:"War Domain",features:[{name:"War Priest",type:"uses",maxUses:(r,u=1)=>Math.max(1,u),resetOn:"long",description:"Make one weapon attack as a bonus action",minLevel:1},{name:"Guided Strike",type:"channelDivinity",description:"Use your Channel Divinity to gain +10 to an attack roll. Make this choice after you see the roll, but before the DM says whether the attack hits or misses.",minLevel:2,resetOn:"short"},{name:"War God's Blessing",type:"channelDivinity",description:"Use reaction to grant +10 to an ally's attack roll within 30 feet. Consumes one use of Channel Divinity.",minLevel:6,resetOn:"short"},{name:"Divine Strike",type:"info",description:r=>`Deal extra ${r>=14?"2d8":"1d8"} weapon damage once per turn`,minLevel:8,rollable:!0,rollFormula:r=>r>=14?"2d8":"1d8"},{name:"Avatar of Battle",type:"info",description:"Gain resistance to nonmagical weapon damage",minLevel:17}]},life:{name:"Life Domain",features:[{name:"Disciple of Life",type:"info",description:"Healing spells restore additional 2 + spell level HP",minLevel:1},{name:"Preserve Life",type:"pool",maxPool:r=>r*5,resetOn:"short",description:"Restore HP to creatures within 30 feet",minLevel:2},{name:"Blessed Healer",type:"info",description:"Regain 2 + spell level HP when you cast healing spell",minLevel:6},{name:"Divine Strike",type:"info",description:r=>`Deal extra ${r>=14?"2d8":"1d8"} radiant damage once per turn`,minLevel:8,rollable:!0,rollFormula:r=>r>=14?"2d8":"1d8"},{name:"Supreme Healing",type:"info",description:"Maximize healing dice instead of rolling",minLevel:17}]}}},barbarian:{name:"Barbarian",hitDice:"d12",spellcaster:!1,features:[{name:"Rage",type:"uses",maxUses:r=>r>=20?1/0:r>=17?6:r>=12?5:r>=6?4:r>=3?3:2,resetOn:"long",description:r=>`+${r>=16?4:r>=9?3:2} damage, resistance to physical damage`,minLevel:1},{name:"Reckless Attack",type:"info",description:"Gain advantage on melee attacks, enemies get advantage on you",minLevel:2},{name:"Danger Sense",type:"info",description:"Advantage on Dex saves against effects you can see",minLevel:2}],subclasses:{berserker:{name:"Path of the Berserker",features:[{name:"Frenzy",type:"info",description:"While raging, make melee attack as bonus action (gain 1 exhaustion after rage)",minLevel:3},{name:"Mindless Rage",type:"info",description:"Cannot be charmed or frightened while raging",minLevel:6},{name:"Intimidating Presence",type:"info",description:"Use action to frighten creature within 30 feet",minLevel:10},{name:"Retaliation",type:"info",description:"When damaged by creature within 5 feet, make melee attack as reaction",minLevel:14}]}}}};function _t(r){const u=r.toLowerCase();return ca[u]||null}function Ot(r,u,t){const v=_t(r);if(!v)return[];const x=v.features.filter(k=>!k.minLevel||k.minLevel<=u);if(t&&v.subclasses&&v.subclasses[t]){const k=v.subclasses[t].features.filter(j=>!j.minLevel||j.minLevel<=u);return[...x,...k]}return x}function pa(r){const u=_t(r);return!u||!u.subclasses?[]:Object.keys(u.subclasses).map(t=>({id:t,name:u.subclasses[t].name}))}function fa(r,u){const t=_t(r);return!t||!t.spellcaster||!t.spellSlotsByLevel?0:t.spellSlotsByLevel[u]||0}function ba(r,u,t){const v=_t(r);return!v||!v.spellcaster?0:Math.max(1,t+u)}function za(r,u,t){const v=_t(r);return!v||!v.spellcaster?null:8+u+t}function Wa(){return Object.keys(ca).map(r=>({id:r,name:ca[r].name}))}var Va=b("<option> </option>"),Ja=b("<option> </option>"),Ka=b('<div class="form-group svelte-172i2fj"><label for="characterSubclass" class="svelte-172i2fj">Subclass</label> <select id="characterSubclass" class="svelte-172i2fj"><option>Select Subclass</option><!></select></div>'),Qa=b('<div class="info-grid svelte-172i2fj"><div class="form-group svelte-172i2fj"><label for="characterName" class="svelte-172i2fj">Character Name</label> <input type="text" id="characterName" placeholder="Enter name" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterClass" class="svelte-172i2fj">Class</label> <select id="characterClass" class="svelte-172i2fj"><option>Select Class</option><!></select></div> <!> <div class="form-group svelte-172i2fj"><label for="characterLevel" class="svelte-172i2fj">Level</label> <input type="number" id="characterLevel" min="1" max="20" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterRace" class="svelte-172i2fj">Race</label> <input type="text" id="characterRace" placeholder="e.g., Human" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterBackground" class="svelte-172i2fj">Background</label> <input type="text" id="characterBackground" placeholder="e.g., Soldier" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterAlignment" class="svelte-172i2fj">Alignment</label> <input type="text" id="characterAlignment" placeholder="e.g., Lawful Good" class="svelte-172i2fj"/></div></div>'),Xa=b('<section class="character-info svelte-172i2fj"><div class="header svelte-172i2fj"><h2 class="svelte-172i2fj">Character Info</h2> <button class="collapse-btn svelte-172i2fj"> </button></div> <!></section>');function Ya(r,u){kt(u,!1);const t=()=>Oe(Z,"$character",x),v=()=>Oe(dt,"$collapsedStates",x),[x,k]=Ct(),j=I(),G=Wa();function f(ne){const de=ne.target;Z.update(ee=>(ee.class=de.value,ee.subclass="",ee))}function z(ne){const de=ne.target;Z.update(ee=>(ee.subclass=de.value,ee))}function le(ne){const de=ne.target;Z.update(ee=>(ee.level=parseInt(de.value)||1,ee)),Pa()}function H(){dt.update(ne=>({...ne,characterInfo:!ne.characterInfo}))}Ve(()=>(t(),pa),()=>{n(j,t().class?pa(t().class):[])}),Lt(),yt();var J=Xa(),fe=l(J),ve=a(l(fe),2),ye=l(ve,!0);s(ve),s(fe);var he=a(fe,2);{var O=ne=>{var de=Qa(),ee=l(de),oe=a(l(ee),2);we(oe),s(ee);var te=a(ee,2),P=a(l(te),2),ce=l(P);ce.value=ce.__value="";var pe=a(ce);nt(pe,1,()=>G,vt,(re,Me)=>{var Le=Va(),qe=l(Le,!0);s(Le);var ue={};M(()=>{y(qe,(e(Me),i(()=>e(Me).name))),ue!==(ue=(e(Me),i(()=>e(Me).id)))&&(Le.value=(Le.__value=(e(Me),i(()=>e(Me).id)))??"")}),c(re,Le)}),s(P);var ae;oa(P),s(te);var Ee=a(te,2);{var $=re=>{var Me=Ka(),Le=a(l(Me),2),qe=l(Le);qe.value=qe.__value="";var ue=a(qe);nt(ue,1,()=>e(j),vt,(Pe,Ne)=>{var Te=Ja(),Je=l(Te,!0);s(Te);var h={};M(()=>{y(Je,(e(Ne),i(()=>e(Ne).name))),h!==(h=(e(Ne),i(()=>e(Ne).id)))&&(Te.value=(Te.__value=(e(Ne),i(()=>e(Ne).id)))??"")}),c(Pe,Te)}),s(Le);var m;oa(Le),s(Me),M(()=>{m!==(m=(t(),i(()=>t().subclass)))&&(Le.value=(Le.__value=(t(),i(()=>t().subclass)))??"",Kt(Le,(t(),i(()=>t().subclass))))}),D("change",Le,z),c(re,Me)};L(Ee,re=>{e(j),i(()=>e(j).length>0)&&re($)})}var K=a(Ee,2),ie=a(l(K),2);we(ie),s(K);var g=a(K,2),A=a(l(g),2);we(A),s(g);var p=a(g,2),T=a(l(p),2);we(T),s(p);var Q=a(p,2),U=a(l(Q),2);we(U),s(Q),s(de),M(()=>{ae!==(ae=(t(),i(()=>t().class)))&&(P.value=(P.__value=(t(),i(()=>t().class)))??"",Kt(P,(t(),i(()=>t().class)))),La(ie,(t(),i(()=>t().level)))}),Fe(oe,()=>t().name,re=>et(Z,i(t).name=re,i(t))),D("change",P,f),D("change",ie,le),Fe(A,()=>t().race,re=>et(Z,i(t).race=re,i(t))),Fe(T,()=>t().background,re=>et(Z,i(t).background=re,i(t))),Fe(U,()=>t().alignment,re=>et(Z,i(t).alignment=re,i(t))),c(ne,de)};L(he,ne=>{v(),i(()=>!v().characterInfo)&&ne(O)})}s(J),M(()=>{tt(ve,"aria-label",(v(),i(()=>v().characterInfo?"Expand":"Collapse"))),y(ye,(v(),i(()=>v().characterInfo?"â–¼":"â–²")))}),D("click",ve,H),c(r,J),xt(),k()}var Za=b('<div class="ability-card svelte-bbv1xt"><h3 class="svelte-bbv1xt"> </h3> <input type="number" class="ability-score svelte-bbv1xt" min="1" max="30"/> <div class="ability-modifier svelte-bbv1xt"> </div> <button class="roll-btn svelte-bbv1xt">Check</button> <div class="save-row svelte-bbv1xt"><input type="checkbox" class="svelte-bbv1xt"/> <label class="svelte-bbv1xt">Save</label> <button class="roll-btn-small svelte-bbv1xt">Roll</button></div></div>'),es=b('<div class="proficiency-bonus svelte-bbv1xt"><label for="profBonus">Proficiency Bonus</label> <input type="number" id="profBonus" class="prof-input svelte-bbv1xt"/></div> <div class="abilities-grid svelte-bbv1xt"></div>',1),ts=b('<section><div class="header svelte-bbv1xt"><h2 class="svelte-bbv1xt">Ability Scores</h2> <button class="collapse-btn svelte-bbv1xt"> </button></div> <!></section>');function as(r,u){kt(u,!1);const t=()=>Oe(Qt,"$abilityModifiers",j),v=()=>Oe(Z,"$character",j),x=()=>Oe(wt,"$searchFilter",j),k=()=>Oe(dt,"$collapsedStates",j),[j,G]=Ct(),f=I(),z=I(),le=Mt(),H=[{key:"strength",label:"Strength"},{key:"dexterity",label:"Dexterity"},{key:"constitution",label:"Constitution"},{key:"intelligence",label:"Intelligence"},{key:"wisdom",label:"Wisdom"},{key:"charisma",label:"Charisma"}];function J(){updateProficiencyBonus()}function fe(P){const ce=t()[P],pe=`1d20${ce>=0?"+":""}${ce}`;le("roll",pe)}function ve(P){const ce=t()[P],pe=v().saveProficiencies[P]?v().proficiencyBonus:0,ae=ce+pe,Ee=`1d20${ae>=0?"+":""}${ae}`;le("roll",Ee)}function ye(){dt.update(P=>({...P,abilityScores:!P.abilityScores}))}Ve(()=>x(),()=>{n(f,H.filter(({label:P})=>x()?P.toLowerCase().includes(x().toLowerCase()):!0))}),Ve(()=>(e(f),x()),()=>{n(z,e(f).length>0||!x()||x().toLowerCase().includes("proficiency"))}),Lt(),yt();var he=ts();let O;var ne=l(he),de=a(l(ne),2),ee=l(de,!0);s(de),s(ne);var oe=a(ne,2);{var te=P=>{var ce=es(),pe=Ge(ce),ae=a(l(pe),2);we(ae),s(pe);var Ee=a(pe,2);nt(Ee,5,()=>e(f),vt,($,K)=>{let ie=()=>e(K).key,g=()=>e(K).label;var A=Za(),p=l(A),T=l(p,!0);s(p);var Q=a(p,2);we(Q);var U=a(Q,2),re=l(U);s(U);var Me=a(U,2),Le=a(Me,2),qe=l(Le);we(qe);var ue=a(qe,2),m=a(ue,2);s(Le),s(A),M(Pe=>{y(T,Pe),y(re,`${t(),ie(),i(()=>t()[ie()]>=0?"+":"")??""}${t(),ie(),i(()=>t()[ie()])??""}`),tt(qe,"id",`${ie()}-save`),tt(ue,"for",`${ie()}-save`)},[()=>(g(),i(()=>g().substring(0,3).toUpperCase()))]),Fe(Q,()=>v().abilities[ie()],Pe=>et(Z,i(v).abilities[ie()]=Pe,i(v))),D("change",Q,J),D("click",Me,()=>fe(ie())),da(qe,()=>v().saveProficiencies[ie()],Pe=>et(Z,i(v).saveProficiencies[ie()]=Pe,i(v))),D("click",m,()=>ve(ie())),c($,A)}),s(Ee),Fe(ae,()=>v().proficiencyBonus,$=>et(Z,i(v).proficiencyBonus=$,i(v))),c(P,ce)};L(oe,P=>{k(),i(()=>!k().abilityScores)&&P(te)})}s(he),M(()=>{O=ot(he,1,"ability-scores svelte-bbv1xt",null,O,{hidden:!e(z)}),tt(de,"aria-label",(k(),i(()=>k().abilityScores?"Expand":"Collapse"))),y(ee,(k(),i(()=>k().abilityScores?"â–¼":"â–²")))}),D("click",de,ye),c(r,he),xt(),G()}var ss=b('<span class="hit-dice-type"> </span>'),ls=b('<div class="stats-grid svelte-1r5hyyb"><div class="stat-box svelte-1r5hyyb"><label for="armorClass" class="svelte-1r5hyyb">Armor Class</label> <input type="number" id="armorClass" class="stat-input svelte-1r5hyyb"/></div> <div class="stat-box svelte-1r5hyyb"><label for="initiative" class="svelte-1r5hyyb">Initiative</label> <input type="number" id="initiative" class="stat-input svelte-1r5hyyb"/></div> <div class="stat-box svelte-1r5hyyb"><label for="speed" class="svelte-1r5hyyb">Speed</label> <input type="text" id="speed" class="stat-input svelte-1r5hyyb"/></div></div> <div class="hp-section svelte-1r5hyyb"><h3 class="svelte-1r5hyyb">Hit Points</h3> <div class="hp-display svelte-1r5hyyb"><div class="hp-inputs svelte-1r5hyyb"><input type="number" class="hp-current svelte-1r5hyyb" min="0"/> <span class="hp-separator svelte-1r5hyyb">/</span> <input type="number" class="hp-max svelte-1r5hyyb" min="0"/></div> <div class="hp-controls svelte-1r5hyyb"><button class="hp-btn svelte-1r5hyyb">âˆ’</button> <button class="hp-btn svelte-1r5hyyb">+</button> <button class="hp-btn svelte-1r5hyyb">âˆ’5</button> <button class="hp-btn svelte-1r5hyyb">+5</button></div></div> <div class="temp-hp svelte-1r5hyyb"><label for="tempHP" class="svelte-1r5hyyb">Temp HP</label> <input type="number" id="tempHP" min="0" class="svelte-1r5hyyb"/></div></div> <div class="hit-dice-section svelte-1r5hyyb"><h3 class="svelte-1r5hyyb">Hit Dice</h3> <div class="hit-dice-display svelte-1r5hyyb"><input type="number" class="hit-dice-input svelte-1r5hyyb" min="0"/> <span>/</span> <input type="number" class="hit-dice-input svelte-1r5hyyb" min="0"/> <!></div> <div class="hit-dice-controls"><label for="hitDiceCount" class="svelte-1r5hyyb">Roll</label> <input type="number" id="hitDiceCount" class="hit-dice-count-input svelte-1r5hyyb" min="1" value="1"/> <button class="btn btn-primary roll-hit-dice use-enabled svelte-1r5hyyb">ðŸŽ² Roll</button></div></div>',1),is=b('<section><div class="header svelte-1r5hyyb"><h2 class="svelte-1r5hyyb">Combat Stats</h2> <button class="collapse-btn svelte-1r5hyyb"> </button></div> <!></section>');function rs(r,u){kt(u,!1);const t=()=>Oe(Z,"$character",j),v=()=>Oe(Qt,"$abilityModifiers",j),x=()=>Oe(wt,"$searchFilter",j),k=()=>Oe(dt,"$collapsedStates",j),[j,G]=Ct(),f=I(),z=Mt();function le(ee){Z.update(oe=>(oe.currentHP=Math.max(0,Math.min(oe.maxHP,oe.currentHP+ee)),oe))}function H(ee=1){if(t().hitDice.current<=0){alert("No hit dice remaining!");return}if(!t().class){alert("Please select a class first!");return}const oe=_t(t().class);if(!oe){alert("Invalid class configuration!");return}const te=Math.min(ee,t().hitDice.current),P=oe.hitDice,ce=v().constitution,pe=ce>=0?`+${ce}`:`${ce}`,ae=`${te}${P}${pe}`;z("rollHitDice",{notation:ae,hitDie:P,count:te})}function J(){dt.update(ee=>({...ee,combatStats:!ee.combatStats}))}Ve(()=>x(),()=>{n(f,!x()||"armor class".includes(x().toLowerCase())||"initiative".includes(x().toLowerCase())||"speed".includes(x().toLowerCase())||"hit points".includes(x().toLowerCase())||"hp".includes(x().toLowerCase())||"hit dice".includes(x().toLowerCase())||"combat".includes(x().toLowerCase()))}),Lt(),yt();var fe=is();let ve;var ye=l(fe),he=a(l(ye),2),O=l(he,!0);s(he),s(ye);var ne=a(ye,2);{var de=ee=>{var oe=ls(),te=Ge(oe),P=l(te),ce=a(l(P),2);we(ce),s(P);var pe=a(P,2),ae=a(l(pe),2);we(ae),s(pe);var Ee=a(pe,2),$=a(l(Ee),2);we($),s(Ee),s(te);var K=a(te,2),ie=a(l(K),2),g=l(ie),A=l(g);we(A);var p=a(A,4);we(p),s(g);var T=a(g,2),Q=l(T),U=a(Q,2),re=a(U,2),Me=a(re,2);s(T),s(ie);var Le=a(ie,2),qe=a(l(Le),2);we(qe),s(Le),s(K);var ue=a(K,2),m=a(l(ue),2),Pe=l(m);we(Pe);var Ne=a(Pe,4);we(Ne);var Te=a(Ne,2);{var Je=E=>{const Ae=Ze(()=>(B(_t),t(),i(()=>_t(t().class))));var Ce=lt(),Re=Ge(Ce);{var ke=C=>{const me=Ze(()=>(v(),i(()=>v().constitution)));var _e=ss(),Ie=l(_e);s(_e),M(()=>y(Ie,`(${B(e(Ae)),i(()=>e(Ae).hitDice)??""}${(e(me)>=0?`+${e(me)}`:e(me))??""})`)),c(C,_e)};L(Re,C=>{e(Ae)&&C(ke)})}c(E,Ce)};L(Te,E=>{t(),i(()=>t().class)&&E(Je)})}s(m);var h=a(m,2),W=a(l(h),2),X=a(W,2);s(h),s(ue),M(()=>{tt(A,"max",(t(),i(()=>t().maxHP))),tt(Pe,"max",(t(),i(()=>t().hitDice.max))),tt(W,"max",(t(),i(()=>t().hitDice.current))),X.disabled=(t(),i(()=>t().hitDice.current<=0||!t().class))}),Fe(ce,()=>t().armorClass,E=>et(Z,i(t).armorClass=E,i(t))),Fe(ae,()=>t().initiative,E=>et(Z,i(t).initiative=E,i(t))),Fe($,()=>t().speed,E=>et(Z,i(t).speed=E,i(t))),Fe(A,()=>t().currentHP,E=>et(Z,i(t).currentHP=E,i(t))),Fe(p,()=>t().maxHP,E=>et(Z,i(t).maxHP=E,i(t))),D("click",Q,()=>le(-1)),D("click",U,()=>le(1)),D("click",re,()=>le(-5)),D("click",Me,()=>le(5)),Fe(qe,()=>t().tempHP,E=>et(Z,i(t).tempHP=E,i(t))),Fe(Pe,()=>t().hitDice.current,E=>et(Z,i(t).hitDice.current=E,i(t))),Fe(Ne,()=>t().hitDice.max,E=>et(Z,i(t).hitDice.max=E,i(t))),D("input",W,E=>{const Ae=E.target,Ce=parseInt(Ae.value);Ce>t().hitDice.current&&(Ae.value=String(t().hitDice.current)),Ce<1&&(Ae.value="1")}),D("click",X,()=>{const E=document.getElementById("hitDiceCount"),Ae=parseInt(E?.value||"1");H(Ae)}),c(ee,oe)};L(ne,ee=>{k(),i(()=>!k().combatStats)&&ee(de)})}s(fe),M(()=>{ve=ot(fe,1,"combat-stats svelte-1r5hyyb",null,ve,{hidden:!e(f)}),tt(he,"aria-label",(k(),i(()=>k().combatStats?"Expand":"Collapse"))),y(O,(k(),i(()=>k().combatStats?"â–¼":"â–²")))}),D("click",he,J),c(r,fe),xt(),G()}const ra={acrobatics:"dexterity",animalHandling:"wisdom",arcana:"intelligence",athletics:"strength",deception:"charisma",history:"intelligence",insight:"wisdom",intimidation:"charisma",investigation:"intelligence",medicine:"wisdom",nature:"intelligence",perception:"wisdom",performance:"charisma",persuasion:"charisma",religion:"intelligence",sleightOfHand:"dexterity",stealth:"dexterity",survival:"wisdom"};var ns=b('<div class="skill-row svelte-1f1pl16"><input type="checkbox" class="svelte-1f1pl16"/> <label class="svelte-1f1pl16"> <span class="ability-tag svelte-1f1pl16"> </span></label> <span class="skill-modifier svelte-1f1pl16"> </span> <button class="roll-btn svelte-1f1pl16">Roll</button></div>'),os=b('<div class="skills-grid svelte-1f1pl16"></div>'),cs=b('<section><div class="header svelte-1f1pl16"><h2 class="svelte-1f1pl16">Skills</h2> <button class="collapse-btn svelte-1f1pl16"> </button></div> <!></section>');function vs(r,u){kt(u,!1);const t=()=>Oe(Qt,"$abilityModifiers",j),v=()=>Oe(Z,"$character",j),x=()=>Oe(wt,"$searchFilter",j),k=()=>Oe(dt,"$collapsedStates",j),[j,G]=Ct(),f=I(),z=I(),le=Mt(),H=[{key:"acrobatics",label:"Acrobatics"},{key:"animalHandling",label:"Animal Handling"},{key:"arcana",label:"Arcana"},{key:"athletics",label:"Athletics"},{key:"deception",label:"Deception"},{key:"history",label:"History"},{key:"insight",label:"Insight"},{key:"intimidation",label:"Intimidation"},{key:"investigation",label:"Investigation"},{key:"medicine",label:"Medicine"},{key:"nature",label:"Nature"},{key:"perception",label:"Perception"},{key:"performance",label:"Performance"},{key:"persuasion",label:"Persuasion"},{key:"religion",label:"Religion"},{key:"sleightOfHand",label:"Sleight of Hand"},{key:"stealth",label:"Stealth"},{key:"survival",label:"Survival"}];function J(te){const P=ra[te],ce=t()[P],pe=v().skillProficiencies[te]?v().proficiencyBonus:0;return ce+pe}function fe(te){const P=J(te),ce=`1d20${P>=0?"+":""}${P}`;le("roll",ce)}function ve(){dt.update(te=>({...te,skills:!te.skills}))}Ve(()=>x(),()=>{n(f,H.filter(({label:te})=>x()?te.toLowerCase().includes(x().toLowerCase()):!0))}),Ve(()=>e(f),()=>{n(z,e(f).length>0)}),Lt(),yt();var ye=cs();let he;var O=l(ye),ne=a(l(O),2),de=l(ne,!0);s(ne),s(O);var ee=a(O,2);{var oe=te=>{var P=os();nt(P,5,()=>e(f),vt,(ce,pe)=>{let ae=()=>e(pe).key,Ee=()=>e(pe).label;const $=Ze(()=>(B(ra),ae(),i(()=>ra[ae()]))),K=Ze(()=>(ae(),i(()=>J(ae()))));var ie=ns(),g=l(ie);we(g);var A=a(g,2),p=l(A),T=a(p),Q=l(T);s(T),s(A);var U=a(A,2),re=l(U);s(U);var Me=a(U,2);s(ie),M(Le=>{tt(g,"id",ae()),tt(A,"for",ae()),y(p,`${Ee()??""} `),y(Q,`(${Le??""})`),y(re,`${e(K)>=0?"+":""}${e(K)??""}`)},[()=>(B(e($)),i(()=>e($).substring(0,3).toUpperCase()))]),da(g,()=>v().skillProficiencies[ae()],Le=>et(Z,i(v).skillProficiencies[ae()]=Le,i(v))),D("click",Me,()=>fe(ae())),c(ce,ie)}),s(P),c(te,P)};L(ee,te=>{k(),i(()=>!k().skills)&&te(oe)})}s(ye),M(()=>{he=ot(ye,1,"skills svelte-1f1pl16",null,he,{hidden:!e(z)}),tt(ne,"aria-label",(k(),i(()=>k().skills?"Expand":"Collapse"))),y(de,(k(),i(()=>k().skills?"â–¼":"â–²")))}),D("click",ne,ve),c(r,ye),xt(),G()}let Wt=null,Vt=null;async function Da(){if(Wt)return Wt;try{return Wt=await(await fetch(wa("/data/spells.json"))).json(),Wt||[]}catch(r){return console.error("Failed to load spells:",r),[]}}async function ds(){if(Vt)return Vt;try{return Vt=await(await fetch(wa("/data/feats.json"))).json(),Vt||[]}catch(r){return console.error("Failed to load feats:",r),[]}}function ga(r,u){if(!u.trim())return r;const t=u.toLowerCase();return r.filter(v=>v.name.toLowerCase().includes(t)||v.school.toLowerCase().includes(t)||v.classes.some(x=>x.toLowerCase().includes(t))||v.description.toLowerCase().includes(t))}function us(r,u){return u===null?r:r.filter(t=>t.level===u)}function ps(r,u){if(!u.trim())return r;const t=u.toLowerCase();return r.filter(v=>v.name.toLowerCase().includes(t)||v.description.toLowerCase().includes(t))}var fs=b('<button class="btn-remove svelte-14o91c5">Ã—</button>'),bs=b('<div class="spell-info-loading svelte-14o91c5">Loading spell info...</div>'),gs=b('<div class="spell-notes svelte-14o91c5"><h4 class="svelte-14o91c5">General Notes</h4> <p> </p></div>'),hs=b('<li class="svelte-14o91c5"><strong>At Higher Levels:</strong> </li>'),ms=b('<ul class="svelte-14o91c5"><li class="svelte-14o91c5"><strong>Level:</strong> </li> <li class="svelte-14o91c5"><strong>Casting Time:</strong> </li> <li class="svelte-14o91c5"><strong>Range:</strong> </li> <li class="svelte-14o91c5"><strong>Components:</strong> <!></li> <li class="svelte-14o91c5"><strong>Duration:</strong> <!> </li> <li class="svelte-14o91c5"><strong>Description:</strong> </li> <!></ul>'),_s=b("<option> </option>"),ys=b('<span class="scaled-damage svelte-14o91c5"> </span>'),ks=b('<span class="scaled-damage svelte-14o91c5"> </span>'),xs=b('<div class="target-condition svelte-14o91c5"><label class="svelte-14o91c5"><input type="checkbox" class="use-enabled svelte-14o91c5"/> Target is Fiend or Undead <!></label></div>'),$s=b('<div class="spell-level-selector svelte-14o91c5"><label class="svelte-14o91c5">Cast at Level:</label> <select class="spell-level-select use-enabled svelte-14o91c5"></select> <!></div> <!>',1),Cs=b('<div class="spell-level-selector svelte-14o91c5"><span style="color: #dc3545; font-weight: bold;">No spell slots available!</span></div>'),Ss=b('<!> <div class="spell-info svelte-14o91c5"><div class="spell-info-header svelte-14o91c5" role="button" tabindex="0"><h4 class="svelte-14o91c5">Spell Info</h4> <button class="collapse-btn-small svelte-14o91c5"> </button></div> <!></div> <!>',1),Ls=b('<div class="spell-info-missing svelte-14o91c5">Spell info not found.</div>'),js=b('<div class="attack-notes svelte-14o91c5"><label class="svelte-14o91c5">Notes</label> <textarea placeholder="e.g., DC 15 Dex save, Range 120 ft, Concentration" class="notes-input svelte-14o91c5" rows="2"></textarea></div>'),ws=b('<button class="btn btn-primary">Roll Attack</button>'),Ds=b('<button class="btn btn-secondary"><!></button>'),Fs=b('<button class="btn btn-secondary">Roll Damage</button>'),As=b('<div class="attack-card svelte-14o91c5"><div class="attack-header svelte-14o91c5"><input type="text" placeholder="Attack name" class="attack-name svelte-14o91c5"/> <!></div> <div class="attack-details svelte-14o91c5"><div class="attack-field svelte-14o91c5"><label class="svelte-14o91c5">Bonus</label> <input type="number" class="attack-bonus svelte-14o91c5"/></div> <div class="attack-field svelte-14o91c5"><label class="svelte-14o91c5">Damage</label> <input type="text" placeholder="e.g., 2d6+3" class="attack-damage svelte-14o91c5"/></div> <div class="attack-field svelte-14o91c5"><label class="svelte-14o91c5">Type</label> <input type="text" placeholder="e.g., slashing" class="attack-type svelte-14o91c5"/></div></div> <!> <!> <div class="attack-actions svelte-14o91c5"><!> <!></div></div>'),Rs=b('<p class="no-attacks svelte-14o91c5">No attacks added yet. Click "Add Attack" to create one.</p>'),Is=b('<p class="no-attacks svelte-14o91c5">No attacks match your search.</p>'),Ms=b('<button class="btn btn-secondary">Add Attack</button> <div class="attacks-list svelte-14o91c5"><!> <!></div>',1),Es=b('<section><div class="header svelte-14o91c5"><h2 class="svelte-14o91c5">Attacks & Spells</h2> <button class="collapse-btn svelte-14o91c5"> </button></div> <!></section>');function Ps(r,u){kt(u,!1);const t=()=>Oe(Z,"$character",j),v=()=>Oe(wt,"$searchFilter",j),x=()=>Oe(dt,"$collapsedStates",j),k=()=>Oe(Jt,"$isEditMode",j),[j,G]=Ct(),f=I(),z=I(),le=Mt();let H=I({});function J(p){Ca(H,e(H)[p]=!e(H)[p]),n(H,{...e(H)})}function fe(p){return p.description.toLowerCase().includes("regain")&&(p.description.toLowerCase().includes("hit point")||p.description.toLowerCase().includes("hp"))}function ve(){Z.update(p=>(p.attacks=[...p.attacks,{id:crypto.randomUUID(),name:"",bonus:0,damage:"",damageType:"",notes:""}],p))}function ye(p){Z.update(T=>(T.attacks=T.attacks.filter(Q=>Q.id!==p),T))}function he(p){let T=p.damage;if(p.spellRef){const U=oe(p.spellRef);if(U&&U.level>0){const re=p.castAtLevel||U.level;if(!te(re)){alert(`No level ${re} spell slots available!`);return}T=P(p,U)}}const Q=`1d20${p.bonus>=0?"+":""}${p.bonus}`;le("roll",{notation:Q,damageNotation:T,attackName:p.name})}function O(p){if(!p.damage){alert(`${p.name}: No damage specified`);return}let T=p.damage;if(p.spellRef){const Q=oe(p.spellRef);if(Q&&Q.level>0){const U=p.castAtLevel||Q.level;if(!te(U)){alert(`No level ${U} spell slots available!`);return}T=P(p,Q)}}le("roll",{notation:T,attackName:p.name})}function ne(){dt.update(p=>({...p,attacks:!p.attacks}))}let de=I([]),ee=I(!1);qt(async()=>{n(de,await Da()),n(ee,!0)});function oe(p){return e(de).find(T=>T.name===p)}function te(p){t().classFeatures.spellSlotsByLevel||et(Z,i(t).classFeatures.spellSlotsByLevel={},i(t)),t().classFeatures.spellSlotsByLevel[p]||et(Z,i(t).classFeatures.spellSlotsByLevel[p]=Array(2).fill(!1),i(t));const Q=t().classFeatures.spellSlotsByLevel[p].findIndex(U=>!U);return Q===-1?!1:(Z.update(U=>(U.classFeatures.spellSlotsByLevel||(U.classFeatures.spellSlotsByLevel={}),U.classFeatures.spellSlotsByLevel[p]||(U.classFeatures.spellSlotsByLevel[p]=Array(2).fill(!1)),U.classFeatures.spellSlotsByLevel[p][Q]=!0,U)),!0)}function P(p,T){let Q=p.damage,U=0;if(T.higherLevelSlot&&p.castAtLevel){const ue=T.level,Pe=(p.castAtLevel||ue)-ue;if(Pe>0){const Ne=T.higherLevelSlot.match(/(\d+)d(\d+)\s+for\s+each.*?level\s+above/i);if(Ne){const[,Te]=Ne;U+=Pe*parseInt(Te)}}}if(p.targetIsFiendOrUndead&&T.description.includes("Fiend or an Undead")){const ue=T.description.match(/increases by (\d+)d(\d+) if.*?Fiend or.*?Undead/i);if(ue){const[,m]=ue;U+=parseInt(m)}}const re=Q.match(/(\d+)d(\d+)/);if(!re)return Q;const[,Me,Le]=re;return`${parseInt(Me)+U}d${Le}`}function ce(p){const T=[];for(let U=p.level;U<=9;U++){const re=t().classFeatures.spellSlotsByLevel?.[U];re&&re.length>0&&T.push(U)}return T}function pe(p){const T=t().classFeatures.spellSlotsByLevel?.[p]||[],Q=T.length,U=T.filter(re=>re).length;return{available:Q-U,total:Q}}Ve(()=>(t(),v()),()=>{n(f,t().attacks.filter(p=>{if(!v())return!0;const T=v().toLowerCase();return p.name.toLowerCase().includes(T)||p.damageType.toLowerCase().includes(T)}).sort((p,T)=>!p.spellRef&&T.spellRef?-1:p.spellRef&&!T.spellRef?1:0))}),Ve(()=>(v(),e(f)),()=>{n(z,!v()||e(f).length>0||"attack".includes(v().toLowerCase())||"spell".includes(v().toLowerCase()))}),Lt(),yt();var ae=Es();let Ee;var $=l(ae),K=a(l($),2),ie=l(K,!0);s(K),s($);var g=a($,2);{var A=p=>{var T=Ms(),Q=Ge(T),U=a(Q,2),re=l(U);nt(re,1,()=>e(f),ue=>ue.id,(ue,m,Pe)=>{var Ne=As(),Te=l(Ne),Je=l(Te);we(Je);var h=a(Je,2);{var W=F=>{var o=fs();D("click",o,()=>ye(e(m).id)),c(F,o)};L(h,F=>{k()&&F(W)})}s(Te);var X=a(Te,2),E=l(X),Ae=a(l(E),2);we(Ae),s(E);var Ce=a(E,2),Re=a(l(Ce),2);we(Re),s(Ce);var ke=a(Ce,2),C=a(l(ke),2);we(C),s(ke),s(X);var me=a(X,2);{var _e=F=>{var o=lt(),S=Ge(o);{var q=N=>{var _=bs();c(N,_)},w=N=>{const _=Ze(()=>(e(m),i(()=>oe(e(m).spellRef))));var be=lt(),xe=Ge(be);{var Ue=R=>{var V=Ss(),Y=Ge(V);{var $e=Ye=>{var it=gs(),mt=a(l(it),2),Et=l(mt,!0);s(mt),s(it),M(()=>y(Et,(e(m),i(()=>e(m).generalNotes)))),c(Ye,it)};L(Y,Ye=>{e(m),i(()=>e(m).generalNotes)&&Ye($e)})}var Qe=a(Y,2),Xe=l(Qe),He=a(l(Xe),2),at=l(He,!0);s(He),s(Xe);var bt=a(Xe,2);{var ge=Ye=>{var it=ms(),mt=l(it),Et=a(l(mt));s(mt);var Pt=a(mt,2),Yt=a(l(Pt));s(Pt);var $t=a(Pt,2),At=a(l($t));s($t);var Dt=a($t,2),Bt=a(l(Dt)),Ft=a(Bt);{var Zt=st=>{var ct=gt();M(()=>y(ct,`(${B(e(_)),i(()=>e(_).material)??""})`)),c(st,ct)};L(Ft,st=>{B(e(_)),i(()=>e(_).material)&&st(Zt)})}s(Dt);var Ut=a(Dt,2),zt=a(l(Ut),2);{var ea=st=>{var ct=gt("Concentration,");c(st,ct)};L(zt,st=>{B(e(_)),i(()=>e(_).concentration)&&st(ea)})}var ut=a(zt,1,!0);s(Ut);var rt=a(Ut,2),pt=a(l(rt));s(rt);var ft=a(rt,2);{var Ht=st=>{var ct=hs(),ta=a(l(ct));s(ct),M(()=>y(ta,` ${B(e(_)),i(()=>e(_).higherLevelSlot)??""}`)),c(st,ct)};L(ft,st=>{B(e(_)),i(()=>e(_).higherLevelSlot)&&st(Ht)})}s(it),M(st=>{y(Et,` ${B(e(_)),i(()=>e(_).level)??""}`),y(Yt,` ${B(e(_)),i(()=>e(_).castingTime||e(_).actionType)??""}`),y(At,` ${B(e(_)),i(()=>e(_).range)??""}`),y(Bt,` ${st??""}`),y(ut,(B(e(_)),i(()=>e(_).duration))),y(pt,` ${B(e(_)),i(()=>e(_).description)??""}`)},[()=>(B(e(_)),i(()=>e(_).components.join(", ")))]),c(Ye,it)};L(bt,Ye=>{e(H),e(m),i(()=>!e(H)[e(m).id])&&Ye(ge)})}s(Qe);var We=a(Qe,2);{var ht=Ye=>{const it=Ze(()=>(B(e(_)),i(()=>ce(e(_)))));var mt=lt(),Et=Ge(mt);{var Pt=$t=>{var At=$s(),Dt=Ge(At),Bt=l(Dt),Ft=a(Bt,2);M(()=>{e(m),St(()=>{e(it)})}),nt(Ft,5,()=>e(it),vt,(ut,rt)=>{const pt=Ze(()=>(e(rt),i(()=>pe(e(rt)))));var ft=_s(),Ht=l(ft);s(ft);var st={};M(()=>{y(Ht,`Level ${e(rt)??""} (${B(e(pt)),i(()=>e(pt).available)??""}/${B(e(pt)),i(()=>e(pt).total)??""} slots)`),st!==(st=e(rt))&&(ft.value=(ft.__value=e(rt))??"")}),c(ut,ft)}),s(Ft);var Zt=a(Ft,2);{var Ut=ut=>{const rt=Ze(()=>(e(m),B(e(_)),i(()=>P(e(m),e(_)))));var pt=ys(),ft=l(pt);s(pt),M(()=>y(ft,`Damage: ${e(rt)??""}`)),c(ut,pt)};L(Zt,ut=>{e(m),B(e(_)),i(()=>e(m).castAtLevel&&e(m).castAtLevel>e(_).level)&&ut(Ut)})}s(Dt);var zt=a(Dt,2);{var ea=ut=>{var rt=xs(),pt=l(rt),ft=l(pt);we(ft);var Ht=a(ft,2);{var st=ct=>{const ta=Ze(()=>(e(m),B(e(_)),i(()=>P(e(m),e(_)))));var aa=ks(),Fa=l(aa);s(aa),M(()=>y(Fa,`(+1d8, total: ${e(ta)??""})`)),c(ct,aa)};L(Ht,ct=>{e(m),i(()=>e(m).targetIsFiendOrUndead)&&ct(st)})}s(pt),s(rt),da(ft,()=>e(m).targetIsFiendOrUndead,ct=>(e(m).targetIsFiendOrUndead=ct,St(()=>(e(f),t(),v())))),c(ut,rt)};L(zt,ut=>{B(e(_)),i(()=>e(_).description.includes("Fiend or an Undead"))&&ut(ea)})}M(()=>{tt(Bt,"for",`castLevel-${e(m),i(()=>e(m).id)??""}`),tt(Ft,"id",`castLevel-${e(m),i(()=>e(m).id)??""}`)}),ja(Ft,()=>e(m).castAtLevel,ut=>(e(m).castAtLevel=ut,St(()=>(e(f),t(),v())))),c($t,At)},Yt=$t=>{var At=Cs();c($t,At)};L(Et,$t=>{B(e(it)),i(()=>e(it).length>0)?$t(Pt):$t(Yt,!1)})}c(Ye,mt)};L(We,Ye=>{B(e(_)),i(()=>e(_).higherLevelSlot&&e(_).level>0)&&Ye(ht)})}M(()=>{tt(He,"aria-label",(e(H),e(m),i(()=>e(H)[e(m).id]?"Expand":"Collapse"))),y(at,(e(H),e(m),i(()=>e(H)[e(m).id]?"â–¼":"â–²")))}),D("click",Xe,()=>J(e(m).id)),D("keydown",Xe,Ye=>Ye.key==="Enter"&&J(e(m).id)),c(R,V)},d=R=>{var V=Ls();c(R,V)};L(xe,R=>{e(_)?R(Ue):R(d,!1)})}c(N,be)};L(S,N=>{e(de),i(()=>e(de).length===0)?N(q):N(w,!1)})}c(F,o)};L(me,F=>{e(m),i(()=>e(m).spellRef)&&F(_e)})}var Ie=a(me,2);{var ze=F=>{var o=js(),S=a(l(o),2);Tt(S),s(o),Fe(S,()=>e(m).notes,q=>(e(m).notes=q,St(()=>(e(f),t(),v())))),c(F,o)};L(Ie,F=>{e(m),i(()=>!e(m).spellRef)&&F(ze)})}var Ke=a(Ie,2),je=l(Ke);{var se=F=>{var o=ws();D("click",o,()=>he(e(m))),c(F,o)};L(je,F=>{e(m),i(()=>e(m).bonus!==0||!e(m).spellRef)&&F(se)})}var Se=a(je,2);{var Be=F=>{const o=Ze(()=>(e(m),i(()=>oe(e(m).spellRef))));var S=Ds(),q=l(S);{var w=_=>{var be=gt("Roll Healing");c(_,be)},N=_=>{var be=gt("Roll Damage");c(_,be)};L(q,_=>{B(e(o)),i(()=>e(o)&&fe(e(o)))?_(w):_(N,!1)})}s(S),D("click",S,()=>O(e(m))),c(F,S)},De=F=>{var o=Fs();D("click",o,()=>O(e(m))),c(F,o)};L(Se,F=>{e(m),e(ee),i(()=>e(m).spellRef&&e(ee))?F(Be):F(De,!1)})}s(Ke),s(Ne),Fe(Je,()=>e(m).name,F=>(e(m).name=F,St(()=>(e(f),t(),v())))),Fe(Ae,()=>e(m).bonus,F=>(e(m).bonus=F,St(()=>(e(f),t(),v())))),Fe(Re,()=>e(m).damage,F=>(e(m).damage=F,St(()=>(e(f),t(),v())))),Fe(C,()=>e(m).damageType,F=>(e(m).damageType=F,St(()=>(e(f),t(),v())))),c(ue,Ne)});var Me=a(re,2);{var Le=ue=>{var m=Rs();c(ue,m)},qe=ue=>{var m=lt(),Pe=Ge(m);{var Ne=Te=>{var Je=Is();c(Te,Je)};L(Pe,Te=>{e(f),i(()=>e(f).length===0)&&Te(Ne)},!0)}c(ue,m)};L(Me,ue=>{t(),i(()=>t().attacks.length===0)?ue(Le):ue(qe,!1)})}s(U),D("click",Q,ve),c(p,T)};L(g,p=>{x(),i(()=>!x().attacks)&&p(A)})}s(ae),M(()=>{Ee=ot(ae,1,"attacks svelte-14o91c5",null,Ee,{hidden:!e(z)}),tt(K,"aria-label",(x(),i(()=>x().attacks?"Expand":"Collapse"))),y(ie,(x(),i(()=>x().attacks?"â–¼":"â–²")))}),D("click",K,ne),c(r,ae),xt(),G()}var Bs=b('<p class="no-features svelte-1kpvv0n">Select a class to see available features</p>'),Us=b('<p class="no-features svelte-1kpvv0n">No class features available at this level</p>'),Hs=b('<input type="checkbox" class="slot-checkbox svelte-1kpvv0n"/>'),Ns=b('<div class="spell-slots svelte-1kpvv0n"><label class="svelte-1kpvv0n"> </label> <div class="slots-tracker svelte-1kpvv0n"></div></div>'),Ts=b('<div class="all-spell-slots"></div>'),Gs=b('<div class="feature-box spellcasting svelte-1kpvv0n"><h3 class="svelte-1kpvv0n"> </h3> <div class="spell-stats svelte-1kpvv0n"><div class="spell-stat svelte-1kpvv0n"><label class="svelte-1kpvv0n">Spell Save DC</label> <div class="spell-value svelte-1kpvv0n"> </div></div> <div class="spell-stat svelte-1kpvv0n"><label class="svelte-1kpvv0n">Prepared Spells</label> <div class="spell-value svelte-1kpvv0n"> </div></div></div> <!> <div class="prepared-spells svelte-1kpvv0n"><label class="svelte-1kpvv0n">Prepared Spells</label> <textarea placeholder="List your prepared spells..." class="svelte-1kpvv0n"></textarea></div></div>'),Os=b('<p class="unlimited svelte-1kpvv0n">Unlimited Uses</p>'),qs=b('<p class="no-uses svelte-1kpvv0n">No uses remaining</p>'),zs=b('<div class="uses-with-button svelte-1kpvv0n"><button class="btn btn-primary use-enabled"> </button> <div class="uses-info svelte-1kpvv0n"><span class="uses-remaining svelte-1kpvv0n"> </span> <span class="reset-info svelte-1kpvv0n"> </span></div> <!></div>'),Ws=b('<div class="uses-tracker svelte-1kpvv0n"><!></div>'),Vs=b('<div class="pool-tracker svelte-1kpvv0n"><input type="number" min="0" class="pool-input svelte-1kpvv0n"/> <span> </span> <button class="btn-small svelte-1kpvv0n"> </button></div>'),Js=b('<p class="no-uses svelte-1kpvv0n">No Channel Divinity uses remaining</p>'),Ks=b('<div class="channel-divinity-option svelte-1kpvv0n"><button class="btn btn-primary use-enabled svelte-1kpvv0n">Use Channel Divinity</button> <div class="uses-info svelte-1kpvv0n"><span class="reset-info svelte-1kpvv0n"> </span></div> <!></div>'),Qs=b('<div class="feature-box svelte-1kpvv0n"><h3 class="svelte-1kpvv0n"><!> </h3> <p class="feature-description svelte-1kpvv0n"> </p> <!></div>'),Xs=b('<div class="features-grid svelte-1kpvv0n"><!> <!></div>'),Ys=b('<section><div class="header svelte-1kpvv0n"><h2 class="svelte-1kpvv0n">Class Features</h2> <button class="collapse-btn svelte-1kpvv0n"> </button></div> <!></section>');function Zs(r,u){kt(u,!1);const t=()=>Oe(Z,"$character",j),v=()=>Oe(Qt,"$abilityModifiers",j),x=()=>Oe(wt,"$searchFilter",j),k=()=>Oe(dt,"$collapsedStates",j),[j,G]=Ct(),f=I(),z=I(),le=I(),H=I(),J=I(),fe=I(),ve=I();let ye=I(0),he=I(0);function O(g,A){Z.update(p=>(p.classFeatures.features[g]=A,p))}function ne(){Z.update(g=>(g.classFeatures.spellSlotsByLevel||(g.classFeatures.spellSlotsByLevel={}),e(H).forEach(({level:A,slots:p})=>{g.classFeatures.spellSlotsByLevel[A]||(g.classFeatures.spellSlotsByLevel[A]=Array(p).fill(!1))}),g))}function de(g){if(typeof g.maxUses=="function"){if((g.name==="Divine Sense"||g.name==="War Priest")&&e(f)?.spellcastingAbility){const A=v()[e(f).spellcastingAbility];return g.maxUses(t().level,A)}return g.maxUses(t().level)}return g.maxUses||0}function ee(g){return typeof g.maxPool=="function"?g.maxPool(t().level):g.maxPool||0}function oe(g){return typeof g.description=="function"?g.description(t().level):g.description}function te(){const g="ChannelDivinity";Z.update(A=>{const p=A.classFeatures.features[g];return typeof p=="number"&&p>0&&(A.classFeatures.features[g]=p-1),A})}function P(){dt.update(g=>({...g,classFeatures:!g.classFeatures}))}Ve(()=>(t(),_t),()=>{n(f,t().class?_t(t().class):null)}),Ve(()=>(t(),Ot),()=>{n(z,t().class?Ot(t().class,t().level,t().subclass):[])}),Ve(()=>(t(),fa),()=>{n(le,t().class?fa(t().class,t().level):0)}),Ve(()=>(e(f),t()),()=>{n(H,(()=>{if(!e(f)?.spellcaster)return[];const g=t().level,A=[];return g>=1&&A.push({level:1,slots:Math.min(4,2+Math.floor(g/3))}),g>=3&&A.push({level:2,slots:Math.min(3,2+Math.floor((g-3)/4))}),g>=5&&A.push({level:3,slots:Math.min(3,2+Math.floor((g-5)/5))}),g>=7&&A.push({level:4,slots:Math.min(3,1+Math.floor((g-7)/6))}),g>=9&&A.push({level:5,slots:Math.min(2,1+Math.floor((g-9)/8))}),g>=11&&A.push({level:6,slots:1}),g>=13&&A.push({level:7,slots:1}),g>=15&&A.push({level:8,slots:1}),g>=17&&A.push({level:9,slots:1}),A})())}),Ve(()=>(e(f),v(),t(),ba),()=>{if(e(f)?.spellcaster&&e(f).spellcastingAbility){const g=v()[e(f).spellcastingAbility];n(ye,za(t().class,g,t().proficiencyBonus)||0),n(he,ba(t().class,t().level,g))}}),Ve(()=>(t(),e(f),e(H)),()=>{t().class&&e(f)?.spellcaster&&e(H).length>0&&ne()}),Ve(()=>t(),()=>{n(J,(()=>{const A=t().classFeatures.features["ChannelDivinity"];return typeof A=="number"?A:0})())}),Ve(()=>(e(z),x()),()=>{n(fe,e(z).filter(g=>{if(!x())return!0;const A=x().toLowerCase();return g.name.toLowerCase().includes(A)||oe(g).toLowerCase().includes(A)}))}),Ve(()=>(x(),t(),e(fe)),()=>{n(ve,!x()||t().class||"class features".includes(x().toLowerCase())||"spellcasting".includes(x().toLowerCase())||e(fe).length>0)}),Lt(),yt();var ce=Ys();let pe;var ae=l(ce),Ee=a(l(ae),2),$=l(Ee,!0);s(Ee),s(ae);var K=a(ae,2);{var ie=g=>{var A=lt(),p=Ge(A);{var T=U=>{var re=Bs();c(U,re)},Q=U=>{var re=lt(),Me=Ge(re);{var Le=ue=>{var m=Us();c(ue,m)},qe=ue=>{var m=Xs(),Pe=l(m);{var Ne=Je=>{var h=Gs(),W=l(h),X=l(W);s(W);var E=a(W,2),Ae=l(E),Ce=a(l(Ae),2),Re=l(Ce,!0);s(Ce),s(Ae);var ke=a(Ae,2),C=a(l(ke),2),me=l(C,!0);s(C),s(ke),s(E);var _e=a(E,2);{var Ie=je=>{var se=Ts();nt(se,5,()=>e(H),vt,(Se,Be)=>{let De=()=>e(Be).level,F=()=>e(Be).slots;const o=Ze(()=>(t(),De(),F(),i(()=>t().classFeatures.spellSlotsByLevel?.[De()]||Array(F()).fill(!1))));var S=Ns(),q=l(S),w=l(q);s(q);var N=a(q,2);nt(N,5,()=>(F(),i(()=>Array(F()))),vt,(_,be,xe)=>{var Ue=Hs();we(Ue),M(()=>Ba(Ue,(B(e(o)),i(()=>e(o)[xe]||!1)))),D("change",Ue,d=>{Z.update(R=>(R.classFeatures.spellSlotsByLevel||(R.classFeatures.spellSlotsByLevel={}),R.classFeatures.spellSlotsByLevel[De()]||(R.classFeatures.spellSlotsByLevel[De()]=Array(F()).fill(!1)),R.classFeatures.spellSlotsByLevel[De()][xe]=d.currentTarget.checked,R))}),c(_,Ue)}),s(N),s(S),M(()=>y(w,`${De()===1?"1st":De()===2?"2nd":De()===3?"3rd":`${De()}th`} Level Spell Slots`)),c(Se,S)}),s(se),c(je,se)};L(_e,je=>{e(H),i(()=>e(H).length>0)&&je(Ie)})}var ze=a(_e,2),Ke=a(l(ze),2);Tt(Ke),s(ze),s(h),M(je=>{y(X,`Spellcasting (${je??""})`),y(Re,e(ye)),y(me,e(he))},[()=>(e(f),i(()=>e(f).spellcastingAbility?.toUpperCase()))]),Fe(Ke,()=>t().classFeatures.preparedSpells,je=>et(Z,i(t).classFeatures.preparedSpells=je,i(t))),c(Je,h)};L(Pe,Je=>{e(f),i(()=>e(f)?.spellcaster)&&Je(Ne)})}var Te=a(Pe,2);nt(Te,1,()=>e(fe),vt,(Je,h)=>{const W=Ze(()=>(e(h),i(()=>e(h).name.replace(/\s+/g,"")))),X=Ze(()=>(t(),B(e(W)),i(()=>t().classFeatures.features[e(W)]))),E=Ze(()=>(B(e(X)),i(()=>Array.isArray(e(X))))),Ae=Ze(()=>typeof e(X)=="number");var Ce=Qs(),Re=l(Ce),ke=l(Re);{var C=se=>{var Se=gt("Channel Divinity:");c(se,Se)};L(ke,se=>{e(h),i(()=>e(h).type==="channelDivinity")&&se(C)})}var me=a(ke);s(Re);var _e=a(Re,2),Ie=l(_e,!0);s(_e);var ze=a(_e,2);{var Ke=se=>{const Se=Ze(()=>(e(h),i(()=>de(e(h))))),Be=Ze(()=>(B(e(E)),B(e(Se)),B(e(X)),i(()=>e(E)?e(X).filter(w=>!w).length:e(Se))));var De=Ws(),F=l(De);{var o=q=>{var w=Os();c(q,w)},S=q=>{var w=zs(),N=l(w),_=l(N);s(N);var be=a(N,2),xe=l(be),Ue=l(xe);s(xe);var d=a(xe,2),R=l(d);s(d),s(be);var V=a(be,2);{var Y=$e=>{var Qe=qs();c($e,Qe)};L(V,$e=>{e(Be)<=0&&$e(Y)})}s(w),M(()=>{N.disabled=e(Be)<=0,y(_,`Use ${e(h),i(()=>e(h).name)??""}`),y(Ue,`${e(Be)??""} / ${e(Se)??""} uses`),y(R,`Resets on ${e(h),i(()=>e(h).resetOn==="short"?"Short Rest":"Long Rest")??""}`)}),D("click",N,()=>{Z.update($e=>{$e.classFeatures.features[e(W)]||($e.classFeatures.features[e(W)]=Array(e(Se)).fill(!1));const Qe=$e.classFeatures.features[e(W)],Xe=Qe.findIndex(He=>!He);return Xe!==-1&&(Qe[Xe]=!0),$e})}),c(q,w)};L(F,q=>{e(Se)===1/0?q(o):q(S,!1)})}s(De),c(se,De)},je=se=>{var Se=lt(),Be=Ge(Se);{var De=o=>{const S=Ze(()=>(e(h),i(()=>ee(e(h)))));var q=Vs(),w=l(q);we(w);var N=a(w,2),_=l(N);s(N);var be=a(N,2),xe=l(be,!0);s(be),s(q),M(()=>{La(w,e(Ae)&&e(X)!==void 0?e(X):e(S)),tt(w,"max",e(S)),y(_,`/ ${e(S)??""}`),y(xe,(e(h),i(()=>e(h).resetOn==="short"?"Short Rest":"Long Rest")))}),D("input",w,Ue=>{Z.update(d=>(d.classFeatures.features[e(W)]=parseInt(Ue.currentTarget.value)||0,d))}),D("click",be,()=>O(e(W),e(S))),c(o,q)},F=o=>{var S=lt(),q=Ge(S);{var w=N=>{var _=Ks(),be=l(_),xe=a(be,2),Ue=l(xe),d=l(Ue);s(Ue),s(xe);var R=a(xe,2);{var V=Y=>{var $e=Js();c(Y,$e)};L(R,Y=>{e(J)<=0&&Y(V)})}s(_),M(()=>{be.disabled=e(J)<=0,y(d,`Resets on ${e(h),i(()=>e(h).resetOn==="short"?"Short Rest":"Long Rest")??""}`)}),D("click",be,te),c(N,_)};L(q,N=>{e(h),i(()=>e(h).type==="channelDivinity")&&N(w)},!0)}c(o,S)};L(Be,o=>{e(h),i(()=>e(h).type==="pool")?o(De):o(F,!1)},!0)}c(se,Se)};L(ze,se=>{e(h),i(()=>e(h).type==="uses")?se(Ke):se(je,!1)})}s(Ce),M(se=>{y(me,` ${e(h),i(()=>e(h).name)??""}`),y(Ie,se)},[()=>(e(h),i(()=>oe(e(h))))]),c(Je,Ce)}),s(m),c(ue,m)};L(Me,ue=>{e(z),i(()=>e(z).length===0)?ue(Le):ue(qe,!1)},!0)}c(U,re)};L(p,U=>{t(),i(()=>!t().class)?U(T):U(Q,!1)})}c(g,A)};L(K,g=>{k(),i(()=>!k().classFeatures)&&g(ie)})}s(ce),M(()=>{pe=ot(ce,1,"class-features svelte-1kpvv0n",null,pe,{hidden:!e(ve)}),tt(Ee,"aria-label",(k(),i(()=>k().classFeatures?"Expand":"Collapse"))),y($,(k(),i(()=>k().classFeatures?"â–¼":"â–²")))}),D("click",Ee,P),c(r,ce),xt(),G()}var el=b('<textarea placeholder="Enter features, traits, and special abilities..." class="svelte-wttn0l"></textarea> <h3 class="svelte-wttn0l">Equipment</h3> <textarea placeholder="List your equipment and inventory..." class="svelte-wttn0l"></textarea> <h3 class="svelte-wttn0l">Notes</h3> <textarea placeholder="Additional notes..." class="svelte-wttn0l"></textarea>',1),tl=b('<section><div class="header svelte-wttn0l"><h2 class="svelte-wttn0l">Features & Traits</h2> <button class="collapse-btn svelte-wttn0l"> </button></div> <!></section>');function al(r,u){kt(u,!1);const t=()=>Oe(wt,"$searchFilter",k),v=()=>Oe(Z,"$character",k),x=()=>Oe(dt,"$collapsedStates",k),[k,j]=Ct(),G=I();function f(){dt.update(he=>({...he,notes:!he.notes}))}Ve(()=>(t(),v()),()=>{n(G,!t()||"features".includes(t().toLowerCase())||"traits".includes(t().toLowerCase())||"equipment".includes(t().toLowerCase())||"notes".includes(t().toLowerCase())||v().features.toLowerCase().includes(t().toLowerCase())||v().equipment.toLowerCase().includes(t().toLowerCase())||v().notes.toLowerCase().includes(t().toLowerCase()))}),Lt(),yt();var z=tl();let le;var H=l(z),J=a(l(H),2),fe=l(J,!0);s(J),s(H);var ve=a(H,2);{var ye=he=>{var O=el(),ne=Ge(O);Tt(ne);var de=a(ne,4);Tt(de);var ee=a(de,4);Tt(ee),Fe(ne,()=>v().features,oe=>et(Z,i(v).features=oe,i(v))),Fe(de,()=>v().equipment,oe=>et(Z,i(v).equipment=oe,i(v))),Fe(ee,()=>v().notes,oe=>et(Z,i(v).notes=oe,i(v))),c(he,O)};L(ve,he=>{x(),i(()=>!x().notes)&&he(ye)})}s(z),M(()=>{le=ot(z,1,"notes svelte-wttn0l",null,le,{hidden:!e(G)}),tt(J,"aria-label",(x(),i(()=>x().notes?"Expand":"Collapse"))),y(fe,(x(),i(()=>x().notes?"â–¼":"â–²")))}),D("click",J,f),c(r,z),xt(),j()}var sl=b('<div class="color-picker-section svelte-1r90jgp"><h3 class="svelte-1r90jgp">Dice Colors</h3> <div class="color-inputs svelte-1r90jgp"><div class="color-input-group svelte-1r90jgp"><label for="dice-color" class="svelte-1r90jgp">Dice Color</label> <input type="color" id="dice-color" class="svelte-1r90jgp"/></div> <div class="color-input-group svelte-1r90jgp"><label for="label-color" class="svelte-1r90jgp">Label Color</label> <input type="color" id="label-color" class="svelte-1r90jgp"/></div> <div class="color-input-group svelte-1r90jgp"><label for="desk-color" class="svelte-1r90jgp">Background Color</label> <input type="color" id="desk-color" class="svelte-1r90jgp"/></div></div></div>'),ll=b('<div class="loading svelte-1r90jgp"><p class="svelte-1r90jgp">Loading 3D dice...</p></div>'),il=b('<div class="custom-dice-selector svelte-1r90jgp"><h3 class="svelte-1r90jgp">Choose Dice to Roll</h3> <div class="dice-inputs svelte-1r90jgp"><div class="dice-input-group svelte-1r90jgp"><label for="d4" class="svelte-1r90jgp">d4</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d4" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d6" class="svelte-1r90jgp">d6</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d6" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d8" class="svelte-1r90jgp">d8</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d8" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d10" class="svelte-1r90jgp">d10</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d10" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d12" class="svelte-1r90jgp">d12</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d12" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d20" class="svelte-1r90jgp">d20</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d20" min="0" max="10"/></div></div> <div class="dice-controls svelte-1r90jgp"><button class="btn btn-primary use-enabled svelte-1r90jgp"> </button> <button class="btn btn-secondary use-enabled svelte-1r90jgp">Reset</button></div></div>'),rl=b('<span class="crit-badge svelte-1r90jgp">CRITICAL!</span>'),nl=b('<p class="svelte-1r90jgp"> </p>'),ol=b('<p class="modifier-text svelte-1r90jgp"> </p>'),cl=b('<button class="btn btn-follow-up svelte-1r90jgp"> </button>'),vl=b('<button class="btn btn-guided-strike svelte-1r90jgp">âš¡ Use Guided Strike (+10)</button>'),dl=b('<div class="follow-up-actions svelte-1r90jgp"><!> <!></div>'),ul=b('<div class="result-header svelte-1r90jgp"><h3 class="svelte-1r90jgp"> </h3> <!></div> <div class="result-total svelte-1r90jgp"> </div> <div class="result-details svelte-1r90jgp"><!> <!></div> <!>',1),pl=b('<div role="button" tabindex="-1"><div class="modal-content svelte-1r90jgp" role="dialog" tabindex="0"><div class="modal-header svelte-1r90jgp"><h2 class="svelte-1r90jgp">Dice Roller</h2> <div class="header-buttons svelte-1r90jgp"><button class="color-btn svelte-1r90jgp" title="Customize dice colors">ðŸŽ¨</button> <button class="close-btn svelte-1r90jgp">Ã—</button></div></div> <!> <!> <div class="dice-main-area svelte-1r90jgp"><div class="dice-container svelte-1r90jgp"></div> <!></div> <div><!></div></div></div>');function fl(r,u){kt(u,!1);const t=()=>Oe(Z,"$character",v),[v,x]=Ct(),k=I(),j=I(),G=I(),f=Mt();let z=Rt(u,"notation",12,""),le=Rt(u,"visible",8,!1),H=Rt(u,"damageNotation",12,""),J=Rt(u,"attackName",12,""),fe=null,ve=I(void 0),ye=I(!1),he=I(""),O=I(null);function ne(){return e(O)?.resultTotal??null}let de=I(0),ee=I(0),oe=I(0),te=I(0),P=I(0),ce=I(0),pe=I(0),ae=I([]),Ee=I(!1),$=I("other"),K=I(!1),ie=I("#051e0a"),g=I("#ffffff"),A=I("#3a2004"),p=I(!1);function T(o){return o.length===9&&o.startsWith("#")?o.substring(0,7):o}function Q(o,S="ff"){return o.length===7&&o.startsWith("#")?o+S:o}function U(){if(window.DICE&&e(ve))try{fe&&e(ve)&&Ca(ve,e(ve).innerHTML="");const o=e(ve).clientWidth||500,S=e(ve).clientHeight||300;fe=new window.DICE.dice_box(e(ve),{w:o,h:S}),n(ye,!0)}catch(o){console.error("Error initializing dice box:",o)}}qt(()=>{const o=w=>new Promise((N,_)=>{if(document.querySelector(`script[src="${w}"]`)){console.log(`Script already loaded: ${w}`),N(null);return}const xe=document.createElement("script");xe.src=w,xe.onload=()=>{console.log(`Loaded: ${w}`),N(null)},xe.onerror=()=>{console.error(`Failed to load: ${w}`),_(new Error(`Failed to load ${w}`))},document.head.appendChild(xe)});setTimeout(()=>{o(`${Nt}/libs/three.min.js`).then(()=>o(`${Nt}/libs/cannon.min.js`)).then(()=>o(`${Nt}/libs/teal.js`)).then(()=>o(`${Nt}/dice.js`)).then(()=>{if(console.log("All scripts loaded, initializing dice box..."),console.log("DICE available:",!!window.DICE),console.log("Container available:",!!e(ve)),window.DICE){const w=window.DICE.getColors();n(ie,T(w.dice_color)),n(g,T(w.label_color)),n(A,T(w.desk_color))}U()}).catch(w=>{console.error("Failed to load dice libraries:",w)})},100);const S=()=>{e(ye)&&(console.log("Window resized, reinitializing dice box..."),U())},q=w=>{le()&&w.key==="Escape"&&Te()};return window.addEventListener("resize",S),window.addEventListener("keydown",q),()=>{window.removeEventListener("resize",S),window.removeEventListener("keydown",q)}});function re(o,S="other"){if(!fe||!e(ye))return;console.log("Rolling dice:",o,"type:",S),n($,S),n(K,!1),fe.diceToRoll=o;const q=N=>(console.log("Before roll:",N),null),w=N=>{if(console.log("After roll:",N),console.log("Result:",N.resultTotal),n(O,N),S==="attack"||S==="check"||S==="save"){const _=N.results?.filter(be=>be.sides===20)||[];if(_.length>0){const be=_[0].value;n(Ee,be===20)}}if(n(ae,[]),S==="attack"&&H())if(e(Ee)){const _=qe(H());e(ae).push({label:`Roll Critical Damage (${_})`,notation:_})}else e(ae).push({label:`Roll Damage (${H()})`,notation:H()})};fe.start_throw(q,w)}function Me(){const o=[];e(de)>0&&o.push(`${e(de)}d4`),e(ee)>0&&o.push(`${e(ee)}d6`),e(oe)>0&&o.push(`${e(oe)}d8`),e(te)>0&&o.push(`${e(te)}d10`),e(P)>0&&o.push(`${e(P)}d12`),e(ce)>0&&o.push(`${e(ce)}d20`);let S=o.join("+")||"1d20";return e(pe)!==0&&(S+=e(pe)>=0?`+${e(pe)}`:`${e(pe)}`),S}function Le(){const o=Me();re(o)}function qe(o){return o.replace(/(\d+)d(\d+)/g,(S,q,w)=>`${parseInt(q)*2}d${w}`)}function ue(){n(de,0),n(ee,0),n(oe,0),n(te,0),n(P,0),n(ce,0),n(pe,0),n(O,null),n(ae,[]),n(Ee,!1),n($,"other"),n(K,!1)}function m(){window.DICE&&(window.DICE.setColors({dice_color:Q(e(ie),"ff"),label_color:Q(e(g),"ff"),desk_color:e(A)}),fe&&(fe.updateDeskColor(e(A)),fe.updateDiceColors()))}function Pe(){n(p,!e(p))}function Ne(){!e(O)||e(j)<=0||e(K)||(n(O,{...e(O),resultTotal:e(O).resultTotal+10,resultString:e(O).resultString+" + 10 (Guided Strike)"}),Z.update(o=>{const S="ChannelDivinity",q=o.classFeatures.features[S];return typeof q=="number"&&q>0&&(o.classFeatures.features[S]=q-1),o}),n(K,!0))}function Te(){f("close"),z(""),H(""),J(""),n(he,""),n(O,null),n(K,!1),ue()}Ve(()=>(t(),Ot),()=>{n(k,t().class?Ot(t().class,t().level,t().subclass).some(S=>S.name==="Guided Strike"):!1)}),Ve(()=>t(),()=>{n(j,(()=>{const S=t().classFeatures.features["ChannelDivinity"];return typeof S=="number"?S:0})())}),Ve(()=>(e(de),e(ee),e(oe),e(te),e(P),e(ce),e(pe)),()=>{n(G,(()=>{const o=[];e(de)>0&&o.push(`${e(de)}d4`),e(ee)>0&&o.push(`${e(ee)}d6`),e(oe)>0&&o.push(`${e(oe)}d8`),e(te)>0&&o.push(`${e(te)}d10`),e(P)>0&&o.push(`${e(P)}d12`),e(ce)>0&&o.push(`${e(ce)}d20`);let S=o.join("+")||"1d20";return e(pe)!==0&&(S+=e(pe)>=0?`+${e(pe)}`:`${e(pe)}`),S})())}),Ve(()=>(B(z()),e(ye),B(le()),e(he),B(H()),B(J())),()=>{if(z()&&e(ye)&&le()&&z()!==e(he)){n(he,z()),n(O,null),n(ae,[]),n(Ee,!1),n(K,!1);const o=z().includes("1d20")?"attack":"other";console.log("Auto-roll triggered. notation:",z(),"damageNotation:",H(),"attackName:",J()),setTimeout(()=>re(z(),o),200)}}),Lt();var Je={getLastRollTotal:ne};yt();var h=pl();let W;var X=l(h),E=l(X),Ae=a(l(E),2),Ce=l(Ae),Re=a(Ce,2);s(Ae),s(E);var ke=a(E,2);{var C=o=>{var S=sl(),q=a(l(S),2),w=l(q),N=a(l(w),2);we(N),s(w);var _=a(w,2),be=a(l(_),2);we(be),s(_);var xe=a(_,2),Ue=a(l(xe),2);we(Ue),s(xe),s(q),s(S),Fe(N,()=>e(ie),d=>n(ie,d)),D("change",N,m),Fe(be,()=>e(g),d=>n(g,d)),D("change",be,m),Fe(Ue,()=>e(A),d=>n(A,d)),D("change",Ue,m),c(o,S)};L(ke,o=>{e(p)&&o(C)})}var me=a(ke,2);{var _e=o=>{var S=ll();c(o,S)};L(me,o=>{e(ye)||o(_e)})}var Ie=a(me,2),ze=l(Ie);na(ze,o=>n(ve,o),()=>e(ve));var Ke=a(ze,2);{var je=o=>{var S=il(),q=a(l(S),2),w=l(q),N=a(l(w),2);we(N),s(w);var _=a(w,2),be=a(l(_),2);we(be),s(_);var xe=a(_,2),Ue=a(l(xe),2);we(Ue),s(xe);var d=a(xe,2),R=a(l(d),2);we(R),s(d);var V=a(d,2),Y=a(l(V),2);we(Y),s(V);var $e=a(V,2),Qe=a(l($e),2);we(Qe),s($e),s(q);var Xe=a(q,2),He=l(Xe),at=l(He);s(He);var bt=a(He,2);s(Xe),s(S),M(()=>{He.disabled=!e(ye),y(at,`Roll ${e(G)??""}`)}),Fe(N,()=>e(de),ge=>n(de,ge)),Fe(be,()=>e(ee),ge=>n(ee,ge)),Fe(Ue,()=>e(oe),ge=>n(oe,ge)),Fe(R,()=>e(te),ge=>n(te,ge)),Fe(Y,()=>e(P),ge=>n(P,ge)),Fe(Qe,()=>e(ce),ge=>n(ce,ge)),D("click",He,Le),D("click",bt,ue),c(o,S)};L(Ke,o=>{z()||o(je)})}s(Ie);var se=a(Ie,2);let Se;var Be=l(se);{var De=o=>{var S=ul(),q=Ge(S),w=l(q),N=l(w,!0);s(w);var _=a(w,2);{var be=He=>{var at=rl();c(He,at)};L(_,He=>{e(Ee)&&He(be)})}s(q);var xe=a(q,2),Ue=l(xe,!0);s(xe);var d=a(xe,2),R=l(d);{var V=He=>{var at=nl(),bt=l(at,!0);s(at),M(()=>y(bt,(e(O),i(()=>e(O).resultString)))),c(He,at)};L(R,He=>{e(O),i(()=>e(O).resultString)&&He(V)})}var Y=a(R,2);{var $e=He=>{var at=ol(),bt=l(at);s(at),M(()=>y(bt,`Modifier: ${e(O),i(()=>e(O).constant>=0?"+":"")??""}${e(O),i(()=>e(O).constant)??""}`)),c(He,at)};L(Y,He=>{e(O),i(()=>e(O).constant)&&He($e)})}s(d);var Qe=a(d,2);{var Xe=He=>{var at=dl(),bt=l(at);nt(bt,1,()=>e(ae),vt,(ht,Ye)=>{var it=cl(),mt=l(it,!0);s(it),M(()=>y(mt,(e(Ye),i(()=>e(Ye).label)))),D("click",it,()=>re(e(Ye).notation,"damage")),c(ht,it)});var ge=a(bt,2);{var We=ht=>{var Ye=vl();M(()=>{Ye.disabled=e(j)<=0,tt(Ye,"title",e(j)<=0?"No Channel Divinity uses remaining":"Use Channel Divinity to add +10 to this attack roll")}),D("click",Ye,Ne),c(ht,Ye)};L(ge,ht=>{e(k)&&e($)==="attack"&&!e(K)&&ht(We)})}s(at),c(He,at)};L(Qe,He=>{e(ae),e(k),e($),e(K),i(()=>e(ae).length>0||e(k)&&e($)==="attack"&&!e(K))&&He(Xe)})}M(()=>{y(N,J()?`${J()} - Result`:"Result"),y(Ue,(e(O),i(()=>e(O).resultTotal)))}),c(o,S)};L(Be,o=>{e(O)&&o(De)})}s(se),s(X),s(h),M(()=>{W=ot(h,1,"modal-overlay svelte-1r90jgp",null,W,{hidden:!le()}),Se=ot(se,1,"roll-result svelte-1r90jgp",null,Se,{"has-result":e(O)})}),D("click",Ce,Pe),D("click",Re,Te),D("click",X,ua(function(o){It.call(this,u,o)})),D("keydown",X,function(o){It.call(this,u,o)}),D("click",h,Te),D("keydown",h,o=>o.key==="Escape"&&Te()),c(r,h),Oa(u,"getLastRollTotal",ne);var F=xt(Je);return x(),F}const Xt="https://api.github.com/gists";async function bl(r,u,t){if(!u)throw new Error("GitHub token is required");const v=JSON.stringify(r,null,2),x=`${r.name||"character"}_dnd.json`,k={description:t||`D&D Character: ${r.name}`,public:!1,files:{[x]:{content:v}}},j=await fetch(Xt,{method:"POST",headers:{Authorization:`token ${u}`,"Content-Type":"application/json"},body:JSON.stringify(k)});if(!j.ok)throw new Error(`Failed to create gist: ${j.statusText}`);return(await j.json()).id}async function gl(r,u,t){if(!u||!t)throw new Error("GitHub token and Gist ID are required");const v=JSON.stringify(r,null,2),k={files:{[`${r.name||"character"}_dnd.json`]:{content:v}}},j=await fetch(`${Xt}/${t}`,{method:"PATCH",headers:{Authorization:`token ${u}`,"Content-Type":"application/json"},body:JSON.stringify(k)});if(!j.ok)throw new Error(`Failed to update gist: ${j.statusText}`)}async function hl(r,u){if(!r)throw new Error("Gist ID is required");const t={"Content-Type":"application/json"};u&&(t.Authorization=`token ${u}`);const v=await fetch(`${Xt}/${r}`,{method:"GET",headers:t});if(!v.ok)throw new Error(`Failed to load gist: ${v.statusText}`);const x=await v.json(),k=Object.values(x.files);if(k.length===0)throw new Error("No files found in gist");const G=k[0].content;try{const f=JSON.parse(G);return f.attacks&&Array.isArray(f.attacks)&&(f.attacks=f.attacks.map(z=>({...z,id:z.id||crypto.randomUUID()}))),f.classFeatures?(f.classFeatures.features||(f.classFeatures.features={}),f.classFeatures.spellSlots||(f.classFeatures.spellSlots=[]),f.classFeatures.preparedSpells===void 0&&(f.classFeatures.preparedSpells="")):f.classFeatures={features:{},spellSlots:[],preparedSpells:""},f}catch{throw new Error("Invalid character data in gist")}}function ha(r){typeof window<"u"&&localStorage.setItem("dnd_gist_config",JSON.stringify(r))}function ml(){if(typeof window<"u"){const r=localStorage.getItem("dnd_gist_config");if(r)return JSON.parse(r)}return{}}async function _l(r,u=30){if(!r)throw new Error("GitHub token is required to list gists");const t=await fetch(`${Xt}?per_page=${u}`,{method:"GET",headers:{Authorization:`token ${r}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Failed to list gists: ${t.statusText}`);return await t.json()}var yl=b('<div class="error-message svelte-1jb5ckg"> </div>'),kl=b('<div class="toggle-container svelte-1jb5ckg"><button type="button" class="toggle-btn svelte-1jb5ckg"> </button></div>'),xl=b('<div class="form-group svelte-1jb5ckg"><label for="gistId" class="svelte-1jb5ckg">Gist ID (leave empty to create new)</label> <input type="text" id="gistId" placeholder="Optional: existing Gist ID to update" class="svelte-1jb5ckg"/></div>'),$l=b('<div class="loading-message svelte-1jb5ckg">Loading your gists...</div>'),Cl=b('<button type="button"><div class="gist-item-header svelte-1jb5ckg"><span class="gist-description svelte-1jb5ckg"> </span> <span class="gist-visibility svelte-1jb5ckg"> </span></div> <div class="gist-item-meta svelte-1jb5ckg"><span class="gist-id svelte-1jb5ckg"> </span> <span class="gist-date svelte-1jb5ckg"> </span></div></button>'),Sl=b('<div class="form-group svelte-1jb5ckg"><div class="gist-list-label svelte-1jb5ckg">Select a Gist to Update (or leave unselected to create new)</div> <div class="gist-list svelte-1jb5ckg"></div></div>'),Ll=b('<div class="info-message svelte-1jb5ckg">No gists found. A new one will be created.</div>'),jl=b('<!> <div class="form-group svelte-1jb5ckg"><label for="description" class="svelte-1jb5ckg"> </label> <input type="text" id="description" placeholder="D&amp;D Character Sheet" class="svelte-1jb5ckg"/></div>',1),wl=b('<div class="form-group svelte-1jb5ckg"><label for="gistId" class="svelte-1jb5ckg">Gist ID *</label> <input type="text" id="gistId" placeholder="Enter Gist ID (for public or your private gists)" required class="svelte-1jb5ckg"/></div>'),Dl=b('<div class="loading-message svelte-1jb5ckg">Loading your gists...</div>'),Fl=b('<button type="button"><div class="gist-item-header svelte-1jb5ckg"><span class="gist-description svelte-1jb5ckg"> </span> <span class="gist-visibility svelte-1jb5ckg"> </span></div> <div class="gist-item-meta svelte-1jb5ckg"><span class="gist-id svelte-1jb5ckg"> </span> <span class="gist-date svelte-1jb5ckg"> </span></div></button>'),Al=b('<div class="form-group svelte-1jb5ckg"><div class="gist-list-label svelte-1jb5ckg">Select a Gist to Load</div> <div class="gist-list svelte-1jb5ckg"></div></div>'),Rl=b('<div class="info-message svelte-1jb5ckg">No gists found. Enter a Gist ID manually or create a new one in Save mode.</div>'),Il=b('<div class="modal-overlay svelte-1jb5ckg" role="button" tabindex="-1"><div class="modal-content svelte-1jb5ckg" role="dialog" tabindex="0"><div class="modal-header svelte-1jb5ckg"><h2 class="svelte-1jb5ckg"> </h2> <button class="close-btn svelte-1jb5ckg">Ã—</button></div> <div class="modal-body svelte-1jb5ckg"><!> <div class="form-group svelte-1jb5ckg"><label for="token" class="svelte-1jb5ckg"> <a href="https://github.com/settings/tokens" target="_blank" rel="noopener" class="svelte-1jb5ckg">Get token</a></label> <input type="password" id="token" placeholder="ghp_xxxxxxxxxxxxx" class="svelte-1jb5ckg"/></div> <!> <!> <div class="modal-actions svelte-1jb5ckg"><button class="btn btn-primary svelte-1jb5ckg"><!></button> <button class="btn btn-secondary svelte-1jb5ckg">Cancel</button></div></div></div></div>');function Ml(r,u){kt(u,!1);const t=()=>Oe(Z,"$character",v),[v,x]=Ct(),k=Mt();let j=Rt(u,"mode",8,"save"),G=I(""),f=I(""),z=I(""),le=I(!1),H=I(""),J=I(!1),fe=I(!1),ve=I([]),ye=I(null);const he=ml();he.token&&n(G,he.token),he.gistId&&n(f,he.gistId),qt(async()=>{e(G)&&!e(J)&&await O()});async function O(){if(e(G)){n(fe,!0),n(H,"");try{n(ve,await _l(e(G))),e(f)&&n(ye,e(ve).find(h=>h.id===e(f))||null)}catch(h){n(H,h.message||"Failed to load gists"),n(ve,[])}finally{n(fe,!1)}}}function ne(h){n(ye,h),n(f,h.id)}function de(){n(J,!e(J)),n(H,""),!e(J)&&e(G)&&O()}async function ee(){if(!e(G)){n(H,"GitHub token is required");return}const h=e(ye)?.id||e(f);n(le,!0),n(H,"");try{if(h)await gl(t(),e(G),h),n(f,h),sa.add("Character updated in Gist successfully!","success");else{const W=await bl(t(),e(G),e(z));n(f,W),sa.add(`Character saved to Gist! ID: ${W}`,"success")}ha({token:e(G),gistId:e(f)}),k("close")}catch(W){n(H,W.message||"Failed to save to Gist")}finally{n(le,!1)}}async function oe(){const h=e(ye)?.id||e(f);if(!h){n(H,"Please select a gist or enter a Gist ID");return}n(le,!0),n(H,"");try{const W=await hl(h,e(G)||void 0);Z.set(W),n(f,h),ha({token:e(G),gistId:e(f)}),sa.add("Character loaded from Gist successfully!","success"),k("close")}catch(W){n(H,W.message||"Failed to load from Gist")}finally{n(le,!1)}}function te(){k("close")}yt();var P=Il(),ce=l(P),pe=l(ce),ae=l(pe),Ee=l(ae,!0);s(ae);var $=a(ae,2);s(pe);var K=a(pe,2),ie=l(K);{var g=h=>{var W=yl(),X=l(W,!0);s(W),M(()=>y(X,e(H))),c(h,W)};L(ie,h=>{e(H)&&h(g)})}var A=a(ie,2),p=l(A),T=l(p);Sa(),s(p);var Q=a(p,2);we(Q),s(A);var U=a(A,2);{var re=h=>{var W=kl(),X=l(W),E=l(X,!0);s(X),s(W),M(()=>{X.disabled=e(le),y(E,e(J)?"ðŸ“‹ Show My Gists":"âœï¸ Enter Gist ID Manually")}),D("click",X,de),c(h,W)};L(U,h=>{(j()==="load"||j()==="save"&&e(G))&&h(re)})}var Me=a(U,2);{var Le=h=>{var W=jl(),X=Ge(W);{var E=me=>{var _e=xl(),Ie=a(l(_e),2);we(Ie),s(_e),M(()=>Ie.disabled=e(le)),Fe(Ie,()=>e(f),ze=>n(f,ze)),c(me,_e)},Ae=me=>{var _e=lt(),Ie=Ge(_e);{var ze=je=>{var se=$l();c(je,se)},Ke=je=>{var se=lt(),Se=Ge(se);{var Be=F=>{var o=Sl(),S=a(l(o),2);nt(S,5,()=>e(ve),vt,(q,w)=>{var N=Cl();let _;var be=l(N),xe=l(be),Ue=l(xe,!0);s(xe);var d=a(xe,2),R=l(d,!0);s(d),s(be);var V=a(be,2),Y=l(V),$e=l(Y);s(Y);var Qe=a(Y,2),Xe=l(Qe);s(Qe),s(V),s(N),M(He=>{_=ot(N,1,"gist-item svelte-1jb5ckg",null,_,{selected:e(ye)?.id===e(w).id}),N.disabled=e(le),y(Ue,(e(w),i(()=>e(w).description||"Untitled"))),y(R,(e(w),i(()=>e(w).public?"ðŸŒ Public":"ðŸ”’ Private"))),y($e,`ID: ${e(w),i(()=>e(w).id)??""}`),y(Xe,`Updated: ${He??""}`)},[()=>(e(w),i(()=>new Date(e(w).updated_at).toLocaleDateString()))]),D("click",N,()=>ne(e(w))),c(q,N)}),s(S),s(o),c(F,o)},De=F=>{var o=lt(),S=Ge(o);{var q=w=>{var N=Ll();c(w,N)};L(S,w=>{e(G)&&w(q)},!0)}c(F,o)};L(Se,F=>{e(ve),i(()=>e(ve).length>0)?F(Be):F(De,!1)},!0)}c(je,se)};L(Ie,je=>{e(fe)?je(ze):je(Ke,!1)},!0)}c(me,_e)};L(X,me=>{e(J)||!e(G)?me(E):me(Ae,!1)})}var Ce=a(X,2),Re=l(Ce),ke=l(Re);s(Re);var C=a(Re,2);we(C),s(Ce),M(()=>{y(ke,`Description ${e(f)?"(optional)":""}`),C.disabled=e(le)}),Fe(C,()=>e(z),me=>n(z,me)),c(h,W)},qe=h=>{var W=lt(),X=Ge(W);{var E=Ce=>{var Re=wl(),ke=a(l(Re),2);we(ke),s(Re),M(()=>ke.disabled=e(le)),Fe(ke,()=>e(f),C=>n(f,C)),c(Ce,Re)},Ae=Ce=>{var Re=lt(),ke=Ge(Re);{var C=_e=>{var Ie=Dl();c(_e,Ie)},me=_e=>{var Ie=lt(),ze=Ge(Ie);{var Ke=se=>{var Se=Al(),Be=a(l(Se),2);nt(Be,5,()=>e(ve),vt,(De,F)=>{var o=Fl();let S;var q=l(o),w=l(q),N=l(w,!0);s(w);var _=a(w,2),be=l(_,!0);s(_),s(q);var xe=a(q,2),Ue=l(xe),d=l(Ue);s(Ue);var R=a(Ue,2),V=l(R);s(R),s(xe),s(o),M(Y=>{S=ot(o,1,"gist-item svelte-1jb5ckg",null,S,{selected:e(ye)?.id===e(F).id}),o.disabled=e(le),y(N,(e(F),i(()=>e(F).description||"Untitled"))),y(be,(e(F),i(()=>e(F).public?"ðŸŒ Public":"ðŸ”’ Private"))),y(d,`ID: ${e(F),i(()=>e(F).id)??""}`),y(V,`Updated: ${Y??""}`)},[()=>(e(F),i(()=>new Date(e(F).updated_at).toLocaleDateString()))]),D("click",o,()=>ne(e(F))),c(De,o)}),s(Be),s(Se),c(se,Se)},je=se=>{var Se=lt(),Be=Ge(Se);{var De=F=>{var o=Rl();c(F,o)};L(Be,F=>{e(G)&&F(De)},!0)}c(se,Se)};L(ze,se=>{e(ve),i(()=>e(ve).length>0)?se(Ke):se(je,!1)},!0)}c(_e,Ie)};L(ke,_e=>{e(fe)?_e(C):_e(me,!1)},!0)}c(Ce,Re)};L(X,Ce=>{e(J)||!e(G)?Ce(E):Ce(Ae,!1)})}c(h,W)};L(Me,h=>{j()==="save"?h(Le):h(qe,!1)})}var ue=a(Me,2),m=l(ue),Pe=l(m);{var Ne=h=>{var W=gt();M(()=>y(W,j()==="save"?"Saving...":"Loading...")),c(h,W)},Te=h=>{var W=gt();M(()=>y(W,j()==="save"?"Save":"Load")),c(h,W)};L(Pe,h=>{e(le)?h(Ne):h(Te,!1)})}s(m);var Je=a(m,2);s(ue),s(K),s(ce),s(P),M(()=>{y(Ee,j()==="save"?"Save to GitHub Gist":"Load from GitHub Gist"),y(T,`GitHub Token ${j()==="load"?"(optional for public gists)":"(required)"} `),Q.disabled=e(le),m.disabled=e(le),Je.disabled=e(le)}),D("click",$,te),Fe(Q,()=>e(G),h=>n(G,h)),D("blur",Q,()=>{e(G)&&!e(J)&&O()}),D("click",m,function(...h){(j()==="save"?ee:oe)?.apply(this,h)}),D("click",Je,te),D("click",ce,ua(function(h){It.call(this,u,h)})),D("keydown",ce,function(h){It.call(this,u,h)}),D("click",P,te),D("keydown",P,h=>h.key==="Escape"&&te()),c(r,P),xt(),x()}var El=b('<div class="loading svelte-1ngjemu">Loading D&D data...</div>'),Pl=b("<option> </option>"),Bl=b('<select class="level-filter svelte-1ngjemu"><option>All Levels</option><option>Cantrip</option><!></select>'),Ul=b('<div class="no-results svelte-1ngjemu"> </div>'),Hl=b('<div class="item-meta svelte-1ngjemu"> </div>'),Nl=b('<div class="item-meta svelte-1ngjemu"> </div>'),Tl=b('<button><div class="item-name svelte-1ngjemu"> </div> <!></button>'),Gl=b('<p class="higher-levels"><strong>At Higher Levels:</strong> </p>'),Ol=b('<p class="cantrip-upgrade"><strong>Cantrip Upgrade:</strong> </p>'),ql=b('<h3 class="svelte-1ngjemu"> </h3> <p class="spell-meta svelte-1ngjemu"><!> <!></p> <p class="spell-classes"><strong>Classes:</strong> </p> <div class="spell-stats svelte-1ngjemu"><div><strong>Casting Time:</strong> </div> <div><strong>Range:</strong> </div> <div><strong>Components:</strong> <!></div> <div><strong>Duration:</strong> <!> </div></div> <p class="description svelte-1ngjemu"> </p> <!> <!>',1),zl=b('<p class="prerequisite svelte-1ngjemu"><strong>Prerequisite:</strong> </p>'),Wl=b('<h3 class="svelte-1ngjemu"> </h3> <!> <p class="description svelte-1ngjemu"> </p> <a target="_blank" rel="noopener" class="source-link svelte-1ngjemu">View Full Details â†’</a>',1),Vl=b('<div class="item-details svelte-1ngjemu"><!></div>'),Jl=b('<div class="controls svelte-1ngjemu"><div class="tabs svelte-1ngjemu"><button> </button> <button> </button></div> <div class="search-controls svelte-1ngjemu"><input type="text" placeholder="Search by name or description..." class="search-input svelte-1ngjemu"/> <!></div></div> <div class="content-container svelte-1ngjemu"><div class="items-list svelte-1ngjemu"><!></div> <!></div>',1),Kl=b('<div class="modal-backdrop svelte-1ngjemu" role="presentation"><div class="modal svelte-1ngjemu" role="dialog" aria-modal="true" tabindex="-1"><div class="modal-header svelte-1ngjemu"><h2 class="svelte-1ngjemu">Browse D&D Spells & Feats</h2> <button class="close-btn svelte-1ngjemu" aria-label="Close">&times;</button></div> <div class="modal-body svelte-1ngjemu"><!></div> <div class="modal-footer svelte-1ngjemu"><button class="btn-secondary svelte-1ngjemu">Cancel</button> <button class="btn-primary svelte-1ngjemu">Add to Character Sheet</button></div></div></div>');function Ql(r,u){kt(u,!1);const t=I(),v=I(),x=I();let k=Rt(u,"onClose",8),j=I("spell"),G=I(!0),f=I(""),z=I(null),le=I([]),H=I([]),J=I(null);qt(async()=>{n(G,!0);try{n(le,await Da()),n(H,await ds())}catch($){console.error("Failed to load data:",$)}finally{n(G,!1)}});function fe($){n(J,$)}function ve($){const K=$.match(/(\d+d\d+(?:\s*\+\s*\d+)?)/i);return K?K[1]:""}function ye($){const K=$.split(/\.( |$)/)[0].trim(),ie=Array.from($.matchAll(/\*\*(.*?)\*\*/g)).map(A=>A[1].replace(/\.$/,""));let g=K;return ie.length&&(g+=" | Effects: "+ie.join(", ")),g}function he(){if(e(J)){if(e(j)==="spell"){const $=e(J);Z.update(K=>{const g=[];$.range&&g.push(`Range: ${$.range}`),$.castingTime&&g.push(`Cast: ${$.castingTime}`),$.duration&&g.push(`Duration: ${$.duration}`),$.actionType==="Save"&&g.push("Saving throw spell"),$.components&&$.components.length>0&&g.push(`Components: ${$.components.join(", ")}`),$.material&&g.push(`Material: ${$.material}`);const A=g.join(" | "),p=ye($.description),T={id:crypto.randomUUID(),name:`${$.name}${$.concentration?" (C)":""}${$.ritual?" (R)":""}`,bonus:$.actionType==="Attack"?5:0,damage:ve($.description),damageType:`${$.school} (Lvl ${$.level})`,spellRef:$.name,infoNotes:A,generalNotes:p,castAtLevel:$.level};return K.attacks=[...K.attacks,T],K})}else if(e(j)==="feat"){const $=e(J);Z.update(K=>{const ie=`${$.name}${$.prerequisite?` (Req: ${$.prerequisite})`:""}
${$.description}
`;return K.features=K.features?`${K.features}
${ie}`:ie,K})}n(J,null),k()()}}Ve(()=>(e(z),e(le),e(f)),()=>{n(t,e(z)!==null?us(ga(e(le),e(f)),e(z)):ga(e(le),e(f)))}),Ve(()=>(e(H),e(f)),()=>{n(v,ps(e(H),e(f)))}),Ve(()=>(e(j),e(t),e(v)),()=>{n(x,e(j)==="spell"?e(t):e(v))}),Lt(),yt();var O=Kl(),ne=l(O),de=l(ne),ee=a(l(de),2);s(de);var oe=a(de,2),te=l(oe);{var P=$=>{var K=El();c($,K)},ce=$=>{var K=Jl(),ie=Ge(K),g=l(ie),A=l(g);let p;var T=l(A);s(A);var Q=a(A,2);let U;var re=l(Q);s(Q),s(g);var Me=a(g,2),Le=l(Me);we(Le);var qe=a(Le,2);{var ue=X=>{var E=Bl();M(()=>{e(z),St(()=>{})});var Ae=l(E);Ae.value=(Ae.__value=null)??"";var Ce=a(Ae);Ce.value=Ce.__value=0;var Re=a(Ce);nt(Re,0,()=>[1,2,3,4,5,6,7,8,9],vt,(ke,C)=>{var me=Pl(),_e=l(me);s(me);var Ie={};M(()=>{y(_e,`Level ${C??""}`),Ie!==(Ie=C)&&(me.value=(me.__value=C)??"")}),c(ke,me)}),s(E),ja(E,()=>e(z),ke=>n(z,ke)),c(X,E)};L(qe,X=>{e(j)==="spell"&&X(ue)})}s(Me),s(ie);var m=a(ie,2),Pe=l(m),Ne=l(Pe);{var Te=X=>{var E=Ul(),Ae=l(E);s(E),M(()=>y(Ae,`No ${e(j)??""}s found`)),c(X,E)},Je=X=>{var E=lt(),Ae=Ge(E);nt(Ae,1,()=>e(x),vt,(Ce,Re)=>{var ke=Tl();let C;var me=l(ke),_e=l(me,!0);s(me);var Ie=a(me,2);{var ze=je=>{const se=Ze(()=>e(Re));var Se=Hl(),Be=l(Se);s(Se),M(()=>y(Be,`Level ${B(e(se)),i(()=>e(se).level)??""} â€¢ ${B(e(se)),i(()=>e(se).school)??""}`)),c(je,Se)},Ke=je=>{const se=Ze(()=>e(Re));var Se=lt(),Be=Ge(Se);{var De=F=>{var o=Nl(),S=l(o,!0);s(o),M(()=>y(S,(B(e(se)),i(()=>e(se).prerequisite)))),c(F,o)};L(Be,F=>{B(e(se)),i(()=>e(se).prerequisite)&&F(De)})}c(je,Se)};L(Ie,je=>{e(j)==="spell"?je(ze):je(Ke,!1)})}s(ke),M(()=>{C=ot(ke,1,"item-card svelte-1ngjemu",null,C,{selected:e(J)?.name===e(Re).name}),y(_e,(e(Re),i(()=>e(Re).name)))}),D("click",ke,()=>fe(e(Re))),c(Ce,ke)}),c(X,E)};L(Ne,X=>{e(x),i(()=>e(x).length===0)?X(Te):X(Je,!1)})}s(Pe);var h=a(Pe,2);{var W=X=>{var E=Vl(),Ae=l(E);{var Ce=ke=>{const C=Ze(()=>e(J));var me=ql(),_e=Ge(me),Ie=l(_e,!0);s(_e);var ze=a(_e,2),Ke=l(ze);{var je=ge=>{var We=gt();M(()=>y(We,`${B(e(C)),i(()=>e(C).school)??""} cantrip`)),c(ge,We)},se=ge=>{var We=gt();M(()=>y(We,`Level ${B(e(C)),i(()=>e(C).level)??""} ${B(e(C)),i(()=>e(C).school)??""}`)),c(ge,We)};L(Ke,ge=>{B(e(C)),i(()=>e(C).level===0)?ge(je):ge(se,!1)})}var Se=a(Ke,2);{var Be=ge=>{var We=gt("(ritual)");c(ge,We)};L(Se,ge=>{B(e(C)),i(()=>e(C).ritual)&&ge(Be)})}s(ze);var De=a(ze,2),F=a(l(De));s(De);var o=a(De,2),S=l(o),q=a(l(S));s(S);var w=a(S,2),N=a(l(w));s(w);var _=a(w,2),be=a(l(_)),xe=a(be);{var Ue=ge=>{var We=gt();M(()=>y(We,`(${B(e(C)),i(()=>e(C).material)??""})`)),c(ge,We)};L(xe,ge=>{B(e(C)),i(()=>e(C).material)&&ge(Ue)})}s(_);var d=a(_,2),R=a(l(d),2);{var V=ge=>{var We=gt("Concentration,");c(ge,We)};L(R,ge=>{B(e(C)),i(()=>e(C).concentration)&&ge(V)})}var Y=a(R,1,!0);s(d),s(o);var $e=a(o,2),Qe=l($e,!0);s($e);var Xe=a($e,2);{var He=ge=>{var We=Gl(),ht=a(l(We));s(We),M(()=>y(ht,` ${B(e(C)),i(()=>e(C).higherLevelSlot)??""}`)),c(ge,We)};L(Xe,ge=>{B(e(C)),i(()=>e(C).higherLevelSlot)&&ge(He)})}var at=a(Xe,2);{var bt=ge=>{var We=Ol(),ht=a(l(We));s(We),M(()=>y(ht,` ${B(e(C)),i(()=>e(C).cantripUpgrade)??""}`)),c(ge,We)};L(at,ge=>{B(e(C)),i(()=>e(C).cantripUpgrade)&&ge(bt)})}M((ge,We)=>{y(Ie,(B(e(C)),i(()=>e(C).name))),y(F,` ${ge??""}`),y(q,` ${B(e(C)),i(()=>e(C).castingTime||e(C).actionType)??""}`),y(N,` ${B(e(C)),i(()=>e(C).range)??""}`),y(be,` ${We??""}`),y(Y,(B(e(C)),i(()=>e(C).duration))),y(Qe,(B(e(C)),i(()=>e(C).description)))},[()=>(B(e(C)),i(()=>e(C).classes.join(", "))),()=>(B(e(C)),i(()=>e(C).components.join(", ").toUpperCase()))]),c(ke,me)},Re=ke=>{const C=Ze(()=>e(J));var me=Wl(),_e=Ge(me),Ie=l(_e,!0);s(_e);var ze=a(_e,2);{var Ke=Be=>{var De=zl(),F=a(l(De));s(De),M(()=>y(F,` ${B(e(C)),i(()=>e(C).prerequisite)??""}`)),c(Be,De)};L(ze,Be=>{B(e(C)),i(()=>e(C).prerequisite)&&Be(Ke)})}var je=a(ze,2),se=l(je,!0);s(je);var Se=a(je,2);M(()=>{y(Ie,(B(e(C)),i(()=>e(C).name))),y(se,(B(e(C)),i(()=>e(C).description))),tt(Se,"href",(B(e(C)),i(()=>e(C).source)))}),c(ke,me)};L(Ae,ke=>{e(j)==="spell"?ke(Ce):ke(Re,!1)})}s(E),c(X,E)};L(h,X=>{e(J)&&X(W)})}s(m),M(()=>{p=ot(A,1,"tab svelte-1ngjemu",null,p,{active:e(j)==="spell"}),y(T,`ðŸ“œ Spells (${e(le),i(()=>e(le).length)??""})`),U=ot(Q,1,"tab svelte-1ngjemu",null,U,{active:e(j)==="feat"}),y(re,`â­ Feats (${e(H),i(()=>e(H).length)??""})`)}),D("click",A,()=>{n(j,"spell"),n(J,null),n(f,"")}),D("click",Q,()=>{n(j,"feat"),n(J,null),n(f,"")}),Fe(Le,()=>e(f),X=>n(f,X)),c($,K)};L(te,$=>{e(G)?$(P):$(ce,!1)})}s(oe);var pe=a(oe,2),ae=l(pe),Ee=a(ae,2);s(pe),s(ne),s(O),M(()=>Ee.disabled=!e(J)),D("click",ee,function(...$){k()?.apply(this,$)}),D("click",ae,function(...$){k()?.apply(this,$)}),D("click",Ee,he),D("click",ne,ua(function($){It.call(this,u,$)})),D("keydown",ne,function($){It.call(this,u,$)}),D("click",O,function(...$){k()?.apply(this,$)}),D("keydown",O,$=>$.key==="Escape"&&k()()),c(r,O),xt()}var Xl=b('<link rel="icon" type="image/png" href="/favicon.png"/> <meta name="viewport" content="width=device-width, initial-scale=1"/>',1),Yl=b('<span class="character-name svelte-1uha8ag"> </span>'),Zl=b("<span> </span>"),ei=b('<div class="spell-slots-header svelte-1uha8ag"></div>'),ti=b('<div class="rest-menu svelte-1uha8ag"><button class="rest-option svelte-1uha8ag">â˜• Short Rest</button> <button class="rest-option svelte-1uha8ag">ðŸ›ï¸ Long Rest</button></div>'),ai=b('<div class="container svelte-1uha8ag"><header class="svelte-1uha8ag"><div class="header-top svelte-1uha8ag"><div class="header-title svelte-1uha8ag"><div class="title-row svelte-1uha8ag"><h1 class="svelte-1uha8ag">D&D Character Sheet</h1> <!></div> <!></div> <div class="header-right svelte-1uha8ag"><div class="header-controls svelte-1uha8ag"><button class="btn btn-secondary use-enabled"><span class="btn-icon svelte-1uha8ag">ðŸŽ²</span><span class="btn-text svelte-1uha8ag">Roll Dice</span></button> <div class="rest-button-container svelte-1uha8ag"><button class="btn btn-secondary use-enabled"><span class="btn-icon svelte-1uha8ag">ðŸ˜´</span><span class="btn-text svelte-1uha8ag">Rest</span></button> <!></div> <div class="mode-toggle"><button><span class="btn-icon svelte-1uha8ag"> </span><span class="btn-text svelte-1uha8ag"> </span></button></div></div> <div class="header-search svelte-1uha8ag"><input type="text" placeholder="ðŸ” Search..." class="search-input use-enabled svelte-1uha8ag"/></div></div></div> <div class="header-actions svelte-1uha8ag"><button class="btn btn-mode svelte-1uha8ag">ðŸ“š Browse Spells & Feats</button> <button class="btn btn-secondary">Save to Gist</button> <button class="btn btn-secondary">Load from Gist</button> <button class="btn btn-secondary">Export JSON</button> <button class="btn btn-secondary">Import JSON</button> <input type="file" accept=".json" style="display: none;"/></div></header> <main class="svelte-1uha8ag"><!> <!> <!> <!> <!> <!> <!></main></div> <!> <!> <!>',1);function di(r,u){kt(u,!1);const t=()=>Oe(Z,"$character",k),v=()=>Oe(Jt,"$isEditMode",k),x=()=>Oe(wt,"$searchFilter",k),[k,j]=Ct();function G(){const d=[],R=t().classFeatures.spellSlotsByLevel||{};for(let V=1;V<=9;V++){const Y=R[V];if(Y&&Y.length>0){const $e=Y.length,Qe=Y.filter(Xe=>Xe).length;d.push({level:V,available:$e-Qe,total:$e})}}return d}let f=I(!1),z=I(!1),le=I(!1),H=I("save"),J=I(void 0),fe=I(""),ve=I(""),ye=I(""),he=I(),O=!1,ne=I(!1);function de(){Z.update(d=>(d.hitDice.current=Math.min(d.hitDice.max,d.hitDice.current+Math.max(1,Math.floor(d.hitDice.max/2))),d.classFeatures.features&&Object.keys(d.classFeatures.features).forEach(R=>{const V=oe(R);if(V?.resetOn==="short"){if(Array.isArray(d.classFeatures.features[R])){const Y=V.maxUses,$e=typeof Y=="function"?Y(d.level):Y;d.classFeatures.features[R]=Array($e).fill(!1)}else if(typeof d.classFeatures.features[R]=="number"){const Y=V.maxPool,$e=typeof Y=="function"?Y(d.level):Y;$e!==void 0&&(d.classFeatures.features[R]=$e)}}}),d)),n(ne,!1)}function ee(){Z.update(d=>(d.currentHP=d.maxHP,d.tempHP=0,d.hitDice.current=d.hitDice.max,d.classFeatures.spellSlotsByLevel&&Object.keys(d.classFeatures.spellSlotsByLevel).forEach(R=>{const V=d.classFeatures.spellSlotsByLevel[parseInt(R)];V&&(d.classFeatures.spellSlotsByLevel[parseInt(R)]=Array(V.length).fill(!1))}),d.classFeatures.features&&Object.keys(d.classFeatures.features).forEach(R=>{const V=oe(R);if(V){if(Array.isArray(d.classFeatures.features[R])){const Y=V.maxUses,$e=typeof Y=="function"?Y(d.level):Y;d.classFeatures.features[R]=Array($e).fill(!1)}else if(typeof d.classFeatures.features[R]=="number"){const Y=V.maxPool,$e=typeof Y=="function"?Y(d.level):Y;$e!==void 0&&(d.classFeatures.features[R]=$e)}}}),d)),n(ne,!1)}function oe(d){return(t().class?_t(t().class):null)?Ot(t().class,t().level,t().subclass).find(Y=>Y.name.replace(/\s+/g,"")===d):null}function te(d){n(fe,""),n(ve,""),n(ye,""),O=!1,typeof d=="string"?n(fe,d):(n(fe,d.notation),n(ve,d.damageNotation||""),n(ye,d.attackName||"")),n(f,!0)}function P(d){const{notation:R}=d.detail;n(fe,""),O=!0,setTimeout(()=>{n(fe,R),n(ve,""),n(ye,"Hit Die")},0),n(f,!0)}function ce(){if(n(f,!1),O&&e(he)){const d=e(he).getLastRollTotal();if(d!==null){const R=Math.max(1,d);Z.update(V=>(V.hitDice.current=Math.max(0,V.hitDice.current-1),V.currentHP=Math.min(V.maxHP,V.currentHP+R),V))}O=!1}}function pe(){console.log("toggleMode called, current isEditMode:",v()),Jt.update(d=>(console.log("Updating isEditMode from",d,"to",!d),!d))}function ae(d){d.target.closest(".rest-button-container")||n(ne,!1)}qt(()=>{console.log("onMount - initial isEditMode:",v()),console.log("onMount - body classes:",document.body.className);const d=Jt.subscribe(R=>{console.log("isEditMode subscription triggered, value:",R),console.log("Body classes before:",document.body.className),R?(document.body.classList.remove("use-mode"),console.log("Removed use-mode class (Edit Mode)")):(document.body.classList.add("use-mode"),console.log("Added use-mode class (Use Mode)")),console.log("Body classes after:",document.body.className)});return document.addEventListener("click",ae),()=>{d(),document.removeEventListener("click",ae)}});function Ee(){Ha(t())}function $(){e(J)?.click()}async function K(d){const V=d.target.files?.[0];if(V)try{const Y=await Na(V);Z.set(Y),alert("Character imported successfully!")}catch{alert("Failed to import character file")}}yt();var ie=ai();Ua("1uha8ag",d=>{var R=Xl();Sa(2),ya(()=>{Ea.title="D&D Character Sheet"}),c(d,R)});var g=Ge(ie),A=l(g),p=l(A),T=l(p),Q=l(T),U=a(l(Q),2);{var re=d=>{var R=Yl(),V=l(R,!0);s(R),M(()=>y(V,t().name)),c(d,R)};L(U,d=>{t().name&&d(re)})}s(Q);var Me=a(Q,2);{var Le=d=>{var R=ei();nt(R,5,G,vt,(V,Y)=>{var $e=Zl();let Qe;var Xe=l($e);s($e),M(()=>{Qe=ot($e,1,"slot-badge svelte-1uha8ag",null,Qe,{depleted:e(Y).available===0}),y(Xe,`Lv${e(Y).level??""}: ${e(Y).available??""}/${e(Y).total??""}`)}),c(V,$e)}),s(R),c(d,R)};L(Me,d=>{G().length>0&&d(Le)})}s(T);var qe=a(T,2),ue=l(qe),m=l(ue),Pe=a(m,2),Ne=l(Pe),Te=a(Ne,2);{var Je=d=>{var R=ti(),V=l(R),Y=a(V,2);s(R),D("click",V,de),D("click",Y,ee),c(d,R)};L(Te,d=>{e(ne)&&d(Je)})}s(Pe);var h=a(Pe,2),W=l(h);let X;var E=l(W),Ae=l(E,!0);s(E);var Ce=a(E),Re=l(Ce,!0);s(Ce),s(W),s(h),s(ue);var ke=a(ue,2),C=l(ke);we(C),s(ke),s(qe),s(p);var me=a(p,2),_e=l(me),Ie=a(_e,2),ze=a(Ie,2),Ke=a(ze,2),je=a(Ke,2),se=a(je,2);na(se,d=>n(J,d),()=>e(J)),s(me),s(A);var Se=a(A,2),Be=l(Se);Ya(Be,{});var De=a(Be,2);rs(De,{$$events:{rollHitDice:P}});var F=a(De,2);as(F,{$$events:{roll:d=>te(d.detail)}});var o=a(F,2);vs(o,{$$events:{roll:d=>te(d.detail)}});var S=a(o,2);Ps(S,{$$events:{roll:d=>te(d.detail)}});var q=a(S,2);Zs(q,{});var w=a(q,2);al(w,{}),s(Se),s(g);var N=a(g,2);na(fl(N,{get notation(){return e(fe)},get damageNotation(){return e(ve)},get attackName(){return e(ye)},get visible(){return e(f)},$$events:{close:ce},$$legacy:!0}),d=>n(he,d),()=>e(he));var _=a(N,2);{var be=d=>{Ml(d,{get mode(){return e(H)},$$events:{close:()=>n(z,!1)}})};L(_,d=>{e(z)&&d(be)})}var xe=a(_,2);{var Ue=d=>{Ql(d,{onClose:()=>n(le,!1)})};L(xe,d=>{e(le)&&d(Ue)})}M(()=>{X=ot(W,1,"btn btn-mode svelte-1uha8ag",null,X,{"use-mode":!v()}),y(Ae,v()?"ðŸ“":"ðŸŽ²"),y(Re,v()?"Edit Mode":"Use Mode")}),D("click",m,()=>n(f,!0)),D("click",Ne,()=>n(ne,!e(ne))),D("click",W,pe),Fe(C,x,d=>Ta(wt,d)),D("click",_e,()=>n(le,!0)),D("click",Ie,()=>{n(H,"save"),n(z,!0)}),D("click",ze,()=>{n(H,"load"),n(z,!0)}),D("click",Ke,Ee),D("click",je,$),D("change",se,K),c(r,ie),xt(),j()}export{di as component};
