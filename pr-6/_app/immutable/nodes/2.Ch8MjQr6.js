import{f as p,e as A,a as o,s as D,c as nt,t as Lt}from"../chunks/DBs_ODQp.js";import{i as At}from"../chunks/BbaRvQ4Z.js";import{c as ta,o as ca,a as Ya}from"../chunks/CHX4V4AM.js";import{a7 as Ua,i as Na,aZ as Xa,a_ as Za,a$ as ja,K as Yt,e as Ga,b0 as Oa,T as _a,b1 as es,b2 as ts,b3 as as,q as ss,b4 as ls,b5 as rs,ab as is,d as i,r as qa,g as ns,C as Ft,F,G as Bt,H as r,I as l,J as s,b6 as Qe,b7 as Kt,s as c,a4 as M,f as e,m as at,E as ze,A as U,b8 as ba,b9 as Ct,ba as na,ao as ga,bb as os}from"../chunks/DwmZeGF1.js";import{c as wt,a as V,e as dt,i as ut,u as Wa,s as Xt,b as pt,d as va,f as sa,g as cs,t as Tt,h as vs,T as ds,j as us,k as ps}from"../chunks/DQJFtNtV.js";import{i as S,s as Nt,a as Ye,b as ot,d as da,e as fs}from"../chunks/0ovU14Ao.js";import{p as bt,b as xa}from"../chunks/CFUzmRYW.js";import{b as ia,r as gs}from"../chunks/DDu03fIp.js";function ma(a,n,t=!1){if(a.multiple){if(n==null)return;if(!Na(n))return Xa();for(var d of a.options)d.selected=n.includes(oa(d));return}for(d of a.options){var f=oa(d);if(Za(f,n)){d.selected=!0;return}}(!t||n!==void 0)&&(a.selectedIndex=-1)}function Ca(a){var n=new MutationObserver(()=>{ma(a,a.__value)});n.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ua(()=>{n.disconnect()})}function za(a,n,t=n){var d=new WeakSet,f=!0;ja(a,"change",b=>{var $=b?"[selected]":":checked",B;if(a.multiple)B=[].map.call(a.querySelectorAll($),oa);else{var _=a.querySelector($)??a.querySelector("option:not([disabled])");B=_&&oa(_)}t(B),Yt!==null&&d.add(Yt)}),Ga(()=>{var b=n();if(a===document.activeElement){var $=Oa??Yt;if(d.has($))return}if(ma(a,b,f),f&&b===void 0){var B=a.querySelector(":checked");B!==null&&(b=oa(B),t(b))}a.__value=b,f=!1}),Ca(a)}function oa(a){return"__value"in a?a.__value:a.value}const bs=Symbol("is custom element"),ms=Symbol("is html");function we(a){if(_a){var n=!1,t=()=>{if(!n){if(n=!0,a.hasAttribute("value")){var d=a.value;Ke(a,"value",null),a.value=d}if(a.hasAttribute("checked")){var f=a.checked;Ke(a,"checked",null),a.checked=f}}};a.__on_r=t,ss(t),ls()}}function ha(a,n){var t=Aa(a);t.value===(t.value=n??void 0)||a.value===n&&(n!==0||a.nodeName!=="PROGRESS")||(a.value=n??"")}function Ka(a,n){var t=Aa(a);t.checked!==(t.checked=n??void 0)&&(a.checked=n)}function Ke(a,n,t,d){var f=Aa(a);_a&&(f[n]=a.getAttribute(n),n==="src"||n==="srcset"||n==="href"&&a.nodeName==="LINK")||f[n]!==(f[n]=t)&&(n==="loading"&&(a[es]=t),t==null?a.removeAttribute(n):typeof t!="string"&&hs(a).includes(n)?a[n]=t:a.setAttribute(n,t))}function Aa(a){return a.__attributes??={[bs]:a.nodeName.includes("-"),[ms]:a.namespaceURI===ts}}var Ba=new Map;function hs(a){var n=a.getAttribute("is")||a.nodeName,t=Ba.get(n);if(t)return t;Ba.set(n,t=[]);for(var d,f=a,b=Element.prototype;b!==f;){d=rs(f);for(var $ in d)d[$].set&&t.push($);f=as(f)}return t}function Me(a,n,t=n){var d=new WeakSet;ja(a,"input",async f=>{var b=f?a.defaultValue:a.value;if(b=ka(a)?Sa(b):b,t(b),Yt!==null&&d.add(Yt),await is(),b!==(b=n())){var $=a.selectionStart,B=a.selectionEnd,_=a.value.length;if(a.value=b??"",B!==null){var I=a.value.length;$===B&&B===_&&I>_?(a.selectionStart=I,a.selectionEnd=I):(a.selectionStart=$,a.selectionEnd=Math.min(B,I))}}}),(_a&&a.defaultValue!==a.value||i(n)==null&&a.value)&&(t(ka(a)?Sa(a.value):a.value),Yt!==null&&d.add(Yt)),qa(()=>{var f=n();if(a===document.activeElement){var b=Oa??Yt;if(d.has(b))return}ka(a)&&f===Sa(a.value)||a.type==="date"&&!f&&!a.value||f!==a.value&&(a.value=f??"")})}function La(a,n,t=n){ja(a,"change",d=>{var f=d?a.defaultChecked:a.checked;t(f)}),(_a&&a.defaultChecked!==a.checked||i(n)==null)&&t(a.checked),qa(()=>{var d=n();a.checked=!!d})}function ka(a){var n=a.type;return n==="number"||n==="range"}function Sa(a){return a===""?null:+a}function _s(a,n,t){var d=ns(a,n);d&&d.set&&(a[n]=t,Ua(()=>{a[n]=null}))}function Fa(a){return function(...n){var t=n[0];return t.stopPropagation(),a?.apply(this,n)}}function la(a,n){var t=a.$$events?.[n.type],d=Na(t)?t.slice():t==null?[]:[t];for(var f of d)f.call(this,n)}const ys="";function Ja(...a){return ia+ys+gs(a[0],a[1])}const wa={paladin:{name:"Paladin",hitDice:"d10",spellcaster:!0,spellcastingAbility:"charisma",spellSlotsByLevel:{1:0,2:2,3:3,4:3,5:4,6:4,7:4,8:4,9:4,10:4,11:4,12:4,13:4,14:4,15:4,16:4,17:4,18:4,19:4,20:4},features:[{name:"Divine Sense",type:"uses",maxUses:(a,n=1)=>1+Math.max(1,n),resetOn:"long",description:"Detect celestials, fiends, and undead within 60 feet",minLevel:1},{name:"Lay on Hands",type:"pool",maxPool:a=>a*5,resetOn:"long",description:"Heal wounds or cure disease",minLevel:1},{name:"Divine Smite",type:"spellSlot",description:"Expend spell slot to deal extra radiant damage",minLevel:2,rollable:!0},{name:"Channel Divinity",type:"pool",maxPool:a=>a>=18?3:a>=6?2:1,resetOn:"short",description:"Sacred Weapon or Turn Undead",minLevel:3}]},fighter:{name:"Fighter",hitDice:"d10",spellcaster:!1,features:[{name:"Second Wind",type:"uses",maxUses:1,resetOn:"short",description:"Regain 1d10 + fighter level HP as bonus action",minLevel:1,rollable:!0,rollFormula:a=>`1d10+${a}`},{name:"Action Surge",type:"uses",maxUses:a=>a>=17?2:1,resetOn:"short",description:"Take one additional action on your turn",minLevel:2},{name:"Indomitable",type:"uses",maxUses:a=>a>=17?3:a>=13?2:1,resetOn:"long",description:"Reroll a failed saving throw",minLevel:9}],subclasses:{champion:{name:"Champion",features:[{name:"Improved Critical",type:"info",description:"Critical hit on 19-20",minLevel:3},{name:"Remarkable Athlete",type:"info",description:"Add half proficiency to STR/DEX/CON checks, increase long jump distance",minLevel:7},{name:"Additional Fighting Style",type:"info",description:"Choose a second fighting style",minLevel:10},{name:"Superior Critical",type:"info",description:"Critical hit on 18-20",minLevel:15},{name:"Survivor",type:"info",description:"Regain 5 + CON mod HP at start of turn if below half HP",minLevel:18}]},battlemaster:{name:"Battle Master",features:[{name:"Combat Superiority",type:"uses",maxUses:a=>a>=15?6:a>=7?5:4,resetOn:"short",description:a=>`Use superiority dice (${a>=18?"d12":a>=10?"d10":"d8"}) for maneuvers`,minLevel:3},{name:"Know Your Enemy",type:"info",description:"Learn capabilities of creatures you observe",minLevel:7},{name:"Improved Combat Superiority",type:"info",description:"Superiority dice become d10",minLevel:10},{name:"Relentless",type:"info",description:"Regain 1 superiority die if you have none at start of turn",minLevel:15}]}}},rogue:{name:"Rogue",hitDice:"d8",spellcaster:!1,features:[{name:"Sneak Attack",type:"info",description:a=>`Deal ${Math.ceil(a/2)}d6 extra damage once per turn with advantage or ally nearby`,minLevel:1,rollable:!0,rollFormula:a=>`${Math.ceil(a/2)}d6`},{name:"Cunning Action",type:"info",description:"Dash, Disengage, or Hide as a bonus action",minLevel:2},{name:"Uncanny Dodge",type:"info",description:"Use reaction to halve damage from an attack",minLevel:5},{name:"Evasion",type:"info",description:"Take no damage on successful Dex save (half on fail)",minLevel:7}]},wizard:{name:"Wizard",hitDice:"d6",spellcaster:!0,spellcastingAbility:"intelligence",spellSlotsByLevel:{1:2,2:3,3:4,4:4,5:4,6:4,7:4,8:4,9:4,10:4,11:4,12:4,13:4,14:4,15:4,16:4,17:4,18:4,19:4,20:4},features:[{name:"Arcane Recovery",type:"uses",maxUses:1,resetOn:"long",description:a=>`Recover spell slots totaling up to ${Math.ceil(a/2)} levels during short rest`,minLevel:1},{name:"Spell Mastery",type:"info",description:"Cast one 1st-level and one 2nd-level spell at will",minLevel:18}]},cleric:{name:"Cleric",hitDice:"d8",spellcaster:!0,spellcastingAbility:"wisdom",spellSlotsByLevel:{1:2,2:3,3:4,4:4,5:4,6:4,7:4,8:4,9:4,10:4,11:4,12:4,13:4,14:4,15:4,16:4,17:4,18:4,19:4,20:4},features:[{name:"Channel Divinity",type:"pool",maxPool:a=>a>=18?3:a>=6?2:1,resetOn:"short",description:"Turn Undead or domain-specific ability",minLevel:2},{name:"Destroy Undead",type:"info",description:a=>`Channel Divinity destroys undead of CR ${a>=17?4:a>=14?3:a>=11?2:a>=8?1:.5} or lower`,minLevel:5},{name:"Divine Intervention",type:"uses",maxUses:1,resetOn:"long",description:a=>`${a}% chance to succeed, implore deity for aid`,minLevel:10}],subclasses:{war:{name:"War Domain",features:[{name:"War Priest",type:"uses",maxUses:(a,n=1)=>Math.max(1,n),resetOn:"long",description:"Make one weapon attack as a bonus action",minLevel:1},{name:"Guided Strike",type:"channelDivinity",description:"Use your Channel Divinity to gain +10 to an attack roll. Make this choice after you see the roll, but before the DM says whether the attack hits or misses.",minLevel:2,resetOn:"short"},{name:"War God's Blessing",type:"channelDivinity",description:"Use reaction to grant +10 to an ally's attack roll within 30 feet. Consumes one use of Channel Divinity.",minLevel:6,resetOn:"short"},{name:"Divine Strike",type:"info",description:a=>`Deal extra ${a>=14?"2d8":"1d8"} weapon damage once per turn`,minLevel:8,rollable:!0,rollFormula:a=>a>=14?"2d8":"1d8"},{name:"Avatar of Battle",type:"info",description:"Gain resistance to nonmagical weapon damage",minLevel:17}]},life:{name:"Life Domain",features:[{name:"Disciple of Life",type:"info",description:"Healing spells restore additional 2 + spell level HP",minLevel:1},{name:"Preserve Life",type:"pool",maxPool:a=>a*5,resetOn:"short",description:"Restore HP to creatures within 30 feet",minLevel:2},{name:"Blessed Healer",type:"info",description:"Regain 2 + spell level HP when you cast healing spell",minLevel:6},{name:"Divine Strike",type:"info",description:a=>`Deal extra ${a>=14?"2d8":"1d8"} radiant damage once per turn`,minLevel:8,rollable:!0,rollFormula:a=>a>=14?"2d8":"1d8"},{name:"Supreme Healing",type:"info",description:"Maximize healing dice instead of rolling",minLevel:17}]}}},barbarian:{name:"Barbarian",hitDice:"d12",spellcaster:!1,features:[{name:"Rage",type:"uses",maxUses:a=>a>=20?1/0:a>=17?6:a>=12?5:a>=6?4:a>=3?3:2,resetOn:"long",description:a=>`+${a>=16?4:a>=9?3:2} damage, resistance to physical damage`,minLevel:1},{name:"Reckless Attack",type:"info",description:"Gain advantage on melee attacks, enemies get advantage on you",minLevel:2},{name:"Danger Sense",type:"info",description:"Advantage on Dex saves against effects you can see",minLevel:2}],subclasses:{berserker:{name:"Path of the Berserker",features:[{name:"Frenzy",type:"info",description:"While raging, make melee attack as bonus action (gain 1 exhaustion after rage)",minLevel:3},{name:"Mindless Rage",type:"info",description:"Cannot be charmed or frightened while raging",minLevel:6},{name:"Intimidating Presence",type:"info",description:"Use action to frighten creature within 30 feet",minLevel:10},{name:"Retaliation",type:"info",description:"When damaged by creature within 5 feet, make melee attack as reaction",minLevel:14}]}}}};function Ht(a){const n=a.toLowerCase();return wa[n]||null}function ra(a,n,t){const d=Ht(a);if(!d)return[];const f=d.features.filter(b=>!b.minLevel||b.minLevel<=n);if(t&&d.subclasses&&d.subclasses[t]){const b=d.subclasses[t].features.filter($=>!$.minLevel||$.minLevel<=n);return[...f,...b]}return f}function Ma(a){const n=Ht(a);return!n||!n.subclasses?[]:Object.keys(n.subclasses).map(t=>({id:t,name:n.subclasses[t].name}))}function Ia(a,n){const t=Ht(a);return!t||!t.spellcaster||!t.spellSlotsByLevel?0:t.spellSlotsByLevel[n]||0}function Ra(a,n,t){const d=Ht(a);return!d||!d.spellcaster?0:Math.max(1,t+n)}function ks(a,n,t){const d=Ht(a);return!d||!d.spellcaster?null:8+n+t}function Ss(){return Object.keys(wa).map(a=>({id:a,name:wa[a].name}))}var $s=p('<div class="section-header svelte-ls99y2" role="button" tabindex="0"><h2 class="svelte-ls99y2"> </h2> <span class="collapse-btn svelte-ls99y2"> </span></div>');function aa(a,n){Ft(n,!1);let t=bt(n,"title",8),d=bt(n,"collapsed",8),f=bt(n,"ariaLabel",8,""),b=bt(n,"onToggle",8);At();var $=$s(),B=r($),_=r(B,!0);l(B);var I=s(B,2),Q=r(I,!0);l(I),l($),F(()=>{Ke($,"aria-expanded",!d()),Ke($,"aria-label",f()),D(_,t()),D(Q,d()?"â–¼":"â–²")}),A("click",$,function(...q){b()?.apply(this,q)}),A("keydown",$,q=>{(q.key==="Enter"||q.key===" ")&&b()()}),o(a,$),Bt()}var xs=p("<option> </option>"),Cs=p("<option> </option>"),Ls=p('<div class="form-group svelte-172i2fj"><label for="characterSubclass" class="svelte-172i2fj">Subclass</label> <select id="characterSubclass" class="svelte-172i2fj"><option>Select Subclass</option><!></select></div>'),ws=p('<div class="info-grid svelte-172i2fj"><div class="form-group svelte-172i2fj"><label for="characterName" class="svelte-172i2fj">Character Name</label> <input type="text" id="characterName" placeholder="Enter name" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterClass" class="svelte-172i2fj">Class</label> <select id="characterClass" class="svelte-172i2fj"><option>Select Class</option><!></select></div> <!> <div class="form-group svelte-172i2fj"><label for="characterLevel" class="svelte-172i2fj">Level</label> <input type="number" id="characterLevel" min="1" max="20" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterRace" class="svelte-172i2fj">Race</label> <input type="text" id="characterRace" placeholder="e.g., Human" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterBackground" class="svelte-172i2fj">Background</label> <input type="text" id="characterBackground" placeholder="e.g., Soldier" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterAlignment" class="svelte-172i2fj">Alignment</label> <input type="text" id="characterAlignment" placeholder="e.g., Lawful Good" class="svelte-172i2fj"/></div></div>'),Ds=p('<section class="character-info svelte-172i2fj"><!> <!></section>');function js(a,n){Ft(n,!1);const t=()=>Ye(V,"$character",f),d=()=>Ye(wt,"$collapsedStates",f),[f,b]=Nt(),$=M(),B=Ss();function _(ee){const ve=ee.target;V.update(K=>(K.class=ve.value,K.subclass="",K))}function I(ee){const ve=ee.target;V.update(K=>(K.subclass=ve.value,K))}function Q(ee){const ve=ee.target;V.update(K=>(K.level=parseInt(ve.value)||1,K)),Wa()}Qe(()=>(t(),Ma),()=>{c($,t().class?Ma(t().class):[])}),Kt(),At();var q=Ds(),T=r(q);{let ee=at(()=>(d(),i(()=>d().characterInfo?"Expand":"Collapse")));aa(T,{title:"Character Info",get collapsed(){return d(),i(()=>d().characterInfo)},get ariaLabel(){return e(ee)},onToggle:()=>wt.update(ve=>({...ve,characterInfo:!ve.characterInfo}))})}var _e=s(T,2);{var fe=ee=>{var ve=ws(),K=r(ve),qe=s(r(K),2);we(qe),l(K);var W=s(K,2),ae=s(r(W),2),Y=r(ae);Y.value=Y.__value="";var te=s(Y);dt(te,1,()=>B,ut,(x,O)=>{var E=xs(),N=r(E,!0);l(E);var je={};F(()=>{D(N,(e(O),i(()=>e(O).name))),je!==(je=(e(O),i(()=>e(O).id)))&&(E.value=(E.__value=(e(O),i(()=>e(O).id)))??"")}),o(x,E)}),l(ae);var re;Ca(ae),l(W);var Ie=s(W,2);{var Ue=x=>{var O=Ls(),E=s(r(O),2),N=r(E);N.value=N.__value="";var je=s(N);dt(je,1,()=>e($),ut,($e,Be)=>{var Ne=Cs(),We=r(Ne,!0);l(Ne);var et={};F(()=>{D(We,(e(Be),i(()=>e(Be).name))),et!==(et=(e(Be),i(()=>e(Be).id)))&&(Ne.value=(Ne.__value=(e(Be),i(()=>e(Be).id)))??"")}),o($e,Ne)}),l(E);var Se;Ca(E),l(O),F(()=>{Se!==(Se=(t(),i(()=>t().subclass)))&&(E.value=(E.__value=(t(),i(()=>t().subclass)))??"",ma(E,(t(),i(()=>t().subclass))))}),A("change",E,I),o(x,O)};S(Ie,x=>{e($),i(()=>e($).length>0)&&x(Ue)})}var ye=s(Ie,2),ke=s(r(ye),2);we(ke),l(ye);var L=s(ye,2),ce=s(r(L),2);we(ce),l(L);var m=s(L,2),R=s(r(m),2);we(R),l(m);var se=s(m,2),g=s(r(se),2);we(g),l(se),l(ve),F(()=>{re!==(re=(t(),i(()=>t().class)))&&(ae.value=(ae.__value=(t(),i(()=>t().class)))??"",ma(ae,(t(),i(()=>t().class)))),ha(ke,(t(),i(()=>t().level)))}),Me(qe,()=>t().name,x=>ot(V,i(t).name=x,i(t))),A("change",ae,_),A("change",ke,Q),Me(ce,()=>t().race,x=>ot(V,i(t).race=x,i(t))),Me(R,()=>t().background,x=>ot(V,i(t).background=x,i(t))),Me(g,()=>t().alignment,x=>ot(V,i(t).alignment=x,i(t))),o(ee,ve)};S(_e,ee=>{d(),i(()=>!d().characterInfo)&&ee(fe)})}l(q),o(a,q),Bt(),b()}var As=p('<div class="ability-card svelte-bbv1xt"><h3 class="svelte-bbv1xt"> </h3> <input type="number" class="ability-score svelte-bbv1xt" min="1" max="30"/> <div class="ability-modifier svelte-bbv1xt"> </div> <button class="roll-btn svelte-bbv1xt">Check</button> <div class="save-row svelte-bbv1xt"><input type="checkbox" class="svelte-bbv1xt"/> <label class="svelte-bbv1xt">Save</label> <button class="roll-btn-small svelte-bbv1xt">Roll</button></div></div>'),Fs=p('<div class="proficiency-bonus svelte-bbv1xt"><label for="profBonus">Proficiency Bonus</label> <input type="number" id="profBonus" class="prof-input svelte-bbv1xt"/></div> <div class="abilities-grid svelte-bbv1xt"></div>',1),Bs=p("<section><!> <!></section>");function Ms(a,n){Ft(n,!1);const t=()=>Ye(va,"$abilityModifiers",$),d=()=>Ye(V,"$character",$),f=()=>Ye(Xt,"$searchFilter",$),b=()=>Ye(wt,"$collapsedStates",$),[$,B]=Nt(),_=M(),I=M(),Q=ta(),q=[{key:"strength",label:"Strength"},{key:"dexterity",label:"Dexterity"},{key:"constitution",label:"Constitution"},{key:"intelligence",label:"Intelligence"},{key:"wisdom",label:"Wisdom"},{key:"charisma",label:"Charisma"}];function T(){Wa()}function _e(ae){const Y=t()[ae],te=`1d20${Y>=0?"+":""}${Y}`;Q("roll",te)}function fe(ae){const Y=t()[ae],te=d().saveProficiencies[ae]?d().proficiencyBonus:0,re=Y+te,Ie=`1d20${re>=0?"+":""}${re}`;Q("roll",Ie)}Qe(()=>f(),()=>{c(_,q.filter(({label:ae})=>f()?ae.toLowerCase().includes(f().toLowerCase()):!0))}),Qe(()=>(e(_),f()),()=>{c(I,e(_).length>0||!f()||f().toLowerCase().includes("proficiency"))}),Kt(),At();var ee=Bs();let ve;var K=r(ee);aa(K,{title:"Ability Scores",get collapsed(){return b(),i(()=>b().abilityScores)},ariaLabel:"Toggle Ability Scores Section",onToggle:()=>wt.update(ae=>({...ae,abilityScores:!ae.abilityScores}))});var qe=s(K,2);{var W=ae=>{var Y=Fs(),te=ze(Y),re=s(r(te),2);we(re),l(te);var Ie=s(te,2);dt(Ie,5,()=>e(_),ut,(Ue,ye)=>{let ke=()=>e(ye).key,L=()=>e(ye).label;var ce=As(),m=r(ce),R=r(m,!0);l(m);var se=s(m,2);we(se);var g=s(se,2),x=r(g);l(g);var O=s(g,2),E=s(O,2),N=r(E);we(N);var je=s(N,2),Se=s(je,2);l(E),l(ce),F($e=>{D(R,$e),D(x,`${t(),ke(),i(()=>t()[ke()]>=0?"+":"")??""}${t(),ke(),i(()=>t()[ke()])??""}`),Ke(N,"id",`${ke()}-save`),Ke(je,"for",`${ke()}-save`)},[()=>(L(),i(()=>L().substring(0,3).toUpperCase()))]),Me(se,()=>d().abilities[ke()],$e=>ot(V,i(d).abilities[ke()]=$e,i(d))),A("change",se,T),A("click",O,()=>_e(ke())),La(N,()=>d().saveProficiencies[ke()],$e=>ot(V,i(d).saveProficiencies[ke()]=$e,i(d))),A("click",Se,()=>fe(ke())),o(Ue,ce)}),l(Ie),Me(re,()=>d().proficiencyBonus,Ue=>ot(V,i(d).proficiencyBonus=Ue,i(d))),o(ae,Y)};S(qe,ae=>{b(),i(()=>!b().abilityScores)&&ae(W)})}l(ee),F(()=>ve=pt(ee,1,"ability-scores svelte-bbv1xt",null,ve,{hidden:!e(I)})),o(a,ee),Bt(),B()}function Is(a){return Math.floor((a-10)/2)}function Da(a,n){if(!a.class)return null;const t=Ht(a.class);if(!t||!t.spellcaster||!t.spellcastingAbility)return null;const d=n[t.spellcastingAbility];return 8+a.proficiencyBonus+d}function Rs(a,n){if(!a.class)return 0;const t=Ht(a.class);return!t||!t.spellcaster||!t.spellcastingAbility?0:Is(n[t.spellcastingAbility])}var Es=p('<input type="number" id="armorClass" class="stat-input svelte-1r5hyyb"/>'),Ps=p('<input type="text" id="armorClass" readonly=""/>'),Ts=p('<div class="stat-box svelte-1r5hyyb"><label for="spellSaveDC" class="svelte-1r5hyyb">Spell Save DC</label> <input type="number" id="spellSaveDC" class="stat-input svelte-1r5hyyb" readonly="" title="8 + Proficiency Bonus + Spellcasting Ability Modifier"/></div>'),Hs=p('<span class="hit-dice-type"> </span>'),Us=p('<div class="stats-grid svelte-1r5hyyb"><div class="stat-box svelte-1r5hyyb"><label for="armorClass" class="svelte-1r5hyyb">Armor Class</label> <!></div> <div class="stat-box svelte-1r5hyyb"><label for="initiative" class="svelte-1r5hyyb">Initiative</label> <input type="number" id="initiative" class="stat-input svelte-1r5hyyb"/></div> <div class="stat-box svelte-1r5hyyb"><label for="speed" class="svelte-1r5hyyb">Speed</label> <input type="text" id="speed" class="stat-input svelte-1r5hyyb"/></div> <!></div> <div class="hp-section svelte-1r5hyyb"><h3 class="svelte-1r5hyyb">Hit Points</h3> <div class="hp-display svelte-1r5hyyb"><div class="hp-inputs svelte-1r5hyyb"><input type="number" class="hp-current svelte-1r5hyyb" min="0"/> <span class="hp-separator svelte-1r5hyyb">/</span> <input type="number" class="hp-max svelte-1r5hyyb" min="0"/></div> <div class="hp-controls svelte-1r5hyyb"><button class="hp-btn svelte-1r5hyyb">âˆ’</button> <button class="hp-btn svelte-1r5hyyb">+</button> <button class="hp-btn svelte-1r5hyyb">âˆ’5</button> <button class="hp-btn svelte-1r5hyyb">+5</button></div></div> <div class="temp-hp svelte-1r5hyyb"><label for="tempHP" class="svelte-1r5hyyb">Temp HP</label> <input type="number" id="tempHP" min="0" class="svelte-1r5hyyb"/></div></div> <div class="hit-dice-section svelte-1r5hyyb"><h3 class="svelte-1r5hyyb">Hit Dice</h3> <div class="hit-dice-display svelte-1r5hyyb"><input type="number" class="hit-dice-input svelte-1r5hyyb" min="0"/> <span>/</span> <input type="number" class="hit-dice-input svelte-1r5hyyb" min="0"/> <!></div> <div class="hit-dice-controls"><label for="hitDiceCount" class="svelte-1r5hyyb">Roll</label> <input type="number" id="hitDiceCount" class="hit-dice-count-input svelte-1r5hyyb" min="1" value="1"/> <button class="btn btn-primary roll-hit-dice use-enabled svelte-1r5hyyb">ðŸŽ² Roll</button></div></div>',1),Ns=p("<section><!> <!></section>");function Gs(a,n){Ft(n,!1);const t=()=>Ye(V,"$character",B),d=()=>Ye(va,"$abilityModifiers",B),f=()=>Ye(Xt,"$searchFilter",B),b=()=>Ye(wt,"$collapsedStates",B),$=()=>Ye(sa,"$isEditMode",B),[B,_]=Nt(),I=M(),Q=M(),q=M(),T=ta();function _e(ae){V.update(Y=>(Y.currentHP=Math.max(0,Math.min(Y.maxHP,Y.currentHP+ae)),Y))}function fe(ae=1){if(t().hitDice.current<=0){alert("No hit dice remaining!");return}if(!t().class){alert("Please select a class first!");return}const Y=Ht(t().class);if(!Y){alert("Invalid class configuration!");return}const te=Math.min(ae,t().hitDice.current),re=Y.hitDice,Ie=d().constitution,Ue=Ie>=0?`+${Ie}`:`${Ie}`,ye=`${te}${re}${Ue}`;T("rollHitDice",{notation:ye,hitDie:re,count:te})}Qe(()=>(t(),d()),()=>{c(I,Da(t(),d()))}),Qe(()=>t(),()=>{c(Q,t().activeStates&&t().activeStates.length>0?t().activeStates.reduce((ae,Y)=>ae+(Y.acBonus||0),0):0)}),Qe(()=>f(),()=>{c(q,!f()||"armor class".includes(f().toLowerCase())||"initiative".includes(f().toLowerCase())||"speed".includes(f().toLowerCase())||"hit points".includes(f().toLowerCase())||"hp".includes(f().toLowerCase())||"hit dice".includes(f().toLowerCase())||"spell save".includes(f().toLowerCase())||"combat".includes(f().toLowerCase()))}),Kt(),At();var ee=Ns();let ve;var K=r(ee);{let ae=at(()=>(b(),i(()=>b().combatStats?"Expand":"Collapse")));aa(K,{title:"Combat Stats",get collapsed(){return b(),i(()=>b().combatStats)},get ariaLabel(){return e(ae)},onToggle:()=>wt.update(Y=>({...Y,combatStats:!Y.combatStats}))})}var qe=s(K,2);{var W=ae=>{var Y=Us(),te=ze(Y),re=r(te),Ie=s(r(re),2);{var Ue=P=>{var h=Es();we(h),Me(h,()=>t().armorClass,de=>ot(V,i(t).armorClass=de,i(t))),o(P,h)},ye=P=>{var h=Ps();we(h),F(()=>{ha(h,(e(Q),t(),i(()=>e(Q)!==0?`${t().armorClass} â†’ ${t().armorClass+e(Q)}`:`${t().armorClass}`))),pt(h,1,cs(e(Q)!==0?"stat-input ac-enhanced":"stat-input"),"svelte-1r5hyyb"),Ke(h,"title",e(Q)!==0?"Base AC plus active effect bonuses":"Base Armor Class")}),o(P,h)};S(Ie,P=>{$()?P(Ue):P(ye,!1)})}l(re);var ke=s(re,2),L=s(r(ke),2);we(L),l(ke);var ce=s(ke,2),m=s(r(ce),2);we(m),l(ce);var R=s(ce,2);{var se=P=>{var h=Ts(),de=s(r(h),2);we(de),l(h),F(()=>ha(de,e(I))),o(P,h)};S(R,P=>{e(I)!==null&&P(se)})}l(te);var g=s(te,2),x=s(r(g),2),O=r(x),E=r(O);we(E);var N=s(E,4);we(N),l(O);var je=s(O,2),Se=r(je),$e=s(Se,2),Be=s($e,2),Ne=s(Be,2);l(je),l(x);var We=s(x,2),et=s(r(We),2);we(et),l(We),l(g);var st=s(g,2),X=s(r(st),2),k=r(X);we(k);var v=s(k,4);we(v);var ie=s(v,2);{var le=P=>{const h=at(()=>(U(Ht),t(),i(()=>Ht(t().class))));var de=nt(),De=ze(de);{var Oe=Je=>{const he=at(()=>(d(),i(()=>d().constitution)));var pe=Hs(),Le=r(pe);l(pe),F(()=>D(Le,`(${U(e(h)),i(()=>e(h).hitDice)??""}${(e(he)>=0?`+${e(he)}`:e(he))??""})`)),o(Je,pe)};S(De,Je=>{e(h)&&Je(Oe)})}o(P,de)};S(ie,P=>{t(),i(()=>t().class)&&P(le)})}l(X);var xe=s(X,2),Re=s(r(xe),2),Ee=s(Re,2);l(xe),l(st),F(()=>{Ke(E,"max",(t(),i(()=>t().maxHP))),Ke(k,"max",(t(),i(()=>t().hitDice.max))),Ke(Re,"max",(t(),i(()=>t().hitDice.current))),Ee.disabled=(t(),i(()=>t().hitDice.current<=0||!t().class))}),Me(L,()=>t().initiative,P=>ot(V,i(t).initiative=P,i(t))),Me(m,()=>t().speed,P=>ot(V,i(t).speed=P,i(t))),Me(E,()=>t().currentHP,P=>ot(V,i(t).currentHP=P,i(t))),Me(N,()=>t().maxHP,P=>ot(V,i(t).maxHP=P,i(t))),A("click",Se,()=>_e(-1)),A("click",$e,()=>_e(1)),A("click",Be,()=>_e(-5)),A("click",Ne,()=>_e(5)),Me(et,()=>t().tempHP,P=>ot(V,i(t).tempHP=P,i(t))),Me(k,()=>t().hitDice.current,P=>ot(V,i(t).hitDice.current=P,i(t))),Me(v,()=>t().hitDice.max,P=>ot(V,i(t).hitDice.max=P,i(t))),A("input",Re,P=>{const h=P.target,de=parseInt(h.value);de>t().hitDice.current&&(h.value=String(t().hitDice.current)),de<1&&(h.value="1")}),A("click",Ee,()=>{const P=document.getElementById("hitDiceCount"),h=parseInt(P?.value||"1");fe(h)}),o(ae,Y)};S(qe,ae=>{b(),i(()=>!b().combatStats)&&ae(W)})}l(ee),F(()=>ve=pt(ee,1,"combat-stats svelte-1r5hyyb",null,ve,{hidden:!e(q)})),o(a,ee),Bt(),_()}const $a={acrobatics:"dexterity",animalHandling:"wisdom",arcana:"intelligence",athletics:"strength",deception:"charisma",history:"intelligence",insight:"wisdom",intimidation:"charisma",investigation:"intelligence",medicine:"wisdom",nature:"intelligence",perception:"wisdom",performance:"charisma",persuasion:"charisma",religion:"intelligence",sleightOfHand:"dexterity",stealth:"dexterity",survival:"wisdom"};var Os=p('<div class="skill-row svelte-1f1pl16"><input type="checkbox" class="svelte-1f1pl16"/> <label class="svelte-1f1pl16"> <span class="ability-tag svelte-1f1pl16"> </span></label> <span class="skill-modifier svelte-1f1pl16"> </span> <button class="roll-btn svelte-1f1pl16">Roll</button></div>'),qs=p('<div class="skills-grid svelte-1f1pl16"></div>'),Ws=p("<section><!> <!></section>");function zs(a,n){Ft(n,!1);const t=()=>Ye(V,"$character",$),d=()=>Ye(va,"$abilityModifiers",$),f=()=>Ye(Xt,"$searchFilter",$),b=()=>Ye(wt,"$collapsedStates",$),[$,B]=Nt(),_=M(),I=M(),Q=M(),q=M(),T=M(),_e=M(),fe=ta(),ee=[{key:"acrobatics",label:"Acrobatics"},{key:"animalHandling",label:"Animal Handling"},{key:"arcana",label:"Arcana"},{key:"athletics",label:"Athletics"},{key:"deception",label:"Deception"},{key:"history",label:"History"},{key:"insight",label:"Insight"},{key:"intimidation",label:"Intimidation"},{key:"investigation",label:"Investigation"},{key:"medicine",label:"Medicine"},{key:"nature",label:"Nature"},{key:"perception",label:"Perception"},{key:"performance",label:"Performance"},{key:"persuasion",label:"Persuasion"},{key:"religion",label:"Religion"},{key:"sleightOfHand",label:"Sleight of Hand"},{key:"stealth",label:"Stealth"},{key:"survival",label:"Survival"}];function ve(te){const re=e(_)[te],Ie=`1d20${re>=0?"+":""}${re}`;fe("roll",Ie)}Qe(()=>{},()=>{c(_,{})}),Qe(()=>t(),()=>{c(I,t().skillProficiencies)}),Qe(()=>t(),()=>{c(Q,t().proficiencyBonus)}),Qe(()=>d(),()=>{c(q,d())}),Qe(()=>(e(q),e(I),e(Q)),()=>{for(const{key:te}of ee){const re=$a[te],Ie=e(q)[re],Ue=e(I)[te]?e(Q):0;ba(_,e(_)[te]=Ie+Ue)}}),Qe(()=>f(),()=>{c(T,ee.filter(({label:te})=>f()?te.toLowerCase().includes(f().toLowerCase()):!0))}),Qe(()=>e(T),()=>{c(_e,e(T).length>0)}),Kt(),At();var K=Ws();let qe;var W=r(K);{let te=at(()=>(b(),i(()=>b().skills?"Expand":"Collapse")));aa(W,{title:"Skills",get collapsed(){return b(),i(()=>b().skills)},get ariaLabel(){return e(te)},onToggle:()=>wt.update(re=>({...re,skills:!re.skills}))})}var ae=s(W,2);{var Y=te=>{var re=qs();dt(re,5,()=>e(T),ut,(Ie,Ue)=>{let ye=()=>e(Ue).key,ke=()=>e(Ue).label;var L=Os(),ce=r(L);we(ce);var m=s(ce,2),R=r(m),se=s(R),g=r(se);l(se),l(m);var x=s(m,2),O=r(x);l(x);var E=s(x,2);l(L),F(N=>{Ka(ce,(e(I),ye(),i(()=>e(I)[ye()]))),Ke(ce,"id",ye()),Ke(m,"for",ye()),D(R,`${ke()??""} `),D(g,`(${N??""})`),D(O,`${e(_),ye(),i(()=>e(_)[ye()]>=0?"+":"")??""}${e(_),ye(),i(()=>e(_)[ye()])??""}`)},[()=>(U($a),ye(),i(()=>$a[ye()].substring(0,3).toUpperCase()))]),A("change",ce,N=>{console.log("Skill proficiency changed:",ye(),N.target.checked),V.update(je=>({...je,skillProficiencies:{...je.skillProficiencies,[ye()]:N.target.checked}}))}),A("click",E,()=>ve(ye())),o(Ie,L)}),l(re),o(te,re)};S(ae,te=>{b(),i(()=>!b().skills)&&te(Y)})}l(K),F(()=>qe=pt(K,1,"skills svelte-1f1pl16",null,qe,{hidden:!e(_e)})),o(a,K),Bt(),B()}let ua=null,pa=null;async function Va(){if(ua)return ua;try{return ua=await(await fetch(Ja("/data/spells.json"))).json(),ua||[]}catch(a){return console.error("Failed to load spells:",a),[]}}async function Ks(){if(pa)return pa;try{return pa=await(await fetch(Ja("/data/feats.json"))).json(),pa||[]}catch(a){return console.error("Failed to load feats:",a),[]}}function Ea(a,n){if(!n.trim())return a;const t=n.toLowerCase();return a.filter(d=>d.name.toLowerCase().includes(t)||d.school.toLowerCase().includes(t)||d.classes.some(f=>f.toLowerCase().includes(t))||d.description.toLowerCase().includes(t))}function Js(a,n){return n===null?a:a.filter(t=>t.level===n)}function Vs(a,n){if(!n.trim())return a;const t=n.toLowerCase();return a.filter(d=>d.name.toLowerCase().includes(t)||d.description.toLowerCase().includes(t))}function fa(a){const n=a.description,t=/\b(Strength|Dexterity|Constitution|Intelligence|Wisdom|Charisma)\s+saving\s+throw/i,d=n.match(t);if(!d)return null;const f=d[1].toLowerCase(),$=/half\s+(?:as\s+much\s+)?damage\s+on\s+a\s+successful(?:\s+save)?/i.test(n),_=/saving\s+throw\s+or\s+take.*?damage/i.test(n)&&!$;return{ability:f,halfDamageOnSave:$,noDamageOnSave:_}}function Qs(a){const n=a.description;return/(plus|add)\s+your\s+spellcasting\s+(ability\s+)?modifier/i.test(n)}function Pa(a){const n=a.description.toLowerCase();if(a.name==="Divine Favor")return!0;const d=["takes","take","deals","deal","damage equal to","force damage","fire damage","cold damage","lightning damage","thunder damage","acid damage","poison damage","necrotic damage","radiant damage","psychic damage","regain","regains","hit point"].some($=>n.includes($));return["bonus to attack","bonus to damage","bonus to ac","gains a +","gain a +","+1 bonus","+2 bonus","+3 bonus","advantage on","becomes a magic weapon"].some($=>n.includes($))&&!d}function Ys(a){const n=a.description;let t=0,d=0,f=0,b="";const $=n.match(/\+(\d+)\s+bonus\s+to\s+attack\s+rolls\s+and\s+damage\s+rolls/i);if($){const _=parseInt($[1]);t=_,d=_,b=`+${_} to attack and damage rolls`}a.name==="Bless"&&(b="Add 1d4 to attack rolls and saves"),a.name==="Divine Favor"&&(b="Your weapon attacks deal an extra 1d4 radiant damage on a hit.",d="1d4");const B=n.match(/\+(\d+)\s+bonus\s+to\s+AC/i);return B&&(f=parseInt(B[1]),b=`+${f} to AC`),a.name==="Haste"&&(b="+2 AC, doubled speed, extra action",f=2),b||t!==0||d!==0||f!==0?{attackBonus:t,damageBonus:d,acBonus:f,description:b||a.description.substring(0,100),name:a.name}:null}var Xs=p('<button class="btn btn-secondary">Add Attack</button>'),Zs=p('<input type="text" placeholder="Attack name" class="attack-name svelte-14o91c5"/>'),el=p('<h4 class="attack-name-display svelte-14o91c5"> </h4>'),tl=p('<button class="btn-remove svelte-14o91c5">Ã—</button>'),al=p('<div class="attack-field svelte-14o91c5"><label class="svelte-14o91c5">Bonus</label> <input type="number" class="attack-bonus svelte-14o91c5"/></div>'),sl=p('<div class="attack-field svelte-14o91c5"><label class="svelte-14o91c5">Damage</label> <input type="text" placeholder="e.g., 2d6+3" class="attack-damage svelte-14o91c5"/></div>'),ll=p('<div class="spell-info-loading svelte-14o91c5">Loading spell info...</div>'),rl=p('<li class="svelte-14o91c5"><strong>At Higher Levels:</strong> </li>'),il=p('<ul class="svelte-14o91c5"><li class="svelte-14o91c5"><strong>Level:</strong> </li> <li class="svelte-14o91c5"><strong>Casting Time:</strong> </li> <li class="svelte-14o91c5"><strong>Range:</strong> </li> <li class="svelte-14o91c5"><strong>Components:</strong> <!></li> <li class="svelte-14o91c5"><strong>Duration:</strong> <!> </li> <li class="svelte-14o91c5"><strong>Description:</strong> </li> <!></ul>'),nl=p('<span class="scaled-damage svelte-14o91c5" style="margin-left: 8px;"> </span>'),ol=p('<span class="scaled-damage svelte-14o91c5">(Half damage)</span>'),cl=p('<span class="scaled-damage svelte-14o91c5">(No damage)</span>'),vl=p('<div class="target-condition svelte-14o91c5"><label class="svelte-14o91c5"><input type="checkbox" class="use-enabled svelte-14o91c5"/> <!> <!></label></div>'),dl=p("<option> </option>"),ul=p('<span class="scaled-damage svelte-14o91c5"><!> </span>'),pl=p('<span class="scaled-damage svelte-14o91c5"> </span>'),fl=p('<div class="target-condition svelte-14o91c5"><label class="svelte-14o91c5"><input type="checkbox" class="use-enabled svelte-14o91c5"/> Target is Fiend or Undead <!></label></div>'),gl=p('<div class="spell-level-selector svelte-14o91c5"><label class="svelte-14o91c5">Cast at Level:</label> <select class="spell-level-select use-enabled svelte-14o91c5"></select> <!></div> <!>',1),bl=p('<div class="spell-level-selector svelte-14o91c5"><span style="color: #dc3545; font-weight: bold;">No spell slots available!</span></div>'),ml=p('<div class="spell-info svelte-14o91c5"><div class="spell-info-header svelte-14o91c5" role="button" tabindex="0"><h4 class="svelte-14o91c5">Spell Info</h4> <button class="collapse-btn-small svelte-14o91c5"> </button></div> <!></div> <!> <!>',1),hl=p('<div class="spell-info-missing svelte-14o91c5">Spell info not found.</div>'),_l=p('<div class="attack-notes svelte-14o91c5"><label class="svelte-14o91c5">Notes</label> <textarea placeholder="e.g., DC 15 Dex save, Range 120 ft, Concentration" class="notes-input svelte-14o91c5" rows="2"></textarea></div>'),yl=p('<button class="btn btn-primary">Roll Attack</button>'),kl=p('<button class="btn btn-success">Cast Spell</button>'),Sl=p('<button class="btn btn-secondary"><!></button>'),$l=p('<button class="btn btn-secondary">Roll Damage</button>'),xl=p('<div class="attack-card svelte-14o91c5"><div class="attack-header svelte-14o91c5"><!> <!></div> <div class="attack-details svelte-14o91c5"><!> <!> <div class="attack-field svelte-14o91c5"><label class="svelte-14o91c5">Type</label> <input type="text" placeholder="e.g., slashing" class="attack-type svelte-14o91c5"/></div></div> <!> <!> <div class="attack-actions svelte-14o91c5"><!> <!></div></div>'),Cl=p('<p class="no-attacks svelte-14o91c5">No attacks added yet. Click "Add Attack" to create one.</p>'),Ll=p('<p class="no-attacks svelte-14o91c5">No attacks match your search.</p>'),wl=p('<button class="btn-remove svelte-14o91c5">Ã—</button>'),Dl=p('<div class="state-card svelte-14o91c5"><div class="state-header svelte-14o91c5"><input type="text" placeholder="Effect name (e.g., Magic Weapon)" class="state-name svelte-14o91c5"/> <!></div> <div class="state-details svelte-14o91c5"><div class="state-field svelte-14o91c5"><label class="svelte-14o91c5">Attack Bonus</label> <input type="number" class="state-bonus svelte-14o91c5"/></div> <div class="state-field svelte-14o91c5"><label class="svelte-14o91c5">Damage Bonus</label> <input type="text" class="state-bonus svelte-14o91c5"/></div></div> <div class="state-description svelte-14o91c5"><label class="svelte-14o91c5">Description</label> <input type="text" placeholder="e.g., +1 to attack and damage rolls (Magic Weapon)" class="state-desc-input svelte-14o91c5"/></div></div>'),jl=p('<div class="states-list svelte-14o91c5"></div>'),Al=p('<p class="no-states svelte-14o91c5">No active effects. Add spell effects that modify your attacks.</p>'),Fl=p('<!> <div class="attacks-list svelte-14o91c5"><!> <!></div> <div class="active-states-section svelte-14o91c5"><h3 class="svelte-14o91c5">Active Spell Effects</h3> <p class="section-description svelte-14o91c5">Effects that modify attack and damage rolls (e.g., Magic Weapon, Bless)</p> <button class="btn btn-secondary">Add Effect</button> <!></div>',1),Bl=p("<section><!> <!></section>");function Ml(a,n){Ft(n,!1);const t=()=>Ye(V,"$character",B),d=()=>Ye(va,"$abilityModifiers",B),f=()=>Ye(Xt,"$searchFilter",B),b=()=>Ye(wt,"$collapsedStates",B),$=()=>Ye(sa,"$isEditMode",B),[B,_]=Nt(),I=M(),Q=M(),q=ta();let T=M({});function _e(g){ba(T,e(T)[g]=!e(T)[g]),c(T,{...e(T)})}function fe(g){return g.description.toLowerCase().includes("regain")&&(g.description.toLowerCase().includes("hit point")||g.description.toLowerCase().includes("hp"))}function ee(){V.update(g=>(g.attacks=[...g.attacks,{id:crypto.randomUUID(),name:"",bonus:0,damage:"",damageType:"",notes:""}],g))}function ve(g){V.update(x=>(x.attacks=x.attacks.filter(O=>O.id!==g),x))}function K(g){let x=g.damage,O=!1;if(g.spellRef){const Se=Y(g.spellRef);if(Se&&Se.level>0){const $e=g.castAtLevel||Se.level;if(!te($e)){Tt.add(`No level ${$e} spell slots available!`,"error");return}const Ne=fa(Se);Ne&&g.targetSucceededSave&&Ne.noDamageOnSave?x="0":(O=Ne?.halfDamageOnSave&&g.targetSucceededSave||!1,x=re(g,Se))}}else if(t().activeStates&&t().activeStates.length>0){let Se=0,$e=[];for(const Be of t().activeStates)typeof Be.damageBonus=="string"?$e.push(Be.damageBonus):typeof Be.damageBonus=="number"&&(Se+=Be.damageBonus);if((Se!==0||$e.length>0)&&x){const Be=x.match(/(\d+d\d+)([+-]\d+)?/);if(Be){const[,Ne,We]=Be,st=(We?parseInt(We):0)+Se;let X=`${Ne}`;st!==0&&(X+=`${st>=0?"+":""}${st}`),$e.length>0&&(X+=" + "+$e.join(" + ")),x=X}}}const E=[];g.bonus!==0&&E.push({value:g.bonus,source:"base"});let N=g.bonus;if(t().activeStates)for(const Se of t().activeStates)typeof Se.attackBonus=="number"&&Se.attackBonus!==0&&(E.push({value:Se.attackBonus,source:Se.name.toLowerCase()}),N+=Se.attackBonus);let je;je=`1d20${N>=0?"+":""}${N}`,q("roll",{notation:je,damageNotation:x,attackName:g.name,applyHalfDamage:O,bonusBreakdown:E})}function qe(g){if(!g.damage){Tt.add(`${g.name}: No damage specified`,"error");return}let x=g.damage,O=!1;const E=[];if(g.spellRef){const N=Y(g.spellRef);if(N&&N.level>0){const je=g.castAtLevel||N.level;if(!te(je)){Tt.add(`No level ${je} spell slots available!`,"error");return}const $e=fa(N);$e&&g.targetSucceededSave&&$e.noDamageOnSave?x="0":(O=$e?.halfDamageOnSave&&g.targetSucceededSave||!1,x=re(g,N))}}else{const N=x.match(/(\d+d\d+)([+-]\d+)?/);if(N){const[,je,Se]=N,$e=Se?parseInt(Se):0;if($e!==0&&E.push({value:$e,source:"base"}),t().activeStates&&t().activeStates.length>0){let Be=0,Ne=[];for(const We of t().activeStates)typeof We.damageBonus=="string"?Ne.push(We.damageBonus):typeof We.damageBonus=="number"&&We.damageBonus!==0&&(E.push({value:We.damageBonus,source:We.name.toLowerCase()}),Be+=We.damageBonus);if(Be!==0||Ne.length>0){const We=$e+Be;let et=`${je}`;We!==0&&(et+=`${We>=0?"+":""}${We}`),Ne.length>0&&(et+=" + "+Ne.join(" + ")),x=et}}}}q("roll",{notation:x,attackName:g.name,applyHalfDamage:O,bonusBreakdown:E})}let W=M([]),ae=M(!1);ca(async()=>{c(W,await Va()),c(ae,!0)});function Y(g){return e(W).find(x=>x.name===g)}function te(g){t().classFeatures.spellSlotsByLevel||ot(V,i(t).classFeatures.spellSlotsByLevel={},i(t)),t().classFeatures.spellSlotsByLevel[g]||ot(V,i(t).classFeatures.spellSlotsByLevel[g]=Array(2).fill(!1),i(t));const O=t().classFeatures.spellSlotsByLevel[g].findIndex(E=>!E);return O===-1?!1:(V.update(E=>(E.classFeatures.spellSlotsByLevel||(E.classFeatures.spellSlotsByLevel={}),E.classFeatures.spellSlotsByLevel[g]||(E.classFeatures.spellSlotsByLevel[g]=Array(2).fill(!1)),E.classFeatures.spellSlotsByLevel[g][O]=!0,E)),!0)}function re(g,x){let O=g.damage,E=0,N=0;if(Qs(x)&&(N+=Rs(t(),d())),t().activeStates)for(const X of t().activeStates)typeof X.damageBonus=="number"&&(N+=X.damageBonus);if(x.higherLevelSlot&&g.castAtLevel){const X=x.level,v=(g.castAtLevel||X)-X;if(v>0){const ie=x.higherLevelSlot.match(/(\d+)d(\d+)\s+for\s+each.*?level\s+above/i);if(ie){const[,le]=ie;E+=v*parseInt(le)}}}if(g.targetIsFiendOrUndead&&x.description.includes("Fiend or an Undead")){const X=x.description.match(/increases by (\d+)d(\d+) if.*?Fiend or.*?Undead/i);if(X){const[,k]=X;E+=parseInt(k)}}const je=O.match(/(\d+)d(\d+)([+-]\d+)?/);if(!je)return N!==0?N>=0?`${N}`:`${N}`:O||"0";const[,Se,$e,Be]=je,Ne=parseInt(Se)+E,et=(Be?parseInt(Be):0)+N;let st=`${Ne}d${$e}`;return et!==0&&(st+=et>=0?`+${et}`:`${et}`),st}function Ie(g){const x=[];for(let E=g.level;E<=9;E++){const N=t().classFeatures.spellSlotsByLevel?.[E];N&&N.length>0&&x.push(E)}return x}function Ue(){V.update(g=>(g.activeStates||(g.activeStates=[]),g.activeStates=[...g.activeStates,{name:"",attackBonus:0,damageBonus:0,description:""}],g))}function ye(g){V.update(x=>(x.activeStates&&(x.activeStates=x.activeStates.filter((O,E)=>E!==g)),x))}function ke(g){const x=Y(g.spellRef);if(!x){Tt.add("Spell not found","error");return}const O=g.castAtLevel||x.level;if(O>0&&!te(O)){Tt.add(`No level ${O} spell slots available!`,"error");return}const E=Ys(x);if(!E){Tt.add(`${x.name} cast! Check spell description for effects.`,"info");return}V.update(N=>(N.activeStates||(N.activeStates=[]),N.activeStates=N.activeStates.filter(je=>je.name!==x.name),N.activeStates=[...N.activeStates,{name:x.name,attackBonus:E.attackBonus,damageBonus:E.damageBonus,acBonus:E.acBonus,description:E.description}],N)),Tt.add(`${x.name} cast! Effect added to Active Spell Effects.`,"success")}Qe(()=>(t(),e(T)),()=>{if(t()&&t().attacks)for(const g of t().attacks)g.spellRef&&e(T)[g.id]===void 0&&ba(T,e(T)[g.id]=!0)}),Qe(()=>(t(),f()),()=>{c(I,t().attacks.filter(g=>{if(!f())return!0;const x=f().toLowerCase();return g.name.toLowerCase().includes(x)||g.damageType.toLowerCase().includes(x)}).sort((g,x)=>!g.spellRef&&x.spellRef?-1:g.spellRef&&!x.spellRef?1:0))}),Qe(()=>(f(),e(I)),()=>{c(Q,!f()||e(I).length>0||"attack".includes(f().toLowerCase())||"spell".includes(f().toLowerCase()))}),Kt(),At();var L=Bl();let ce;var m=r(L);{let g=at(()=>(b(),i(()=>b().attacks?"Expand":"Collapse")));aa(m,{title:"Attacks & Spells",get collapsed(){return b(),i(()=>b().attacks)},get ariaLabel(){return e(g)},onToggle:()=>wt.update(x=>({...x,attacks:!x.attacks}))})}var R=s(m,2);{var se=g=>{var x=Fl(),O=ze(x);{var E=k=>{var v=Xs();A("click",v,ee),o(k,v)};S(O,k=>{$()&&k(E)})}var N=s(O,2),je=r(N);dt(je,1,()=>e(I),k=>k.id,(k,v,ie)=>{var le=xl(),xe=r(le),Re=r(xe);{var Ee=H=>{var C=Zs();we(C),Me(C,()=>e(v).name,me=>(e(v).name=me,Ct(()=>(e(I),t(),f())))),o(H,C)},P=H=>{var C=el(),me=r(C,!0);l(C),F(()=>D(me,(e(v),i(()=>e(v).name||"(Unnamed Attack)")))),o(H,C)};S(Re,H=>{$()?H(Ee):H(P,!1)})}var h=s(Re,2);{var de=H=>{var C=tl();A("click",C,()=>ve(e(v).id)),o(H,C)};S(h,H=>{$()&&H(de)})}l(xe);var De=s(xe,2),Oe=r(De);{var Je=H=>{var C=al(),me=r(C),Ce=s(me,2);we(Ce),l(C),F(()=>{Ke(me,"for",`attack-bonus-${e(v),i(()=>e(v).id)??""}`),Ke(Ce,"id",`attack-bonus-${e(v),i(()=>e(v).id)??""}`)}),Me(Ce,()=>e(v).bonus,Ze=>(e(v).bonus=Ze,Ct(()=>(e(I),t(),f())))),o(H,C)};S(Oe,H=>{e(v),i(()=>e(v).bonus!==0&&e(v).bonus!==void 0)&&H(Je)})}var he=s(Oe,2);{var pe=H=>{var C=sl(),me=r(C),Ce=s(me,2);we(Ce),l(C),F(()=>{Ke(me,"for",`attack-damage-${e(v),i(()=>e(v).id)??""}`),Ke(Ce,"id",`attack-damage-${e(v),i(()=>e(v).id)??""}`)}),Me(Ce,()=>e(v).damage,Ze=>(e(v).damage=Ze,Ct(()=>(e(I),t(),f())))),o(H,C)};S(he,H=>{e(v),i(()=>e(v).damage&&e(v).damage.trim()!=="")&&H(pe)})}var Le=s(he,2),Pe=r(Le),Ae=s(Pe,2);we(Ae),l(Le),l(De);var Te=s(De,2);{var ne=H=>{var C=nt(),me=ze(C);{var Ce=tt=>{var z=ll();o(tt,z)},Ze=tt=>{const z=at(()=>(e(v),i(()=>Y(e(v).spellRef))));var rt=nt(),St=ze(rt);{var w=u=>{const G=at(()=>(U(fa),U(e(z)),i(()=>fa(e(z)))));var ge=ml(),lt=ze(ge),be=r(lt),Ve=s(r(be),2),Xe=r(Ve,!0);l(Ve),l(be);var vt=s(be,2);{var mt=ht=>{var ft=il(),Et=r(ft),Wt=s(r(Et));l(Et);var Gt=s(Et,2),Jt=s(r(Gt));l(Gt);var ct=s(Gt,2),yt=s(r(ct));l(ct);var $t=s(ct,2),Ut=s(r($t)),it=s(Ut);{var Pt=gt=>{var _t=Lt();F(()=>D(_t,`(${U(e(z)),i(()=>e(z).material)??""})`)),o(gt,_t)};S(it,gt=>{U(e(z)),i(()=>e(z).material)&&gt(Pt)})}l($t);var zt=s($t,2),Vt=s(r(zt),2);{var Zt=gt=>{var _t=Lt("Concentration,");o(gt,_t)};S(Vt,gt=>{U(e(z)),i(()=>e(z).concentration)&&gt(Zt)})}var kt=s(Vt,1,!0);l(zt);var jt=s(zt,2),xt=s(r(jt));l(jt);var Ot=s(jt,2);{var Qt=gt=>{var _t=rl(),qt=s(r(_t));l(_t),F(()=>D(qt,` ${U(e(z)),i(()=>e(z).higherLevelSlot)??""}`)),o(gt,_t)};S(Ot,gt=>{U(e(z)),i(()=>e(z).higherLevelSlot)&&gt(Qt)})}l(ft),F(gt=>{D(Wt,` ${U(e(z)),i(()=>e(z).level)??""}`),D(Jt,` ${U(e(z)),i(()=>e(z).castingTime||e(z).actionType)??""}`),D(yt,` ${U(e(z)),i(()=>e(z).range)??""}`),D(Ut,` ${gt??""}`),D(kt,(U(e(z)),i(()=>e(z).duration))),D(xt,` ${U(e(z)),i(()=>e(z).description)??""}`)},[()=>(U(e(z)),i(()=>e(z).components.join(", ")))]),o(ht,ft)};S(vt,ht=>{e(T),e(v),i(()=>!e(T)[e(v).id])&&ht(mt)})}l(lt);var Mt=s(lt,2);{var Dt=ht=>{var ft=vl(),Et=r(ft),Wt=r(Et);we(Wt);var Gt=s(Wt),Jt=s(Gt);{var ct=it=>{var Pt=nl(),zt=r(Pt);l(Pt),F(Vt=>D(zt,`(Spell Save DC: ${Vt??""})`),[()=>(U(Da),t(),d(),i(()=>Da(t(),d())))]),o(it,Pt)};S(Jt,it=>{t(),i(()=>t().class)&&it(ct)})}var yt=s(Jt,2);{var $t=it=>{var Pt=ol();o(it,Pt)},Ut=it=>{var Pt=nt(),zt=ze(Pt);{var Vt=Zt=>{var kt=cl();o(Zt,kt)};S(zt,Zt=>{e(v),U(e(G)),i(()=>e(v).targetSucceededSave&&e(G).noDamageOnSave)&&Zt(Vt)},!0)}o(it,Pt)};S(yt,it=>{e(v),U(e(G)),i(()=>e(v).targetSucceededSave&&e(G).halfDamageOnSave)?it($t):it(Ut,!1)})}l(Et),l(ft),F(it=>D(Gt,` Target succeeded on ${it??""} save `),[()=>(U(e(G)),i(()=>e(G).ability.charAt(0).toUpperCase()+e(G).ability.slice(1)))]),La(Wt,()=>e(v).targetSucceededSave,it=>(e(v).targetSucceededSave=it,Ct(()=>(e(I),t(),f())))),o(ht,ft)};S(Mt,ht=>{e(G)&&ht(Dt)})}var It=s(Mt,2);{var Rt=ht=>{const ft=at(()=>(U(e(z)),i(()=>Ie(e(z)))));var Et=nt(),Wt=ze(Et);{var Gt=ct=>{var yt=gl(),$t=ze(yt),Ut=r($t),it=s(Ut,2);F(()=>{e(v),Ct(()=>{e(ft)})}),dt(it,5,()=>e(ft),ut,(kt,jt)=>{var xt=dl(),Ot=r(xt);l(xt);var Qt={};F(()=>{D(Ot,`Level ${e(jt)??""}`),Qt!==(Qt=e(jt))&&(xt.value=(xt.__value=e(jt))??"")}),o(kt,xt)}),l(it);var Pt=s(it,2);{var zt=kt=>{const jt=at(()=>(e(v),U(e(z)),i(()=>re(e(v),e(z)))));var xt=ul(),Ot=r(xt);{var Qt=qt=>{var ea=Lt("Healing");o(qt,ea)},gt=qt=>{var ea=Lt("Damage");o(qt,ea)};S(Ot,qt=>{U(e(z)),i(()=>fe(e(z)))?qt(Qt):qt(gt,!1)})}var _t=s(Ot);l(xt),F(()=>D(_t,` ${e(jt)??""}`)),o(kt,xt)};S(Pt,kt=>{e(v),U(e(z)),i(()=>e(v).castAtLevel&&e(v).castAtLevel>e(z).level)&&kt(zt)})}l($t);var Vt=s($t,2);{var Zt=kt=>{var jt=fl(),xt=r(jt),Ot=r(xt);we(Ot);var Qt=s(Ot,2);{var gt=_t=>{const qt=at(()=>(e(v),U(e(z)),i(()=>re(e(v),e(z)))));var ea=pl(),Qa=r(ea);l(ea),F(()=>D(Qa,`(+1d8, total: ${e(qt)??""})`)),o(_t,ea)};S(Qt,_t=>{e(v),i(()=>e(v).targetIsFiendOrUndead)&&_t(gt)})}l(xt),l(jt),La(Ot,()=>e(v).targetIsFiendOrUndead,_t=>(e(v).targetIsFiendOrUndead=_t,Ct(()=>(e(I),t(),f())))),o(kt,jt)};S(Vt,kt=>{U(e(z)),i(()=>e(z).description.includes("Fiend or an Undead"))&&kt(Zt)})}F(()=>{Ke(Ut,"for",`castLevel-${e(v),i(()=>e(v).id)??""}`),Ke(it,"id",`castLevel-${e(v),i(()=>e(v).id)??""}`)}),za(it,()=>e(v).castAtLevel,kt=>(e(v).castAtLevel=kt,Ct(()=>(e(I),t(),f())))),o(ct,yt)},Jt=ct=>{var yt=bl();o(ct,yt)};S(Wt,ct=>{U(e(ft)),i(()=>e(ft).length>0)?ct(Gt):ct(Jt,!1)})}o(ht,Et)};S(It,ht=>{U(e(z)),i(()=>e(z).higherLevelSlot&&e(z).level>0)&&ht(Rt)})}F(()=>{Ke(Ve,"aria-label",(e(T),e(v),i(()=>e(T)[e(v).id]?"Expand":"Collapse"))),D(Xe,(e(T),e(v),i(()=>e(T)[e(v).id]?"â–¼":"â–²")))}),A("click",be,()=>_e(e(v).id)),A("keydown",be,ht=>ht.key==="Enter"&&_e(e(v).id)),o(u,ge)},Z=u=>{var G=hl();o(u,G)};S(St,u=>{e(z)?u(w):u(Z,!1)})}o(tt,rt)};S(me,tt=>{e(W),i(()=>e(W).length===0)?tt(Ce):tt(Ze,!1)})}o(H,C)};S(Te,H=>{e(v),i(()=>e(v).spellRef)&&H(ne)})}var J=s(Te,2);{var He=H=>{var C=_l(),me=r(C),Ce=s(me,2);na(Ce),l(C),F(()=>{Ke(me,"for",`attack-notes-${e(v),i(()=>e(v).id)??""}`),Ke(Ce,"id",`attack-notes-${e(v),i(()=>e(v).id)??""}`)}),Me(Ce,()=>e(v).notes,Ze=>(e(v).notes=Ze,Ct(()=>(e(I),t(),f())))),o(H,C)};S(J,H=>{e(v),i(()=>!e(v).spellRef)&&H(He)})}var y=s(J,2),j=r(y);{var oe=H=>{var C=yl();A("click",C,()=>K(e(v))),o(H,C)};S(j,H=>{e(v),i(()=>e(v).bonus!==0||!e(v).spellRef)&&H(oe)})}var ue=s(j,2);{var Fe=H=>{const C=at(()=>(e(v),i(()=>Y(e(v).spellRef))));var me=nt(),Ce=ze(me);{var Ze=z=>{var rt=kl();A("click",rt,()=>ke(e(v))),o(z,rt)},tt=z=>{var rt=Sl(),St=r(rt);{var w=u=>{var G=Lt("Roll Healing");o(u,G)},Z=u=>{var G=Lt("Roll Damage");o(u,G)};S(St,u=>{U(e(C)),i(()=>e(C)&&fe(e(C)))?u(w):u(Z,!1)})}l(rt),A("click",rt,()=>qe(e(v))),o(z,rt)};S(Ce,z=>{U(e(C)),U(Pa),i(()=>e(C)&&Pa(e(C)))?z(Ze):z(tt,!1)})}o(H,me)},Ge=H=>{var C=$l();A("click",C,()=>qe(e(v))),o(H,C)};S(ue,H=>{e(v),e(ae),i(()=>e(v).spellRef&&e(ae))?H(Fe):H(Ge,!1)})}l(y),l(le),F(()=>{Ke(Pe,"for",`attack-type-${e(v),i(()=>e(v).id)??""}`),Ke(Ae,"id",`attack-type-${e(v),i(()=>e(v).id)??""}`)}),Me(Ae,()=>e(v).damageType,H=>(e(v).damageType=H,Ct(()=>(e(I),t(),f())))),o(k,le)});var Se=s(je,2);{var $e=k=>{var v=Cl();o(k,v)},Be=k=>{var v=nt(),ie=ze(v);{var le=xe=>{var Re=Ll();o(xe,Re)};S(ie,xe=>{e(I),i(()=>e(I).length===0)&&xe(le)},!0)}o(k,v)};S(Se,k=>{t(),i(()=>t().attacks.length===0)?k($e):k(Be,!1)})}l(N);var Ne=s(N,2),We=s(r(Ne),4),et=s(We,2);{var st=k=>{var v=jl();dt(v,5,()=>(t(),i(()=>t().activeStates)),ut,(ie,le,xe)=>{var Re=Dl(),Ee=r(Re),P=r(Ee);we(P);var h=s(P,2);{var de=J=>{var He=wl();A("click",He,()=>ye(xe)),o(J,He)};S(h,J=>{$()&&J(de)})}l(Ee);var De=s(Ee,2),Oe=r(De),Je=r(Oe);Ke(Je,"for",`state-attack-bonus-${xe}`);var he=s(Je,2);we(he),Ke(he,"id",`state-attack-bonus-${xe}`),l(Oe);var pe=s(Oe,2),Le=r(pe);Ke(Le,"for",`state-damage-bonus-${xe}`);var Pe=s(Le,2);we(Pe),Ke(Pe,"id",`state-damage-bonus-${xe}`),l(pe),l(De);var Ae=s(De,2),Te=r(Ae);Ke(Te,"for",`state-desc-${xe}`);var ne=s(Te,2);we(ne),Ke(ne,"id",`state-desc-${xe}`),l(Ae),l(Re),Me(P,()=>e(le).name,J=>(e(le).name=J,Ct(()=>t()),da(B,"$character"))),Me(he,()=>e(le).attackBonus,J=>(e(le).attackBonus=J,Ct(()=>t()),da(B,"$character"))),Me(Pe,()=>e(le).damageBonus,J=>(e(le).damageBonus=J,Ct(()=>t()),da(B,"$character"))),Me(ne,()=>e(le).description,J=>(e(le).description=J,Ct(()=>t()),da(B,"$character"))),o(ie,Re)}),l(v),o(k,v)},X=k=>{var v=Al();o(k,v)};S(et,k=>{t(),i(()=>t().activeStates&&t().activeStates.length>0)?k(st):k(X,!1)})}l(Ne),A("click",We,Ue),o(g,x)};S(R,g=>{b(),i(()=>!b().attacks)&&g(se)})}l(L),F(()=>ce=pt(L,1,"attacks svelte-14o91c5",null,ce,{hidden:!e(Q)})),o(a,L),Bt(),_()}var Il=p('<span class="slot-checkbox-x svelte-serp1j">&#8212;</span>'),Rl=p('<label><input type="checkbox" class="slot-checkbox-input svelte-serp1j"/> <span><!></span></label>');function Ta(a,n){Ft(n,!1);const t=()=>Ye(sa,"$isEditMode",d),[d,f]=Nt();let b=bt(n,"checked",8,!1),$=bt(n,"disabled",8,!1),B=bt(n,"className",8,""),_=bt(n,"index",8,void 0),I=bt(n,"ariaLabel",8,void 0);const Q=ta();function q(K){Q("change",{checked:K.currentTarget.checked,index:_()})}At();var T=Rl(),_e=r(T);we(_e);var fe=s(_e,2),ee=r(fe);{var ve=K=>{var qe=Il();o(K,qe)};S(ee,K=>{b()&&K(ve)})}l(fe),l(T),F(()=>{pt(T,1,"slot-checkbox-label "+B()+(t()?"":" not-editable"),"svelte-serp1j"),Ka(_e,b()),_e.disabled=$()||!t(),Ke(_e,"aria-label",I()),Ke(_e,"tabindex",t()?0:-1),pt(fe,1,`slot-checkbox-custom ${b()?"used":""} ${t()?"":"readonly"}`,"svelte-serp1j")}),A("change",_e,q),o(a,T),Bt(),f()}var El=p('<p class="no-features svelte-1kpvv0n">Select a class to see available features</p>'),Pl=p('<p class="no-features svelte-1kpvv0n">No class features available at this level</p>'),Tl=p('<div class="spell-slots svelte-1kpvv0n"><label class="svelte-1kpvv0n"> </label> <div class="slots-tracker svelte-1kpvv0n"></div></div>'),Hl=p('<div class="all-spell-slots"></div>'),Ul=p('<div class="feature-box spellcasting svelte-1kpvv0n"><h3 class="svelte-1kpvv0n"> </h3> <div class="spell-stats svelte-1kpvv0n"><div class="spell-stat svelte-1kpvv0n"><label class="svelte-1kpvv0n">Spell Save DC</label> <div class="spell-value svelte-1kpvv0n"> </div></div> <div class="spell-stat svelte-1kpvv0n"><label class="svelte-1kpvv0n">Prepared Spells</label> <div class="spell-value svelte-1kpvv0n"> </div></div></div> <!> <div class="prepared-spells svelte-1kpvv0n"><label class="svelte-1kpvv0n">Prepared Spells</label> <textarea placeholder="List your prepared spells..." class="svelte-1kpvv0n"></textarea></div></div>'),Nl=p('<p class="unlimited svelte-1kpvv0n">Unlimited Uses</p>'),Gl=p('<div class="slots-tracker svelte-1kpvv0n"></div> <div class="uses-actions-row"><button class="btn btn-primary use-enabled"> </button></div> <div class="uses-info svelte-1kpvv0n"><span class="reset-info svelte-1kpvv0n"> </span></div>',1),Ol=p('<div class="uses-tracker svelte-1kpvv0n"><!></div>'),ql=p('<div class="pool-tracker svelte-1kpvv0n"><input type="number" min="0" class="pool-input svelte-1kpvv0n"/> <span> </span> <button class="btn-small svelte-1kpvv0n"> </button></div>'),Wl=p('<p class="no-uses svelte-1kpvv0n">No Channel Divinity uses remaining</p>'),zl=p('<div class="channel-divinity-option svelte-1kpvv0n"><button class="btn btn-primary use-enabled svelte-1kpvv0n">Use Channel Divinity</button> <div class="uses-info svelte-1kpvv0n"><span class="reset-info svelte-1kpvv0n"> </span></div> <!></div>'),Kl=p('<div class="feature-box svelte-1kpvv0n"><h3 class="svelte-1kpvv0n"><!> </h3> <p class="feature-description svelte-1kpvv0n"> </p> <!></div>'),Jl=p('<div class="features-grid svelte-1kpvv0n"><!> <!></div>'),Vl=p("<section><!> <!></section>");function Ql(a,n){Ft(n,!1);const t=()=>Ye(V,"$character",$),d=()=>Ye(va,"$abilityModifiers",$),f=()=>Ye(Xt,"$searchFilter",$),b=()=>Ye(wt,"$collapsedStates",$),[$,B]=Nt(),_=M(),I=M(),Q=M(),q=M(),T=M(),_e=M(),fe=M();let ee=M(0),ve=M(0);function K(m,R){V.update(se=>(se.classFeatures.features[m]=R,se))}function qe(){V.update(m=>(m.classFeatures.spellSlotsByLevel||(m.classFeatures.spellSlotsByLevel={}),e(q).forEach(({level:R,slots:se})=>{m.classFeatures.spellSlotsByLevel[R]||(m.classFeatures.spellSlotsByLevel[R]=Array(se).fill(!1))}),m))}function W(m){if(typeof m.maxUses=="function"){if((m.name==="Divine Sense"||m.name==="War Priest")&&e(_)?.spellcastingAbility){const R=d()[e(_).spellcastingAbility];return m.maxUses(t().level,R)}return m.maxUses(t().level)}return m.maxUses||0}function ae(m,R){V.update(se=>((!se.classFeatures.features[m]||!Array.isArray(se.classFeatures.features[m])||se.classFeatures.features[m].length!==R)&&(se.classFeatures.features[m]=Array(R).fill(!1)),se))}Ya(()=>{e(_e)&&t()&&t().classFeatures&&t().classFeatures.features&&e(_e).forEach(m=>{if(m.type==="uses"){const R=m.name.replace(/\s+/g,""),se=W(m),g=t().classFeatures.features[R];(!Array.isArray(g)||g.length!==se)&&ae(R,se)}})});function Y(m){return typeof m.maxPool=="function"?m.maxPool(t().level):m.maxPool||0}function te(m){return typeof m.description=="function"?m.description(t().level):m.description}function re(){const m="ChannelDivinity";V.update(R=>{const se=R.classFeatures.features[m];return typeof se=="number"&&se>0&&(R.classFeatures.features[m]=se-1),R})}function Ie(){wt.update(m=>({...m,classFeatures:!m.classFeatures}))}Qe(()=>(t(),Ht),()=>{c(_,t().class?Ht(t().class):null)}),Qe(()=>(t(),ra),()=>{c(I,t().class?ra(t().class,t().level,t().subclass):[])}),Qe(()=>(t(),Ia),()=>{c(Q,t().class?Ia(t().class,t().level):0)}),Qe(()=>(e(_),t()),()=>{c(q,(()=>{if(!e(_)?.spellcaster)return[];const m=t().level,R=[];return m>=1&&R.push({level:1,slots:Math.min(4,2+Math.floor(m/3))}),m>=3&&R.push({level:2,slots:Math.min(3,2+Math.floor((m-3)/4))}),m>=5&&R.push({level:3,slots:Math.min(3,2+Math.floor((m-5)/5))}),m>=7&&R.push({level:4,slots:Math.min(3,1+Math.floor((m-7)/6))}),m>=9&&R.push({level:5,slots:Math.min(2,1+Math.floor((m-9)/8))}),m>=11&&R.push({level:6,slots:1}),m>=13&&R.push({level:7,slots:1}),m>=15&&R.push({level:8,slots:1}),m>=17&&R.push({level:9,slots:1}),R})())}),Qe(()=>(e(_),d(),t(),Ra),()=>{if(e(_)?.spellcaster&&e(_).spellcastingAbility){const m=d()[e(_).spellcastingAbility];c(ee,ks(t().class,m,t().proficiencyBonus)||0),c(ve,Ra(t().class,t().level,m))}}),Qe(()=>(t(),e(_),e(q)),()=>{t().class&&e(_)?.spellcaster&&e(q).length>0&&qe()}),Qe(()=>t(),()=>{c(T,(()=>{const R=t().classFeatures.features["ChannelDivinity"];return typeof R=="number"?R:0})())}),Qe(()=>(e(I),f()),()=>{c(_e,e(I).filter(m=>{if(!f())return!0;const R=f().toLowerCase();return m.name.toLowerCase().includes(R)||te(m).toLowerCase().includes(R)}))}),Qe(()=>(f(),t(),e(_e)),()=>{c(fe,!f()||t().class||"class features".includes(f().toLowerCase())||"spellcasting".includes(f().toLowerCase())||e(_e).length>0)}),Kt(),At();var Ue=Vl();let ye;var ke=r(Ue);{let m=at(()=>(b(),i(()=>b().classFeatures?"Expand":"Collapse")));aa(ke,{title:"Class Features",get collapsed(){return b(),i(()=>b().classFeatures)},get ariaLabel(){return e(m)},onToggle:Ie})}var L=s(ke,2);{var ce=m=>{var R=nt(),se=ze(R);{var g=O=>{var E=El();o(O,E)},x=O=>{var E=nt(),N=ze(E);{var je=$e=>{var Be=Pl();o($e,Be)},Se=$e=>{var Be=Jl(),Ne=r(Be);{var We=st=>{var X=Ul(),k=r(X),v=r(k);l(k);var ie=s(k,2),le=r(ie),xe=s(r(le),2),Re=r(xe,!0);l(xe),l(le);var Ee=s(le,2),P=s(r(Ee),2),h=r(P,!0);l(P),l(Ee),l(ie);var de=s(ie,2);{var De=he=>{var pe=Hl();dt(pe,5,()=>e(q),ut,(Le,Pe)=>{let Ae=()=>e(Pe).level,Te=()=>e(Pe).slots;const ne=at(()=>(t(),Ae(),Te(),i(()=>t().classFeatures.spellSlotsByLevel?.[Ae()]||Array(Te()).fill(!1))));var J=Tl(),He=r(J),y=r(He);l(He);var j=s(He,2);dt(j,5,()=>e(ne),ut,(oe,ue,Fe)=>{{let Ge=at(()=>(U(e(ne)),i(()=>e(ne)[Fe]||!1)));Ta(oe,{get checked(){return e(Ge)},$$events:{change:H=>{V.update(C=>(C.classFeatures.spellSlotsByLevel||(C.classFeatures.spellSlotsByLevel={}),C.classFeatures.spellSlotsByLevel[Ae()]||(C.classFeatures.spellSlotsByLevel[Ae()]=Array(Te()).fill(!1)),C.classFeatures.spellSlotsByLevel[Ae()][Fe]=H.detail.checked,C))}}})}}),l(j),l(J),F(()=>D(y,`${Ae()===1?"1st":Ae()===2?"2nd":Ae()===3?"3rd":`${Ae()}th`} Level Spell Slots`)),o(Le,J)}),l(pe),o(he,pe)};S(de,he=>{e(q),i(()=>e(q).length>0)&&he(De)})}var Oe=s(de,2),Je=s(r(Oe),2);na(Je),l(Oe),l(X),F(he=>{D(v,`Spellcasting (${he??""})`),D(Re,e(ee)),D(h,e(ve))},[()=>(e(_),i(()=>e(_).spellcastingAbility?.toUpperCase()))]),Me(Je,()=>t().classFeatures.preparedSpells,he=>ot(V,i(t).classFeatures.preparedSpells=he,i(t))),o(st,X)};S(Ne,st=>{e(_),i(()=>e(_)?.spellcaster)&&st(We)})}var et=s(Ne,2);dt(et,1,()=>e(_e),ut,(st,X)=>{const k=at(()=>(e(X),i(()=>e(X).name.replace(/\s+/g,"")))),v=at(()=>(t(),U(e(k)),i(()=>t().classFeatures.features[e(k)]))),ie=at(()=>typeof e(v)=="number");var le=Kl(),xe=r(le),Re=r(xe);{var Ee=he=>{var pe=Lt("Channel Divinity:");o(he,pe)};S(Re,he=>{e(X),i(()=>e(X).type==="channelDivinity")&&he(Ee)})}var P=s(Re);l(xe);var h=s(xe,2),de=r(h,!0);l(h);var De=s(h,2);{var Oe=he=>{const pe=at(()=>(e(X),i(()=>W(e(X))))),Le=at(()=>(U(e(v)),U(e(pe)),i(()=>Array.isArray(e(v))?e(v):Array(e(pe)).fill(!1))));var Pe=Ol(),Ae=r(Pe);{var Te=J=>{var He=Nl();o(J,He)},ne=J=>{var He=Gl(),y=ze(He);dt(y,5,()=>e(Le),ut,(C,me,Ce)=>{Ta(C,{get checked(){return e(me)},index:Ce,$$events:{change:Ze=>{V.update(tt=>(tt.classFeatures.features[e(k)]||(tt.classFeatures.features[e(k)]=Array(e(pe)).fill(!1)),tt.classFeatures.features[e(k)][Ce]=Ze.detail.checked,tt))}}})}),l(y);var j=s(y,2),oe=r(j),ue=r(oe);l(oe),l(j);var Fe=s(j,2),Ge=r(Fe),H=r(Ge);l(Ge),l(Fe),F(C=>{oe.disabled=C,D(ue,`Use ${e(X),i(()=>e(X).name)??""}`),D(H,`Resets on ${e(X),i(()=>e(X).resetOn==="short"?"Short Rest":"Long Rest")??""}`)},[()=>(U(e(Le)),i(()=>e(Le).filter(C=>!C).length<=0))]),A("click",oe,()=>{V.update(C=>{C.classFeatures.features[e(k)]||(C.classFeatures.features[e(k)]=Array(e(pe)).fill(!1));const me=C.classFeatures.features[e(k)],Ce=me.findIndex(Ze=>!Ze);return Ce!==-1&&(me[Ce]=!0),C})}),o(J,He)};S(Ae,J=>{e(pe)===1/0?J(Te):J(ne,!1)})}l(Pe),o(he,Pe)},Je=he=>{var pe=nt(),Le=ze(pe);{var Pe=Te=>{const ne=at(()=>(e(X),i(()=>Y(e(X)))));var J=ql(),He=r(J);we(He);var y=s(He,2),j=r(y);l(y);var oe=s(y,2),ue=r(oe,!0);l(oe),l(J),F(()=>{ha(He,e(ie)&&e(v)!==void 0?e(v):e(ne)),Ke(He,"max",e(ne)),D(j,`/ ${e(ne)??""}`),D(ue,(e(X),i(()=>e(X).resetOn==="short"?"Short Rest":"Long Rest")))}),A("input",He,Fe=>{V.update(Ge=>(Ge.classFeatures.features[e(k)]=parseInt(Fe.currentTarget.value)||0,Ge))}),A("click",oe,()=>K(e(k),e(ne))),o(Te,J)},Ae=Te=>{var ne=nt(),J=ze(ne);{var He=y=>{var j=zl(),oe=r(j),ue=s(oe,2),Fe=r(ue),Ge=r(Fe);l(Fe),l(ue);var H=s(ue,2);{var C=me=>{var Ce=Wl();o(me,Ce)};S(H,me=>{e(T)<=0&&me(C)})}l(j),F(()=>{oe.disabled=e(T)<=0,D(Ge,`Resets on ${e(X),i(()=>e(X).resetOn==="short"?"Short Rest":"Long Rest")??""}`)}),A("click",oe,re),o(y,j)};S(J,y=>{e(X),i(()=>e(X).type==="channelDivinity")&&y(He)},!0)}o(Te,ne)};S(Le,Te=>{e(X),i(()=>e(X).type==="pool")?Te(Pe):Te(Ae,!1)},!0)}o(he,pe)};S(De,he=>{e(X),i(()=>e(X).type==="uses")?he(Oe):he(Je,!1)})}l(le),F(he=>{D(P,` ${e(X),i(()=>e(X).name)??""}`),D(de,he)},[()=>(e(X),i(()=>te(e(X))))]),o(st,le)}),l(Be),o($e,Be)};S(N,$e=>{e(I),i(()=>e(I).length===0)?$e(je):$e(Se,!1)},!0)}o(O,E)};S(se,O=>{t(),i(()=>!t().class)?O(g):O(x,!1)})}o(m,R)};S(L,m=>{b(),i(()=>!b().classFeatures)&&m(ce)})}l(Ue),F(()=>ye=pt(Ue,1,"class-features svelte-1kpvv0n",null,ye,{hidden:!e(fe)})),o(a,Ue),Bt(),B()}var Yl=p('<textarea placeholder="Enter features, traits, and special abilities..." class="svelte-wttn0l"></textarea> <h3 class="svelte-wttn0l">Equipment</h3> <textarea placeholder="List your equipment and inventory..." class="svelte-wttn0l"></textarea> <h3 class="svelte-wttn0l">Notes</h3> <textarea placeholder="Additional notes..." class="svelte-wttn0l"></textarea>',1),Xl=p("<section><!> <!></section>");function Zl(a,n){Ft(n,!1);const t=()=>Ye(Xt,"$searchFilter",b),d=()=>Ye(V,"$character",b),f=()=>Ye(wt,"$collapsedStates",b),[b,$]=Nt(),B=M();function _(){wt.update(fe=>({...fe,notes:!fe.notes}))}Qe(()=>(t(),d()),()=>{c(B,!t()||"features".includes(t().toLowerCase())||"traits".includes(t().toLowerCase())||"equipment".includes(t().toLowerCase())||"notes".includes(t().toLowerCase())||d().features.toLowerCase().includes(t().toLowerCase())||d().equipment.toLowerCase().includes(t().toLowerCase())||d().notes.toLowerCase().includes(t().toLowerCase()))}),Kt(),At();var I=Xl();let Q;var q=r(I);{let fe=at(()=>(f(),i(()=>f().notes?"Expand":"Collapse")));aa(q,{title:"Features & Traits",get collapsed(){return f(),i(()=>f().notes)},get ariaLabel(){return e(fe)},onToggle:_})}var T=s(q,2);{var _e=fe=>{var ee=Yl(),ve=ze(ee);na(ve);var K=s(ve,4);na(K);var qe=s(K,4);na(qe),Me(ve,()=>d().features,W=>ot(V,i(d).features=W,i(d))),Me(K,()=>d().equipment,W=>ot(V,i(d).equipment=W,i(d))),Me(qe,()=>d().notes,W=>ot(V,i(d).notes=W,i(d))),o(fe,ee)};S(T,fe=>{f(),i(()=>!f().notes)&&fe(_e)})}l(I),F(()=>Q=pt(I,1,"notes svelte-wttn0l",null,Q,{hidden:!e(B)})),o(a,I),Bt(),$()}var er=p('<div class="color-picker-section svelte-1r90jgp"><h3 class="svelte-1r90jgp">Dice Colors</h3> <div class="color-inputs svelte-1r90jgp"><div class="color-input-group svelte-1r90jgp"><label for="dice-color" class="svelte-1r90jgp">Dice Color</label> <input type="color" id="dice-color" class="svelte-1r90jgp"/></div> <div class="color-input-group svelte-1r90jgp"><label for="label-color" class="svelte-1r90jgp">Label Color</label> <input type="color" id="label-color" class="svelte-1r90jgp"/></div> <div class="color-input-group svelte-1r90jgp"><label for="desk-color" class="svelte-1r90jgp">Background Color</label> <input type="color" id="desk-color" class="svelte-1r90jgp"/></div></div></div>'),tr=p('<div class="loading svelte-1r90jgp"><p class="svelte-1r90jgp">Loading 3D dice...</p></div>'),ar=p('<div class="custom-dice-selector svelte-1r90jgp"><h3 class="svelte-1r90jgp">Choose Dice to Roll</h3> <div class="dice-inputs svelte-1r90jgp"><div class="dice-input-group svelte-1r90jgp"><label for="d4" class="svelte-1r90jgp">d4</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d4" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d6" class="svelte-1r90jgp">d6</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d6" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d8" class="svelte-1r90jgp">d8</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d8" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d10" class="svelte-1r90jgp">d10</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d10" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d12" class="svelte-1r90jgp">d12</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d12" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d20" class="svelte-1r90jgp">d20</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d20" min="0" max="10"/></div></div> <div class="dice-controls svelte-1r90jgp"><button class="btn btn-primary use-enabled svelte-1r90jgp"> </button> <button class="btn btn-secondary use-enabled svelte-1r90jgp">Reset</button></div></div>'),sr=p('<span class="crit-badge svelte-1r90jgp">CRITICAL!</span>'),lr=p('<p class="svelte-1r90jgp"> </p>'),rr=p('<div class="bonus-item svelte-1r90jgp"><span class="bonus-value svelte-1r90jgp"> </span> <span class="bonus-source svelte-1r90jgp"> </span></div>'),ir=p('<div class="bonus-breakdown svelte-1r90jgp"></div>'),nr=p('<p class="modifier-text svelte-1r90jgp"> </p>'),or=p('<button class="btn btn-follow-up svelte-1r90jgp"> </button>'),cr=p('<button class="btn btn-guided-strike svelte-1r90jgp">âš¡ Use Guided Strike (+10)</button>'),vr=p('<div class="follow-up-actions svelte-1r90jgp"><!> <!></div>'),dr=p('<div class="result-header svelte-1r90jgp"><h3 class="svelte-1r90jgp"> </h3> <!></div> <div class="result-total svelte-1r90jgp"> </div> <div class="result-details svelte-1r90jgp"><!> <!></div> <!>',1),ur=p('<div role="button" tabindex="-1"><div class="modal-content svelte-1r90jgp" role="dialog" tabindex="0"><div class="modal-header svelte-1r90jgp"><h2 class="svelte-1r90jgp">Dice Roller</h2> <div class="header-buttons svelte-1r90jgp"><button class="color-btn svelte-1r90jgp" title="Customize dice colors">ðŸŽ¨</button> <button class="close-btn svelte-1r90jgp">Ã—</button></div></div> <!> <!> <div class="dice-main-area svelte-1r90jgp"><div class="dice-container svelte-1r90jgp"></div> <!></div> <div><!></div></div></div>');function pr(a,n){Ft(n,!1);const t=()=>Ye(V,"$character",d),[d,f]=Nt(),b=M(),$=M(),B=M(),_=ta();let I=bt(n,"notation",12,""),Q=bt(n,"visible",8,!1),q=bt(n,"damageNotation",12,""),T=bt(n,"attackName",12,""),_e=bt(n,"applyHalfDamage",8,!1),fe=bt(n,"bonusBreakdown",28,()=>[]),ee=null,ve=M(void 0),K=M(!1),qe=M(""),W=M(null);function ae(){return e(W)?.resultTotal??null}let Y=M(0),te=M(0),re=M(0),Ie=M(0),Ue=M(0),ye=M(0),ke=M(0),L=M([]),ce=M(!1),m=M("other"),R=M(!1),se=M("#051e0a"),g=M("#ffffff"),x=M("#3a2004"),O=M(!1);function E(y){return y.length===9&&y.startsWith("#")?y.substring(0,7):y}function N(y,j="ff"){return y.length===7&&y.startsWith("#")?y+j:y}function je(){if(window.DICE&&e(ve))try{ee&&e(ve)&&ba(ve,e(ve).innerHTML="");const y=e(ve).clientWidth||500,j=e(ve).clientHeight||300;ee=new window.DICE.dice_box(e(ve),{w:y,h:j}),c(K,!0)}catch(y){console.error("Error initializing dice box:",y)}}ca(()=>{const y=ue=>new Promise((Fe,Ge)=>{if(document.querySelector(`script[src="${ue}"]`)){Fe(null);return}const C=document.createElement("script");C.src=ue,C.onload=()=>{Fe(null)},C.onerror=()=>{console.error(`Failed to load: ${ue}`),Ge(new Error(`Failed to load ${ue}`))},document.head.appendChild(C)});setTimeout(()=>{y(`${ia}/libs/three.min.js`).then(()=>y(`${ia}/libs/cannon.min.js`)).then(()=>y(`${ia}/libs/teal.js`)).then(()=>y(`${ia}/dice.js`)).then(()=>{if(window.DICE){const ue=window.DICE.getColors();c(se,E(ue.dice_color)),c(g,E(ue.label_color)),c(x,E(ue.desk_color))}je()}).catch(ue=>{console.error("Failed to load dice libraries:",ue)})},100);const j=()=>{e(K)&&je()},oe=ue=>{Q()&&ue.key==="Escape"&&k()};return window.addEventListener("resize",j),window.addEventListener("keydown",oe),()=>{window.removeEventListener("resize",j),window.removeEventListener("keydown",oe)}});function Se(y,j="other"){if(!ee||!e(K))return;c(W,null),c(L,[]),c(ce,!1),j==="damage"&&fe([]),c(m,j),c(R,!1),ee.diceToRoll=y;const oe=Fe=>null,ue=Fe=>{let Ge=Fe.resultTotal,H=Fe.resultString;if(_e()&&(Ge=Math.floor(Ge/2),H=H+" (halved)"),c(W,{...Fe,resultTotal:Ge,resultString:H}),j==="attack"||j==="check"||j==="save"){const C=Fe.result?.filter(me=>me===20)||[];if(C.length>0){const me=C[0];c(ce,me===20)}}if(c(L,[]),console.log("Setting up follow-up actions. Type:",j,"damageNotation:",q(),"isCritical:",e(ce)),j==="attack"&&q())if(e(ce)){const C=Ne(q());e(L).push({label:`Roll Critical Damage (${C})`,notation:C})}else e(L).push({label:`Roll Damage (${q()})`,notation:q()})};ee.start_throw(oe,ue)}function $e(){const y=[];e(Y)>0&&y.push(`${e(Y)}d4`),e(te)>0&&y.push(`${e(te)}d6`),e(re)>0&&y.push(`${e(re)}d8`),e(Ie)>0&&y.push(`${e(Ie)}d10`),e(Ue)>0&&y.push(`${e(Ue)}d12`),e(ye)>0&&y.push(`${e(ye)}d20`);let j=y.join("+")||"1d20";return e(ke)!==0&&(j+=e(ke)>=0?`+${e(ke)}`:`${e(ke)}`),j}function Be(){const y=$e();Se(y)}function Ne(y){return y.replace(/(\d+)d(\d+)/g,(j,oe,ue)=>`${parseInt(oe)*2}d${ue}`)}function We(){c(Y,0),c(te,0),c(re,0),c(Ie,0),c(Ue,0),c(ye,0),c(ke,0),c(W,null),c(L,[]),c(ce,!1),c(m,"other"),c(R,!1)}function et(){window.DICE&&(window.DICE.setColors({dice_color:N(e(se),"ff"),label_color:N(e(g),"ff"),desk_color:e(x)}),ee&&(ee.updateDeskColor(e(x)),ee.updateDiceColors()))}function st(){c(O,!e(O))}function X(){!e(W)||e($)<=0||e(R)||(c(W,{...e(W),resultTotal:e(W).resultTotal+10,resultString:e(W).resultString+" + 10 (Guided Strike)"}),V.update(y=>{const j="ChannelDivinity",oe=y.classFeatures.features[j];return typeof oe=="number"&&oe>0&&(y.classFeatures.features[j]=oe-1),y}),c(R,!0))}function k(){_("close"),I(""),q(""),T(""),c(qe,""),c(W,null),c(R,!1),We()}Qe(()=>(t(),ra),()=>{c(b,t().class?ra(t().class,t().level,t().subclass).some(j=>j.name==="Guided Strike"):!1)}),Qe(()=>t(),()=>{c($,(()=>{const j=t().classFeatures.features["ChannelDivinity"];return typeof j=="number"?j:0})())}),Qe(()=>(e(Y),e(te),e(re),e(Ie),e(Ue),e(ye),e(ke)),()=>{c(B,(()=>{const y=[];e(Y)>0&&y.push(`${e(Y)}d4`),e(te)>0&&y.push(`${e(te)}d6`),e(re)>0&&y.push(`${e(re)}d8`),e(Ie)>0&&y.push(`${e(Ie)}d10`),e(Ue)>0&&y.push(`${e(Ue)}d12`),e(ye)>0&&y.push(`${e(ye)}d20`);let j=y.join("+")||"1d20";return e(ke)!==0&&(j+=e(ke)>=0?`+${e(ke)}`:`${e(ke)}`),j})())}),Qe(()=>(U(I()),e(K),U(Q()),e(qe),U(q()),U(T())),()=>{if(I()&&e(K)&&Q()&&I()!==e(qe)){c(qe,I()),c(W,null),c(L,[]),c(ce,!1),c(R,!1);const y=I().includes("1d20")?"attack":"other";console.log("Auto-roll triggered. notation:",I(),"damageNotation:",q(),"attackName:",T()),setTimeout(()=>Se(I(),y),200)}}),Kt();var v={getLastRollTotal:ae};At();var ie=ur();let le;var xe=r(ie),Re=r(xe),Ee=s(r(Re),2),P=r(Ee),h=s(P,2);l(Ee),l(Re);var de=s(Re,2);{var De=y=>{var j=er(),oe=s(r(j),2),ue=r(oe),Fe=s(r(ue),2);we(Fe),l(ue);var Ge=s(ue,2),H=s(r(Ge),2);we(H),l(Ge);var C=s(Ge,2),me=s(r(C),2);we(me),l(C),l(oe),l(j),Me(Fe,()=>e(se),Ce=>c(se,Ce)),A("change",Fe,et),Me(H,()=>e(g),Ce=>c(g,Ce)),A("change",H,et),Me(me,()=>e(x),Ce=>c(x,Ce)),A("change",me,et),o(y,j)};S(de,y=>{e(O)&&y(De)})}var Oe=s(de,2);{var Je=y=>{var j=tr();o(y,j)};S(Oe,y=>{e(K)||y(Je)})}var he=s(Oe,2),pe=r(he);xa(pe,y=>c(ve,y),()=>e(ve));var Le=s(pe,2);{var Pe=y=>{var j=ar(),oe=s(r(j),2),ue=r(oe),Fe=s(r(ue),2);we(Fe),l(ue);var Ge=s(ue,2),H=s(r(Ge),2);we(H),l(Ge);var C=s(Ge,2),me=s(r(C),2);we(me),l(C);var Ce=s(C,2),Ze=s(r(Ce),2);we(Ze),l(Ce);var tt=s(Ce,2),z=s(r(tt),2);we(z),l(tt);var rt=s(tt,2),St=s(r(rt),2);we(St),l(rt),l(oe);var w=s(oe,2),Z=r(w),u=r(Z);l(Z);var G=s(Z,2);l(w),l(j),F(()=>{Z.disabled=!e(K),D(u,`Roll ${e(B)??""}`)}),Me(Fe,()=>e(Y),ge=>c(Y,ge)),Me(H,()=>e(te),ge=>c(te,ge)),Me(me,()=>e(re),ge=>c(re,ge)),Me(Ze,()=>e(Ie),ge=>c(Ie,ge)),Me(z,()=>e(Ue),ge=>c(Ue,ge)),Me(St,()=>e(ye),ge=>c(ye,ge)),A("click",Z,Be),A("click",G,We),o(y,j)};S(Le,y=>{I()||y(Pe)})}l(he);var Ae=s(he,2);let Te;var ne=r(Ae);{var J=y=>{var j=dr(),oe=ze(j),ue=r(oe),Fe=r(ue,!0);l(ue);var Ge=s(ue,2);{var H=Z=>{var u=sr();o(Z,u)};S(Ge,Z=>{e(ce)&&Z(H)})}l(oe);var C=s(oe,2),me=r(C,!0);l(C);var Ce=s(C,2),Ze=r(Ce);{var tt=Z=>{var u=lr(),G=r(u,!0);l(u),F(()=>D(G,(e(W),i(()=>e(W).resultString)))),o(Z,u)};S(Ze,Z=>{e(W),i(()=>e(W).resultString)&&Z(tt)})}var z=s(Ze,2);{var rt=Z=>{var u=nt(),G=ze(u);{var ge=be=>{var Ve=ir();dt(Ve,5,fe,ut,(Xe,vt)=>{var mt=rr(),Mt=r(mt),Dt=r(Mt);l(Mt);var It=s(Mt,2),Rt=r(It);l(It),l(mt),F(()=>{D(Dt,`${e(vt),i(()=>e(vt).value>=0?"+":"")??""}${e(vt),i(()=>e(vt).value)??""}`),D(Rt,`(${e(vt),i(()=>e(vt).source)??""})`)}),o(Xe,mt)}),l(Ve),o(be,Ve)},lt=be=>{var Ve=nt(),Xe=ze(Ve);{var vt=mt=>{var Mt=nr(),Dt=r(Mt);l(Mt),F(()=>D(Dt,`Modifier: ${e(W),i(()=>e(W).constant>=0?"+":"")??""}${e(W),i(()=>e(W).constant)??""}`)),o(mt,Mt)};S(Xe,mt=>{e(W),i(()=>e(W).constant)&&mt(vt)},!0)}o(be,Ve)};S(G,be=>{U(fe()),i(()=>fe().length>0)?be(ge):be(lt,!1)})}o(Z,u)};S(z,Z=>{e(W),U(fe()),i(()=>e(W).constant||fe().length>0)&&Z(rt)})}l(Ce);var St=s(Ce,2);{var w=Z=>{var u=vr(),G=r(u);dt(G,1,()=>e(L),ut,(be,Ve)=>{var Xe=or(),vt=r(Xe,!0);l(Xe),F(()=>D(vt,(e(Ve),i(()=>e(Ve).label)))),A("click",Xe,()=>Se(e(Ve).notation,"damage")),o(be,Xe)});var ge=s(G,2);{var lt=be=>{var Ve=cr();F(()=>{Ve.disabled=e($)<=0,Ke(Ve,"title",e($)<=0?"No Channel Divinity uses remaining":"Use Channel Divinity to add +10 to this attack roll")}),A("click",Ve,X),o(be,Ve)};S(ge,be=>{e(b)&&e(m)==="attack"&&!e(R)&&be(lt)})}l(u),o(Z,u)};S(St,Z=>{e(L),e(b),e(m),e(R),i(()=>e(L).length>0||e(b)&&e(m)==="attack"&&!e(R))&&Z(w)})}F(()=>{D(Fe,T()?`${T()} - Result`:"Result"),D(me,(e(W),i(()=>e(W).resultTotal)))}),o(y,j)};S(ne,y=>{e(W)&&y(J)})}l(Ae),l(xe),l(ie),F(()=>{le=pt(ie,1,"modal-overlay svelte-1r90jgp",null,le,{hidden:!Q()}),Te=pt(Ae,1,"roll-result svelte-1r90jgp",null,Te,{"has-result":e(W)})}),A("click",P,st),A("click",h,k),A("click",xe,Fa(function(y){la.call(this,n,y)})),A("keydown",xe,function(y){la.call(this,n,y)}),A("click",ie,k),A("keydown",ie,y=>y.key==="Escape"&&k()),o(a,ie),_s(n,"getLastRollTotal",ae);var He=Bt(v);return f(),He}const ya="https://api.github.com/gists";async function fr(a,n,t){if(!n)throw new Error("GitHub token is required");const d=JSON.stringify(a,null,2),f=`${a.name||"character"}_dnd.json`,b={description:t||`D&D Character: ${a.name}`,public:!1,files:{[f]:{content:d}}},$=await fetch(ya,{method:"POST",headers:{Authorization:`token ${n}`,"Content-Type":"application/json"},body:JSON.stringify(b)});if(!$.ok)throw new Error(`Failed to create gist: ${$.statusText}`);return(await $.json()).id}async function gr(a,n,t){if(!n||!t)throw new Error("GitHub token and Gist ID are required");const d=JSON.stringify(a,null,2),b={files:{[`${a.name||"character"}_dnd.json`]:{content:d}}},$=await fetch(`${ya}/${t}`,{method:"PATCH",headers:{Authorization:`token ${n}`,"Content-Type":"application/json"},body:JSON.stringify(b)});if(!$.ok)throw new Error(`Failed to update gist: ${$.statusText}`)}async function br(a,n){if(!a)throw new Error("Gist ID is required");const t={"Content-Type":"application/json"};n&&(t.Authorization=`token ${n}`);const d=await fetch(`${ya}/${a}`,{method:"GET",headers:t});if(!d.ok)throw new Error(`Failed to load gist: ${d.statusText}`);const f=await d.json(),b=Object.values(f.files);if(b.length===0)throw new Error("No files found in gist");const B=b[0].content;try{const _=JSON.parse(B);return _.attacks&&Array.isArray(_.attacks)&&(_.attacks=_.attacks.map(I=>({...I,id:I.id||crypto.randomUUID()}))),_.classFeatures?(_.classFeatures.features||(_.classFeatures.features={}),_.classFeatures.spellSlots||(_.classFeatures.spellSlots=[]),_.classFeatures.preparedSpells===void 0&&(_.classFeatures.preparedSpells="")):_.classFeatures={features:{},spellSlots:[],preparedSpells:""},_}catch{throw new Error("Invalid character data in gist")}}function Ha(a){typeof window<"u"&&localStorage.setItem("dnd_gist_config",JSON.stringify(a))}function mr(){if(typeof window<"u"){const a=localStorage.getItem("dnd_gist_config");if(a)return JSON.parse(a)}return{}}async function hr(a,n=30){if(!a)throw new Error("GitHub token is required to list gists");const t=await fetch(`${ya}?per_page=${n}`,{method:"GET",headers:{Authorization:`token ${a}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Failed to list gists: ${t.statusText}`);return await t.json()}var _r=p('<div class="error-message svelte-1jb5ckg"> </div>'),yr=p('<div class="toggle-container svelte-1jb5ckg"><button type="button" class="toggle-btn svelte-1jb5ckg"> </button></div>'),kr=p('<div class="form-group svelte-1jb5ckg"><label for="gistId" class="svelte-1jb5ckg">Gist ID (leave empty to create new)</label> <input type="text" id="gistId" placeholder="Optional: existing Gist ID to update" class="svelte-1jb5ckg"/></div>'),Sr=p('<div class="loading-message svelte-1jb5ckg">Loading your gists...</div>'),$r=p('<button type="button"><div class="gist-item-header svelte-1jb5ckg"><span class="gist-description svelte-1jb5ckg"> </span> <span class="gist-visibility svelte-1jb5ckg"> </span></div> <div class="gist-item-meta svelte-1jb5ckg"><span class="gist-id svelte-1jb5ckg"> </span> <span class="gist-date svelte-1jb5ckg"> </span></div></button>'),xr=p('<div class="form-group svelte-1jb5ckg"><div class="gist-list-label svelte-1jb5ckg">Select a Gist to Update (or leave unselected to create new)</div> <div class="gist-list svelte-1jb5ckg"></div></div>'),Cr=p('<div class="info-message svelte-1jb5ckg">No gists found. A new one will be created.</div>'),Lr=p('<!> <div class="form-group svelte-1jb5ckg"><label for="description" class="svelte-1jb5ckg"> </label> <input type="text" id="description" placeholder="D&amp;D Character Sheet" class="svelte-1jb5ckg"/></div>',1),wr=p('<div class="form-group svelte-1jb5ckg"><label for="gistId" class="svelte-1jb5ckg">Gist ID *</label> <input type="text" id="gistId" placeholder="Enter Gist ID (for public or your private gists)" required class="svelte-1jb5ckg"/></div>'),Dr=p('<div class="loading-message svelte-1jb5ckg">Loading your gists...</div>'),jr=p('<button type="button"><div class="gist-item-header svelte-1jb5ckg"><span class="gist-description svelte-1jb5ckg"> </span> <span class="gist-visibility svelte-1jb5ckg"> </span></div> <div class="gist-item-meta svelte-1jb5ckg"><span class="gist-id svelte-1jb5ckg"> </span> <span class="gist-date svelte-1jb5ckg"> </span></div></button>'),Ar=p('<div class="form-group svelte-1jb5ckg"><div class="gist-list-label svelte-1jb5ckg">Select a Gist to Load</div> <div class="gist-list svelte-1jb5ckg"></div></div>'),Fr=p('<div class="info-message svelte-1jb5ckg">No gists found. Enter a Gist ID manually or create a new one in Save mode.</div>'),Br=p('<div class="modal-overlay svelte-1jb5ckg" role="button" tabindex="-1"><div class="modal-content svelte-1jb5ckg" role="dialog" tabindex="0"><div class="modal-header svelte-1jb5ckg"><h2 class="svelte-1jb5ckg"> </h2> <button class="close-btn svelte-1jb5ckg">Ã—</button></div> <div class="modal-body svelte-1jb5ckg"><!> <div class="form-group svelte-1jb5ckg"><label for="token" class="svelte-1jb5ckg"> <a href="https://github.com/settings/tokens" target="_blank" rel="noopener" class="svelte-1jb5ckg">Get token</a></label> <input type="password" id="token" placeholder="ghp_xxxxxxxxxxxxx" class="svelte-1jb5ckg"/></div> <!> <!> <div class="modal-actions svelte-1jb5ckg"><button class="btn btn-primary svelte-1jb5ckg"><!></button> <button class="btn btn-secondary svelte-1jb5ckg">Cancel</button></div></div></div></div>');function Mr(a,n){Ft(n,!1);const t=()=>Ye(V,"$character",d),[d,f]=Nt(),b=ta();let $=bt(n,"mode",8,"save"),B=M(""),_=M(""),I=M(""),Q=M(!1),q=M(""),T=M(!1),_e=M(!1),fe=M([]),ee=M(null);const ve=mr();ve.token&&c(B,ve.token),ve.gistId&&c(_,ve.gistId),ca(async()=>{e(B)&&!e(T)&&await K()});async function K(){if(e(B)){c(_e,!0),c(q,"");try{c(fe,await hr(e(B))),e(_)&&c(ee,e(fe).find(k=>k.id===e(_))||null)}catch(k){c(q,k.message||"Failed to load gists"),c(fe,[])}finally{c(_e,!1)}}}function qe(k){c(ee,k),c(_,k.id)}function W(){c(T,!e(T)),c(q,""),!e(T)&&e(B)&&K()}async function ae(){if(!e(B)){c(q,"GitHub token is required");return}const k=e(ee)?.id||e(_);c(Q,!0),c(q,"");try{if(k)await gr(t(),e(B),k),c(_,k),Tt.add("Character updated in Gist successfully!","success");else{const v=await fr(t(),e(B),e(I));c(_,v),Tt.add(`Character saved to Gist! ID: ${v}`,"success")}Ha({token:e(B),gistId:e(_)}),b("close")}catch(v){c(q,v.message||"Failed to save to Gist")}finally{c(Q,!1)}}async function Y(){const k=e(ee)?.id||e(_);if(!k){c(q,"Please select a gist or enter a Gist ID");return}c(Q,!0),c(q,"");try{const v=await br(k,e(B)||void 0);V.set(v),c(_,k),Ha({token:e(B),gistId:e(_)}),Tt.add("Character loaded from Gist successfully!","success"),b("close")}catch(v){c(q,v.message||"Failed to load from Gist")}finally{c(Q,!1)}}function te(){b("close")}At();var re=Br(),Ie=r(re),Ue=r(Ie),ye=r(Ue),ke=r(ye,!0);l(ye);var L=s(ye,2);l(Ue);var ce=s(Ue,2),m=r(ce);{var R=k=>{var v=_r(),ie=r(v,!0);l(v),F(()=>D(ie,e(q))),o(k,v)};S(m,k=>{e(q)&&k(R)})}var se=s(m,2),g=r(se),x=r(g);ga(),l(g);var O=s(g,2);we(O),l(se);var E=s(se,2);{var N=k=>{var v=yr(),ie=r(v),le=r(ie,!0);l(ie),l(v),F(()=>{ie.disabled=e(Q),D(le,e(T)?"ðŸ“‹ Show My Gists":"âœï¸ Enter Gist ID Manually")}),A("click",ie,W),o(k,v)};S(E,k=>{($()==="load"||$()==="save"&&e(B))&&k(N)})}var je=s(E,2);{var Se=k=>{var v=Lr(),ie=ze(v);{var le=de=>{var De=kr(),Oe=s(r(De),2);we(Oe),l(De),F(()=>Oe.disabled=e(Q)),Me(Oe,()=>e(_),Je=>c(_,Je)),o(de,De)},xe=de=>{var De=nt(),Oe=ze(De);{var Je=pe=>{var Le=Sr();o(pe,Le)},he=pe=>{var Le=nt(),Pe=ze(Le);{var Ae=ne=>{var J=xr(),He=s(r(J),2);dt(He,5,()=>e(fe),ut,(y,j)=>{var oe=$r();let ue;var Fe=r(oe),Ge=r(Fe),H=r(Ge,!0);l(Ge);var C=s(Ge,2),me=r(C,!0);l(C),l(Fe);var Ce=s(Fe,2),Ze=r(Ce),tt=r(Ze);l(Ze);var z=s(Ze,2),rt=r(z);l(z),l(Ce),l(oe),F(St=>{ue=pt(oe,1,"gist-item svelte-1jb5ckg",null,ue,{selected:e(ee)?.id===e(j).id}),oe.disabled=e(Q),D(H,(e(j),i(()=>e(j).description||"Untitled"))),D(me,(e(j),i(()=>e(j).public?"ðŸŒ Public":"ðŸ”’ Private"))),D(tt,`ID: ${e(j),i(()=>e(j).id)??""}`),D(rt,`Updated: ${St??""}`)},[()=>(e(j),i(()=>new Date(e(j).updated_at).toLocaleDateString()))]),A("click",oe,()=>qe(e(j))),o(y,oe)}),l(He),l(J),o(ne,J)},Te=ne=>{var J=nt(),He=ze(J);{var y=j=>{var oe=Cr();o(j,oe)};S(He,j=>{e(B)&&j(y)},!0)}o(ne,J)};S(Pe,ne=>{e(fe),i(()=>e(fe).length>0)?ne(Ae):ne(Te,!1)},!0)}o(pe,Le)};S(Oe,pe=>{e(_e)?pe(Je):pe(he,!1)},!0)}o(de,De)};S(ie,de=>{e(T)||!e(B)?de(le):de(xe,!1)})}var Re=s(ie,2),Ee=r(Re),P=r(Ee);l(Ee);var h=s(Ee,2);we(h),l(Re),F(()=>{D(P,`Description ${e(_)?"(optional)":""}`),h.disabled=e(Q)}),Me(h,()=>e(I),de=>c(I,de)),o(k,v)},$e=k=>{var v=nt(),ie=ze(v);{var le=Re=>{var Ee=wr(),P=s(r(Ee),2);we(P),l(Ee),F(()=>P.disabled=e(Q)),Me(P,()=>e(_),h=>c(_,h)),o(Re,Ee)},xe=Re=>{var Ee=nt(),P=ze(Ee);{var h=De=>{var Oe=Dr();o(De,Oe)},de=De=>{var Oe=nt(),Je=ze(Oe);{var he=Le=>{var Pe=Ar(),Ae=s(r(Pe),2);dt(Ae,5,()=>e(fe),ut,(Te,ne)=>{var J=jr();let He;var y=r(J),j=r(y),oe=r(j,!0);l(j);var ue=s(j,2),Fe=r(ue,!0);l(ue),l(y);var Ge=s(y,2),H=r(Ge),C=r(H);l(H);var me=s(H,2),Ce=r(me);l(me),l(Ge),l(J),F(Ze=>{He=pt(J,1,"gist-item svelte-1jb5ckg",null,He,{selected:e(ee)?.id===e(ne).id}),J.disabled=e(Q),D(oe,(e(ne),i(()=>e(ne).description||"Untitled"))),D(Fe,(e(ne),i(()=>e(ne).public?"ðŸŒ Public":"ðŸ”’ Private"))),D(C,`ID: ${e(ne),i(()=>e(ne).id)??""}`),D(Ce,`Updated: ${Ze??""}`)},[()=>(e(ne),i(()=>new Date(e(ne).updated_at).toLocaleDateString()))]),A("click",J,()=>qe(e(ne))),o(Te,J)}),l(Ae),l(Pe),o(Le,Pe)},pe=Le=>{var Pe=nt(),Ae=ze(Pe);{var Te=ne=>{var J=Fr();o(ne,J)};S(Ae,ne=>{e(B)&&ne(Te)},!0)}o(Le,Pe)};S(Je,Le=>{e(fe),i(()=>e(fe).length>0)?Le(he):Le(pe,!1)},!0)}o(De,Oe)};S(P,De=>{e(_e)?De(h):De(de,!1)},!0)}o(Re,Ee)};S(ie,Re=>{e(T)||!e(B)?Re(le):Re(xe,!1)},!0)}o(k,v)};S(je,k=>{$()==="save"?k(Se):k($e,!1)})}var Be=s(je,2),Ne=r(Be),We=r(Ne);{var et=k=>{var v=Lt();F(()=>D(v,$()==="save"?"Saving...":"Loading...")),o(k,v)},st=k=>{var v=Lt();F(()=>D(v,$()==="save"?"Save":"Load")),o(k,v)};S(We,k=>{e(Q)?k(et):k(st,!1)})}l(Ne);var X=s(Ne,2);l(Be),l(ce),l(Ie),l(re),F(()=>{D(ke,$()==="save"?"Save to GitHub Gist":"Load from GitHub Gist"),D(x,`GitHub Token ${$()==="load"?"(optional for public gists)":"(required)"} `),O.disabled=e(Q),Ne.disabled=e(Q),X.disabled=e(Q)}),A("click",L,te),Me(O,()=>e(B),k=>c(B,k)),A("blur",O,()=>{e(B)&&!e(T)&&K()}),A("click",Ne,function(...k){($()==="save"?ae:Y)?.apply(this,k)}),A("click",X,te),A("click",Ie,Fa(function(k){la.call(this,n,k)})),A("keydown",Ie,function(k){la.call(this,n,k)}),A("click",re,te),A("keydown",re,k=>k.key==="Escape"&&te()),o(a,re),Bt(),f()}var Ir=p('<div class="loading svelte-1ngjemu">Loading D&D data...</div>'),Rr=p("<option> </option>"),Er=p('<select class="level-filter svelte-1ngjemu"><option>All Levels</option><option>Cantrip</option><!></select>'),Pr=p('<div class="no-results svelte-1ngjemu"> </div>'),Tr=p('<div class="item-meta svelte-1ngjemu"> </div>'),Hr=p('<div class="item-meta svelte-1ngjemu"> </div>'),Ur=p('<button><div class="item-name svelte-1ngjemu"> </div> <!></button>'),Nr=p('<p class="higher-levels"><strong>At Higher Levels:</strong> </p>'),Gr=p('<p class="cantrip-upgrade"><strong>Cantrip Upgrade:</strong> </p>'),Or=p('<h3 class="svelte-1ngjemu"> </h3> <p class="spell-meta svelte-1ngjemu"><!> <!></p> <p class="spell-classes"><strong>Classes:</strong> </p> <div class="spell-stats svelte-1ngjemu"><div><strong>Casting Time:</strong> </div> <div><strong>Range:</strong> </div> <div><strong>Components:</strong> <!></div> <div><strong>Duration:</strong> <!> </div></div> <p class="description svelte-1ngjemu"> </p> <!> <!>',1),qr=p('<p class="prerequisite svelte-1ngjemu"><strong>Prerequisite:</strong> </p>'),Wr=p('<h3 class="svelte-1ngjemu"> </h3> <!> <p class="description svelte-1ngjemu"> </p> <a target="_blank" rel="noopener" class="source-link svelte-1ngjemu">View Full Details â†’</a>',1),zr=p('<div class="item-details svelte-1ngjemu"><!></div>'),Kr=p('<div class="controls svelte-1ngjemu"><div class="tabs svelte-1ngjemu"><button> </button> <button> </button></div> <div class="search-controls svelte-1ngjemu"><input type="text" placeholder="Search by name or description..." class="search-input svelte-1ngjemu"/> <!></div></div> <div class="content-container svelte-1ngjemu"><div class="items-list svelte-1ngjemu"><!></div> <!></div>',1),Jr=p('<div class="modal-backdrop svelte-1ngjemu" role="presentation"><div class="modal svelte-1ngjemu" role="dialog" aria-modal="true" tabindex="-1"><div class="modal-header svelte-1ngjemu"><h2 class="svelte-1ngjemu">Browse D&D Spells & Feats</h2> <button class="close-btn svelte-1ngjemu" aria-label="Close">&times;</button></div> <div class="modal-body svelte-1ngjemu"><!></div> <div class="modal-footer svelte-1ngjemu"><button class="btn-secondary svelte-1ngjemu">Cancel</button> <button class="btn-primary svelte-1ngjemu">Add to Character Sheet</button></div></div></div>');function Vr(a,n){Ft(n,!1);const t=M(),d=M(),f=M();let b=bt(n,"onClose",8),$=M("spell"),B=M(!0),_=M(""),I=M(null),Q=M([]),q=M([]),T=M(null);ca(async()=>{c(B,!0);try{c(Q,await Va()),c(q,await Ks())}catch(L){console.error("Failed to load data:",L)}finally{c(B,!1)}});function _e(L){c(T,L)}function fe(L){const ce=L.match(/(\d+d\d+(?:\s*\+\s*\d+)?)/i);return ce?ce[1]:""}function ee(L){const ce=L.split(/\.( |$)/)[0].trim(),m=Array.from(L.matchAll(/\*\*(.*?)\*\*/g)).map(se=>se[1].replace(/\.$/,""));let R=ce;return m.length&&(R+=" | Effects: "+m.join(", ")),R}function ve(){if(e(T)){if(e($)==="spell"){const L=e(T);V.update(ce=>{const R=[];L.range&&R.push(`Range: ${L.range}`),L.castingTime&&R.push(`Cast: ${L.castingTime}`),L.duration&&R.push(`Duration: ${L.duration}`),L.actionType==="Save"&&R.push("Saving throw spell"),L.components&&L.components.length>0&&R.push(`Components: ${L.components.join(", ")}`),L.material&&R.push(`Material: ${L.material}`);const se=R.join(" | "),g=ee(L.description),x={id:crypto.randomUUID(),name:`${L.name}${L.concentration?" (C)":""}${L.ritual?" (R)":""}`,bonus:L.actionType==="Attack"?5:0,damage:fe(L.description),damageType:`${L.school} (Lvl ${L.level})`,spellRef:L.name,infoNotes:se,generalNotes:g,castAtLevel:L.level};return ce.attacks=[...ce.attacks,x],ce})}else if(e($)==="feat"){const L=e(T);V.update(ce=>{const m=`${L.name}${L.prerequisite?` (Req: ${L.prerequisite})`:""}
${L.description}
`;return ce.features=ce.features?`${ce.features}
${m}`:m,ce})}c(T,null),b()()}}Qe(()=>(e(I),e(Q),e(_)),()=>{c(t,e(I)!==null?Js(Ea(e(Q),e(_)),e(I)):Ea(e(Q),e(_)))}),Qe(()=>(e(q),e(_)),()=>{c(d,Vs(e(q),e(_)))}),Qe(()=>(e($),e(t),e(d)),()=>{c(f,e($)==="spell"?e(t):e(d))}),Kt(),At();var K=Jr(),qe=r(K),W=r(qe),ae=s(r(W),2);l(W);var Y=s(W,2),te=r(Y);{var re=L=>{var ce=Ir();o(L,ce)},Ie=L=>{var ce=Kr(),m=ze(ce),R=r(m),se=r(R);let g;var x=r(se);l(se);var O=s(se,2);let E;var N=r(O);l(O),l(R);var je=s(R,2),Se=r(je);we(Se);var $e=s(Se,2);{var Be=ie=>{var le=Er();F(()=>{e(I),Ct(()=>{})});var xe=r(le);xe.value=(xe.__value=null)??"";var Re=s(xe);Re.value=Re.__value=0;var Ee=s(Re);dt(Ee,0,()=>[1,2,3,4,5,6,7,8,9],ut,(P,h)=>{var de=Rr(),De=r(de);l(de);var Oe={};F(()=>{D(De,`Level ${h??""}`),Oe!==(Oe=h)&&(de.value=(de.__value=h)??"")}),o(P,de)}),l(le),za(le,()=>e(I),P=>c(I,P)),o(ie,le)};S($e,ie=>{e($)==="spell"&&ie(Be)})}l(je),l(m);var Ne=s(m,2),We=r(Ne),et=r(We);{var st=ie=>{var le=Pr(),xe=r(le);l(le),F(()=>D(xe,`No ${e($)??""}s found`)),o(ie,le)},X=ie=>{var le=nt(),xe=ze(le);dt(xe,1,()=>e(f),ut,(Re,Ee)=>{var P=Ur();let h;var de=r(P),De=r(de,!0);l(de);var Oe=s(de,2);{var Je=pe=>{const Le=at(()=>e(Ee));var Pe=Tr(),Ae=r(Pe);l(Pe),F(()=>D(Ae,`Level ${U(e(Le)),i(()=>e(Le).level)??""} â€¢ ${U(e(Le)),i(()=>e(Le).school)??""}`)),o(pe,Pe)},he=pe=>{const Le=at(()=>e(Ee));var Pe=nt(),Ae=ze(Pe);{var Te=ne=>{var J=Hr(),He=r(J,!0);l(J),F(()=>D(He,(U(e(Le)),i(()=>e(Le).prerequisite)))),o(ne,J)};S(Ae,ne=>{U(e(Le)),i(()=>e(Le).prerequisite)&&ne(Te)})}o(pe,Pe)};S(Oe,pe=>{e($)==="spell"?pe(Je):pe(he,!1)})}l(P),F(()=>{h=pt(P,1,"item-card svelte-1ngjemu",null,h,{selected:e(T)?.name===e(Ee).name}),D(De,(e(Ee),i(()=>e(Ee).name)))}),A("click",P,()=>_e(e(Ee))),o(Re,P)}),o(ie,le)};S(et,ie=>{e(f),i(()=>e(f).length===0)?ie(st):ie(X,!1)})}l(We);var k=s(We,2);{var v=ie=>{var le=zr(),xe=r(le);{var Re=P=>{const h=at(()=>e(T));var de=Or(),De=ze(de),Oe=r(De,!0);l(De);var Je=s(De,2),he=r(Je);{var pe=u=>{var G=Lt();F(()=>D(G,`${U(e(h)),i(()=>e(h).school)??""} cantrip`)),o(u,G)},Le=u=>{var G=Lt();F(()=>D(G,`Level ${U(e(h)),i(()=>e(h).level)??""} ${U(e(h)),i(()=>e(h).school)??""}`)),o(u,G)};S(he,u=>{U(e(h)),i(()=>e(h).level===0)?u(pe):u(Le,!1)})}var Pe=s(he,2);{var Ae=u=>{var G=Lt("(ritual)");o(u,G)};S(Pe,u=>{U(e(h)),i(()=>e(h).ritual)&&u(Ae)})}l(Je);var Te=s(Je,2),ne=s(r(Te));l(Te);var J=s(Te,2),He=r(J),y=s(r(He));l(He);var j=s(He,2),oe=s(r(j));l(j);var ue=s(j,2),Fe=s(r(ue)),Ge=s(Fe);{var H=u=>{var G=Lt();F(()=>D(G,`(${U(e(h)),i(()=>e(h).material)??""})`)),o(u,G)};S(Ge,u=>{U(e(h)),i(()=>e(h).material)&&u(H)})}l(ue);var C=s(ue,2),me=s(r(C),2);{var Ce=u=>{var G=Lt("Concentration,");o(u,G)};S(me,u=>{U(e(h)),i(()=>e(h).concentration)&&u(Ce)})}var Ze=s(me,1,!0);l(C),l(J);var tt=s(J,2),z=r(tt,!0);l(tt);var rt=s(tt,2);{var St=u=>{var G=Nr(),ge=s(r(G));l(G),F(()=>D(ge,` ${U(e(h)),i(()=>e(h).higherLevelSlot)??""}`)),o(u,G)};S(rt,u=>{U(e(h)),i(()=>e(h).higherLevelSlot)&&u(St)})}var w=s(rt,2);{var Z=u=>{var G=Gr(),ge=s(r(G));l(G),F(()=>D(ge,` ${U(e(h)),i(()=>e(h).cantripUpgrade)??""}`)),o(u,G)};S(w,u=>{U(e(h)),i(()=>e(h).cantripUpgrade)&&u(Z)})}F((u,G)=>{D(Oe,(U(e(h)),i(()=>e(h).name))),D(ne,` ${u??""}`),D(y,` ${U(e(h)),i(()=>e(h).castingTime||e(h).actionType)??""}`),D(oe,` ${U(e(h)),i(()=>e(h).range)??""}`),D(Fe,` ${G??""}`),D(Ze,(U(e(h)),i(()=>e(h).duration))),D(z,(U(e(h)),i(()=>e(h).description)))},[()=>(U(e(h)),i(()=>e(h).classes.join(", "))),()=>(U(e(h)),i(()=>e(h).components.join(", ").toUpperCase()))]),o(P,de)},Ee=P=>{const h=at(()=>e(T));var de=Wr(),De=ze(de),Oe=r(De,!0);l(De);var Je=s(De,2);{var he=Ae=>{var Te=qr(),ne=s(r(Te));l(Te),F(()=>D(ne,` ${U(e(h)),i(()=>e(h).prerequisite)??""}`)),o(Ae,Te)};S(Je,Ae=>{U(e(h)),i(()=>e(h).prerequisite)&&Ae(he)})}var pe=s(Je,2),Le=r(pe,!0);l(pe);var Pe=s(pe,2);F(()=>{D(Oe,(U(e(h)),i(()=>e(h).name))),D(Le,(U(e(h)),i(()=>e(h).description))),Ke(Pe,"href",(U(e(h)),i(()=>e(h).source)))}),o(P,de)};S(xe,P=>{e($)==="spell"?P(Re):P(Ee,!1)})}l(le),o(ie,le)};S(k,ie=>{e(T)&&ie(v)})}l(Ne),F(()=>{g=pt(se,1,"tab svelte-1ngjemu",null,g,{active:e($)==="spell"}),D(x,`ðŸ“œ Spells (${e(Q),i(()=>e(Q).length)??""})`),E=pt(O,1,"tab svelte-1ngjemu",null,E,{active:e($)==="feat"}),D(N,`â­ Feats (${e(q),i(()=>e(q).length)??""})`)}),A("click",se,()=>{c($,"spell"),c(T,null),c(_,"")}),A("click",O,()=>{c($,"feat"),c(T,null),c(_,"")}),Me(Se,()=>e(_),ie=>c(_,ie)),o(L,ce)};S(te,L=>{e(B)?L(re):L(Ie,!1)})}l(Y);var Ue=s(Y,2),ye=r(Ue),ke=s(ye,2);l(Ue),l(qe),l(K),F(()=>ke.disabled=!e(T)),A("click",ae,function(...L){b()?.apply(this,L)}),A("click",ye,function(...L){b()?.apply(this,L)}),A("click",ke,ve),A("click",qe,Fa(function(L){la.call(this,n,L)})),A("keydown",qe,function(L){la.call(this,n,L)}),A("click",K,function(...L){b()?.apply(this,L)}),A("keydown",K,L=>L.key==="Escape"&&b()()),o(a,K),Bt()}var Qr=p('<link rel="icon" type="image/png" href="favicon4.png"/> <meta name="viewport" content="width=device-width, initial-scale=1"/>',1),Yr=p('<span class="character-name svelte-1uha8ag"> </span>'),Xr=p("<span> </span>"),Zr=p('<div class="spell-slots-header svelte-1uha8ag"></div>'),ei=p("<span> </span><br/>",1),ti=p("<span> </span>"),ai=p('<span class="effect-tooltip"><strong> </strong><br/> <br/> <!> <!></span>'),si=p('<button class="effect-remove-btn svelte-1uha8ag">Ã—</button>'),li=p('<span class="effect-badge svelte-1uha8ag" tabindex="0"> <!> <!></span>'),ri=p(`<div class="active-effects-header svelte-1uha8ag"></div> <style>.effect-badge {
              position: relative;
            }
            .effect-tooltip {
              position: absolute;
              top: 120%;
              left: 50%;
              transform: translateX(-50%);
              background: #fff;
              color: #222;
              border: 1px solid #a5b4fc;
              border-radius: 6px;
              padding: 8px 12px;
              font-size: 0.95em;
              box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
              z-index: 10;
              min-width: 180px;
              max-width: 260px;
              white-space: normal;
              pointer-events: none;
              opacity: 1;
              transition: opacity 0.15s;
            }</style>`,1),ii=p('<div class="rest-menu svelte-1uha8ag"><button class="rest-option svelte-1uha8ag">â˜• Short Rest</button> <button class="rest-option svelte-1uha8ag">ðŸ›ï¸ Long Rest</button></div>'),ni=p('<div class="container svelte-1uha8ag"><header class="svelte-1uha8ag"><div class="header-top svelte-1uha8ag"><div class="header-title svelte-1uha8ag"><div class="title-row svelte-1uha8ag"><h1 class="svelte-1uha8ag">D&D Character Sheet</h1> <!></div> <!> <!></div> <div class="header-right svelte-1uha8ag"><div class="header-controls svelte-1uha8ag"><button class="btn btn-secondary use-enabled"><span class="btn-icon svelte-1uha8ag">ðŸŽ²</span><span class="btn-text svelte-1uha8ag">Roll Dice</span></button> <div class="rest-button-container svelte-1uha8ag"><button class="btn btn-secondary use-enabled"><span class="btn-icon svelte-1uha8ag">ðŸ˜´</span><span class="btn-text svelte-1uha8ag">Rest</span></button> <!></div> <div class="mode-toggle"><button><span class="btn-icon svelte-1uha8ag"> </span><span class="btn-text svelte-1uha8ag"> </span></button></div></div> <div class="header-search svelte-1uha8ag"><input type="text" placeholder="ðŸ” Search..." class="search-input use-enabled svelte-1uha8ag"/></div></div></div> <div class="header-actions svelte-1uha8ag"><button class="btn btn-mode svelte-1uha8ag">ðŸ“š Browse Spells & Feats</button> <button class="btn btn-secondary">Save to Gist</button> <button class="btn btn-secondary">Load from Gist</button> <button class="btn btn-secondary">Export JSON</button> <button class="btn btn-secondary">Import JSON</button> <input type="file" accept=".json" style="display: none;"/></div></header> <main class="svelte-1uha8ag"><!> <!> <!> <!> <!> <!> <!></main></div> <!> <!> <!> <!>',1);function bi(a,n){Ft(n,!1);const t=()=>Ye(V,"$character",b),d=()=>Ye(sa,"$isEditMode",b),f=()=>Ye(Xt,"$searchFilter",b),[b,$]=Nt();function B(){const w=[],Z=t().classFeatures.spellSlotsByLevel||{};for(let u=1;u<=9;u++){const G=Z[u];if(G&&G.length>0){const ge=G.length,lt=G.filter(be=>be).length;w.push({level:u,available:ge-lt,total:ge})}}return w}let _=M(!1),I=M(!1),Q=M(!1),q=M("save"),T=M(void 0),_e=M(""),fe=M(""),ee=M(""),ve=M(!1),K=M([]),qe=M(),W=!1,ae=M(!1),Y=M(null);function te(w){c(Y,w)}function re(){c(Y,null)}function Ie(w){c(Y,e(Y)===w?null:w)}function Ue(){const w=[];V.update(u=>{const G=u.hitDice.current;u.hitDice.current=Math.min(u.hitDice.max,u.hitDice.current+Math.max(1,Math.floor(u.hitDice.max/2)));const ge=u.hitDice.current-G;if(ge>0&&w.push(`${ge} hit ${ge===1?"die":"dice"}`),u.class){const lt=ra(u.class,u.level,u.subclass);u.classFeatures.features||(u.classFeatures.features={}),lt.forEach(be=>{if(be.resetOn==="short"){const Ve=be.name.replace(/\s+/g,"");if(be.type==="uses"){const Xe=typeof be.maxUses=="function"?be.maxUses(u.level):be.maxUses;u.classFeatures.features[Ve]=Array(Xe).fill(!1),w.push(be.name)}else if(be.type==="pool"){const Xe=typeof be.maxPool=="function"?be.maxPool(u.level):be.maxPool;Xe!==void 0&&(u.classFeatures.features[Ve]=Xe,w.push(be.name))}}})}return u}),c(ae,!1);const Z=w.length>0?`Short rest taken! Restored: ${w.join(", ")}`:"Short rest taken!";Tt.add(Z,"success")}function ye(){const w=[];V.update(u=>{const G=u.maxHP-u.currentHP;G>0&&w.push(`${G} HP`),u.currentHP=u.maxHP,u.tempHP=0;const ge=u.hitDice.max-u.hitDice.current;ge>0&&w.push(`${ge} hit ${ge===1?"die":"dice"}`),u.hitDice.current=u.hitDice.max;let lt=0;if(u.classFeatures.spellSlotsByLevel&&Object.keys(u.classFeatures.spellSlotsByLevel).forEach(be=>{const Ve=u.classFeatures.spellSlotsByLevel[parseInt(be)];if(Ve){const Xe=Ve.filter(vt=>vt).length;lt+=Xe,u.classFeatures.spellSlotsByLevel[parseInt(be)]=Array(Ve.length).fill(!1)}}),lt>0&&w.push(`${lt} spell ${lt===1?"slot":"slots"}`),u.class){const be=ra(u.class,u.level,u.subclass);u.classFeatures.features||(u.classFeatures.features={});let Ve=!1;be.forEach(Xe=>{const vt=Xe.name.replace(/\s+/g,"");if(!(Xe.type==="info"||Xe.type==="channelDivinity")){if(Xe.type==="uses"){const mt=typeof Xe.maxUses=="function"?Xe.maxUses(u.level):Xe.maxUses;u.classFeatures.features[vt]=Array(mt).fill(!1),Ve=!0}else if(Xe.type==="pool"){const mt=typeof Xe.maxPool=="function"?Xe.maxPool(u.level):Xe.maxPool;mt!==void 0&&(u.classFeatures.features[vt]=mt,Ve=!0)}}}),Ve&&w.push("all class features")}return u}),c(ae,!1);const Z=w.length>0?`Long rest taken! Restored: ${w.join(", ")}`:"Long rest taken! Fully rested.";Tt.add(Z,"success")}function ke(w){c(_e,""),c(fe,""),c(ee,""),c(ve,!1),c(K,[]),W=!1,typeof w=="string"?c(_e,w):(c(_e,w.notation),c(fe,w.damageNotation||""),c(ee,w.attackName||""),c(ve,!!w.applyHalfDamage),c(K,w.bonusBreakdown||[])),c(_,!0)}function L(w){const{notation:Z}=w.detail;c(_e,""),W=!0,setTimeout(()=>{c(_e,Z),c(fe,""),c(ee,"Hit Die")},0),c(_,!0)}function ce(){if(c(_,!1),W&&e(qe)){const w=e(qe).getLastRollTotal();if(w!==null){const Z=Math.max(1,w);V.update(u=>(u.hitDice.current=Math.max(0,u.hitDice.current-1),u.currentHP=Math.min(u.maxHP,u.currentHP+Z),u))}W=!1}}function m(){sa.update(w=>!w)}function R(w){w.target.closest(".rest-button-container")||c(ae,!1)}ca(()=>{const w=sa.subscribe(Z=>{Z?document.body.classList.remove("use-mode"):document.body.classList.add("use-mode")});return document.addEventListener("click",R),()=>{w(),document.removeEventListener("click",R)}});function se(){us(t())}function g(){e(T)?.click()}async function x(w){const u=w.target.files?.[0];if(u)try{const G=await ps(u);V.set(G),alert("Character imported successfully!")}catch{alert("Failed to import character file")}}At();var O=ni();vs("1uha8ag",w=>{var Z=Qr();ga(2),Ga(()=>{os.title="D&D Character Sheet"}),o(w,Z)});var E=ze(O),N=r(E),je=r(N),Se=r(je),$e=r(Se),Be=s(r($e),2);{var Ne=w=>{var Z=Yr(),u=r(Z);l(Z),F(()=>D(u,`${t().name??""} (${t().level??""})`)),o(w,Z)};S(Be,w=>{t().name&&w(Ne)})}l($e);var We=s($e,2);{var et=w=>{var Z=Zr();dt(Z,5,B,ut,(u,G)=>{var ge=Xr();let lt;var be=r(ge);l(ge),F(()=>{lt=pt(ge,1,"slot-badge svelte-1uha8ag",null,lt,{depleted:e(G).available===0}),D(be,`Lv${e(G).level??""}: ${e(G).available??""}/${e(G).total??""}`)}),o(u,ge)}),l(Z),o(w,Z)};S(We,w=>{B().length>0&&w(et)})}var st=s(We,2);{var X=w=>{var Z=ri(),u=ze(Z);dt(u,5,()=>t().activeStates,ut,(G,ge,lt)=>{var be=li(),Ve=r(be),Xe=s(Ve);{var vt=Dt=>{var It=ai(),Rt=r(It),ht=r(Rt,!0);l(Rt);var ft=s(Rt,2),Et=s(ft,3);{var Wt=ct=>{var yt=ei(),$t=ze(yt),Ut=r($t);l($t),ga(),F(()=>D(Ut,`Attack Bonus: ${e(ge).attackBonus>0?"+":""}${e(ge).attackBonus??""}`)),o(ct,yt)};S(Et,ct=>{e(ge).attackBonus&&ct(Wt)})}var Gt=s(Et,2);{var Jt=ct=>{var yt=ti(),$t=r(yt);l(yt),F(Ut=>D($t,`Damage Bonus: ${Ut??""}${e(ge).damageBonus??""}`),[()=>Number(e(ge).damageBonus)>0?"+":""]),o(ct,yt)};S(Gt,ct=>{e(ge).damageBonus&&ct(Jt)})}l(It),F(()=>{D(ht,e(ge).name),D(ft,` ${e(ge).description??""}`)}),o(Dt,It)};S(Xe,Dt=>{e(Y)===lt&&Dt(vt)})}var mt=s(Xe,2);{var Mt=Dt=>{var It=si();F(()=>Ke(It,"title",`End ${e(ge).name??""}`)),A("click",It,()=>{V.update(Rt=>(Rt.activeStates&&(Rt.activeStates=Rt.activeStates.filter((ht,ft)=>ft!==lt)),Rt))}),o(Dt,It)};S(mt,Dt=>{d()||Dt(Mt)})}l(be),F(()=>{Ke(be,"aria-label",e(ge).name),D(Ve,`âœ¨ ${e(ge).name??""} `)}),A("mouseenter",be,()=>te(lt)),A("mouseleave",be,re),A("focus",be,()=>te(lt)),A("blur",be,re),A("click",be,()=>Ie(lt)),o(G,be)}),l(u),ga(2),o(w,Z)};S(st,w=>{t().activeStates&&t().activeStates.length>0&&w(X)})}l(Se);var k=s(Se,2),v=r(k),ie=r(v),le=s(ie,2),xe=r(le),Re=s(xe,2);{var Ee=w=>{var Z=ii(),u=r(Z),G=s(u,2);l(Z),A("click",u,Ue),A("click",G,ye),o(w,Z)};S(Re,w=>{e(ae)&&w(Ee)})}l(le);var P=s(le,2),h=r(P);let de;var De=r(h),Oe=r(De,!0);l(De);var Je=s(De),he=r(Je,!0);l(Je),l(h),l(P),l(v);var pe=s(v,2),Le=r(pe);we(Le),l(pe),l(k),l(je);var Pe=s(je,2),Ae=r(Pe),Te=s(Ae,2),ne=s(Te,2),J=s(ne,2),He=s(J,2),y=s(He,2);xa(y,w=>c(T,w),()=>e(T)),l(Pe),l(N);var j=s(N,2),oe=r(j);js(oe,{});var ue=s(oe,2);Ms(ue,{$$events:{roll:w=>ke(w.detail)}});var Fe=s(ue,2);zs(Fe,{$$events:{roll:w=>ke(w.detail)}});var Ge=s(Fe,2);Gs(Ge,{$$events:{rollHitDice:L}});var H=s(Ge,2);Ml(H,{$$events:{roll:w=>ke(w.detail)}});var C=s(H,2);Ql(C,{});var me=s(C,2);Zl(me,{}),l(j),l(E);var Ce=s(E,2);xa(pr(Ce,{get notation(){return e(_e)},get damageNotation(){return e(fe)},get attackName(){return e(ee)},get applyHalfDamage(){return e(ve)},get bonusBreakdown(){return e(K)},get visible(){return e(_)},$$events:{close:ce},$$legacy:!0}),w=>c(qe,w),()=>e(qe));var Ze=s(Ce,2);{var tt=w=>{Mr(w,{get mode(){return e(q)},$$events:{close:()=>c(I,!1)}})};S(Ze,w=>{e(I)&&w(tt)})}var z=s(Ze,2);{var rt=w=>{Vr(w,{onClose:()=>c(Q,!1)})};S(z,w=>{e(Q)&&w(rt)})}var St=s(z,2);ds(St,{}),F(()=>{de=pt(h,1,"btn btn-mode svelte-1uha8ag",null,de,{"use-mode":!d()}),D(Oe,d()?"ðŸ“":"ðŸŽ²"),D(he,d()?"Edit Mode":"Use Mode")}),A("click",ie,()=>c(_,!0)),A("click",xe,()=>c(ae,!e(ae))),A("click",h,m),Me(Le,f,w=>fs(Xt,w)),A("click",Ae,()=>c(Q,!0)),A("click",Te,()=>{c(q,"save"),c(I,!0)}),A("click",ne,()=>{c(q,"load"),c(I,!0)}),A("click",J,se),A("click",He,g),A("change",y,x),o(a,O),Bt(),$()}export{bi as component};
