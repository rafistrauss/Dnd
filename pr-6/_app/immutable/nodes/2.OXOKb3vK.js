import{f as u,e as A,a as c,s as L,c as nt,t as wt}from"../chunks/DBs_ODQp.js";import{i as Ft}from"../chunks/BbaRvQ4Z.js";import{c as ea,o as oa,a as Qa}from"../chunks/CHX4V4AM.js";import{a7 as Ha,i as Ua,aZ as Ya,a_ as Xa,a$ as Da,K as Qt,e as Na,b0 as Ga,T as ha,b1 as Za,b2 as es,b3 as ts,q as as,b4 as ss,b5 as ls,ab as rs,d as i,r as Oa,g as is,C as Bt,F,G as Mt,H as r,I as l,J as s,b6 as Je,b7 as zt,s as v,a4 as M,f as e,m as at,E as Oe,A as N,b8 as ga,b9 as Lt,ba as ia,ao as fa,bb as ns}from"../chunks/DwmZeGF1.js";import{c as Dt,a as Q,e as dt,i as ut,u as qa,s as Yt,b as pt,d as ca,f as aa,g as os,t as Tt,h as cs,T as vs,j as ds,k as us}from"../chunks/DQJFtNtV.js";import{i as S,s as Nt,a as Ve,b as ot,d as va,e as ps}from"../chunks/0ovU14Ao.js";import{p as mt,b as $a}from"../chunks/CFUzmRYW.js";import{b as ra,r as fs}from"../chunks/Clov8sho.js";function ba(a,o,t=!1){if(a.multiple){if(o==null)return;if(!Ua(o))return Ya();for(var d of a.options)d.selected=o.includes(na(d));return}for(d of a.options){var p=na(d);if(Xa(p,o)){d.selected=!0;return}}(!t||o!==void 0)&&(a.selectedIndex=-1)}function xa(a){var o=new MutationObserver(()=>{ba(a,a.__value)});o.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ha(()=>{o.disconnect()})}function Wa(a,o,t=o){var d=new WeakSet,p=!0;Da(a,"change",m=>{var $=m?"[selected]":":checked",B;if(a.multiple)B=[].map.call(a.querySelectorAll($),na);else{var _=a.querySelector($)??a.querySelector("option:not([disabled])");B=_&&na(_)}t(B),Qt!==null&&d.add(Qt)}),Na(()=>{var m=o();if(a===document.activeElement){var $=Ga??Qt;if(d.has($))return}if(ba(a,m,p),p&&m===void 0){var B=a.querySelector(":checked");B!==null&&(m=na(B),t(m))}a.__value=m,p=!1}),xa(a)}function na(a){return"__value"in a?a.__value:a.value}const gs=Symbol("is custom element"),bs=Symbol("is html");function Le(a){if(ha){var o=!1,t=()=>{if(!o){if(o=!0,a.hasAttribute("value")){var d=a.value;ze(a,"value",null),a.value=d}if(a.hasAttribute("checked")){var p=a.checked;ze(a,"checked",null),a.checked=p}}};a.__on_r=t,as(t),ss()}}function ma(a,o){var t=ja(a);t.value===(t.value=o??void 0)||a.value===o&&(o!==0||a.nodeName!=="PROGRESS")||(a.value=o??"")}function za(a,o){var t=ja(a);t.checked!==(t.checked=o??void 0)&&(a.checked=o)}function ze(a,o,t,d){var p=ja(a);ha&&(p[o]=a.getAttribute(o),o==="src"||o==="srcset"||o==="href"&&a.nodeName==="LINK")||p[o]!==(p[o]=t)&&(o==="loading"&&(a[Za]=t),t==null?a.removeAttribute(o):typeof t!="string"&&ms(a).includes(o)?a[o]=t:a.setAttribute(o,t))}function ja(a){return a.__attributes??={[gs]:a.nodeName.includes("-"),[bs]:a.namespaceURI===es}}var Fa=new Map;function ms(a){var o=a.getAttribute("is")||a.nodeName,t=Fa.get(o);if(t)return t;Fa.set(o,t=[]);for(var d,p=a,m=Element.prototype;m!==p;){d=ls(p);for(var $ in d)d[$].set&&t.push($);p=ts(p)}return t}function Fe(a,o,t=o){var d=new WeakSet;Da(a,"input",async p=>{var m=p?a.defaultValue:a.value;if(m=ya(a)?ka(m):m,t(m),Qt!==null&&d.add(Qt),await rs(),m!==(m=o())){var $=a.selectionStart,B=a.selectionEnd,_=a.value.length;if(a.value=m??"",B!==null){var R=a.value.length;$===B&&B===_&&R>_?(a.selectionStart=R,a.selectionEnd=R):(a.selectionStart=$,a.selectionEnd=Math.min(B,R))}}}),(ha&&a.defaultValue!==a.value||i(o)==null&&a.value)&&(t(ya(a)?ka(a.value):a.value),Qt!==null&&d.add(Qt)),Oa(()=>{var p=o();if(a===document.activeElement){var m=Ga??Qt;if(d.has(m))return}ya(a)&&p===ka(a.value)||a.type==="date"&&!p&&!a.value||p!==a.value&&(a.value=p??"")})}function Ca(a,o,t=o){Da(a,"change",d=>{var p=d?a.defaultChecked:a.checked;t(p)}),(ha&&a.defaultChecked!==a.checked||i(o)==null)&&t(a.checked),Oa(()=>{var d=o();a.checked=!!d})}function ya(a){var o=a.type;return o==="number"||o==="range"}function ka(a){return a===""?null:+a}function hs(a,o,t){var d=is(a,o);d&&d.set&&(a[o]=t,Ha(()=>{a[o]=null}))}function Aa(a){return function(...o){var t=o[0];return t.stopPropagation(),a?.apply(this,o)}}function sa(a,o){var t=a.$$events?.[o.type],d=Ua(t)?t.slice():t==null?[]:[t];for(var p of d)p.call(this,o)}const _s="";function Ka(...a){return ra+_s+fs(a[0],a[1])}const La={paladin:{name:"Paladin",hitDice:"d10",spellcaster:!0,spellcastingAbility:"charisma",spellSlotsByLevel:{1:0,2:2,3:3,4:3,5:4,6:4,7:4,8:4,9:4,10:4,11:4,12:4,13:4,14:4,15:4,16:4,17:4,18:4,19:4,20:4},features:[{name:"Divine Sense",type:"uses",maxUses:(a,o=1)=>1+Math.max(1,o),resetOn:"long",description:"Detect celestials, fiends, and undead within 60 feet",minLevel:1},{name:"Lay on Hands",type:"pool",maxPool:a=>a*5,resetOn:"long",description:"Heal wounds or cure disease",minLevel:1},{name:"Divine Smite",type:"spellSlot",description:"Expend spell slot to deal extra radiant damage",minLevel:2,rollable:!0},{name:"Channel Divinity",type:"pool",maxPool:a=>a>=18?3:a>=6?2:1,resetOn:"short",description:"Sacred Weapon or Turn Undead",minLevel:3}]},fighter:{name:"Fighter",hitDice:"d10",spellcaster:!1,features:[{name:"Second Wind",type:"uses",maxUses:1,resetOn:"short",description:"Regain 1d10 + fighter level HP as bonus action",minLevel:1,rollable:!0,rollFormula:a=>`1d10+${a}`},{name:"Action Surge",type:"uses",maxUses:a=>a>=17?2:1,resetOn:"short",description:"Take one additional action on your turn",minLevel:2},{name:"Indomitable",type:"uses",maxUses:a=>a>=17?3:a>=13?2:1,resetOn:"long",description:"Reroll a failed saving throw",minLevel:9}],subclasses:{champion:{name:"Champion",features:[{name:"Improved Critical",type:"info",description:"Critical hit on 19-20",minLevel:3},{name:"Remarkable Athlete",type:"info",description:"Add half proficiency to STR/DEX/CON checks, increase long jump distance",minLevel:7},{name:"Additional Fighting Style",type:"info",description:"Choose a second fighting style",minLevel:10},{name:"Superior Critical",type:"info",description:"Critical hit on 18-20",minLevel:15},{name:"Survivor",type:"info",description:"Regain 5 + CON mod HP at start of turn if below half HP",minLevel:18}]},battlemaster:{name:"Battle Master",features:[{name:"Combat Superiority",type:"uses",maxUses:a=>a>=15?6:a>=7?5:4,resetOn:"short",description:a=>`Use superiority dice (${a>=18?"d12":a>=10?"d10":"d8"}) for maneuvers`,minLevel:3},{name:"Know Your Enemy",type:"info",description:"Learn capabilities of creatures you observe",minLevel:7},{name:"Improved Combat Superiority",type:"info",description:"Superiority dice become d10",minLevel:10},{name:"Relentless",type:"info",description:"Regain 1 superiority die if you have none at start of turn",minLevel:15}]}}},rogue:{name:"Rogue",hitDice:"d8",spellcaster:!1,features:[{name:"Sneak Attack",type:"info",description:a=>`Deal ${Math.ceil(a/2)}d6 extra damage once per turn with advantage or ally nearby`,minLevel:1,rollable:!0,rollFormula:a=>`${Math.ceil(a/2)}d6`},{name:"Cunning Action",type:"info",description:"Dash, Disengage, or Hide as a bonus action",minLevel:2},{name:"Uncanny Dodge",type:"info",description:"Use reaction to halve damage from an attack",minLevel:5},{name:"Evasion",type:"info",description:"Take no damage on successful Dex save (half on fail)",minLevel:7}]},wizard:{name:"Wizard",hitDice:"d6",spellcaster:!0,spellcastingAbility:"intelligence",spellSlotsByLevel:{1:2,2:3,3:4,4:4,5:4,6:4,7:4,8:4,9:4,10:4,11:4,12:4,13:4,14:4,15:4,16:4,17:4,18:4,19:4,20:4},features:[{name:"Arcane Recovery",type:"uses",maxUses:1,resetOn:"long",description:a=>`Recover spell slots totaling up to ${Math.ceil(a/2)} levels during short rest`,minLevel:1},{name:"Spell Mastery",type:"info",description:"Cast one 1st-level and one 2nd-level spell at will",minLevel:18}]},cleric:{name:"Cleric",hitDice:"d8",spellcaster:!0,spellcastingAbility:"wisdom",spellSlotsByLevel:{1:2,2:3,3:4,4:4,5:4,6:4,7:4,8:4,9:4,10:4,11:4,12:4,13:4,14:4,15:4,16:4,17:4,18:4,19:4,20:4},features:[{name:"Channel Divinity",type:"pool",maxPool:a=>a>=18?3:a>=6?2:1,resetOn:"short",description:"Turn Undead or domain-specific ability",minLevel:2},{name:"Destroy Undead",type:"info",description:a=>`Channel Divinity destroys undead of CR ${a>=17?4:a>=14?3:a>=11?2:a>=8?1:.5} or lower`,minLevel:5},{name:"Divine Intervention",type:"uses",maxUses:1,resetOn:"long",description:a=>`${a}% chance to succeed, implore deity for aid`,minLevel:10}],subclasses:{war:{name:"War Domain",features:[{name:"War Priest",type:"uses",maxUses:(a,o=1)=>Math.max(1,o),resetOn:"long",description:"Make one weapon attack as a bonus action",minLevel:1},{name:"Guided Strike",type:"channelDivinity",description:"Use your Channel Divinity to gain +10 to an attack roll. Make this choice after you see the roll, but before the DM says whether the attack hits or misses.",minLevel:2,resetOn:"short"},{name:"War God's Blessing",type:"channelDivinity",description:"Use reaction to grant +10 to an ally's attack roll within 30 feet. Consumes one use of Channel Divinity.",minLevel:6,resetOn:"short"},{name:"Divine Strike",type:"info",description:a=>`Deal extra ${a>=14?"2d8":"1d8"} weapon damage once per turn`,minLevel:8,rollable:!0,rollFormula:a=>a>=14?"2d8":"1d8"},{name:"Avatar of Battle",type:"info",description:"Gain resistance to nonmagical weapon damage",minLevel:17}]},life:{name:"Life Domain",features:[{name:"Disciple of Life",type:"info",description:"Healing spells restore additional 2 + spell level HP",minLevel:1},{name:"Preserve Life",type:"pool",maxPool:a=>a*5,resetOn:"short",description:"Restore HP to creatures within 30 feet",minLevel:2},{name:"Blessed Healer",type:"info",description:"Regain 2 + spell level HP when you cast healing spell",minLevel:6},{name:"Divine Strike",type:"info",description:a=>`Deal extra ${a>=14?"2d8":"1d8"} radiant damage once per turn`,minLevel:8,rollable:!0,rollFormula:a=>a>=14?"2d8":"1d8"},{name:"Supreme Healing",type:"info",description:"Maximize healing dice instead of rolling",minLevel:17}]}}},barbarian:{name:"Barbarian",hitDice:"d12",spellcaster:!1,features:[{name:"Rage",type:"uses",maxUses:a=>a>=20?1/0:a>=17?6:a>=12?5:a>=6?4:a>=3?3:2,resetOn:"long",description:a=>`+${a>=16?4:a>=9?3:2} damage, resistance to physical damage`,minLevel:1},{name:"Reckless Attack",type:"info",description:"Gain advantage on melee attacks, enemies get advantage on you",minLevel:2},{name:"Danger Sense",type:"info",description:"Advantage on Dex saves against effects you can see",minLevel:2}],subclasses:{berserker:{name:"Path of the Berserker",features:[{name:"Frenzy",type:"info",description:"While raging, make melee attack as bonus action (gain 1 exhaustion after rage)",minLevel:3},{name:"Mindless Rage",type:"info",description:"Cannot be charmed or frightened while raging",minLevel:6},{name:"Intimidating Presence",type:"info",description:"Use action to frighten creature within 30 feet",minLevel:10},{name:"Retaliation",type:"info",description:"When damaged by creature within 5 feet, make melee attack as reaction",minLevel:14}]}}}};function Ht(a){const o=a.toLowerCase();return La[o]||null}function la(a,o,t){const d=Ht(a);if(!d)return[];const p=d.features.filter(m=>!m.minLevel||m.minLevel<=o);if(t&&d.subclasses&&d.subclasses[t]){const m=d.subclasses[t].features.filter($=>!$.minLevel||$.minLevel<=o);return[...p,...m]}return p}function Ba(a){const o=Ht(a);return!o||!o.subclasses?[]:Object.keys(o.subclasses).map(t=>({id:t,name:o.subclasses[t].name}))}function Ma(a,o){const t=Ht(a);return!t||!t.spellcaster||!t.spellSlotsByLevel?0:t.spellSlotsByLevel[o]||0}function Ia(a,o,t){const d=Ht(a);return!d||!d.spellcaster?0:Math.max(1,t+o)}function ys(a,o,t){const d=Ht(a);return!d||!d.spellcaster?null:8+o+t}function ks(){return Object.keys(La).map(a=>({id:a,name:La[a].name}))}var Ss=u('<div class="section-header svelte-ls99y2" role="button" tabindex="0"><h2 class="svelte-ls99y2"> </h2> <span class="collapse-btn svelte-ls99y2"> </span></div>');function ta(a,o){Bt(o,!1);let t=mt(o,"title",8),d=mt(o,"collapsed",8),p=mt(o,"ariaLabel",8,""),m=mt(o,"onToggle",8);Ft();var $=Ss(),B=r($),_=r(B,!0);l(B);var R=s(B,2),Y=r(R,!0);l(R),l($),F(()=>{ze($,"aria-expanded",!d()),ze($,"aria-label",p()),L(_,t()),L(Y,d()?"â–¼":"â–²")}),A("click",$,function(...q){m()?.apply(this,q)}),A("keydown",$,q=>{(q.key==="Enter"||q.key===" ")&&m()()}),c(a,$),Mt()}var $s=u("<option> </option>"),xs=u("<option> </option>"),Cs=u('<div class="form-group svelte-172i2fj"><label for="characterSubclass" class="svelte-172i2fj">Subclass</label> <select id="characterSubclass" class="svelte-172i2fj"><option>Select Subclass</option><!></select></div>'),Ls=u('<div class="info-grid svelte-172i2fj"><div class="form-group svelte-172i2fj"><label for="characterName" class="svelte-172i2fj">Character Name</label> <input type="text" id="characterName" placeholder="Enter name" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterClass" class="svelte-172i2fj">Class</label> <select id="characterClass" class="svelte-172i2fj"><option>Select Class</option><!></select></div> <!> <div class="form-group svelte-172i2fj"><label for="characterLevel" class="svelte-172i2fj">Level</label> <input type="number" id="characterLevel" min="1" max="20" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterRace" class="svelte-172i2fj">Race</label> <input type="text" id="characterRace" placeholder="e.g., Human" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterBackground" class="svelte-172i2fj">Background</label> <input type="text" id="characterBackground" placeholder="e.g., Soldier" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterAlignment" class="svelte-172i2fj">Alignment</label> <input type="text" id="characterAlignment" placeholder="e.g., Lawful Good" class="svelte-172i2fj"/></div></div>'),ws=u('<section class="character-info svelte-172i2fj"><!> <!></section>');function Ds(a,o){Bt(o,!1);const t=()=>Ve(Q,"$character",p),d=()=>Ve(Dt,"$collapsedStates",p),[p,m]=Nt(),$=M(),B=ks();function _(Z){const ue=Z.target;Q.update(V=>(V.class=ue.value,V.subclass="",V))}function R(Z){const ue=Z.target;Q.update(V=>(V.subclass=ue.value,V))}function Y(Z){const ue=Z.target;Q.update(V=>(V.level=parseInt(ue.value)||1,V)),qa()}Je(()=>(t(),Ba),()=>{v($,t().class?Ba(t().class):[])}),zt(),Ft();var q=ws(),U=r(q);{let Z=at(()=>(d(),i(()=>d().characterInfo?"Expand":"Collapse")));ta(U,{title:"Character Info",get collapsed(){return d(),i(()=>d().characterInfo)},get ariaLabel(){return e(Z)},onToggle:()=>Dt.update(ue=>({...ue,characterInfo:!ue.characterInfo}))})}var he=s(U,2);{var be=Z=>{var ue=Ls(),V=r(ue),Ne=s(r(V),2);Le(Ne),l(V);var z=s(V,2),le=s(r(z),2),X=r(le);X.value=X.__value="";var ae=s(X);dt(ae,1,()=>B,ut,(x,O)=>{var I=$s(),G=r(I,!0);l(I);var De={};F(()=>{L(G,(e(O),i(()=>e(O).name))),De!==(De=(e(O),i(()=>e(O).id)))&&(I.value=(I.__value=(e(O),i(()=>e(O).id)))??"")}),c(x,I)}),l(le);var ie;xa(le),l(z);var Be=s(z,2);{var Pe=x=>{var O=Cs(),I=s(r(O),2),G=r(I);G.value=G.__value="";var De=s(G);dt(De,1,()=>e($),ut,(Se,je)=>{var Te=xs(),qe=r(Te,!0);l(Te);var Ze={};F(()=>{L(qe,(e(je),i(()=>e(je).name))),Ze!==(Ze=(e(je),i(()=>e(je).id)))&&(Te.value=(Te.__value=(e(je),i(()=>e(je).id)))??"")}),c(Se,Te)}),l(I);var ke;xa(I),l(O),F(()=>{ke!==(ke=(t(),i(()=>t().subclass)))&&(I.value=(I.__value=(t(),i(()=>t().subclass)))??"",ba(I,(t(),i(()=>t().subclass))))}),A("change",I,R),c(x,O)};S(Be,x=>{e($),i(()=>e($).length>0)&&x(Pe)})}var _e=s(Be,2),ye=s(r(_e),2);Le(ye),l(_e);var C=s(_e,2),ve=s(r(C),2);Le(ve),l(C);var h=s(C,2),E=s(r(h),2);Le(E),l(h);var re=s(h,2),g=s(r(re),2);Le(g),l(re),l(ue),F(()=>{ie!==(ie=(t(),i(()=>t().class)))&&(le.value=(le.__value=(t(),i(()=>t().class)))??"",ba(le,(t(),i(()=>t().class)))),ma(ye,(t(),i(()=>t().level)))}),Fe(Ne,()=>t().name,x=>ot(Q,i(t).name=x,i(t))),A("change",le,_),A("change",ye,Y),Fe(ve,()=>t().race,x=>ot(Q,i(t).race=x,i(t))),Fe(E,()=>t().background,x=>ot(Q,i(t).background=x,i(t))),Fe(g,()=>t().alignment,x=>ot(Q,i(t).alignment=x,i(t))),c(Z,ue)};S(he,Z=>{d(),i(()=>!d().characterInfo)&&Z(be)})}l(q),c(a,q),Mt(),m()}var js=u('<div class="ability-card svelte-bbv1xt"><h3 class="svelte-bbv1xt"> </h3> <input type="number" class="ability-score svelte-bbv1xt" min="1" max="30"/> <div class="ability-modifier svelte-bbv1xt"> </div> <button class="roll-btn svelte-bbv1xt">Check</button> <div class="save-row svelte-bbv1xt"><input type="checkbox" class="svelte-bbv1xt"/> <label class="svelte-bbv1xt">Save</label> <button class="roll-btn-small svelte-bbv1xt">Roll</button></div></div>'),As=u('<div class="proficiency-bonus svelte-bbv1xt"><label for="profBonus">Proficiency Bonus</label> <input type="number" id="profBonus" class="prof-input svelte-bbv1xt"/></div> <div class="abilities-grid svelte-bbv1xt"></div>',1),Fs=u("<section><!> <!></section>");function Bs(a,o){Bt(o,!1);const t=()=>Ve(ca,"$abilityModifiers",$),d=()=>Ve(Q,"$character",$),p=()=>Ve(Yt,"$searchFilter",$),m=()=>Ve(Dt,"$collapsedStates",$),[$,B]=Nt(),_=M(),R=M(),Y=ea(),q=[{key:"strength",label:"Strength"},{key:"dexterity",label:"Dexterity"},{key:"constitution",label:"Constitution"},{key:"intelligence",label:"Intelligence"},{key:"wisdom",label:"Wisdom"},{key:"charisma",label:"Charisma"}];function U(){qa()}function he(le){const X=t()[le],ae=`1d20${X>=0?"+":""}${X}`;Y("roll",ae)}function be(le){const X=t()[le],ae=d().saveProficiencies[le]?d().proficiencyBonus:0,ie=X+ae,Be=`1d20${ie>=0?"+":""}${ie}`;Y("roll",Be)}Je(()=>p(),()=>{v(_,q.filter(({label:le})=>p()?le.toLowerCase().includes(p().toLowerCase()):!0))}),Je(()=>(e(_),p()),()=>{v(R,e(_).length>0||!p()||p().toLowerCase().includes("proficiency"))}),zt(),Ft();var Z=Fs();let ue;var V=r(Z);ta(V,{title:"Ability Scores",get collapsed(){return m(),i(()=>m().abilityScores)},ariaLabel:"Toggle Ability Scores Section",onToggle:()=>Dt.update(le=>({...le,abilityScores:!le.abilityScores}))});var Ne=s(V,2);{var z=le=>{var X=As(),ae=Oe(X),ie=s(r(ae),2);Le(ie),l(ae);var Be=s(ae,2);dt(Be,5,()=>e(_),ut,(Pe,_e)=>{let ye=()=>e(_e).key,C=()=>e(_e).label;var ve=js(),h=r(ve),E=r(h,!0);l(h);var re=s(h,2);Le(re);var g=s(re,2),x=r(g);l(g);var O=s(g,2),I=s(O,2),G=r(I);Le(G);var De=s(G,2),ke=s(De,2);l(I),l(ve),F(Se=>{L(E,Se),L(x,`${t(),ye(),i(()=>t()[ye()]>=0?"+":"")??""}${t(),ye(),i(()=>t()[ye()])??""}`),ze(G,"id",`${ye()}-save`),ze(De,"for",`${ye()}-save`)},[()=>(C(),i(()=>C().substring(0,3).toUpperCase()))]),Fe(re,()=>d().abilities[ye()],Se=>ot(Q,i(d).abilities[ye()]=Se,i(d))),A("change",re,U),A("click",O,()=>he(ye())),Ca(G,()=>d().saveProficiencies[ye()],Se=>ot(Q,i(d).saveProficiencies[ye()]=Se,i(d))),A("click",ke,()=>be(ye())),c(Pe,ve)}),l(Be),Fe(ie,()=>d().proficiencyBonus,Pe=>ot(Q,i(d).proficiencyBonus=Pe,i(d))),c(le,X)};S(Ne,le=>{m(),i(()=>!m().abilityScores)&&le(z)})}l(Z),F(()=>ue=pt(Z,1,"ability-scores svelte-bbv1xt",null,ue,{hidden:!e(R)})),c(a,Z),Mt(),B()}function Ms(a){return Math.floor((a-10)/2)}function wa(a,o){if(!a.class)return null;const t=Ht(a.class);if(!t||!t.spellcaster||!t.spellcastingAbility)return null;const d=o[t.spellcastingAbility];return 8+a.proficiencyBonus+d}function Is(a,o){if(!a.class)return 0;const t=Ht(a.class);return!t||!t.spellcaster||!t.spellcastingAbility?0:Ms(o[t.spellcastingAbility])}var Rs=u('<input type="number" id="armorClass" class="stat-input svelte-1r5hyyb"/>'),Es=u('<input type="text" id="armorClass" readonly=""/>'),Ps=u('<div class="stat-box svelte-1r5hyyb"><label for="spellSaveDC" class="svelte-1r5hyyb">Spell Save DC</label> <input type="number" id="spellSaveDC" class="stat-input svelte-1r5hyyb" readonly="" title="8 + Proficiency Bonus + Spellcasting Ability Modifier"/></div>'),Ts=u('<span class="hit-dice-type"> </span>'),Hs=u('<div class="stats-grid svelte-1r5hyyb"><div class="stat-box svelte-1r5hyyb"><label for="armorClass" class="svelte-1r5hyyb">Armor Class</label> <!></div> <div class="stat-box svelte-1r5hyyb"><label for="initiative" class="svelte-1r5hyyb">Initiative</label> <input type="number" id="initiative" class="stat-input svelte-1r5hyyb"/></div> <div class="stat-box svelte-1r5hyyb"><label for="speed" class="svelte-1r5hyyb">Speed</label> <input type="text" id="speed" class="stat-input svelte-1r5hyyb"/></div> <!></div> <div class="hp-section svelte-1r5hyyb"><h3 class="svelte-1r5hyyb">Hit Points</h3> <div class="hp-display svelte-1r5hyyb"><div class="hp-inputs svelte-1r5hyyb"><input type="number" class="hp-current svelte-1r5hyyb" min="0"/> <span class="hp-separator svelte-1r5hyyb">/</span> <input type="number" class="hp-max svelte-1r5hyyb" min="0"/></div> <div class="hp-controls svelte-1r5hyyb"><button class="hp-btn svelte-1r5hyyb">âˆ’</button> <button class="hp-btn svelte-1r5hyyb">+</button> <button class="hp-btn svelte-1r5hyyb">âˆ’5</button> <button class="hp-btn svelte-1r5hyyb">+5</button></div></div> <div class="temp-hp svelte-1r5hyyb"><label for="tempHP" class="svelte-1r5hyyb">Temp HP</label> <input type="number" id="tempHP" min="0" class="svelte-1r5hyyb"/></div></div> <div class="hit-dice-section svelte-1r5hyyb"><h3 class="svelte-1r5hyyb">Hit Dice</h3> <div class="hit-dice-display svelte-1r5hyyb"><input type="number" class="hit-dice-input svelte-1r5hyyb" min="0"/> <span>/</span> <input type="number" class="hit-dice-input svelte-1r5hyyb" min="0"/> <!></div> <div class="hit-dice-controls"><label for="hitDiceCount" class="svelte-1r5hyyb">Roll</label> <input type="number" id="hitDiceCount" class="hit-dice-count-input svelte-1r5hyyb" min="1" value="1"/> <button class="btn btn-primary roll-hit-dice use-enabled svelte-1r5hyyb">ðŸŽ² Roll</button></div></div>',1),Us=u("<section><!> <!></section>");function Ns(a,o){Bt(o,!1);const t=()=>Ve(Q,"$character",B),d=()=>Ve(ca,"$abilityModifiers",B),p=()=>Ve(Yt,"$searchFilter",B),m=()=>Ve(Dt,"$collapsedStates",B),$=()=>Ve(aa,"$isEditMode",B),[B,_]=Nt(),R=M(),Y=M(),q=M(),U=ea();function he(le){Q.update(X=>(X.currentHP=Math.max(0,Math.min(X.maxHP,X.currentHP+le)),X))}function be(le=1){if(t().hitDice.current<=0){alert("No hit dice remaining!");return}if(!t().class){alert("Please select a class first!");return}const X=Ht(t().class);if(!X){alert("Invalid class configuration!");return}const ae=Math.min(le,t().hitDice.current),ie=X.hitDice,Be=d().constitution,Pe=Be>=0?`+${Be}`:`${Be}`,_e=`${ae}${ie}${Pe}`;U("rollHitDice",{notation:_e,hitDie:ie,count:ae})}Je(()=>(t(),d()),()=>{v(R,wa(t(),d()))}),Je(()=>t(),()=>{v(Y,t().activeStates&&t().activeStates.length>0?t().activeStates.reduce((le,X)=>le+(X.acBonus||0),0):0)}),Je(()=>p(),()=>{v(q,!p()||"armor class".includes(p().toLowerCase())||"initiative".includes(p().toLowerCase())||"speed".includes(p().toLowerCase())||"hit points".includes(p().toLowerCase())||"hp".includes(p().toLowerCase())||"hit dice".includes(p().toLowerCase())||"spell save".includes(p().toLowerCase())||"combat".includes(p().toLowerCase()))}),zt(),Ft();var Z=Us();let ue;var V=r(Z);{let le=at(()=>(m(),i(()=>m().combatStats?"Expand":"Collapse")));ta(V,{title:"Combat Stats",get collapsed(){return m(),i(()=>m().combatStats)},get ariaLabel(){return e(le)},onToggle:()=>Dt.update(X=>({...X,combatStats:!X.combatStats}))})}var Ne=s(V,2);{var z=le=>{var X=Hs(),ae=Oe(X),ie=r(ae),Be=s(r(ie),2);{var Pe=T=>{var b=Rs();Le(b),Fe(b,()=>t().armorClass,ne=>ot(Q,i(t).armorClass=ne,i(t))),c(T,b)},_e=T=>{var b=Es();Le(b),F(()=>{ma(b,(e(Y),t(),i(()=>e(Y)!==0?`${t().armorClass} â†’ ${t().armorClass+e(Y)}`:`${t().armorClass}`))),pt(b,1,os(e(Y)!==0?"stat-input ac-enhanced":"stat-input"),"svelte-1r5hyyb"),ze(b,"title",e(Y)!==0?"Base AC plus active effect bonuses":"Base Armor Class")}),c(T,b)};S(Be,T=>{$()?T(Pe):T(_e,!1)})}l(ie);var ye=s(ie,2),C=s(r(ye),2);Le(C),l(ye);var ve=s(ye,2),h=s(r(ve),2);Le(h),l(ve);var E=s(ve,2);{var re=T=>{var b=Ps(),ne=s(r(b),2);Le(ne),l(b),F(()=>ma(ne,e(R))),c(T,b)};S(E,T=>{e(R)!==null&&T(re)})}l(ae);var g=s(ae,2),x=s(r(g),2),O=r(x),I=r(O);Le(I);var G=s(I,4);Le(G),l(O);var De=s(O,2),ke=r(De),Se=s(ke,2),je=s(Se,2),Te=s(je,2);l(De),l(x);var qe=s(x,2),Ze=s(r(qe),2);Le(Ze),l(qe),l(g);var st=s(g,2),P=s(r(st),2),n=r(P);Le(n);var ee=s(n,4);Le(ee);var W=s(ee,2);{var se=T=>{const b=at(()=>(N(Ht),t(),i(()=>Ht(t().class))));var ne=nt(),we=Oe(ne);{var We=Ke=>{const $e=at(()=>(d(),i(()=>d().constitution)));var de=Ts(),xe=r(de);l(de),F(()=>L(xe,`(${N(e(b)),i(()=>e(b).hitDice)??""}${(e($e)>=0?`+${e($e)}`:e($e))??""})`)),c(Ke,de)};S(we,Ke=>{e(b)&&Ke(We)})}c(T,ne)};S(W,T=>{t(),i(()=>t().class)&&T(se)})}l(P);var Me=s(P,2),He=s(r(Me),2),Ie=s(He,2);l(Me),l(st),F(()=>{ze(I,"max",(t(),i(()=>t().maxHP))),ze(n,"max",(t(),i(()=>t().hitDice.max))),ze(He,"max",(t(),i(()=>t().hitDice.current))),Ie.disabled=(t(),i(()=>t().hitDice.current<=0||!t().class))}),Fe(C,()=>t().initiative,T=>ot(Q,i(t).initiative=T,i(t))),Fe(h,()=>t().speed,T=>ot(Q,i(t).speed=T,i(t))),Fe(I,()=>t().currentHP,T=>ot(Q,i(t).currentHP=T,i(t))),Fe(G,()=>t().maxHP,T=>ot(Q,i(t).maxHP=T,i(t))),A("click",ke,()=>he(-1)),A("click",Se,()=>he(1)),A("click",je,()=>he(-5)),A("click",Te,()=>he(5)),Fe(Ze,()=>t().tempHP,T=>ot(Q,i(t).tempHP=T,i(t))),Fe(n,()=>t().hitDice.current,T=>ot(Q,i(t).hitDice.current=T,i(t))),Fe(ee,()=>t().hitDice.max,T=>ot(Q,i(t).hitDice.max=T,i(t))),A("input",He,T=>{const b=T.target,ne=parseInt(b.value);ne>t().hitDice.current&&(b.value=String(t().hitDice.current)),ne<1&&(b.value="1")}),A("click",Ie,()=>{const T=document.getElementById("hitDiceCount"),b=parseInt(T?.value||"1");be(b)}),c(le,X)};S(Ne,le=>{m(),i(()=>!m().combatStats)&&le(z)})}l(Z),F(()=>ue=pt(Z,1,"combat-stats svelte-1r5hyyb",null,ue,{hidden:!e(q)})),c(a,Z),Mt(),_()}const Sa={acrobatics:"dexterity",animalHandling:"wisdom",arcana:"intelligence",athletics:"strength",deception:"charisma",history:"intelligence",insight:"wisdom",intimidation:"charisma",investigation:"intelligence",medicine:"wisdom",nature:"intelligence",perception:"wisdom",performance:"charisma",persuasion:"charisma",religion:"intelligence",sleightOfHand:"dexterity",stealth:"dexterity",survival:"wisdom"};var Gs=u('<div class="skill-row svelte-1f1pl16"><input type="checkbox" class="svelte-1f1pl16"/> <label class="svelte-1f1pl16"> <span class="ability-tag svelte-1f1pl16"> </span></label> <span class="skill-modifier svelte-1f1pl16"> </span> <button class="roll-btn svelte-1f1pl16">Roll</button></div>'),Os=u('<div class="skills-grid svelte-1f1pl16"></div>'),qs=u("<section><!> <!></section>");function Ws(a,o){Bt(o,!1);const t=()=>Ve(Q,"$character",$),d=()=>Ve(ca,"$abilityModifiers",$),p=()=>Ve(Yt,"$searchFilter",$),m=()=>Ve(Dt,"$collapsedStates",$),[$,B]=Nt(),_=M(),R=M(),Y=M(),q=M(),U=M(),he=M(),be=ea(),Z=[{key:"acrobatics",label:"Acrobatics"},{key:"animalHandling",label:"Animal Handling"},{key:"arcana",label:"Arcana"},{key:"athletics",label:"Athletics"},{key:"deception",label:"Deception"},{key:"history",label:"History"},{key:"insight",label:"Insight"},{key:"intimidation",label:"Intimidation"},{key:"investigation",label:"Investigation"},{key:"medicine",label:"Medicine"},{key:"nature",label:"Nature"},{key:"perception",label:"Perception"},{key:"performance",label:"Performance"},{key:"persuasion",label:"Persuasion"},{key:"religion",label:"Religion"},{key:"sleightOfHand",label:"Sleight of Hand"},{key:"stealth",label:"Stealth"},{key:"survival",label:"Survival"}];function ue(ae){const ie=e(_)[ae],Be=`1d20${ie>=0?"+":""}${ie}`;be("roll",Be)}Je(()=>{},()=>{v(_,{})}),Je(()=>t(),()=>{v(R,t().skillProficiencies)}),Je(()=>t(),()=>{v(Y,t().proficiencyBonus)}),Je(()=>d(),()=>{v(q,d())}),Je(()=>(e(q),e(R),e(Y)),()=>{for(const{key:ae}of Z){const ie=Sa[ae],Be=e(q)[ie],Pe=e(R)[ae]?e(Y):0;ga(_,e(_)[ae]=Be+Pe)}}),Je(()=>p(),()=>{v(U,Z.filter(({label:ae})=>p()?ae.toLowerCase().includes(p().toLowerCase()):!0))}),Je(()=>e(U),()=>{v(he,e(U).length>0)}),zt(),Ft();var V=qs();let Ne;var z=r(V);{let ae=at(()=>(m(),i(()=>m().skills?"Expand":"Collapse")));ta(z,{title:"Skills",get collapsed(){return m(),i(()=>m().skills)},get ariaLabel(){return e(ae)},onToggle:()=>Dt.update(ie=>({...ie,skills:!ie.skills}))})}var le=s(z,2);{var X=ae=>{var ie=Os();dt(ie,5,()=>e(U),ut,(Be,Pe)=>{let _e=()=>e(Pe).key,ye=()=>e(Pe).label;var C=Gs(),ve=r(C);Le(ve);var h=s(ve,2),E=r(h),re=s(E),g=r(re);l(re),l(h);var x=s(h,2),O=r(x);l(x);var I=s(x,2);l(C),F(G=>{za(ve,(e(R),_e(),i(()=>e(R)[_e()]))),ze(ve,"id",_e()),ze(h,"for",_e()),L(E,`${ye()??""} `),L(g,`(${G??""})`),L(O,`${e(_),_e(),i(()=>e(_)[_e()]>=0?"+":"")??""}${e(_),_e(),i(()=>e(_)[_e()])??""}`)},[()=>(N(Sa),_e(),i(()=>Sa[_e()].substring(0,3).toUpperCase()))]),A("change",ve,G=>{console.log("Skill proficiency changed:",_e(),G.target.checked),Q.update(De=>({...De,skillProficiencies:{...De.skillProficiencies,[_e()]:G.target.checked}}))}),A("click",I,()=>ue(_e())),c(Be,C)}),l(ie),c(ae,ie)};S(le,ae=>{m(),i(()=>!m().skills)&&ae(X)})}l(V),F(()=>Ne=pt(V,1,"skills svelte-1f1pl16",null,Ne,{hidden:!e(he)})),c(a,V),Mt(),B()}let da=null,ua=null;async function Ja(){if(da)return da;try{return da=await(await fetch(Ka("/data/spells.json"))).json(),da||[]}catch(a){return console.error("Failed to load spells:",a),[]}}async function zs(){if(ua)return ua;try{return ua=await(await fetch(Ka("/data/feats.json"))).json(),ua||[]}catch(a){return console.error("Failed to load feats:",a),[]}}function Ra(a,o){if(!o.trim())return a;const t=o.toLowerCase();return a.filter(d=>d.name.toLowerCase().includes(t)||d.school.toLowerCase().includes(t)||d.classes.some(p=>p.toLowerCase().includes(t))||d.description.toLowerCase().includes(t))}function Ks(a,o){return o===null?a:a.filter(t=>t.level===o)}function Js(a,o){if(!o.trim())return a;const t=o.toLowerCase();return a.filter(d=>d.name.toLowerCase().includes(t)||d.description.toLowerCase().includes(t))}function pa(a){const o=a.description,t=/\b(Strength|Dexterity|Constitution|Intelligence|Wisdom|Charisma)\s+saving\s+throw/i,d=o.match(t);if(!d)return null;const p=d[1].toLowerCase(),$=/half\s+(?:as\s+much\s+)?damage\s+on\s+a\s+successful(?:\s+save)?/i.test(o),_=/saving\s+throw\s+or\s+take.*?damage/i.test(o)&&!$;return{ability:p,halfDamageOnSave:$,noDamageOnSave:_}}function Vs(a){const o=a.description;return/(plus|add)\s+your\s+spellcasting\s+(ability\s+)?modifier/i.test(o)}function Ea(a){const o=a.description.toLowerCase();if(a.name==="Divine Favor")return!0;const d=["takes","take","deals","deal","damage equal to","force damage","fire damage","cold damage","lightning damage","thunder damage","acid damage","poison damage","necrotic damage","radiant damage","psychic damage","regain","regains","hit point"].some($=>o.includes($));return["bonus to attack","bonus to damage","bonus to ac","gains a +","gain a +","+1 bonus","+2 bonus","+3 bonus","advantage on","becomes a magic weapon"].some($=>o.includes($))&&!d}function Qs(a){const o=a.description;let t=0,d=0,p=0,m="";const $=o.match(/\+(\d+)\s+bonus\s+to\s+attack\s+rolls\s+and\s+damage\s+rolls/i);if($){const _=parseInt($[1]);t=_,d=_,m=`+${_} to attack and damage rolls`}a.name==="Bless"&&(m="Add 1d4 to attack rolls and saves"),a.name==="Divine Favor"&&(m="Your weapon attacks deal an extra 1d4 radiant damage on a hit.",d="1d4");const B=o.match(/\+(\d+)\s+bonus\s+to\s+AC/i);return B&&(p=parseInt(B[1]),m=`+${p} to AC`),a.name==="Haste"&&(m="+2 AC, doubled speed, extra action"),m||t!==0||d!==0||p!==0?{attackBonus:t,damageBonus:d,acBonus:p,description:m||a.description.substring(0,100)}:null}var Ys=u('<button class="btn-remove svelte-14o91c5">Ã—</button>'),Xs=u('<div class="attack-field svelte-14o91c5"><label class="svelte-14o91c5">Bonus</label> <input type="number" class="attack-bonus svelte-14o91c5"/></div>'),Zs=u('<div class="attack-field svelte-14o91c5"><label class="svelte-14o91c5">Damage</label> <input type="text" placeholder="e.g., 2d6+3" class="attack-damage svelte-14o91c5"/></div>'),el=u('<div class="spell-info-loading svelte-14o91c5">Loading spell info...</div>'),tl=u('<div class="spell-notes svelte-14o91c5"><h4 class="svelte-14o91c5">General Notes</h4> <p> </p></div>'),al=u('<li class="svelte-14o91c5"><strong>At Higher Levels:</strong> </li>'),sl=u('<ul class="svelte-14o91c5"><li class="svelte-14o91c5"><strong>Level:</strong> </li> <li class="svelte-14o91c5"><strong>Casting Time:</strong> </li> <li class="svelte-14o91c5"><strong>Range:</strong> </li> <li class="svelte-14o91c5"><strong>Components:</strong> <!></li> <li class="svelte-14o91c5"><strong>Duration:</strong> <!> </li> <li class="svelte-14o91c5"><strong>Description:</strong> </li> <!></ul>'),ll=u('<span class="scaled-damage svelte-14o91c5" style="margin-left: 8px;"> </span>'),rl=u('<span class="scaled-damage svelte-14o91c5">(Half damage)</span>'),il=u('<span class="scaled-damage svelte-14o91c5">(No damage)</span>'),nl=u('<div class="target-condition svelte-14o91c5"><label class="svelte-14o91c5"><input type="checkbox" class="use-enabled svelte-14o91c5"/> <!> <!></label></div>'),ol=u("<option> </option>"),cl=u('<span class="scaled-damage svelte-14o91c5"><!> </span>'),vl=u('<span class="scaled-damage svelte-14o91c5"> </span>'),dl=u('<div class="target-condition svelte-14o91c5"><label class="svelte-14o91c5"><input type="checkbox" class="use-enabled svelte-14o91c5"/> Target is Fiend or Undead <!></label></div>'),ul=u('<div class="spell-level-selector svelte-14o91c5"><label class="svelte-14o91c5">Cast at Level:</label> <select class="spell-level-select use-enabled svelte-14o91c5"></select> <!></div> <!>',1),pl=u('<div class="spell-level-selector svelte-14o91c5"><span style="color: #dc3545; font-weight: bold;">No spell slots available!</span></div>'),fl=u('<!> <div class="spell-info svelte-14o91c5"><div class="spell-info-header svelte-14o91c5" role="button" tabindex="0"><h4 class="svelte-14o91c5">Spell Info</h4> <button class="collapse-btn-small svelte-14o91c5"> </button></div> <!></div> <!> <!>',1),gl=u('<div class="spell-info-missing svelte-14o91c5">Spell info not found.</div>'),bl=u('<div class="attack-notes svelte-14o91c5"><label class="svelte-14o91c5">Notes</label> <textarea placeholder="e.g., DC 15 Dex save, Range 120 ft, Concentration" class="notes-input svelte-14o91c5" rows="2"></textarea></div>'),ml=u('<button class="btn btn-primary">Roll Attack</button>'),hl=u('<button class="btn btn-success">Cast Spell</button>'),_l=u('<button class="btn btn-secondary"><!></button>'),yl=u('<button class="btn btn-secondary">Roll Damage</button>'),kl=u('<div class="attack-card svelte-14o91c5"><div class="attack-header svelte-14o91c5"><input type="text" placeholder="Attack name" class="attack-name svelte-14o91c5"/> <!></div> <div class="attack-details svelte-14o91c5"><!> <!> <div class="attack-field svelte-14o91c5"><label class="svelte-14o91c5">Type</label> <input type="text" placeholder="e.g., slashing" class="attack-type svelte-14o91c5"/></div></div> <!> <!> <div class="attack-actions svelte-14o91c5"><!> <!></div></div>'),Sl=u('<p class="no-attacks svelte-14o91c5">No attacks added yet. Click "Add Attack" to create one.</p>'),$l=u('<p class="no-attacks svelte-14o91c5">No attacks match your search.</p>'),xl=u('<button class="btn-remove svelte-14o91c5">Ã—</button>'),Cl=u('<div class="state-card svelte-14o91c5"><div class="state-header svelte-14o91c5"><input type="text" placeholder="Effect name (e.g., Magic Weapon)" class="state-name svelte-14o91c5"/> <!></div> <div class="state-details svelte-14o91c5"><div class="state-field svelte-14o91c5"><label class="svelte-14o91c5">Attack Bonus</label> <input type="number" class="state-bonus svelte-14o91c5"/></div> <div class="state-field svelte-14o91c5"><label class="svelte-14o91c5">Damage Bonus</label> <input type="text" class="state-bonus svelte-14o91c5"/></div></div> <div class="state-description svelte-14o91c5"><label class="svelte-14o91c5">Description</label> <input type="text" placeholder="e.g., +1 to attack and damage rolls (Magic Weapon)" class="state-desc-input svelte-14o91c5"/></div></div>'),Ll=u('<div class="states-list svelte-14o91c5"></div>'),wl=u('<p class="no-states svelte-14o91c5">No active effects. Add spell effects that modify your attacks.</p>'),Dl=u('<button class="btn btn-secondary">Add Attack</button> <div class="attacks-list svelte-14o91c5"><!> <!></div> <div class="active-states-section svelte-14o91c5"><h3 class="svelte-14o91c5">Active Spell Effects</h3> <p class="section-description svelte-14o91c5">Effects that modify attack and damage rolls (e.g., Magic Weapon, Bless)</p> <button class="btn btn-secondary">Add Effect</button> <!></div>',1),jl=u("<section><!> <!></section>");function Al(a,o){Bt(o,!1);const t=()=>Ve(Q,"$character",B),d=()=>Ve(ca,"$abilityModifiers",B),p=()=>Ve(Yt,"$searchFilter",B),m=()=>Ve(Dt,"$collapsedStates",B),$=()=>Ve(aa,"$isEditMode",B),[B,_]=Nt(),R=M(),Y=M(),q=ea();let U=M({});function he(g){ga(U,e(U)[g]=!e(U)[g]),v(U,{...e(U)})}function be(g){return g.description.toLowerCase().includes("regain")&&(g.description.toLowerCase().includes("hit point")||g.description.toLowerCase().includes("hp"))}function Z(){Q.update(g=>(g.attacks=[...g.attacks,{id:crypto.randomUUID(),name:"",bonus:0,damage:"",damageType:"",notes:""}],g))}function ue(g){Q.update(x=>(x.attacks=x.attacks.filter(O=>O.id!==g),x))}function V(g){let x=g.damage,O=!1;if(g.spellRef){const ke=X(g.spellRef);if(ke&&ke.level>0){const Se=g.castAtLevel||ke.level;if(!ae(Se)){Tt.add(`No level ${Se} spell slots available!`,"error");return}const Te=pa(ke);Te&&g.targetSucceededSave&&Te.noDamageOnSave?x="0":(O=Te?.halfDamageOnSave&&g.targetSucceededSave||!1,x=ie(g,ke))}}else if(t().activeStates&&t().activeStates.length>0){let ke=0,Se=[];for(const je of t().activeStates)typeof je.damageBonus=="string"?Se.push(je.damageBonus):typeof je.damageBonus=="number"&&(ke+=je.damageBonus);if((ke!==0||Se.length>0)&&x){const je=x.match(/(\d+d\d+)([+-]\d+)?/);if(je){const[,Te,qe]=je,st=(qe?parseInt(qe):0)+ke;let P=`${Te}`;st!==0&&(P+=`${st>=0?"+":""}${st}`),Se.length>0&&(P+=" + "+Se.join(" + ")),x=P}}}const I=[];g.bonus!==0&&I.push({value:g.bonus,source:"base"});let G=g.bonus;if(t().activeStates)for(const ke of t().activeStates)typeof ke.attackBonus=="number"&&ke.attackBonus!==0&&(I.push({value:ke.attackBonus,source:ke.name.toLowerCase()}),G+=ke.attackBonus);let De;De=`1d20${G>=0?"+":""}${G}`,q("roll",{notation:De,damageNotation:x,attackName:g.name,applyHalfDamage:O,bonusBreakdown:I})}function Ne(g){if(!g.damage){Tt.add(`${g.name}: No damage specified`,"error");return}let x=g.damage,O=!1;const I=[];if(g.spellRef){const G=X(g.spellRef);if(G&&G.level>0){const De=g.castAtLevel||G.level;if(!ae(De)){Tt.add(`No level ${De} spell slots available!`,"error");return}const Se=pa(G);Se&&g.targetSucceededSave&&Se.noDamageOnSave?x="0":(O=Se?.halfDamageOnSave&&g.targetSucceededSave||!1,x=ie(g,G))}}else{const G=x.match(/(\d+d\d+)([+-]\d+)?/);if(G){const[,De,ke]=G,Se=ke?parseInt(ke):0;if(Se!==0&&I.push({value:Se,source:"base"}),t().activeStates&&t().activeStates.length>0){let je=0,Te=[];for(const qe of t().activeStates)typeof qe.damageBonus=="string"?Te.push(qe.damageBonus):typeof qe.damageBonus=="number"&&qe.damageBonus!==0&&(I.push({value:qe.damageBonus,source:qe.name.toLowerCase()}),je+=qe.damageBonus);if(je!==0||Te.length>0){const qe=Se+je;let Ze=`${De}`;qe!==0&&(Ze+=`${qe>=0?"+":""}${qe}`),Te.length>0&&(Ze+=" + "+Te.join(" + ")),x=Ze}}}}q("roll",{notation:x,attackName:g.name,applyHalfDamage:O,bonusBreakdown:I})}let z=M([]),le=M(!1);oa(async()=>{v(z,await Ja()),v(le,!0)});function X(g){return e(z).find(x=>x.name===g)}function ae(g){t().classFeatures.spellSlotsByLevel||ot(Q,i(t).classFeatures.spellSlotsByLevel={},i(t)),t().classFeatures.spellSlotsByLevel[g]||ot(Q,i(t).classFeatures.spellSlotsByLevel[g]=Array(2).fill(!1),i(t));const O=t().classFeatures.spellSlotsByLevel[g].findIndex(I=>!I);return O===-1?!1:(Q.update(I=>(I.classFeatures.spellSlotsByLevel||(I.classFeatures.spellSlotsByLevel={}),I.classFeatures.spellSlotsByLevel[g]||(I.classFeatures.spellSlotsByLevel[g]=Array(2).fill(!1)),I.classFeatures.spellSlotsByLevel[g][O]=!0,I)),!0)}function ie(g,x){let O=g.damage,I=0,G=0;if(Vs(x)&&(G+=Is(t(),d())),t().activeStates)for(const P of t().activeStates)typeof P.damageBonus=="number"&&(G+=P.damageBonus);if(x.higherLevelSlot&&g.castAtLevel){const P=x.level,ee=(g.castAtLevel||P)-P;if(ee>0){const W=x.higherLevelSlot.match(/(\d+)d(\d+)\s+for\s+each.*?level\s+above/i);if(W){const[,se]=W;I+=ee*parseInt(se)}}}if(g.targetIsFiendOrUndead&&x.description.includes("Fiend or an Undead")){const P=x.description.match(/increases by (\d+)d(\d+) if.*?Fiend or.*?Undead/i);if(P){const[,n]=P;I+=parseInt(n)}}const De=O.match(/(\d+)d(\d+)([+-]\d+)?/);if(!De)return G!==0?G>=0?`${G}`:`${G}`:O||"0";const[,ke,Se,je]=De,Te=parseInt(ke)+I,Ze=(je?parseInt(je):0)+G;let st=`${Te}d${Se}`;return Ze!==0&&(st+=Ze>=0?`+${Ze}`:`${Ze}`),st}function Be(g){const x=[];for(let I=g.level;I<=9;I++){const G=t().classFeatures.spellSlotsByLevel?.[I];G&&G.length>0&&x.push(I)}return x}function Pe(){Q.update(g=>(g.activeStates||(g.activeStates=[]),g.activeStates=[...g.activeStates,{name:"",attackBonus:0,damageBonus:0,description:""}],g))}function _e(g){Q.update(x=>(x.activeStates&&(x.activeStates=x.activeStates.filter((O,I)=>I!==g)),x))}function ye(g){const x=X(g.spellRef);if(!x){Tt.add("Spell not found","error");return}const O=g.castAtLevel||x.level;if(O>0&&!ae(O)){Tt.add(`No level ${O} spell slots available!`,"error");return}const I=Qs(x);if(!I){Tt.add(`${x.name} cast! Check spell description for effects.`,"info");return}Q.update(G=>(G.activeStates||(G.activeStates=[]),G.activeStates=G.activeStates.filter(De=>De.name!==x.name),G.activeStates=[...G.activeStates,{name:x.name,attackBonus:I.attackBonus,damageBonus:I.damageBonus,acBonus:I.acBonus,description:I.description}],G)),Tt.add(`${x.name} cast! Effect added to Active Spell Effects.`,"success")}Je(()=>(t(),e(U)),()=>{if(t()&&t().attacks)for(const g of t().attacks)g.spellRef&&e(U)[g.id]===void 0&&ga(U,e(U)[g.id]=!0)}),Je(()=>(t(),p()),()=>{v(R,t().attacks.filter(g=>{if(!p())return!0;const x=p().toLowerCase();return g.name.toLowerCase().includes(x)||g.damageType.toLowerCase().includes(x)}).sort((g,x)=>!g.spellRef&&x.spellRef?-1:g.spellRef&&!x.spellRef?1:0))}),Je(()=>(p(),e(R)),()=>{v(Y,!p()||e(R).length>0||"attack".includes(p().toLowerCase())||"spell".includes(p().toLowerCase()))}),zt(),Ft();var C=jl();let ve;var h=r(C);{let g=at(()=>(m(),i(()=>m().attacks?"Expand":"Collapse")));ta(h,{title:"Attacks & Spells",get collapsed(){return m(),i(()=>m().attacks)},get ariaLabel(){return e(g)},onToggle:()=>Dt.update(x=>({...x,attacks:!x.attacks}))})}var E=s(h,2);{var re=g=>{var x=Dl(),O=Oe(x),I=s(O,2),G=r(I);dt(G,1,()=>e(R),P=>P.id,(P,n,ee)=>{var W=kl(),se=r(W),Me=r(se);Le(Me);var He=s(Me,2);{var Ie=w=>{var H=Ys();A("click",H,()=>ue(e(n).id)),c(w,H)};S(He,w=>{$()&&w(Ie)})}l(se);var T=s(se,2),b=r(T);{var ne=w=>{var H=Xs(),fe=r(H),Ce=s(fe,2);Le(Ce),l(H),F(()=>{ze(fe,"for",`attack-bonus-${e(n),i(()=>e(n).id)??""}`),ze(Ce,"id",`attack-bonus-${e(n),i(()=>e(n).id)??""}`)}),Fe(Ce,()=>e(n).bonus,J=>(e(n).bonus=J,Lt(()=>(e(R),t(),p())))),c(w,H)};S(b,w=>{e(n),i(()=>e(n).bonus!==0&&e(n).bonus!==void 0)&&w(ne)})}var we=s(b,2);{var We=w=>{var H=Zs(),fe=r(H),Ce=s(fe,2);Le(Ce),l(H),F(()=>{ze(fe,"for",`attack-damage-${e(n),i(()=>e(n).id)??""}`),ze(Ce,"id",`attack-damage-${e(n),i(()=>e(n).id)??""}`)}),Fe(Ce,()=>e(n).damage,J=>(e(n).damage=J,Lt(()=>(e(R),t(),p())))),c(w,H)};S(we,w=>{e(n),i(()=>e(n).damage&&e(n).damage.trim()!=="")&&w(We)})}var Ke=s(we,2),$e=r(Ke),de=s($e,2);Le(de),l(Ke),l(T);var xe=s(T,2);{var Ue=w=>{var H=nt(),fe=Oe(H);{var Ce=Ee=>{var j=el();c(Ee,j)},J=Ee=>{const j=at(()=>(e(n),i(()=>X(e(n).spellRef))));var Ye=nt(),it=Oe(Ye);{var ht=lt=>{const k=at(()=>(N(pa),N(e(j)),i(()=>pa(e(j)))));var te=fl(),f=Oe(te);{var ce=et=>{var vt=tl(),gt=s(r(vt),2),Rt=r(gt,!0);l(gt),l(vt),F(()=>L(Rt,(e(n),i(()=>e(n).generalNotes)))),c(et,vt)};S(f,et=>{e(n),i(()=>e(n).generalNotes)&&et(ce)})}var ge=s(f,2),tt=r(ge),me=s(r(tt),2),Xe=r(me,!0);l(me),l(tt);var Qe=s(tt,2);{var ct=et=>{var vt=sl(),gt=r(vt),Rt=s(r(gt));l(gt);var Gt=s(gt,2),Kt=s(r(Gt));l(Gt);var xt=s(Gt,2),_t=s(r(xt));l(xt);var yt=s(xt,2),Et=s(r(yt)),rt=s(Et);{var Pt=bt=>{var kt=wt();F(()=>L(kt,`(${N(e(j)),i(()=>e(j).material)??""})`)),c(bt,kt)};S(rt,bt=>{N(e(j)),i(()=>e(j).material)&&bt(Pt)})}l(yt);var Wt=s(yt,2),Jt=s(r(Wt),2);{var Xt=bt=>{var kt=wt("Concentration,");c(bt,kt)};S(Jt,bt=>{N(e(j)),i(()=>e(j).concentration)&&bt(Xt)})}var $t=s(Jt,1,!0);l(Wt);var At=s(Wt,2),Ct=s(r(At));l(At);var Ot=s(At,2);{var Vt=bt=>{var kt=al(),qt=s(r(kt));l(kt),F(()=>L(qt,` ${N(e(j)),i(()=>e(j).higherLevelSlot)??""}`)),c(bt,kt)};S(Ot,bt=>{N(e(j)),i(()=>e(j).higherLevelSlot)&&bt(Vt)})}l(vt),F(bt=>{L(Rt,` ${N(e(j)),i(()=>e(j).level)??""}`),L(Kt,` ${N(e(j)),i(()=>e(j).castingTime||e(j).actionType)??""}`),L(_t,` ${N(e(j)),i(()=>e(j).range)??""}`),L(Et,` ${bt??""}`),L($t,(N(e(j)),i(()=>e(j).duration))),L(Ct,` ${N(e(j)),i(()=>e(j).description)??""}`)},[()=>(N(e(j)),i(()=>e(j).components.join(", ")))]),c(et,vt)};S(Qe,et=>{e(U),e(n),i(()=>!e(U)[e(n).id])&&et(ct)})}l(ge);var ft=s(ge,2);{var Ut=et=>{var vt=nl(),gt=r(vt),Rt=r(gt);Le(Rt);var Gt=s(Rt),Kt=s(Gt);{var xt=rt=>{var Pt=ll(),Wt=r(Pt);l(Pt),F(Jt=>L(Wt,`(Spell Save DC: ${Jt??""})`),[()=>(N(wa),t(),d(),i(()=>wa(t(),d())))]),c(rt,Pt)};S(Kt,rt=>{t(),i(()=>t().class)&&rt(xt)})}var _t=s(Kt,2);{var yt=rt=>{var Pt=rl();c(rt,Pt)},Et=rt=>{var Pt=nt(),Wt=Oe(Pt);{var Jt=Xt=>{var $t=il();c(Xt,$t)};S(Wt,Xt=>{e(n),N(e(k)),i(()=>e(n).targetSucceededSave&&e(k).noDamageOnSave)&&Xt(Jt)},!0)}c(rt,Pt)};S(_t,rt=>{e(n),N(e(k)),i(()=>e(n).targetSucceededSave&&e(k).halfDamageOnSave)?rt(yt):rt(Et,!1)})}l(gt),l(vt),F(rt=>L(Gt,` Target succeeded on ${rt??""} save `),[()=>(N(e(k)),i(()=>e(k).ability.charAt(0).toUpperCase()+e(k).ability.slice(1)))]),Ca(Rt,()=>e(n).targetSucceededSave,rt=>(e(n).targetSucceededSave=rt,Lt(()=>(e(R),t(),p())))),c(et,vt)};S(ft,et=>{e(k)&&et(Ut)})}var jt=s(ft,2);{var It=et=>{const vt=at(()=>(N(e(j)),i(()=>Be(e(j)))));var gt=nt(),Rt=Oe(gt);{var Gt=xt=>{var _t=ul(),yt=Oe(_t),Et=r(yt),rt=s(Et,2);F(()=>{e(n),Lt(()=>{e(vt)})}),dt(rt,5,()=>e(vt),ut,($t,At)=>{var Ct=ol(),Ot=r(Ct);l(Ct);var Vt={};F(()=>{L(Ot,`Level ${e(At)??""}`),Vt!==(Vt=e(At))&&(Ct.value=(Ct.__value=e(At))??"")}),c($t,Ct)}),l(rt);var Pt=s(rt,2);{var Wt=$t=>{const At=at(()=>(e(n),N(e(j)),i(()=>ie(e(n),e(j)))));var Ct=cl(),Ot=r(Ct);{var Vt=qt=>{var Zt=wt("Healing");c(qt,Zt)},bt=qt=>{var Zt=wt("Damage");c(qt,Zt)};S(Ot,qt=>{N(e(j)),i(()=>be(e(j)))?qt(Vt):qt(bt,!1)})}var kt=s(Ot);l(Ct),F(()=>L(kt,` ${e(At)??""}`)),c($t,Ct)};S(Pt,$t=>{e(n),N(e(j)),i(()=>e(n).castAtLevel&&e(n).castAtLevel>e(j).level)&&$t(Wt)})}l(yt);var Jt=s(yt,2);{var Xt=$t=>{var At=dl(),Ct=r(At),Ot=r(Ct);Le(Ot);var Vt=s(Ot,2);{var bt=kt=>{const qt=at(()=>(e(n),N(e(j)),i(()=>ie(e(n),e(j)))));var Zt=vl(),Va=r(Zt);l(Zt),F(()=>L(Va,`(+1d8, total: ${e(qt)??""})`)),c(kt,Zt)};S(Vt,kt=>{e(n),i(()=>e(n).targetIsFiendOrUndead)&&kt(bt)})}l(Ct),l(At),Ca(Ot,()=>e(n).targetIsFiendOrUndead,kt=>(e(n).targetIsFiendOrUndead=kt,Lt(()=>(e(R),t(),p())))),c($t,At)};S(Jt,$t=>{N(e(j)),i(()=>e(j).description.includes("Fiend or an Undead"))&&$t(Xt)})}F(()=>{ze(Et,"for",`castLevel-${e(n),i(()=>e(n).id)??""}`),ze(rt,"id",`castLevel-${e(n),i(()=>e(n).id)??""}`)}),Wa(rt,()=>e(n).castAtLevel,$t=>(e(n).castAtLevel=$t,Lt(()=>(e(R),t(),p())))),c(xt,_t)},Kt=xt=>{var _t=pl();c(xt,_t)};S(Rt,xt=>{N(e(vt)),i(()=>e(vt).length>0)?xt(Gt):xt(Kt,!1)})}c(et,gt)};S(jt,et=>{N(e(j)),i(()=>e(j).higherLevelSlot&&e(j).level>0)&&et(It)})}F(()=>{ze(me,"aria-label",(e(U),e(n),i(()=>e(U)[e(n).id]?"Expand":"Collapse"))),L(Xe,(e(U),e(n),i(()=>e(U)[e(n).id]?"â–¼":"â–²")))}),A("click",tt,()=>he(e(n).id)),A("keydown",tt,et=>et.key==="Enter"&&he(e(n).id)),c(lt,te)},St=lt=>{var k=gl();c(lt,k)};S(it,lt=>{e(j)?lt(ht):lt(St,!1)})}c(Ee,Ye)};S(fe,Ee=>{e(z),i(()=>e(z).length===0)?Ee(Ce):Ee(J,!1)})}c(w,H)};S(xe,w=>{e(n),i(()=>e(n).spellRef)&&w(Ue)})}var Ae=s(xe,2);{var Re=w=>{var H=bl(),fe=r(H),Ce=s(fe,2);ia(Ce),l(H),F(()=>{ze(fe,"for",`attack-notes-${e(n),i(()=>e(n).id)??""}`),ze(Ce,"id",`attack-notes-${e(n),i(()=>e(n).id)??""}`)}),Fe(Ce,()=>e(n).notes,J=>(e(n).notes=J,Lt(()=>(e(R),t(),p())))),c(w,H)};S(Ae,w=>{e(n),i(()=>!e(n).spellRef)&&w(Re)})}var K=s(Ae,2),pe=r(K);{var Ge=w=>{var H=ml();A("click",H,()=>V(e(n))),c(w,H)};S(pe,w=>{e(n),i(()=>e(n).bonus!==0||!e(n).spellRef)&&w(Ge)})}var y=s(pe,2);{var D=w=>{const H=at(()=>(e(n),i(()=>X(e(n).spellRef))));var fe=nt(),Ce=Oe(fe);{var J=j=>{var Ye=hl();A("click",Ye,()=>ye(e(n))),c(j,Ye)},Ee=j=>{var Ye=_l(),it=r(Ye);{var ht=lt=>{var k=wt("Roll Healing");c(lt,k)},St=lt=>{var k=wt("Roll Damage");c(lt,k)};S(it,lt=>{N(e(H)),i(()=>e(H)&&be(e(H)))?lt(ht):lt(St,!1)})}l(Ye),A("click",Ye,()=>Ne(e(n))),c(j,Ye)};S(Ce,j=>{N(e(H)),N(Ea),i(()=>e(H)&&Ea(e(H)))?j(J):j(Ee,!1)})}c(w,fe)},oe=w=>{var H=yl();A("click",H,()=>Ne(e(n))),c(w,H)};S(y,w=>{e(n),e(le),i(()=>e(n).spellRef&&e(le))?w(D):w(oe,!1)})}l(K),l(W),F(()=>{ze($e,"for",`attack-type-${e(n),i(()=>e(n).id)??""}`),ze(de,"id",`attack-type-${e(n),i(()=>e(n).id)??""}`)}),Fe(Me,()=>e(n).name,w=>(e(n).name=w,Lt(()=>(e(R),t(),p())))),Fe(de,()=>e(n).damageType,w=>(e(n).damageType=w,Lt(()=>(e(R),t(),p())))),c(P,W)});var De=s(G,2);{var ke=P=>{var n=Sl();c(P,n)},Se=P=>{var n=nt(),ee=Oe(n);{var W=se=>{var Me=$l();c(se,Me)};S(ee,se=>{e(R),i(()=>e(R).length===0)&&se(W)},!0)}c(P,n)};S(De,P=>{t(),i(()=>t().attacks.length===0)?P(ke):P(Se,!1)})}l(I);var je=s(I,2),Te=s(r(je),4),qe=s(Te,2);{var Ze=P=>{var n=Ll();dt(n,5,()=>(t(),i(()=>t().activeStates)),ut,(ee,W,se)=>{var Me=Cl(),He=r(Me),Ie=r(He);Le(Ie);var T=s(Ie,2);{var b=K=>{var pe=xl();A("click",pe,()=>_e(se)),c(K,pe)};S(T,K=>{$()&&K(b)})}l(He);var ne=s(He,2),we=r(ne),We=r(we);ze(We,"for",`state-attack-bonus-${se}`);var Ke=s(We,2);Le(Ke),ze(Ke,"id",`state-attack-bonus-${se}`),l(we);var $e=s(we,2),de=r($e);ze(de,"for",`state-damage-bonus-${se}`);var xe=s(de,2);Le(xe),ze(xe,"id",`state-damage-bonus-${se}`),l($e),l(ne);var Ue=s(ne,2),Ae=r(Ue);ze(Ae,"for",`state-desc-${se}`);var Re=s(Ae,2);Le(Re),ze(Re,"id",`state-desc-${se}`),l(Ue),l(Me),Fe(Ie,()=>e(W).name,K=>(e(W).name=K,Lt(()=>t()),va(B,"$character"))),Fe(Ke,()=>e(W).attackBonus,K=>(e(W).attackBonus=K,Lt(()=>t()),va(B,"$character"))),Fe(xe,()=>e(W).damageBonus,K=>(e(W).damageBonus=K,Lt(()=>t()),va(B,"$character"))),Fe(Re,()=>e(W).description,K=>(e(W).description=K,Lt(()=>t()),va(B,"$character"))),c(ee,Me)}),l(n),c(P,n)},st=P=>{var n=wl();c(P,n)};S(qe,P=>{t(),i(()=>t().activeStates&&t().activeStates.length>0)?P(Ze):P(st,!1)})}l(je),A("click",O,Z),A("click",Te,Pe),c(g,x)};S(E,g=>{m(),i(()=>!m().attacks)&&g(re)})}l(C),F(()=>ve=pt(C,1,"attacks svelte-14o91c5",null,ve,{hidden:!e(Y)})),c(a,C),Mt(),_()}var Fl=u('<span class="slot-checkbox-x svelte-serp1j">&#8212;</span>'),Bl=u('<label><input type="checkbox" class="slot-checkbox-input svelte-serp1j"/> <span><!></span></label>');function Pa(a,o){Bt(o,!1);const t=()=>Ve(aa,"$isEditMode",d),[d,p]=Nt();let m=mt(o,"checked",8,!1),$=mt(o,"disabled",8,!1),B=mt(o,"className",8,""),_=mt(o,"index",8,void 0),R=mt(o,"ariaLabel",8,void 0);const Y=ea();function q(V){Y("change",{checked:V.currentTarget.checked,index:_()})}Ft();var U=Bl(),he=r(U);Le(he);var be=s(he,2),Z=r(be);{var ue=V=>{var Ne=Fl();c(V,Ne)};S(Z,V=>{m()&&V(ue)})}l(be),l(U),F(()=>{pt(U,1,"slot-checkbox-label "+B()+(t()?"":" not-editable"),"svelte-serp1j"),za(he,m()),he.disabled=$()||!t(),ze(he,"aria-label",R()),ze(he,"tabindex",t()?0:-1),pt(be,1,`slot-checkbox-custom ${m()?"used":""} ${t()?"":"readonly"}`,"svelte-serp1j")}),A("change",he,q),c(a,U),Mt(),p()}var Ml=u('<p class="no-features svelte-1kpvv0n">Select a class to see available features</p>'),Il=u('<p class="no-features svelte-1kpvv0n">No class features available at this level</p>'),Rl=u('<div class="spell-slots svelte-1kpvv0n"><label class="svelte-1kpvv0n"> </label> <div class="slots-tracker svelte-1kpvv0n"></div></div>'),El=u('<div class="all-spell-slots"></div>'),Pl=u('<div class="feature-box spellcasting svelte-1kpvv0n"><h3 class="svelte-1kpvv0n"> </h3> <div class="spell-stats svelte-1kpvv0n"><div class="spell-stat svelte-1kpvv0n"><label class="svelte-1kpvv0n">Spell Save DC</label> <div class="spell-value svelte-1kpvv0n"> </div></div> <div class="spell-stat svelte-1kpvv0n"><label class="svelte-1kpvv0n">Prepared Spells</label> <div class="spell-value svelte-1kpvv0n"> </div></div></div> <!> <div class="prepared-spells svelte-1kpvv0n"><label class="svelte-1kpvv0n">Prepared Spells</label> <textarea placeholder="List your prepared spells..." class="svelte-1kpvv0n"></textarea></div></div>'),Tl=u('<p class="unlimited svelte-1kpvv0n">Unlimited Uses</p>'),Hl=u('<div class="slots-tracker svelte-1kpvv0n"></div> <div class="uses-actions-row"><button class="btn btn-primary use-enabled"> </button></div> <div class="uses-info svelte-1kpvv0n"><span class="reset-info svelte-1kpvv0n"> </span></div>',1),Ul=u('<div class="uses-tracker svelte-1kpvv0n"><!></div>'),Nl=u('<div class="pool-tracker svelte-1kpvv0n"><input type="number" min="0" class="pool-input svelte-1kpvv0n"/> <span> </span> <button class="btn-small svelte-1kpvv0n"> </button></div>'),Gl=u('<p class="no-uses svelte-1kpvv0n">No Channel Divinity uses remaining</p>'),Ol=u('<div class="channel-divinity-option svelte-1kpvv0n"><button class="btn btn-primary use-enabled svelte-1kpvv0n">Use Channel Divinity</button> <div class="uses-info svelte-1kpvv0n"><span class="reset-info svelte-1kpvv0n"> </span></div> <!></div>'),ql=u('<div class="feature-box svelte-1kpvv0n"><h3 class="svelte-1kpvv0n"><!> </h3> <p class="feature-description svelte-1kpvv0n"> </p> <!></div>'),Wl=u('<div class="features-grid svelte-1kpvv0n"><!> <!></div>'),zl=u("<section><!> <!></section>");function Kl(a,o){Bt(o,!1);const t=()=>Ve(Q,"$character",$),d=()=>Ve(ca,"$abilityModifiers",$),p=()=>Ve(Yt,"$searchFilter",$),m=()=>Ve(Dt,"$collapsedStates",$),[$,B]=Nt(),_=M(),R=M(),Y=M(),q=M(),U=M(),he=M(),be=M();let Z=M(0),ue=M(0);function V(h,E){Q.update(re=>(re.classFeatures.features[h]=E,re))}function Ne(){Q.update(h=>(h.classFeatures.spellSlotsByLevel||(h.classFeatures.spellSlotsByLevel={}),e(q).forEach(({level:E,slots:re})=>{h.classFeatures.spellSlotsByLevel[E]||(h.classFeatures.spellSlotsByLevel[E]=Array(re).fill(!1))}),h))}function z(h){if(typeof h.maxUses=="function"){if((h.name==="Divine Sense"||h.name==="War Priest")&&e(_)?.spellcastingAbility){const E=d()[e(_).spellcastingAbility];return h.maxUses(t().level,E)}return h.maxUses(t().level)}return h.maxUses||0}function le(h,E){Q.update(re=>((!re.classFeatures.features[h]||!Array.isArray(re.classFeatures.features[h])||re.classFeatures.features[h].length!==E)&&(re.classFeatures.features[h]=Array(E).fill(!1)),re))}Qa(()=>{e(he)&&t()&&t().classFeatures&&t().classFeatures.features&&e(he).forEach(h=>{if(h.type==="uses"){const E=h.name.replace(/\s+/g,""),re=z(h),g=t().classFeatures.features[E];(!Array.isArray(g)||g.length!==re)&&le(E,re)}})});function X(h){return typeof h.maxPool=="function"?h.maxPool(t().level):h.maxPool||0}function ae(h){return typeof h.description=="function"?h.description(t().level):h.description}function ie(){const h="ChannelDivinity";Q.update(E=>{const re=E.classFeatures.features[h];return typeof re=="number"&&re>0&&(E.classFeatures.features[h]=re-1),E})}function Be(){Dt.update(h=>({...h,classFeatures:!h.classFeatures}))}Je(()=>(t(),Ht),()=>{v(_,t().class?Ht(t().class):null)}),Je(()=>(t(),la),()=>{v(R,t().class?la(t().class,t().level,t().subclass):[])}),Je(()=>(t(),Ma),()=>{v(Y,t().class?Ma(t().class,t().level):0)}),Je(()=>(e(_),t()),()=>{v(q,(()=>{if(!e(_)?.spellcaster)return[];const h=t().level,E=[];return h>=1&&E.push({level:1,slots:Math.min(4,2+Math.floor(h/3))}),h>=3&&E.push({level:2,slots:Math.min(3,2+Math.floor((h-3)/4))}),h>=5&&E.push({level:3,slots:Math.min(3,2+Math.floor((h-5)/5))}),h>=7&&E.push({level:4,slots:Math.min(3,1+Math.floor((h-7)/6))}),h>=9&&E.push({level:5,slots:Math.min(2,1+Math.floor((h-9)/8))}),h>=11&&E.push({level:6,slots:1}),h>=13&&E.push({level:7,slots:1}),h>=15&&E.push({level:8,slots:1}),h>=17&&E.push({level:9,slots:1}),E})())}),Je(()=>(e(_),d(),t(),Ia),()=>{if(e(_)?.spellcaster&&e(_).spellcastingAbility){const h=d()[e(_).spellcastingAbility];v(Z,ys(t().class,h,t().proficiencyBonus)||0),v(ue,Ia(t().class,t().level,h))}}),Je(()=>(t(),e(_),e(q)),()=>{t().class&&e(_)?.spellcaster&&e(q).length>0&&Ne()}),Je(()=>t(),()=>{v(U,(()=>{const E=t().classFeatures.features["ChannelDivinity"];return typeof E=="number"?E:0})())}),Je(()=>(e(R),p()),()=>{v(he,e(R).filter(h=>{if(!p())return!0;const E=p().toLowerCase();return h.name.toLowerCase().includes(E)||ae(h).toLowerCase().includes(E)}))}),Je(()=>(p(),t(),e(he)),()=>{v(be,!p()||t().class||"class features".includes(p().toLowerCase())||"spellcasting".includes(p().toLowerCase())||e(he).length>0)}),zt(),Ft();var Pe=zl();let _e;var ye=r(Pe);{let h=at(()=>(m(),i(()=>m().classFeatures?"Expand":"Collapse")));ta(ye,{title:"Class Features",get collapsed(){return m(),i(()=>m().classFeatures)},get ariaLabel(){return e(h)},onToggle:Be})}var C=s(ye,2);{var ve=h=>{var E=nt(),re=Oe(E);{var g=O=>{var I=Ml();c(O,I)},x=O=>{var I=nt(),G=Oe(I);{var De=Se=>{var je=Il();c(Se,je)},ke=Se=>{var je=Wl(),Te=r(je);{var qe=st=>{var P=Pl(),n=r(P),ee=r(n);l(n);var W=s(n,2),se=r(W),Me=s(r(se),2),He=r(Me,!0);l(Me),l(se);var Ie=s(se,2),T=s(r(Ie),2),b=r(T,!0);l(T),l(Ie),l(W);var ne=s(W,2);{var we=$e=>{var de=El();dt(de,5,()=>e(q),ut,(xe,Ue)=>{let Ae=()=>e(Ue).level,Re=()=>e(Ue).slots;const K=at(()=>(t(),Ae(),Re(),i(()=>t().classFeatures.spellSlotsByLevel?.[Ae()]||Array(Re()).fill(!1))));var pe=Rl(),Ge=r(pe),y=r(Ge);l(Ge);var D=s(Ge,2);dt(D,5,()=>e(K),ut,(oe,w,H)=>{{let fe=at(()=>(N(e(K)),i(()=>e(K)[H]||!1)));Pa(oe,{get checked(){return e(fe)},$$events:{change:Ce=>{Q.update(J=>(J.classFeatures.spellSlotsByLevel||(J.classFeatures.spellSlotsByLevel={}),J.classFeatures.spellSlotsByLevel[Ae()]||(J.classFeatures.spellSlotsByLevel[Ae()]=Array(Re()).fill(!1)),J.classFeatures.spellSlotsByLevel[Ae()][H]=Ce.detail.checked,J))}}})}}),l(D),l(pe),F(()=>L(y,`${Ae()===1?"1st":Ae()===2?"2nd":Ae()===3?"3rd":`${Ae()}th`} Level Spell Slots`)),c(xe,pe)}),l(de),c($e,de)};S(ne,$e=>{e(q),i(()=>e(q).length>0)&&$e(we)})}var We=s(ne,2),Ke=s(r(We),2);ia(Ke),l(We),l(P),F($e=>{L(ee,`Spellcasting (${$e??""})`),L(He,e(Z)),L(b,e(ue))},[()=>(e(_),i(()=>e(_).spellcastingAbility?.toUpperCase()))]),Fe(Ke,()=>t().classFeatures.preparedSpells,$e=>ot(Q,i(t).classFeatures.preparedSpells=$e,i(t))),c(st,P)};S(Te,st=>{e(_),i(()=>e(_)?.spellcaster)&&st(qe)})}var Ze=s(Te,2);dt(Ze,1,()=>e(he),ut,(st,P)=>{const n=at(()=>(e(P),i(()=>e(P).name.replace(/\s+/g,"")))),ee=at(()=>(t(),N(e(n)),i(()=>t().classFeatures.features[e(n)]))),W=at(()=>typeof e(ee)=="number");var se=ql(),Me=r(se),He=r(Me);{var Ie=$e=>{var de=wt("Channel Divinity:");c($e,de)};S(He,$e=>{e(P),i(()=>e(P).type==="channelDivinity")&&$e(Ie)})}var T=s(He);l(Me);var b=s(Me,2),ne=r(b,!0);l(b);var we=s(b,2);{var We=$e=>{const de=at(()=>(e(P),i(()=>z(e(P))))),xe=at(()=>(N(e(ee)),N(e(de)),i(()=>Array.isArray(e(ee))?e(ee):Array(e(de)).fill(!1))));var Ue=Ul(),Ae=r(Ue);{var Re=pe=>{var Ge=Tl();c(pe,Ge)},K=pe=>{var Ge=Hl(),y=Oe(Ge);dt(y,5,()=>e(xe),ut,(J,Ee,j)=>{Pa(J,{get checked(){return e(Ee)},index:j,$$events:{change:Ye=>{Q.update(it=>(it.classFeatures.features[e(n)]||(it.classFeatures.features[e(n)]=Array(e(de)).fill(!1)),it.classFeatures.features[e(n)][j]=Ye.detail.checked,it))}}})}),l(y);var D=s(y,2),oe=r(D),w=r(oe);l(oe),l(D);var H=s(D,2),fe=r(H),Ce=r(fe);l(fe),l(H),F(J=>{oe.disabled=J,L(w,`Use ${e(P),i(()=>e(P).name)??""}`),L(Ce,`Resets on ${e(P),i(()=>e(P).resetOn==="short"?"Short Rest":"Long Rest")??""}`)},[()=>(N(e(xe)),i(()=>e(xe).filter(J=>!J).length<=0))]),A("click",oe,()=>{Q.update(J=>{J.classFeatures.features[e(n)]||(J.classFeatures.features[e(n)]=Array(e(de)).fill(!1));const Ee=J.classFeatures.features[e(n)],j=Ee.findIndex(Ye=>!Ye);return j!==-1&&(Ee[j]=!0),J})}),c(pe,Ge)};S(Ae,pe=>{e(de)===1/0?pe(Re):pe(K,!1)})}l(Ue),c($e,Ue)},Ke=$e=>{var de=nt(),xe=Oe(de);{var Ue=Re=>{const K=at(()=>(e(P),i(()=>X(e(P)))));var pe=Nl(),Ge=r(pe);Le(Ge);var y=s(Ge,2),D=r(y);l(y);var oe=s(y,2),w=r(oe,!0);l(oe),l(pe),F(()=>{ma(Ge,e(W)&&e(ee)!==void 0?e(ee):e(K)),ze(Ge,"max",e(K)),L(D,`/ ${e(K)??""}`),L(w,(e(P),i(()=>e(P).resetOn==="short"?"Short Rest":"Long Rest")))}),A("input",Ge,H=>{Q.update(fe=>(fe.classFeatures.features[e(n)]=parseInt(H.currentTarget.value)||0,fe))}),A("click",oe,()=>V(e(n),e(K))),c(Re,pe)},Ae=Re=>{var K=nt(),pe=Oe(K);{var Ge=y=>{var D=Ol(),oe=r(D),w=s(oe,2),H=r(w),fe=r(H);l(H),l(w);var Ce=s(w,2);{var J=Ee=>{var j=Gl();c(Ee,j)};S(Ce,Ee=>{e(U)<=0&&Ee(J)})}l(D),F(()=>{oe.disabled=e(U)<=0,L(fe,`Resets on ${e(P),i(()=>e(P).resetOn==="short"?"Short Rest":"Long Rest")??""}`)}),A("click",oe,ie),c(y,D)};S(pe,y=>{e(P),i(()=>e(P).type==="channelDivinity")&&y(Ge)},!0)}c(Re,K)};S(xe,Re=>{e(P),i(()=>e(P).type==="pool")?Re(Ue):Re(Ae,!1)},!0)}c($e,de)};S(we,$e=>{e(P),i(()=>e(P).type==="uses")?$e(We):$e(Ke,!1)})}l(se),F($e=>{L(T,` ${e(P),i(()=>e(P).name)??""}`),L(ne,$e)},[()=>(e(P),i(()=>ae(e(P))))]),c(st,se)}),l(je),c(Se,je)};S(G,Se=>{e(R),i(()=>e(R).length===0)?Se(De):Se(ke,!1)},!0)}c(O,I)};S(re,O=>{t(),i(()=>!t().class)?O(g):O(x,!1)})}c(h,E)};S(C,h=>{m(),i(()=>!m().classFeatures)&&h(ve)})}l(Pe),F(()=>_e=pt(Pe,1,"class-features svelte-1kpvv0n",null,_e,{hidden:!e(be)})),c(a,Pe),Mt(),B()}var Jl=u('<textarea placeholder="Enter features, traits, and special abilities..." class="svelte-wttn0l"></textarea> <h3 class="svelte-wttn0l">Equipment</h3> <textarea placeholder="List your equipment and inventory..." class="svelte-wttn0l"></textarea> <h3 class="svelte-wttn0l">Notes</h3> <textarea placeholder="Additional notes..." class="svelte-wttn0l"></textarea>',1),Vl=u("<section><!> <!></section>");function Ql(a,o){Bt(o,!1);const t=()=>Ve(Yt,"$searchFilter",m),d=()=>Ve(Q,"$character",m),p=()=>Ve(Dt,"$collapsedStates",m),[m,$]=Nt(),B=M();function _(){Dt.update(be=>({...be,notes:!be.notes}))}Je(()=>(t(),d()),()=>{v(B,!t()||"features".includes(t().toLowerCase())||"traits".includes(t().toLowerCase())||"equipment".includes(t().toLowerCase())||"notes".includes(t().toLowerCase())||d().features.toLowerCase().includes(t().toLowerCase())||d().equipment.toLowerCase().includes(t().toLowerCase())||d().notes.toLowerCase().includes(t().toLowerCase()))}),zt(),Ft();var R=Vl();let Y;var q=r(R);{let be=at(()=>(p(),i(()=>p().notes?"Expand":"Collapse")));ta(q,{title:"Features & Traits",get collapsed(){return p(),i(()=>p().notes)},get ariaLabel(){return e(be)},onToggle:_})}var U=s(q,2);{var he=be=>{var Z=Jl(),ue=Oe(Z);ia(ue);var V=s(ue,4);ia(V);var Ne=s(V,4);ia(Ne),Fe(ue,()=>d().features,z=>ot(Q,i(d).features=z,i(d))),Fe(V,()=>d().equipment,z=>ot(Q,i(d).equipment=z,i(d))),Fe(Ne,()=>d().notes,z=>ot(Q,i(d).notes=z,i(d))),c(be,Z)};S(U,be=>{p(),i(()=>!p().notes)&&be(he)})}l(R),F(()=>Y=pt(R,1,"notes svelte-wttn0l",null,Y,{hidden:!e(B)})),c(a,R),Mt(),$()}var Yl=u('<div class="color-picker-section svelte-1r90jgp"><h3 class="svelte-1r90jgp">Dice Colors</h3> <div class="color-inputs svelte-1r90jgp"><div class="color-input-group svelte-1r90jgp"><label for="dice-color" class="svelte-1r90jgp">Dice Color</label> <input type="color" id="dice-color" class="svelte-1r90jgp"/></div> <div class="color-input-group svelte-1r90jgp"><label for="label-color" class="svelte-1r90jgp">Label Color</label> <input type="color" id="label-color" class="svelte-1r90jgp"/></div> <div class="color-input-group svelte-1r90jgp"><label for="desk-color" class="svelte-1r90jgp">Background Color</label> <input type="color" id="desk-color" class="svelte-1r90jgp"/></div></div></div>'),Xl=u('<div class="loading svelte-1r90jgp"><p class="svelte-1r90jgp">Loading 3D dice...</p></div>'),Zl=u('<div class="custom-dice-selector svelte-1r90jgp"><h3 class="svelte-1r90jgp">Choose Dice to Roll</h3> <div class="dice-inputs svelte-1r90jgp"><div class="dice-input-group svelte-1r90jgp"><label for="d4" class="svelte-1r90jgp">d4</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d4" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d6" class="svelte-1r90jgp">d6</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d6" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d8" class="svelte-1r90jgp">d8</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d8" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d10" class="svelte-1r90jgp">d10</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d10" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d12" class="svelte-1r90jgp">d12</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d12" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d20" class="svelte-1r90jgp">d20</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d20" min="0" max="10"/></div></div> <div class="dice-controls svelte-1r90jgp"><button class="btn btn-primary use-enabled svelte-1r90jgp"> </button> <button class="btn btn-secondary use-enabled svelte-1r90jgp">Reset</button></div></div>'),er=u('<span class="crit-badge svelte-1r90jgp">CRITICAL!</span>'),tr=u('<p class="svelte-1r90jgp"> </p>'),ar=u('<div class="bonus-item svelte-1r90jgp"><span class="bonus-value svelte-1r90jgp"> </span> <span class="bonus-source svelte-1r90jgp"> </span></div>'),sr=u('<div class="bonus-breakdown svelte-1r90jgp"></div>'),lr=u('<p class="modifier-text svelte-1r90jgp"> </p>'),rr=u('<button class="btn btn-follow-up svelte-1r90jgp"> </button>'),ir=u('<button class="btn btn-guided-strike svelte-1r90jgp">âš¡ Use Guided Strike (+10)</button>'),nr=u('<div class="follow-up-actions svelte-1r90jgp"><!> <!></div>'),or=u('<div class="result-header svelte-1r90jgp"><h3 class="svelte-1r90jgp"> </h3> <!></div> <div class="result-total svelte-1r90jgp"> </div> <div class="result-details svelte-1r90jgp"><!> <!></div> <!>',1),cr=u('<div role="button" tabindex="-1"><div class="modal-content svelte-1r90jgp" role="dialog" tabindex="0"><div class="modal-header svelte-1r90jgp"><h2 class="svelte-1r90jgp">Dice Roller</h2> <div class="header-buttons svelte-1r90jgp"><button class="color-btn svelte-1r90jgp" title="Customize dice colors">ðŸŽ¨</button> <button class="close-btn svelte-1r90jgp">Ã—</button></div></div> <!> <!> <div class="dice-main-area svelte-1r90jgp"><div class="dice-container svelte-1r90jgp"></div> <!></div> <div><!></div></div></div>');function vr(a,o){Bt(o,!1);const t=()=>Ve(Q,"$character",d),[d,p]=Nt(),m=M(),$=M(),B=M(),_=ea();let R=mt(o,"notation",12,""),Y=mt(o,"visible",8,!1),q=mt(o,"damageNotation",12,""),U=mt(o,"attackName",12,""),he=mt(o,"applyHalfDamage",8,!1),be=mt(o,"bonusBreakdown",28,()=>[]),Z=null,ue=M(void 0),V=M(!1),Ne=M(""),z=M(null);function le(){return e(z)?.resultTotal??null}let X=M(0),ae=M(0),ie=M(0),Be=M(0),Pe=M(0),_e=M(0),ye=M(0),C=M([]),ve=M(!1),h=M("other"),E=M(!1),re=M("#051e0a"),g=M("#ffffff"),x=M("#3a2004"),O=M(!1);function I(y){return y.length===9&&y.startsWith("#")?y.substring(0,7):y}function G(y,D="ff"){return y.length===7&&y.startsWith("#")?y+D:y}function De(){if(window.DICE&&e(ue))try{Z&&e(ue)&&ga(ue,e(ue).innerHTML="");const y=e(ue).clientWidth||500,D=e(ue).clientHeight||300;Z=new window.DICE.dice_box(e(ue),{w:y,h:D}),v(V,!0)}catch(y){console.error("Error initializing dice box:",y)}}oa(()=>{const y=w=>new Promise((H,fe)=>{if(document.querySelector(`script[src="${w}"]`)){H(null);return}const J=document.createElement("script");J.src=w,J.onload=()=>{H(null)},J.onerror=()=>{console.error(`Failed to load: ${w}`),fe(new Error(`Failed to load ${w}`))},document.head.appendChild(J)});setTimeout(()=>{y(`${ra}/libs/three.min.js`).then(()=>y(`${ra}/libs/cannon.min.js`)).then(()=>y(`${ra}/libs/teal.js`)).then(()=>y(`${ra}/dice.js`)).then(()=>{if(window.DICE){const w=window.DICE.getColors();v(re,I(w.dice_color)),v(g,I(w.label_color)),v(x,I(w.desk_color))}De()}).catch(w=>{console.error("Failed to load dice libraries:",w)})},100);const D=()=>{e(V)&&De()},oe=w=>{Y()&&w.key==="Escape"&&n()};return window.addEventListener("resize",D),window.addEventListener("keydown",oe),()=>{window.removeEventListener("resize",D),window.removeEventListener("keydown",oe)}});function ke(y,D="other"){if(!Z||!e(V))return;v(z,null),v(C,[]),v(ve,!1),D==="damage"&&be([]),v(h,D),v(E,!1),Z.diceToRoll=y;const oe=H=>null,w=H=>{let fe=H.resultTotal,Ce=H.resultString;if(he()&&(fe=Math.floor(fe/2),Ce=Ce+" (halved)"),v(z,{...H,resultTotal:fe,resultString:Ce}),D==="attack"||D==="check"||D==="save"){const J=H.result?.filter(Ee=>Ee===20)||[];if(J.length>0){const Ee=J[0];v(ve,Ee===20)}}if(v(C,[]),console.log("Setting up follow-up actions. Type:",D,"damageNotation:",q(),"isCritical:",e(ve)),D==="attack"&&q())if(e(ve)){const J=Te(q());e(C).push({label:`Roll Critical Damage (${J})`,notation:J})}else e(C).push({label:`Roll Damage (${q()})`,notation:q()})};Z.start_throw(oe,w)}function Se(){const y=[];e(X)>0&&y.push(`${e(X)}d4`),e(ae)>0&&y.push(`${e(ae)}d6`),e(ie)>0&&y.push(`${e(ie)}d8`),e(Be)>0&&y.push(`${e(Be)}d10`),e(Pe)>0&&y.push(`${e(Pe)}d12`),e(_e)>0&&y.push(`${e(_e)}d20`);let D=y.join("+")||"1d20";return e(ye)!==0&&(D+=e(ye)>=0?`+${e(ye)}`:`${e(ye)}`),D}function je(){const y=Se();ke(y)}function Te(y){return y.replace(/(\d+)d(\d+)/g,(D,oe,w)=>`${parseInt(oe)*2}d${w}`)}function qe(){v(X,0),v(ae,0),v(ie,0),v(Be,0),v(Pe,0),v(_e,0),v(ye,0),v(z,null),v(C,[]),v(ve,!1),v(h,"other"),v(E,!1)}function Ze(){window.DICE&&(window.DICE.setColors({dice_color:G(e(re),"ff"),label_color:G(e(g),"ff"),desk_color:e(x)}),Z&&(Z.updateDeskColor(e(x)),Z.updateDiceColors()))}function st(){v(O,!e(O))}function P(){!e(z)||e($)<=0||e(E)||(v(z,{...e(z),resultTotal:e(z).resultTotal+10,resultString:e(z).resultString+" + 10 (Guided Strike)"}),Q.update(y=>{const D="ChannelDivinity",oe=y.classFeatures.features[D];return typeof oe=="number"&&oe>0&&(y.classFeatures.features[D]=oe-1),y}),v(E,!0))}function n(){_("close"),R(""),q(""),U(""),v(Ne,""),v(z,null),v(E,!1),qe()}Je(()=>(t(),la),()=>{v(m,t().class?la(t().class,t().level,t().subclass).some(D=>D.name==="Guided Strike"):!1)}),Je(()=>t(),()=>{v($,(()=>{const D=t().classFeatures.features["ChannelDivinity"];return typeof D=="number"?D:0})())}),Je(()=>(e(X),e(ae),e(ie),e(Be),e(Pe),e(_e),e(ye)),()=>{v(B,(()=>{const y=[];e(X)>0&&y.push(`${e(X)}d4`),e(ae)>0&&y.push(`${e(ae)}d6`),e(ie)>0&&y.push(`${e(ie)}d8`),e(Be)>0&&y.push(`${e(Be)}d10`),e(Pe)>0&&y.push(`${e(Pe)}d12`),e(_e)>0&&y.push(`${e(_e)}d20`);let D=y.join("+")||"1d20";return e(ye)!==0&&(D+=e(ye)>=0?`+${e(ye)}`:`${e(ye)}`),D})())}),Je(()=>(N(R()),e(V),N(Y()),e(Ne),N(q()),N(U())),()=>{if(R()&&e(V)&&Y()&&R()!==e(Ne)){v(Ne,R()),v(z,null),v(C,[]),v(ve,!1),v(E,!1);const y=R().includes("1d20")?"attack":"other";console.log("Auto-roll triggered. notation:",R(),"damageNotation:",q(),"attackName:",U()),setTimeout(()=>ke(R(),y),200)}}),zt();var ee={getLastRollTotal:le};Ft();var W=cr();let se;var Me=r(W),He=r(Me),Ie=s(r(He),2),T=r(Ie),b=s(T,2);l(Ie),l(He);var ne=s(He,2);{var we=y=>{var D=Yl(),oe=s(r(D),2),w=r(oe),H=s(r(w),2);Le(H),l(w);var fe=s(w,2),Ce=s(r(fe),2);Le(Ce),l(fe);var J=s(fe,2),Ee=s(r(J),2);Le(Ee),l(J),l(oe),l(D),Fe(H,()=>e(re),j=>v(re,j)),A("change",H,Ze),Fe(Ce,()=>e(g),j=>v(g,j)),A("change",Ce,Ze),Fe(Ee,()=>e(x),j=>v(x,j)),A("change",Ee,Ze),c(y,D)};S(ne,y=>{e(O)&&y(we)})}var We=s(ne,2);{var Ke=y=>{var D=Xl();c(y,D)};S(We,y=>{e(V)||y(Ke)})}var $e=s(We,2),de=r($e);$a(de,y=>v(ue,y),()=>e(ue));var xe=s(de,2);{var Ue=y=>{var D=Zl(),oe=s(r(D),2),w=r(oe),H=s(r(w),2);Le(H),l(w);var fe=s(w,2),Ce=s(r(fe),2);Le(Ce),l(fe);var J=s(fe,2),Ee=s(r(J),2);Le(Ee),l(J);var j=s(J,2),Ye=s(r(j),2);Le(Ye),l(j);var it=s(j,2),ht=s(r(it),2);Le(ht),l(it);var St=s(it,2),lt=s(r(St),2);Le(lt),l(St),l(oe);var k=s(oe,2),te=r(k),f=r(te);l(te);var ce=s(te,2);l(k),l(D),F(()=>{te.disabled=!e(V),L(f,`Roll ${e(B)??""}`)}),Fe(H,()=>e(X),ge=>v(X,ge)),Fe(Ce,()=>e(ae),ge=>v(ae,ge)),Fe(Ee,()=>e(ie),ge=>v(ie,ge)),Fe(Ye,()=>e(Be),ge=>v(Be,ge)),Fe(ht,()=>e(Pe),ge=>v(Pe,ge)),Fe(lt,()=>e(_e),ge=>v(_e,ge)),A("click",te,je),A("click",ce,qe),c(y,D)};S(xe,y=>{R()||y(Ue)})}l($e);var Ae=s($e,2);let Re;var K=r(Ae);{var pe=y=>{var D=or(),oe=Oe(D),w=r(oe),H=r(w,!0);l(w);var fe=s(w,2);{var Ce=te=>{var f=er();c(te,f)};S(fe,te=>{e(ve)&&te(Ce)})}l(oe);var J=s(oe,2),Ee=r(J,!0);l(J);var j=s(J,2),Ye=r(j);{var it=te=>{var f=tr(),ce=r(f,!0);l(f),F(()=>L(ce,(e(z),i(()=>e(z).resultString)))),c(te,f)};S(Ye,te=>{e(z),i(()=>e(z).resultString)&&te(it)})}var ht=s(Ye,2);{var St=te=>{var f=nt(),ce=Oe(f);{var ge=me=>{var Xe=sr();dt(Xe,5,be,ut,(Qe,ct)=>{var ft=ar(),Ut=r(ft),jt=r(Ut);l(Ut);var It=s(Ut,2),et=r(It);l(It),l(ft),F(()=>{L(jt,`${e(ct),i(()=>e(ct).value>=0?"+":"")??""}${e(ct),i(()=>e(ct).value)??""}`),L(et,`(${e(ct),i(()=>e(ct).source)??""})`)}),c(Qe,ft)}),l(Xe),c(me,Xe)},tt=me=>{var Xe=nt(),Qe=Oe(Xe);{var ct=ft=>{var Ut=lr(),jt=r(Ut);l(Ut),F(()=>L(jt,`Modifier: ${e(z),i(()=>e(z).constant>=0?"+":"")??""}${e(z),i(()=>e(z).constant)??""}`)),c(ft,Ut)};S(Qe,ft=>{e(z),i(()=>e(z).constant)&&ft(ct)},!0)}c(me,Xe)};S(ce,me=>{N(be()),i(()=>be().length>0)?me(ge):me(tt,!1)})}c(te,f)};S(ht,te=>{e(z),N(be()),i(()=>e(z).constant||be().length>0)&&te(St)})}l(j);var lt=s(j,2);{var k=te=>{var f=nr(),ce=r(f);dt(ce,1,()=>e(C),ut,(me,Xe)=>{var Qe=rr(),ct=r(Qe,!0);l(Qe),F(()=>L(ct,(e(Xe),i(()=>e(Xe).label)))),A("click",Qe,()=>ke(e(Xe).notation,"damage")),c(me,Qe)});var ge=s(ce,2);{var tt=me=>{var Xe=ir();F(()=>{Xe.disabled=e($)<=0,ze(Xe,"title",e($)<=0?"No Channel Divinity uses remaining":"Use Channel Divinity to add +10 to this attack roll")}),A("click",Xe,P),c(me,Xe)};S(ge,me=>{e(m)&&e(h)==="attack"&&!e(E)&&me(tt)})}l(f),c(te,f)};S(lt,te=>{e(C),e(m),e(h),e(E),i(()=>e(C).length>0||e(m)&&e(h)==="attack"&&!e(E))&&te(k)})}F(()=>{L(H,U()?`${U()} - Result`:"Result"),L(Ee,(e(z),i(()=>e(z).resultTotal)))}),c(y,D)};S(K,y=>{e(z)&&y(pe)})}l(Ae),l(Me),l(W),F(()=>{se=pt(W,1,"modal-overlay svelte-1r90jgp",null,se,{hidden:!Y()}),Re=pt(Ae,1,"roll-result svelte-1r90jgp",null,Re,{"has-result":e(z)})}),A("click",T,st),A("click",b,n),A("click",Me,Aa(function(y){sa.call(this,o,y)})),A("keydown",Me,function(y){sa.call(this,o,y)}),A("click",W,n),A("keydown",W,y=>y.key==="Escape"&&n()),c(a,W),hs(o,"getLastRollTotal",le);var Ge=Mt(ee);return p(),Ge}const _a="https://api.github.com/gists";async function dr(a,o,t){if(!o)throw new Error("GitHub token is required");const d=JSON.stringify(a,null,2),p=`${a.name||"character"}_dnd.json`,m={description:t||`D&D Character: ${a.name}`,public:!1,files:{[p]:{content:d}}},$=await fetch(_a,{method:"POST",headers:{Authorization:`token ${o}`,"Content-Type":"application/json"},body:JSON.stringify(m)});if(!$.ok)throw new Error(`Failed to create gist: ${$.statusText}`);return(await $.json()).id}async function ur(a,o,t){if(!o||!t)throw new Error("GitHub token and Gist ID are required");const d=JSON.stringify(a,null,2),m={files:{[`${a.name||"character"}_dnd.json`]:{content:d}}},$=await fetch(`${_a}/${t}`,{method:"PATCH",headers:{Authorization:`token ${o}`,"Content-Type":"application/json"},body:JSON.stringify(m)});if(!$.ok)throw new Error(`Failed to update gist: ${$.statusText}`)}async function pr(a,o){if(!a)throw new Error("Gist ID is required");const t={"Content-Type":"application/json"};o&&(t.Authorization=`token ${o}`);const d=await fetch(`${_a}/${a}`,{method:"GET",headers:t});if(!d.ok)throw new Error(`Failed to load gist: ${d.statusText}`);const p=await d.json(),m=Object.values(p.files);if(m.length===0)throw new Error("No files found in gist");const B=m[0].content;try{const _=JSON.parse(B);return _.attacks&&Array.isArray(_.attacks)&&(_.attacks=_.attacks.map(R=>({...R,id:R.id||crypto.randomUUID()}))),_.classFeatures?(_.classFeatures.features||(_.classFeatures.features={}),_.classFeatures.spellSlots||(_.classFeatures.spellSlots=[]),_.classFeatures.preparedSpells===void 0&&(_.classFeatures.preparedSpells="")):_.classFeatures={features:{},spellSlots:[],preparedSpells:""},_}catch{throw new Error("Invalid character data in gist")}}function Ta(a){typeof window<"u"&&localStorage.setItem("dnd_gist_config",JSON.stringify(a))}function fr(){if(typeof window<"u"){const a=localStorage.getItem("dnd_gist_config");if(a)return JSON.parse(a)}return{}}async function gr(a,o=30){if(!a)throw new Error("GitHub token is required to list gists");const t=await fetch(`${_a}?per_page=${o}`,{method:"GET",headers:{Authorization:`token ${a}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Failed to list gists: ${t.statusText}`);return await t.json()}var br=u('<div class="error-message svelte-1jb5ckg"> </div>'),mr=u('<div class="toggle-container svelte-1jb5ckg"><button type="button" class="toggle-btn svelte-1jb5ckg"> </button></div>'),hr=u('<div class="form-group svelte-1jb5ckg"><label for="gistId" class="svelte-1jb5ckg">Gist ID (leave empty to create new)</label> <input type="text" id="gistId" placeholder="Optional: existing Gist ID to update" class="svelte-1jb5ckg"/></div>'),_r=u('<div class="loading-message svelte-1jb5ckg">Loading your gists...</div>'),yr=u('<button type="button"><div class="gist-item-header svelte-1jb5ckg"><span class="gist-description svelte-1jb5ckg"> </span> <span class="gist-visibility svelte-1jb5ckg"> </span></div> <div class="gist-item-meta svelte-1jb5ckg"><span class="gist-id svelte-1jb5ckg"> </span> <span class="gist-date svelte-1jb5ckg"> </span></div></button>'),kr=u('<div class="form-group svelte-1jb5ckg"><div class="gist-list-label svelte-1jb5ckg">Select a Gist to Update (or leave unselected to create new)</div> <div class="gist-list svelte-1jb5ckg"></div></div>'),Sr=u('<div class="info-message svelte-1jb5ckg">No gists found. A new one will be created.</div>'),$r=u('<!> <div class="form-group svelte-1jb5ckg"><label for="description" class="svelte-1jb5ckg"> </label> <input type="text" id="description" placeholder="D&amp;D Character Sheet" class="svelte-1jb5ckg"/></div>',1),xr=u('<div class="form-group svelte-1jb5ckg"><label for="gistId" class="svelte-1jb5ckg">Gist ID *</label> <input type="text" id="gistId" placeholder="Enter Gist ID (for public or your private gists)" required class="svelte-1jb5ckg"/></div>'),Cr=u('<div class="loading-message svelte-1jb5ckg">Loading your gists...</div>'),Lr=u('<button type="button"><div class="gist-item-header svelte-1jb5ckg"><span class="gist-description svelte-1jb5ckg"> </span> <span class="gist-visibility svelte-1jb5ckg"> </span></div> <div class="gist-item-meta svelte-1jb5ckg"><span class="gist-id svelte-1jb5ckg"> </span> <span class="gist-date svelte-1jb5ckg"> </span></div></button>'),wr=u('<div class="form-group svelte-1jb5ckg"><div class="gist-list-label svelte-1jb5ckg">Select a Gist to Load</div> <div class="gist-list svelte-1jb5ckg"></div></div>'),Dr=u('<div class="info-message svelte-1jb5ckg">No gists found. Enter a Gist ID manually or create a new one in Save mode.</div>'),jr=u('<div class="modal-overlay svelte-1jb5ckg" role="button" tabindex="-1"><div class="modal-content svelte-1jb5ckg" role="dialog" tabindex="0"><div class="modal-header svelte-1jb5ckg"><h2 class="svelte-1jb5ckg"> </h2> <button class="close-btn svelte-1jb5ckg">Ã—</button></div> <div class="modal-body svelte-1jb5ckg"><!> <div class="form-group svelte-1jb5ckg"><label for="token" class="svelte-1jb5ckg"> <a href="https://github.com/settings/tokens" target="_blank" rel="noopener" class="svelte-1jb5ckg">Get token</a></label> <input type="password" id="token" placeholder="ghp_xxxxxxxxxxxxx" class="svelte-1jb5ckg"/></div> <!> <!> <div class="modal-actions svelte-1jb5ckg"><button class="btn btn-primary svelte-1jb5ckg"><!></button> <button class="btn btn-secondary svelte-1jb5ckg">Cancel</button></div></div></div></div>');function Ar(a,o){Bt(o,!1);const t=()=>Ve(Q,"$character",d),[d,p]=Nt(),m=ea();let $=mt(o,"mode",8,"save"),B=M(""),_=M(""),R=M(""),Y=M(!1),q=M(""),U=M(!1),he=M(!1),be=M([]),Z=M(null);const ue=fr();ue.token&&v(B,ue.token),ue.gistId&&v(_,ue.gistId),oa(async()=>{e(B)&&!e(U)&&await V()});async function V(){if(e(B)){v(he,!0),v(q,"");try{v(be,await gr(e(B))),e(_)&&v(Z,e(be).find(n=>n.id===e(_))||null)}catch(n){v(q,n.message||"Failed to load gists"),v(be,[])}finally{v(he,!1)}}}function Ne(n){v(Z,n),v(_,n.id)}function z(){v(U,!e(U)),v(q,""),!e(U)&&e(B)&&V()}async function le(){if(!e(B)){v(q,"GitHub token is required");return}const n=e(Z)?.id||e(_);v(Y,!0),v(q,"");try{if(n)await ur(t(),e(B),n),v(_,n),Tt.add("Character updated in Gist successfully!","success");else{const ee=await dr(t(),e(B),e(R));v(_,ee),Tt.add(`Character saved to Gist! ID: ${ee}`,"success")}Ta({token:e(B),gistId:e(_)}),m("close")}catch(ee){v(q,ee.message||"Failed to save to Gist")}finally{v(Y,!1)}}async function X(){const n=e(Z)?.id||e(_);if(!n){v(q,"Please select a gist or enter a Gist ID");return}v(Y,!0),v(q,"");try{const ee=await pr(n,e(B)||void 0);Q.set(ee),v(_,n),Ta({token:e(B),gistId:e(_)}),Tt.add("Character loaded from Gist successfully!","success"),m("close")}catch(ee){v(q,ee.message||"Failed to load from Gist")}finally{v(Y,!1)}}function ae(){m("close")}Ft();var ie=jr(),Be=r(ie),Pe=r(Be),_e=r(Pe),ye=r(_e,!0);l(_e);var C=s(_e,2);l(Pe);var ve=s(Pe,2),h=r(ve);{var E=n=>{var ee=br(),W=r(ee,!0);l(ee),F(()=>L(W,e(q))),c(n,ee)};S(h,n=>{e(q)&&n(E)})}var re=s(h,2),g=r(re),x=r(g);fa(),l(g);var O=s(g,2);Le(O),l(re);var I=s(re,2);{var G=n=>{var ee=mr(),W=r(ee),se=r(W,!0);l(W),l(ee),F(()=>{W.disabled=e(Y),L(se,e(U)?"ðŸ“‹ Show My Gists":"âœï¸ Enter Gist ID Manually")}),A("click",W,z),c(n,ee)};S(I,n=>{($()==="load"||$()==="save"&&e(B))&&n(G)})}var De=s(I,2);{var ke=n=>{var ee=$r(),W=Oe(ee);{var se=ne=>{var we=hr(),We=s(r(we),2);Le(We),l(we),F(()=>We.disabled=e(Y)),Fe(We,()=>e(_),Ke=>v(_,Ke)),c(ne,we)},Me=ne=>{var we=nt(),We=Oe(we);{var Ke=de=>{var xe=_r();c(de,xe)},$e=de=>{var xe=nt(),Ue=Oe(xe);{var Ae=K=>{var pe=kr(),Ge=s(r(pe),2);dt(Ge,5,()=>e(be),ut,(y,D)=>{var oe=yr();let w;var H=r(oe),fe=r(H),Ce=r(fe,!0);l(fe);var J=s(fe,2),Ee=r(J,!0);l(J),l(H);var j=s(H,2),Ye=r(j),it=r(Ye);l(Ye);var ht=s(Ye,2),St=r(ht);l(ht),l(j),l(oe),F(lt=>{w=pt(oe,1,"gist-item svelte-1jb5ckg",null,w,{selected:e(Z)?.id===e(D).id}),oe.disabled=e(Y),L(Ce,(e(D),i(()=>e(D).description||"Untitled"))),L(Ee,(e(D),i(()=>e(D).public?"ðŸŒ Public":"ðŸ”’ Private"))),L(it,`ID: ${e(D),i(()=>e(D).id)??""}`),L(St,`Updated: ${lt??""}`)},[()=>(e(D),i(()=>new Date(e(D).updated_at).toLocaleDateString()))]),A("click",oe,()=>Ne(e(D))),c(y,oe)}),l(Ge),l(pe),c(K,pe)},Re=K=>{var pe=nt(),Ge=Oe(pe);{var y=D=>{var oe=Sr();c(D,oe)};S(Ge,D=>{e(B)&&D(y)},!0)}c(K,pe)};S(Ue,K=>{e(be),i(()=>e(be).length>0)?K(Ae):K(Re,!1)},!0)}c(de,xe)};S(We,de=>{e(he)?de(Ke):de($e,!1)},!0)}c(ne,we)};S(W,ne=>{e(U)||!e(B)?ne(se):ne(Me,!1)})}var He=s(W,2),Ie=r(He),T=r(Ie);l(Ie);var b=s(Ie,2);Le(b),l(He),F(()=>{L(T,`Description ${e(_)?"(optional)":""}`),b.disabled=e(Y)}),Fe(b,()=>e(R),ne=>v(R,ne)),c(n,ee)},Se=n=>{var ee=nt(),W=Oe(ee);{var se=He=>{var Ie=xr(),T=s(r(Ie),2);Le(T),l(Ie),F(()=>T.disabled=e(Y)),Fe(T,()=>e(_),b=>v(_,b)),c(He,Ie)},Me=He=>{var Ie=nt(),T=Oe(Ie);{var b=we=>{var We=Cr();c(we,We)},ne=we=>{var We=nt(),Ke=Oe(We);{var $e=xe=>{var Ue=wr(),Ae=s(r(Ue),2);dt(Ae,5,()=>e(be),ut,(Re,K)=>{var pe=Lr();let Ge;var y=r(pe),D=r(y),oe=r(D,!0);l(D);var w=s(D,2),H=r(w,!0);l(w),l(y);var fe=s(y,2),Ce=r(fe),J=r(Ce);l(Ce);var Ee=s(Ce,2),j=r(Ee);l(Ee),l(fe),l(pe),F(Ye=>{Ge=pt(pe,1,"gist-item svelte-1jb5ckg",null,Ge,{selected:e(Z)?.id===e(K).id}),pe.disabled=e(Y),L(oe,(e(K),i(()=>e(K).description||"Untitled"))),L(H,(e(K),i(()=>e(K).public?"ðŸŒ Public":"ðŸ”’ Private"))),L(J,`ID: ${e(K),i(()=>e(K).id)??""}`),L(j,`Updated: ${Ye??""}`)},[()=>(e(K),i(()=>new Date(e(K).updated_at).toLocaleDateString()))]),A("click",pe,()=>Ne(e(K))),c(Re,pe)}),l(Ae),l(Ue),c(xe,Ue)},de=xe=>{var Ue=nt(),Ae=Oe(Ue);{var Re=K=>{var pe=Dr();c(K,pe)};S(Ae,K=>{e(B)&&K(Re)},!0)}c(xe,Ue)};S(Ke,xe=>{e(be),i(()=>e(be).length>0)?xe($e):xe(de,!1)},!0)}c(we,We)};S(T,we=>{e(he)?we(b):we(ne,!1)},!0)}c(He,Ie)};S(W,He=>{e(U)||!e(B)?He(se):He(Me,!1)},!0)}c(n,ee)};S(De,n=>{$()==="save"?n(ke):n(Se,!1)})}var je=s(De,2),Te=r(je),qe=r(Te);{var Ze=n=>{var ee=wt();F(()=>L(ee,$()==="save"?"Saving...":"Loading...")),c(n,ee)},st=n=>{var ee=wt();F(()=>L(ee,$()==="save"?"Save":"Load")),c(n,ee)};S(qe,n=>{e(Y)?n(Ze):n(st,!1)})}l(Te);var P=s(Te,2);l(je),l(ve),l(Be),l(ie),F(()=>{L(ye,$()==="save"?"Save to GitHub Gist":"Load from GitHub Gist"),L(x,`GitHub Token ${$()==="load"?"(optional for public gists)":"(required)"} `),O.disabled=e(Y),Te.disabled=e(Y),P.disabled=e(Y)}),A("click",C,ae),Fe(O,()=>e(B),n=>v(B,n)),A("blur",O,()=>{e(B)&&!e(U)&&V()}),A("click",Te,function(...n){($()==="save"?le:X)?.apply(this,n)}),A("click",P,ae),A("click",Be,Aa(function(n){sa.call(this,o,n)})),A("keydown",Be,function(n){sa.call(this,o,n)}),A("click",ie,ae),A("keydown",ie,n=>n.key==="Escape"&&ae()),c(a,ie),Mt(),p()}var Fr=u('<div class="loading svelte-1ngjemu">Loading D&D data...</div>'),Br=u("<option> </option>"),Mr=u('<select class="level-filter svelte-1ngjemu"><option>All Levels</option><option>Cantrip</option><!></select>'),Ir=u('<div class="no-results svelte-1ngjemu"> </div>'),Rr=u('<div class="item-meta svelte-1ngjemu"> </div>'),Er=u('<div class="item-meta svelte-1ngjemu"> </div>'),Pr=u('<button><div class="item-name svelte-1ngjemu"> </div> <!></button>'),Tr=u('<p class="higher-levels"><strong>At Higher Levels:</strong> </p>'),Hr=u('<p class="cantrip-upgrade"><strong>Cantrip Upgrade:</strong> </p>'),Ur=u('<h3 class="svelte-1ngjemu"> </h3> <p class="spell-meta svelte-1ngjemu"><!> <!></p> <p class="spell-classes"><strong>Classes:</strong> </p> <div class="spell-stats svelte-1ngjemu"><div><strong>Casting Time:</strong> </div> <div><strong>Range:</strong> </div> <div><strong>Components:</strong> <!></div> <div><strong>Duration:</strong> <!> </div></div> <p class="description svelte-1ngjemu"> </p> <!> <!>',1),Nr=u('<p class="prerequisite svelte-1ngjemu"><strong>Prerequisite:</strong> </p>'),Gr=u('<h3 class="svelte-1ngjemu"> </h3> <!> <p class="description svelte-1ngjemu"> </p> <a target="_blank" rel="noopener" class="source-link svelte-1ngjemu">View Full Details â†’</a>',1),Or=u('<div class="item-details svelte-1ngjemu"><!></div>'),qr=u('<div class="controls svelte-1ngjemu"><div class="tabs svelte-1ngjemu"><button> </button> <button> </button></div> <div class="search-controls svelte-1ngjemu"><input type="text" placeholder="Search by name or description..." class="search-input svelte-1ngjemu"/> <!></div></div> <div class="content-container svelte-1ngjemu"><div class="items-list svelte-1ngjemu"><!></div> <!></div>',1),Wr=u('<div class="modal-backdrop svelte-1ngjemu" role="presentation"><div class="modal svelte-1ngjemu" role="dialog" aria-modal="true" tabindex="-1"><div class="modal-header svelte-1ngjemu"><h2 class="svelte-1ngjemu">Browse D&D Spells & Feats</h2> <button class="close-btn svelte-1ngjemu" aria-label="Close">&times;</button></div> <div class="modal-body svelte-1ngjemu"><!></div> <div class="modal-footer svelte-1ngjemu"><button class="btn-secondary svelte-1ngjemu">Cancel</button> <button class="btn-primary svelte-1ngjemu">Add to Character Sheet</button></div></div></div>');function zr(a,o){Bt(o,!1);const t=M(),d=M(),p=M();let m=mt(o,"onClose",8),$=M("spell"),B=M(!0),_=M(""),R=M(null),Y=M([]),q=M([]),U=M(null);oa(async()=>{v(B,!0);try{v(Y,await Ja()),v(q,await zs())}catch(C){console.error("Failed to load data:",C)}finally{v(B,!1)}});function he(C){v(U,C)}function be(C){const ve=C.match(/(\d+d\d+(?:\s*\+\s*\d+)?)/i);return ve?ve[1]:""}function Z(C){const ve=C.split(/\.( |$)/)[0].trim(),h=Array.from(C.matchAll(/\*\*(.*?)\*\*/g)).map(re=>re[1].replace(/\.$/,""));let E=ve;return h.length&&(E+=" | Effects: "+h.join(", ")),E}function ue(){if(e(U)){if(e($)==="spell"){const C=e(U);Q.update(ve=>{const E=[];C.range&&E.push(`Range: ${C.range}`),C.castingTime&&E.push(`Cast: ${C.castingTime}`),C.duration&&E.push(`Duration: ${C.duration}`),C.actionType==="Save"&&E.push("Saving throw spell"),C.components&&C.components.length>0&&E.push(`Components: ${C.components.join(", ")}`),C.material&&E.push(`Material: ${C.material}`);const re=E.join(" | "),g=Z(C.description),x={id:crypto.randomUUID(),name:`${C.name}${C.concentration?" (C)":""}${C.ritual?" (R)":""}`,bonus:C.actionType==="Attack"?5:0,damage:be(C.description),damageType:`${C.school} (Lvl ${C.level})`,spellRef:C.name,infoNotes:re,generalNotes:g,castAtLevel:C.level};return ve.attacks=[...ve.attacks,x],ve})}else if(e($)==="feat"){const C=e(U);Q.update(ve=>{const h=`${C.name}${C.prerequisite?` (Req: ${C.prerequisite})`:""}
${C.description}
`;return ve.features=ve.features?`${ve.features}
${h}`:h,ve})}v(U,null),m()()}}Je(()=>(e(R),e(Y),e(_)),()=>{v(t,e(R)!==null?Ks(Ra(e(Y),e(_)),e(R)):Ra(e(Y),e(_)))}),Je(()=>(e(q),e(_)),()=>{v(d,Js(e(q),e(_)))}),Je(()=>(e($),e(t),e(d)),()=>{v(p,e($)==="spell"?e(t):e(d))}),zt(),Ft();var V=Wr(),Ne=r(V),z=r(Ne),le=s(r(z),2);l(z);var X=s(z,2),ae=r(X);{var ie=C=>{var ve=Fr();c(C,ve)},Be=C=>{var ve=qr(),h=Oe(ve),E=r(h),re=r(E);let g;var x=r(re);l(re);var O=s(re,2);let I;var G=r(O);l(O),l(E);var De=s(E,2),ke=r(De);Le(ke);var Se=s(ke,2);{var je=W=>{var se=Mr();F(()=>{e(R),Lt(()=>{})});var Me=r(se);Me.value=(Me.__value=null)??"";var He=s(Me);He.value=He.__value=0;var Ie=s(He);dt(Ie,0,()=>[1,2,3,4,5,6,7,8,9],ut,(T,b)=>{var ne=Br(),we=r(ne);l(ne);var We={};F(()=>{L(we,`Level ${b??""}`),We!==(We=b)&&(ne.value=(ne.__value=b)??"")}),c(T,ne)}),l(se),Wa(se,()=>e(R),T=>v(R,T)),c(W,se)};S(Se,W=>{e($)==="spell"&&W(je)})}l(De),l(h);var Te=s(h,2),qe=r(Te),Ze=r(qe);{var st=W=>{var se=Ir(),Me=r(se);l(se),F(()=>L(Me,`No ${e($)??""}s found`)),c(W,se)},P=W=>{var se=nt(),Me=Oe(se);dt(Me,1,()=>e(p),ut,(He,Ie)=>{var T=Pr();let b;var ne=r(T),we=r(ne,!0);l(ne);var We=s(ne,2);{var Ke=de=>{const xe=at(()=>e(Ie));var Ue=Rr(),Ae=r(Ue);l(Ue),F(()=>L(Ae,`Level ${N(e(xe)),i(()=>e(xe).level)??""} â€¢ ${N(e(xe)),i(()=>e(xe).school)??""}`)),c(de,Ue)},$e=de=>{const xe=at(()=>e(Ie));var Ue=nt(),Ae=Oe(Ue);{var Re=K=>{var pe=Er(),Ge=r(pe,!0);l(pe),F(()=>L(Ge,(N(e(xe)),i(()=>e(xe).prerequisite)))),c(K,pe)};S(Ae,K=>{N(e(xe)),i(()=>e(xe).prerequisite)&&K(Re)})}c(de,Ue)};S(We,de=>{e($)==="spell"?de(Ke):de($e,!1)})}l(T),F(()=>{b=pt(T,1,"item-card svelte-1ngjemu",null,b,{selected:e(U)?.name===e(Ie).name}),L(we,(e(Ie),i(()=>e(Ie).name)))}),A("click",T,()=>he(e(Ie))),c(He,T)}),c(W,se)};S(Ze,W=>{e(p),i(()=>e(p).length===0)?W(st):W(P,!1)})}l(qe);var n=s(qe,2);{var ee=W=>{var se=Or(),Me=r(se);{var He=T=>{const b=at(()=>e(U));var ne=Ur(),we=Oe(ne),We=r(we,!0);l(we);var Ke=s(we,2),$e=r(Ke);{var de=f=>{var ce=wt();F(()=>L(ce,`${N(e(b)),i(()=>e(b).school)??""} cantrip`)),c(f,ce)},xe=f=>{var ce=wt();F(()=>L(ce,`Level ${N(e(b)),i(()=>e(b).level)??""} ${N(e(b)),i(()=>e(b).school)??""}`)),c(f,ce)};S($e,f=>{N(e(b)),i(()=>e(b).level===0)?f(de):f(xe,!1)})}var Ue=s($e,2);{var Ae=f=>{var ce=wt("(ritual)");c(f,ce)};S(Ue,f=>{N(e(b)),i(()=>e(b).ritual)&&f(Ae)})}l(Ke);var Re=s(Ke,2),K=s(r(Re));l(Re);var pe=s(Re,2),Ge=r(pe),y=s(r(Ge));l(Ge);var D=s(Ge,2),oe=s(r(D));l(D);var w=s(D,2),H=s(r(w)),fe=s(H);{var Ce=f=>{var ce=wt();F(()=>L(ce,`(${N(e(b)),i(()=>e(b).material)??""})`)),c(f,ce)};S(fe,f=>{N(e(b)),i(()=>e(b).material)&&f(Ce)})}l(w);var J=s(w,2),Ee=s(r(J),2);{var j=f=>{var ce=wt("Concentration,");c(f,ce)};S(Ee,f=>{N(e(b)),i(()=>e(b).concentration)&&f(j)})}var Ye=s(Ee,1,!0);l(J),l(pe);var it=s(pe,2),ht=r(it,!0);l(it);var St=s(it,2);{var lt=f=>{var ce=Tr(),ge=s(r(ce));l(ce),F(()=>L(ge,` ${N(e(b)),i(()=>e(b).higherLevelSlot)??""}`)),c(f,ce)};S(St,f=>{N(e(b)),i(()=>e(b).higherLevelSlot)&&f(lt)})}var k=s(St,2);{var te=f=>{var ce=Hr(),ge=s(r(ce));l(ce),F(()=>L(ge,` ${N(e(b)),i(()=>e(b).cantripUpgrade)??""}`)),c(f,ce)};S(k,f=>{N(e(b)),i(()=>e(b).cantripUpgrade)&&f(te)})}F((f,ce)=>{L(We,(N(e(b)),i(()=>e(b).name))),L(K,` ${f??""}`),L(y,` ${N(e(b)),i(()=>e(b).castingTime||e(b).actionType)??""}`),L(oe,` ${N(e(b)),i(()=>e(b).range)??""}`),L(H,` ${ce??""}`),L(Ye,(N(e(b)),i(()=>e(b).duration))),L(ht,(N(e(b)),i(()=>e(b).description)))},[()=>(N(e(b)),i(()=>e(b).classes.join(", "))),()=>(N(e(b)),i(()=>e(b).components.join(", ").toUpperCase()))]),c(T,ne)},Ie=T=>{const b=at(()=>e(U));var ne=Gr(),we=Oe(ne),We=r(we,!0);l(we);var Ke=s(we,2);{var $e=Ae=>{var Re=Nr(),K=s(r(Re));l(Re),F(()=>L(K,` ${N(e(b)),i(()=>e(b).prerequisite)??""}`)),c(Ae,Re)};S(Ke,Ae=>{N(e(b)),i(()=>e(b).prerequisite)&&Ae($e)})}var de=s(Ke,2),xe=r(de,!0);l(de);var Ue=s(de,2);F(()=>{L(We,(N(e(b)),i(()=>e(b).name))),L(xe,(N(e(b)),i(()=>e(b).description))),ze(Ue,"href",(N(e(b)),i(()=>e(b).source)))}),c(T,ne)};S(Me,T=>{e($)==="spell"?T(He):T(Ie,!1)})}l(se),c(W,se)};S(n,W=>{e(U)&&W(ee)})}l(Te),F(()=>{g=pt(re,1,"tab svelte-1ngjemu",null,g,{active:e($)==="spell"}),L(x,`ðŸ“œ Spells (${e(Y),i(()=>e(Y).length)??""})`),I=pt(O,1,"tab svelte-1ngjemu",null,I,{active:e($)==="feat"}),L(G,`â­ Feats (${e(q),i(()=>e(q).length)??""})`)}),A("click",re,()=>{v($,"spell"),v(U,null),v(_,"")}),A("click",O,()=>{v($,"feat"),v(U,null),v(_,"")}),Fe(ke,()=>e(_),W=>v(_,W)),c(C,ve)};S(ae,C=>{e(B)?C(ie):C(Be,!1)})}l(X);var Pe=s(X,2),_e=r(Pe),ye=s(_e,2);l(Pe),l(Ne),l(V),F(()=>ye.disabled=!e(U)),A("click",le,function(...C){m()?.apply(this,C)}),A("click",_e,function(...C){m()?.apply(this,C)}),A("click",ye,ue),A("click",Ne,Aa(function(C){sa.call(this,o,C)})),A("keydown",Ne,function(C){sa.call(this,o,C)}),A("click",V,function(...C){m()?.apply(this,C)}),A("keydown",V,C=>C.key==="Escape"&&m()()),c(a,V),Mt()}var Kr=u('<link rel="icon" type="image/png" href="favicon4.png"/> <meta name="viewport" content="width=device-width, initial-scale=1"/>',1),Jr=u('<span class="character-name svelte-1uha8ag"> </span>'),Vr=u("<span> </span>"),Qr=u('<div class="spell-slots-header svelte-1uha8ag"></div>'),Yr=u("<span> </span><br/>",1),Xr=u("<span> </span>"),Zr=u('<span class="effect-tooltip"><strong> </strong><br/> <br/> <!> <!></span>'),ei=u('<button class="effect-remove-btn svelte-1uha8ag">Ã—</button>'),ti=u('<span class="effect-badge svelte-1uha8ag" tabindex="0"> <!> <!></span>'),ai=u(`<div class="active-effects-header svelte-1uha8ag"></div> <style>.effect-badge {
            position: relative;
          }
          .effect-tooltip {
            position: absolute;
            top: 120%;
            left: 50%;
            transform: translateX(-50%);
            background: #fff;
            color: #222;
            border: 1px solid #a5b4fc;
            border-radius: 6px;
            padding: 8px 12px;
            font-size: 0.95em;
            box-shadow: 0 2px 8px rgba(0,0,0,0.12);
            z-index: 10;
            min-width: 180px;
            max-width: 260px;
            white-space: normal;
            pointer-events: none;
            opacity: 1;
            transition: opacity 0.15s;
          }</style>`,1),si=u('<div class="rest-menu svelte-1uha8ag"><button class="rest-option svelte-1uha8ag">â˜• Short Rest</button> <button class="rest-option svelte-1uha8ag">ðŸ›ï¸ Long Rest</button></div>'),li=u('<div class="container svelte-1uha8ag"><header class="svelte-1uha8ag"><div class="header-top svelte-1uha8ag"><div class="header-title svelte-1uha8ag"><div class="title-row svelte-1uha8ag"><h1 class="svelte-1uha8ag">D&D Character Sheet</h1> <!></div> <!> <!></div> <div class="header-right svelte-1uha8ag"><div class="header-controls svelte-1uha8ag"><button class="btn btn-secondary use-enabled"><span class="btn-icon svelte-1uha8ag">ðŸŽ²</span><span class="btn-text svelte-1uha8ag">Roll Dice</span></button> <div class="rest-button-container svelte-1uha8ag"><button class="btn btn-secondary use-enabled"><span class="btn-icon svelte-1uha8ag">ðŸ˜´</span><span class="btn-text svelte-1uha8ag">Rest</span></button> <!></div> <div class="mode-toggle"><button><span class="btn-icon svelte-1uha8ag"> </span><span class="btn-text svelte-1uha8ag"> </span></button></div></div> <div class="header-search svelte-1uha8ag"><input type="text" placeholder="ðŸ” Search..." class="search-input use-enabled svelte-1uha8ag"/></div></div></div> <div class="header-actions svelte-1uha8ag"><button class="btn btn-mode svelte-1uha8ag">ðŸ“š Browse Spells & Feats</button> <button class="btn btn-secondary">Save to Gist</button> <button class="btn btn-secondary">Load from Gist</button> <button class="btn btn-secondary">Export JSON</button> <button class="btn btn-secondary">Import JSON</button> <input type="file" accept=".json" style="display: none;"/></div></header> <main class="svelte-1uha8ag"><!> <!> <!> <!> <!> <!> <!></main></div> <!> <!> <!> <!>',1);function pi(a,o){Bt(o,!1);const t=()=>Ve(Q,"$character",m),d=()=>Ve(aa,"$isEditMode",m),p=()=>Ve(Yt,"$searchFilter",m),[m,$]=Nt();function B(){const k=[],te=t().classFeatures.spellSlotsByLevel||{};for(let f=1;f<=9;f++){const ce=te[f];if(ce&&ce.length>0){const ge=ce.length,tt=ce.filter(me=>me).length;k.push({level:f,available:ge-tt,total:ge})}}return k}let _=M(!1),R=M(!1),Y=M(!1),q=M("save"),U=M(void 0),he=M(""),be=M(""),Z=M(""),ue=M(!1),V=M([]),Ne=M(),z=!1,le=M(!1),X=M(null);function ae(k){v(X,k)}function ie(){v(X,null)}function Be(k){v(X,e(X)===k?null:k)}function Pe(){const k=[];Q.update(f=>{const ce=f.hitDice.current;f.hitDice.current=Math.min(f.hitDice.max,f.hitDice.current+Math.max(1,Math.floor(f.hitDice.max/2)));const ge=f.hitDice.current-ce;if(ge>0&&k.push(`${ge} hit ${ge===1?"die":"dice"}`),f.class){const tt=la(f.class,f.level,f.subclass);f.classFeatures.features||(f.classFeatures.features={}),tt.forEach(me=>{if(me.resetOn==="short"){const Xe=me.name.replace(/\s+/g,"");if(me.type==="uses"){const Qe=typeof me.maxUses=="function"?me.maxUses(f.level):me.maxUses;f.classFeatures.features[Xe]=Array(Qe).fill(!1),k.push(me.name)}else if(me.type==="pool"){const Qe=typeof me.maxPool=="function"?me.maxPool(f.level):me.maxPool;Qe!==void 0&&(f.classFeatures.features[Xe]=Qe,k.push(me.name))}}})}return f}),v(le,!1);const te=k.length>0?`Short rest taken! Restored: ${k.join(", ")}`:"Short rest taken!";Tt.add(te,"success")}function _e(){const k=[];Q.update(f=>{const ce=f.maxHP-f.currentHP;ce>0&&k.push(`${ce} HP`),f.currentHP=f.maxHP,f.tempHP=0;const ge=f.hitDice.max-f.hitDice.current;ge>0&&k.push(`${ge} hit ${ge===1?"die":"dice"}`),f.hitDice.current=f.hitDice.max;let tt=0;if(f.classFeatures.spellSlotsByLevel&&Object.keys(f.classFeatures.spellSlotsByLevel).forEach(me=>{const Xe=f.classFeatures.spellSlotsByLevel[parseInt(me)];if(Xe){const Qe=Xe.filter(ct=>ct).length;tt+=Qe,f.classFeatures.spellSlotsByLevel[parseInt(me)]=Array(Xe.length).fill(!1)}}),tt>0&&k.push(`${tt} spell ${tt===1?"slot":"slots"}`),f.class){const me=la(f.class,f.level,f.subclass);f.classFeatures.features||(f.classFeatures.features={});let Xe=!1;me.forEach(Qe=>{const ct=Qe.name.replace(/\s+/g,"");if(!(Qe.type==="info"||Qe.type==="channelDivinity")){if(Qe.type==="uses"){const ft=typeof Qe.maxUses=="function"?Qe.maxUses(f.level):Qe.maxUses;f.classFeatures.features[ct]=Array(ft).fill(!1),Xe=!0}else if(Qe.type==="pool"){const ft=typeof Qe.maxPool=="function"?Qe.maxPool(f.level):Qe.maxPool;ft!==void 0&&(f.classFeatures.features[ct]=ft,Xe=!0)}}}),Xe&&k.push("all class features")}return f}),v(le,!1);const te=k.length>0?`Long rest taken! Restored: ${k.join(", ")}`:"Long rest taken! Fully rested.";Tt.add(te,"success")}function ye(k){v(he,""),v(be,""),v(Z,""),v(ue,!1),v(V,[]),z=!1,typeof k=="string"?v(he,k):(v(he,k.notation),v(be,k.damageNotation||""),v(Z,k.attackName||""),v(ue,!!k.applyHalfDamage),v(V,k.bonusBreakdown||[])),v(_,!0)}function C(k){const{notation:te}=k.detail;v(he,""),z=!0,setTimeout(()=>{v(he,te),v(be,""),v(Z,"Hit Die")},0),v(_,!0)}function ve(){if(v(_,!1),z&&e(Ne)){const k=e(Ne).getLastRollTotal();if(k!==null){const te=Math.max(1,k);Q.update(f=>(f.hitDice.current=Math.max(0,f.hitDice.current-1),f.currentHP=Math.min(f.maxHP,f.currentHP+te),f))}z=!1}}function h(){aa.update(k=>!k)}function E(k){k.target.closest(".rest-button-container")||v(le,!1)}oa(()=>{const k=aa.subscribe(te=>{te?document.body.classList.remove("use-mode"):document.body.classList.add("use-mode")});return document.addEventListener("click",E),()=>{k(),document.removeEventListener("click",E)}});function re(){ds(t())}function g(){e(U)?.click()}async function x(k){const f=k.target.files?.[0];if(f)try{const ce=await us(f);Q.set(ce),alert("Character imported successfully!")}catch{alert("Failed to import character file")}}Ft();var O=li();cs("1uha8ag",k=>{var te=Kr();fa(2),Na(()=>{ns.title="D&D Character Sheet"}),c(k,te)});var I=Oe(O),G=r(I),De=r(G),ke=r(De),Se=r(ke),je=s(r(Se),2);{var Te=k=>{var te=Jr(),f=r(te);l(te),F(()=>L(f,`${t().name??""} (${t().level??""})`)),c(k,te)};S(je,k=>{t().name&&k(Te)})}l(Se);var qe=s(Se,2);{var Ze=k=>{var te=Qr();dt(te,5,B,ut,(f,ce)=>{var ge=Vr();let tt;var me=r(ge);l(ge),F(()=>{tt=pt(ge,1,"slot-badge svelte-1uha8ag",null,tt,{depleted:e(ce).available===0}),L(me,`Lv${e(ce).level??""}: ${e(ce).available??""}/${e(ce).total??""}`)}),c(f,ge)}),l(te),c(k,te)};S(qe,k=>{B().length>0&&k(Ze)})}var st=s(qe,2);{var P=k=>{var te=ai(),f=Oe(te);dt(f,5,()=>t().activeStates,ut,(ce,ge,tt)=>{var me=ti(),Xe=r(me),Qe=s(Xe);{var ct=jt=>{var It=Zr(),et=r(It),vt=r(et,!0);l(et);var gt=s(et,2),Rt=s(gt,3);{var Gt=_t=>{var yt=Yr(),Et=Oe(yt),rt=r(Et);l(Et),fa(),F(()=>L(rt,`Attack Bonus: ${e(ge).attackBonus>0?"+":""}${e(ge).attackBonus??""}`)),c(_t,yt)};S(Rt,_t=>{e(ge).attackBonus&&_t(Gt)})}var Kt=s(Rt,2);{var xt=_t=>{var yt=Xr(),Et=r(yt);l(yt),F(()=>L(Et,`Damage Bonus: ${e(ge).damageBonus>0?"+":""}${e(ge).damageBonus??""}`)),c(_t,yt)};S(Kt,_t=>{e(ge).damageBonus&&_t(xt)})}l(It),F(()=>{L(vt,e(ge).name),L(gt,` ${e(ge).description??""}`)}),c(jt,It)};S(Qe,jt=>{e(X)===tt&&jt(ct)})}var ft=s(Qe,2);{var Ut=jt=>{var It=ei();F(()=>ze(It,"title",`End ${e(ge).name??""}`)),A("click",It,()=>{Q.update(et=>(et.activeStates&&(et.activeStates=et.activeStates.filter((vt,gt)=>gt!==tt)),et))}),c(jt,It)};S(ft,jt=>{d()||jt(Ut)})}l(me),F(()=>{ze(me,"aria-label",e(ge).name),L(Xe,`âœ¨ ${e(ge).name??""} `)}),A("mouseenter",me,()=>ae(tt)),A("mouseleave",me,ie),A("focus",me,()=>ae(tt)),A("blur",me,ie),A("click",me,()=>Be(tt)),c(ce,me)}),l(f),fa(2),c(k,te)};S(st,k=>{t().activeStates&&t().activeStates.length>0&&k(P)})}l(ke);var n=s(ke,2),ee=r(n),W=r(ee),se=s(W,2),Me=r(se),He=s(Me,2);{var Ie=k=>{var te=si(),f=r(te),ce=s(f,2);l(te),A("click",f,Pe),A("click",ce,_e),c(k,te)};S(He,k=>{e(le)&&k(Ie)})}l(se);var T=s(se,2),b=r(T);let ne;var we=r(b),We=r(we,!0);l(we);var Ke=s(we),$e=r(Ke,!0);l(Ke),l(b),l(T),l(ee);var de=s(ee,2),xe=r(de);Le(xe),l(de),l(n),l(De);var Ue=s(De,2),Ae=r(Ue),Re=s(Ae,2),K=s(Re,2),pe=s(K,2),Ge=s(pe,2),y=s(Ge,2);$a(y,k=>v(U,k),()=>e(U)),l(Ue),l(G);var D=s(G,2),oe=r(D);Ds(oe,{});var w=s(oe,2);Ns(w,{$$events:{rollHitDice:C}});var H=s(w,2);Bs(H,{$$events:{roll:k=>ye(k.detail)}});var fe=s(H,2);Ws(fe,{$$events:{roll:k=>ye(k.detail)}});var Ce=s(fe,2);Al(Ce,{$$events:{roll:k=>ye(k.detail)}});var J=s(Ce,2);Kl(J,{});var Ee=s(J,2);Ql(Ee,{}),l(D),l(I);var j=s(I,2);$a(vr(j,{get notation(){return e(he)},get damageNotation(){return e(be)},get attackName(){return e(Z)},get applyHalfDamage(){return e(ue)},get bonusBreakdown(){return e(V)},get visible(){return e(_)},$$events:{close:ve},$$legacy:!0}),k=>v(Ne,k),()=>e(Ne));var Ye=s(j,2);{var it=k=>{Ar(k,{get mode(){return e(q)},$$events:{close:()=>v(R,!1)}})};S(Ye,k=>{e(R)&&k(it)})}var ht=s(Ye,2);{var St=k=>{zr(k,{onClose:()=>v(Y,!1)})};S(ht,k=>{e(Y)&&k(St)})}var lt=s(ht,2);vs(lt,{}),F(()=>{ne=pt(b,1,"btn btn-mode svelte-1uha8ag",null,ne,{"use-mode":!d()}),L(We,d()?"ðŸ“":"ðŸŽ²"),L($e,d()?"Edit Mode":"Use Mode")}),A("click",W,()=>v(_,!0)),A("click",Me,()=>v(le,!e(le))),A("click",b,h),Fe(xe,p,k=>ps(Yt,k)),A("click",Ae,()=>v(Y,!0)),A("click",Re,()=>{v(q,"save"),v(R,!0)}),A("click",K,()=>{v(q,"load"),v(R,!0)}),A("click",pe,re),A("click",Ge,g),A("change",y,x),c(a,O),Mt(),$()}export{pi as component};
