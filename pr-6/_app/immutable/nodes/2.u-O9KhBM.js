import{f as R,a as A,c as tt,t as Et}from"../chunks/6XYDwUF9.js";import{i as Fe}from"../chunks/BOw2e3w9.js";import{w as wt,d as la,c as lt,o as Bt}from"../chunks/CuStAn8_.js";import{h as Ae,T as ia,f as ra,z as e,a9 as Oe,V as na,W as oa,X as It,k as pt,j as ft,e as it,C as ca,aJ as va,au as Mt,c as Qe,b as yt,s as da,aH as qt,R as St,a as kt,$ as I,am as Nt,aP as zt,aQ as Jt,aR as ua,g as pa,aS as Vt,r as Wt,p as fa,aT as bt,q as ba,aU as ha,i as ma,aV as ga,aW as _a,aG as ya,d as ka,a0 as xa,aX as Ca,aY as $a,aZ as Yt,aN as wa,w as b,Z as Xt,a_ as Sa,E as Ee,G as re,I as Ie,J as n,M as i,K as r,a2 as u,a$ as xe,b0 as Xe,F as je,A as ze,b1 as rt,b2 as ot,b3 as ja,Y as Da,b4 as La}from"../chunks/DPGOUnoB.js";import{e as N,s as ee}from"../chunks/BHopkMz4.js";import{i as ce,s as Be,a as me,c as fe,p as at,b as xt,d as Aa}from"../chunks/BY7xCf6n.js";import{s as we,r as X,a as Zt,b as Rt,h as Fa}from"../chunks/DSYbBtkv.js";import{b as nt}from"../chunks/BcE3sdJ7.js";function Ye(t,l){return l}function Ea(t,l,a){for(var s=[],d=l.length,p=0;p<d;p++)ga(l[p].e,s,!0);_a(s,()=>{var o=s.length===0&&a!==null;if(o){var v=a,c=v.parentNode;ya(c),c.append(v),t.items.clear(),Le(t,l[0].prev,l[d-1].next)}for(var m=0;m<d;m++){var h=l[m];o||(t.items.delete(h.k),Le(t,h.prev,h.next)),ka(h.e,!o)}t.first===l[0]&&(t.first=l[0].prev)})}function Je(t,l,a,s,d,p=null){var o=t,v=new Map,c=null,m=(l&Vt)!==0,h=(l&Jt)!==0,T=(l&zt)!==0;if(m){var g=t;o=Ae?pt(pa(g)):g.appendChild(kt())}Ae&&ia();var L=null,V=Oe(()=>{var F=a();return St(F)?F:F==null?[]:qt(F)}),M,f=!0;function _(){Ia(H,M,o,l,s),L!==null&&(M.length===0?(L.fragment?(o.before(L.fragment),L.fragment=null):Wt(L.effect),S.first=L.effect):fa(L.effect,()=>{L=null}))}var S=ra(()=>{M=e(V);var F=M.length;let G=!1;if(Ae){var C=na(o)===oa;C!==(F===0)&&(o=It(),pt(o),ft(!1),G=!0)}for(var w=new Set,U=Qe,O=null,q=da(),J=0;J<F;J+=1){Ae&&it.nodeType===ca&&it.data===va&&(o=it,G=!0,ft(!1));var te=M[J],k=s(te,J),y=f?null:v.get(k);y?(h&&Mt(y.v,te),T?Mt(y.i,J):y.i=J,q&&U.skipped_effects.delete(y.e)):(y=Ma(f?o:null,O,te,k,J,d,l,a),f&&(y.o=!0,O===null?c=y:O.next=y,O=y),v.set(k,y)),w.add(k)}if(F===0&&p&&!L)if(f)L={fragment:null,effect:yt(()=>p(o))};else{var j=document.createDocumentFragment(),ae=kt();j.append(ae),L={fragment:j,effect:yt(()=>p(ae))}}if(Ae&&F>0&&pt(It()),!f)if(q){for(const[W,Y]of v)w.has(W)||U.skipped_effects.add(Y.e);U.oncommit(_),U.ondiscard(()=>{})}else _();G&&ft(!0),e(V)}),H={effect:S,items:v,first:c};f=!1,Ae&&(o=it)}function Ia(t,l,a,s,d){var p=(s&ha)!==0,o=l.length,v=t.items,c=t.first,m,h=null,T,g=[],L=[],V,M,f,_;if(p)for(_=0;_<o;_+=1)V=l[_],M=d(V,_),f=v.get(M),f.a?.measure(),(T??=new Set).add(f);for(_=0;_<o;_+=1){if(V=l[_],M=d(V,_),f=v.get(M),t.first??=f,!f.o){f.o=!0;var S=h?h.next:c;Le(t,h,f),Le(t,f,S),ht(f,S,a),h=f,g=[],L=[],c=h.next;continue}if((f.e.f&bt)!==0&&(Wt(f.e),p&&(f.a?.unfix(),(T??=new Set).delete(f))),f!==c){if(m!==void 0&&m.has(f)){if(g.length<L.length){var H=L[0],F;h=H.prev;var G=g[0],C=g[g.length-1];for(F=0;F<g.length;F+=1)ht(g[F],H,a);for(F=0;F<L.length;F+=1)m.delete(L[F]);Le(t,G.prev,C.next),Le(t,h,G),Le(t,C,H),c=H,h=C,_-=1,g=[],L=[]}else m.delete(f),ht(f,c,a),Le(t,f.prev,f.next),Le(t,f,h===null?t.first:h.next),Le(t,h,f),h=f;continue}for(g=[],L=[];c!==null&&c.k!==M;)(c.e.f&bt)===0&&(m??=new Set).add(c),L.push(c),c=c.next;if(c===null)continue;f=c}g.push(f),h=f,c=f.next}if(c!==null||m!==void 0){for(var w=m===void 0?[]:qt(m);c!==null;)(c.e.f&bt)===0&&w.push(c),c=c.next;var U=w.length;if(U>0){var O=(s&Vt)!==0&&o===0?a:null;if(p){for(_=0;_<U;_+=1)w[_].a?.measure();for(_=0;_<U;_+=1)w[_].a?.fix()}Ea(t,w,O)}}p&&ba(()=>{if(T!==void 0)for(f of T)f.a?.apply()})}function Ma(t,l,a,s,d,p,o,v){var c=(o&Jt)!==0,m=(o&ua)===0,h=c?m?I(a,!1,!1):Nt(a):a,T=(o&zt)===0?d:Nt(d),g={i:T,v:h,k:s,a:null,e:null,o:!1,prev:l,next:null};try{if(t===null){var L=document.createDocumentFragment();L.append(t=kt())}return g.e=yt(()=>p(t,h,T,v)),l!==null&&(l.next=g),g}finally{}}function ht(t,l,a){for(var s=t.next?t.next.e.nodes_start:a,d=l?l.e.nodes_start:a,p=t.e.nodes_start;p!==null&&p!==s;){var o=ma(p);d.before(p),p=o}}function Le(t,l,a){l===null?(t.first=a,t.effect.first=a&&a.e):(l.e.next&&(l.e.next.prev=null),l.next=a,l.e.next=a&&a.e),a===null?t.effect.last=l&&l.e:(a.e.prev&&(a.e.prev.next=null),a.prev=l,a.e.prev=l&&l.e)}const Tt=[...` 	
\r\f \v\uFEFF`];function Na(t,l,a){var s=t==null?"":""+t;if(a){for(var d in a)if(a[d])s=s?s+" "+d:d;else if(s.length)for(var p=d.length,o=0;(o=s.indexOf(d,o))>=0;){var v=o+p;(o===0||Tt.includes(s[o-1]))&&(v===s.length||Tt.includes(s[v]))?s=(o===0?"":s.substring(0,o))+s.substring(v+1):o=v}}return s===""?null:s}function Ge(t,l,a,s,d,p){var o=t.__className;if(Ae||o!==a||o===void 0){var v=Na(a,s,p);(!Ae||v!==t.getAttribute("class"))&&(v==null?t.removeAttribute("class"):t.className=v),t.__className=a}else if(p&&d!==p)for(var c in p){var m=!!p[c];(d==null||m!==!!d[c])&&t.classList.toggle(c,m)}return p}function Kt(t,l,a=!1){if(t.multiple){if(l==null)return;if(!St(l))return Ca();for(var s of t.options)s.selected=l.includes(Pt(s));return}for(s of t.options){var d=Pt(s);if($a(d,l)){s.selected=!0;return}}(!a||l!==void 0)&&(t.selectedIndex=-1)}function Ra(t){var l=new MutationObserver(()=>{Kt(t,t.__value)});l.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),xa(()=>{l.disconnect()})}function Pt(t){return"__value"in t?t.__value:t.value}function Q(t,l,a=l){var s=new WeakSet;Yt(t,"input",async d=>{var p=d?t.defaultValue:t.value;if(p=mt(t)?gt(p):p,a(p),Qe!==null&&s.add(Qe),await wa(),p!==(p=l())){var o=t.selectionStart,v=t.selectionEnd,c=t.value.length;if(t.value=p??"",v!==null){var m=t.value.length;o===v&&v===c&&m>c?(t.selectionStart=m,t.selectionEnd=m):(t.selectionStart=o,t.selectionEnd=Math.min(v,m))}}}),(Ae&&t.defaultValue!==t.value||b(l)==null&&t.value)&&(a(mt(t)?gt(t.value):t.value),Qe!==null&&s.add(Qe)),Xt(()=>{var d=l();if(t===document.activeElement){var p=Sa??Qe;if(s.has(p))return}mt(t)&&d===gt(t.value)||t.type==="date"&&!d&&!t.value||d!==t.value&&(t.value=d??"")})}function jt(t,l,a=l){Yt(t,"change",s=>{var d=s?t.defaultChecked:t.checked;a(d)}),(Ae&&t.defaultChecked!==t.checked||b(l)==null)&&a(t.checked),Xt(()=>{var s=l();t.checked=!!s})}function mt(t){var l=t.type;return l==="number"||l==="range"}function gt(t){return t===""?null:+t}function Qt(t){return function(...l){var a=l[0];return a.stopPropagation(),t?.apply(this,l)}}function ct(t,l){var a=t.$$events?.[l.type],s=St(a)?a.slice():a==null?[]:[a];for(var d of s)d.call(this,l)}const Ct={name:"",class:"",level:1,race:"",background:"",alignment:"",armorClass:10,initiative:0,speed:"30 ft",currentHP:0,maxHP:0,tempHP:0,hitDice:{current:3,max:3},abilities:{strength:10,dexterity:10,constitution:10,intelligence:10,wisdom:10,charisma:10},proficiencyBonus:2,saveProficiencies:{strength:!1,dexterity:!1,constitution:!1,intelligence:!1,wisdom:!1,charisma:!1},skillProficiencies:{acrobatics:!1,animalHandling:!1,arcana:!1,athletics:!1,deception:!1,history:!1,insight:!1,intimidation:!1,investigation:!1,medicine:!1,nature:!1,perception:!1,performance:!1,persuasion:!1,religion:!1,sleightOfHand:!1,stealth:!1,survival:!1},attacks:[],features:"",equipment:"",notes:"",classFeatures:{features:{},spellSlots:[],preparedSpells:""}};function Ta(){try{const t=localStorage.getItem("dndCharacter");if(t){const l={...Ct,...JSON.parse(t)};return l.attacks&&Array.isArray(l.attacks)&&(l.attacks=l.attacks.map(a=>({...a,id:a.id||crypto.randomUUID()}))),l.classFeatures?(l.classFeatures.features||(l.classFeatures.features={}),l.classFeatures.spellSlots||(l.classFeatures.spellSlots=[]),l.classFeatures.preparedSpells===void 0&&(l.classFeatures.preparedSpells="")):l.classFeatures={features:{},spellSlots:[],preparedSpells:""},l}}catch(t){console.error("Failed to load character from storage:",t)}return Ct}const P=wt(Ta());P.subscribe(t=>{try{localStorage.setItem("dndCharacter",JSON.stringify(t))}catch(l){console.error("Failed to save character to storage:",l)}});const st=wt(!0);{const t=localStorage.getItem("dndMode");st.set(t==="edit"),st.subscribe(l=>{localStorage.setItem("dndMode",l?"edit":"use")})}const Dt=la(P,t=>{const l=a=>Math.floor((a-10)/2);return{strength:l(t.abilities.strength),dexterity:l(t.abilities.dexterity),constitution:l(t.abilities.constitution),intelligence:l(t.abilities.intelligence),wisdom:l(t.abilities.wisdom),charisma:l(t.abilities.charisma)}});function Pa(t){return Math.ceil(t/4)+1}function ea(){P.update(t=>(t.proficiencyBonus=Pa(t.level),t))}function Ha(t){const l=JSON.stringify(t,null,2),a="data:application/json;charset=utf-8,"+encodeURIComponent(l),s=`${t.name||"character"}_${new Date().toISOString().split("T")[0]}.json`,d=document.createElement("a");d.setAttribute("href",a),d.setAttribute("download",s),d.click()}function Ua(t){return new Promise((l,a)=>{const s=new FileReader;s.onload=d=>{try{const p=JSON.parse(d.target?.result),o={...Ct,...p};o.attacks&&Array.isArray(o.attacks)&&(o.attacks=o.attacks.map(v=>({...v,id:v.id||crypto.randomUUID()}))),o.classFeatures?(o.classFeatures.features||(o.classFeatures.features={}),o.classFeatures.spellSlots||(o.classFeatures.spellSlots=[]),o.classFeatures.preparedSpells===void 0&&(o.classFeatures.preparedSpells="")):o.classFeatures={features:{},spellSlots:[],preparedSpells:""},l(o)}catch{a(new Error("Invalid character file"))}},s.onerror=()=>a(new Error("Failed to read file")),s.readAsText(t)})}const Ve=wt(""),$t={paladin:{name:"Paladin",hitDice:"d10",spellcaster:!0,spellcastingAbility:"charisma",spellSlotsByLevel:{1:0,2:2,3:3,4:3,5:4,6:4,7:4,8:4,9:4,10:4,11:4,12:4,13:4,14:4,15:4,16:4,17:4,18:4,19:4,20:4},features:[{name:"Divine Sense",type:"uses",maxUses:(t,l=1)=>1+Math.max(1,l),resetOn:"long",description:"Detect celestials, fiends, and undead within 60 feet",minLevel:1},{name:"Lay on Hands",type:"pool",maxPool:t=>t*5,resetOn:"long",description:"Heal wounds or cure disease",minLevel:1},{name:"Divine Smite",type:"spellSlot",description:"Expend spell slot to deal extra radiant damage",minLevel:2,rollable:!0},{name:"Channel Divinity",type:"uses",maxUses:t=>t>=18?3:t>=6?2:1,resetOn:"short",description:"Sacred Weapon or Turn Undead",minLevel:3}]},fighter:{name:"Fighter",hitDice:"d10",spellcaster:!1,features:[{name:"Second Wind",type:"uses",maxUses:1,resetOn:"short",description:"Regain 1d10 + fighter level HP as bonus action",minLevel:1,rollable:!0,rollFormula:t=>`1d10+${t}`},{name:"Action Surge",type:"uses",maxUses:t=>t>=17?2:1,resetOn:"short",description:"Take one additional action on your turn",minLevel:2},{name:"Indomitable",type:"uses",maxUses:t=>t>=17?3:t>=13?2:1,resetOn:"long",description:"Reroll a failed saving throw",minLevel:9}]},rogue:{name:"Rogue",hitDice:"d8",spellcaster:!1,features:[{name:"Sneak Attack",type:"info",description:t=>`Deal ${Math.ceil(t/2)}d6 extra damage once per turn with advantage or ally nearby`,minLevel:1,rollable:!0,rollFormula:t=>`${Math.ceil(t/2)}d6`},{name:"Cunning Action",type:"info",description:"Dash, Disengage, or Hide as a bonus action",minLevel:2},{name:"Uncanny Dodge",type:"info",description:"Use reaction to halve damage from an attack",minLevel:5},{name:"Evasion",type:"info",description:"Take no damage on successful Dex save (half on fail)",minLevel:7}]},wizard:{name:"Wizard",hitDice:"d6",spellcaster:!0,spellcastingAbility:"intelligence",spellSlotsByLevel:{1:2,2:3,3:4,4:4,5:4,6:4,7:4,8:4,9:4,10:4,11:4,12:4,13:4,14:4,15:4,16:4,17:4,18:4,19:4,20:4},features:[{name:"Arcane Recovery",type:"uses",maxUses:1,resetOn:"long",description:t=>`Recover spell slots totaling up to ${Math.ceil(t/2)} levels during short rest`,minLevel:1},{name:"Spell Mastery",type:"info",description:"Cast one 1st-level and one 2nd-level spell at will",minLevel:18}]},cleric:{name:"Cleric",hitDice:"d8",spellcaster:!0,spellcastingAbility:"wisdom",spellSlotsByLevel:{1:2,2:3,3:4,4:4,5:4,6:4,7:4,8:4,9:4,10:4,11:4,12:4,13:4,14:4,15:4,16:4,17:4,18:4,19:4,20:4},features:[{name:"Channel Divinity",type:"uses",maxUses:t=>t>=18?3:t>=6?2:1,resetOn:"short",description:"Turn Undead or domain-specific ability",minLevel:2},{name:"Destroy Undead",type:"info",description:t=>`Channel Divinity destroys undead of CR ${t>=17?4:t>=14?3:t>=11?2:t>=8?1:.5} or lower`,minLevel:5},{name:"Divine Intervention",type:"uses",maxUses:1,resetOn:"long",description:t=>`${t}% chance to succeed, implore deity for aid`,minLevel:10}]},barbarian:{name:"Barbarian",hitDice:"d12",spellcaster:!1,features:[{name:"Rage",type:"uses",maxUses:t=>t>=20?1/0:t>=17?6:t>=12?5:t>=6?4:t>=3?3:2,resetOn:"long",description:t=>`+${t>=16?4:t>=9?3:2} damage, resistance to physical damage`,minLevel:1},{name:"Reckless Attack",type:"info",description:"Gain advantage on melee attacks, enemies get advantage on you",minLevel:2},{name:"Danger Sense",type:"info",description:"Advantage on Dex saves against effects you can see",minLevel:2}]}};function et(t){const l=t.toLowerCase();return $t[l]||null}function Ht(t,l){const a=et(t);return a?a.features.filter(s=>!s.minLevel||s.minLevel<=l):[]}function Ut(t,l){const a=et(t);return!a||!a.spellcaster||!a.spellSlotsByLevel?0:a.spellSlotsByLevel[l]||0}function Ot(t,l,a){const s=et(t);return!s||!s.spellcaster?0:Math.max(1,a+l)}function Oa(t,l,a){const s=et(t);return!s||!s.spellcaster?null:8+l+a}function Ga(){return Object.keys($t).map(t=>({id:t,name:$t[t].name}))}var Ba=R("<option> </option>"),qa=R('<div class="info-grid svelte-172i2fj"><div class="form-group svelte-172i2fj"><label for="characterName" class="svelte-172i2fj">Character Name</label> <input type="text" id="characterName" placeholder="Enter name" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterClass" class="svelte-172i2fj">Class</label> <select id="characterClass" class="svelte-172i2fj"><option>Select Class</option><!></select></div> <div class="form-group svelte-172i2fj"><label for="characterLevel" class="svelte-172i2fj">Level</label> <input type="number" id="characterLevel" min="1" max="20" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterRace" class="svelte-172i2fj">Race</label> <input type="text" id="characterRace" placeholder="e.g., Human" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterBackground" class="svelte-172i2fj">Background</label> <input type="text" id="characterBackground" placeholder="e.g., Soldier" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterAlignment" class="svelte-172i2fj">Alignment</label> <input type="text" id="characterAlignment" placeholder="e.g., Lawful Good" class="svelte-172i2fj"/></div></div>'),za=R('<section class="character-info svelte-172i2fj"><div class="header svelte-172i2fj"><h2 class="svelte-172i2fj">Character Info</h2> <button class="collapse-btn svelte-172i2fj"> </button></div> <!></section>');function Ja(t,l){Ee(l,!1);const a=()=>me(P,"$character",s),[s,d]=Be(),p=Ga();let o=I(!1);function v(f){const _=f.target;P.update(S=>(S.class=_.value,S))}function c(f){const _=f.target;P.update(S=>(S.level=parseInt(_.value)||1,S)),ea()}function m(){u(o,!e(o))}Fe();var h=za(),T=n(h),g=i(n(T),2),L=n(g,!0);r(g),r(T);var V=i(T,2);{var M=f=>{var _=qa(),S=n(_),H=i(n(S),2);X(H),r(S);var F=i(S,2),G=i(n(F),2),C=n(G);C.value=C.__value="";var w=i(C);Je(w,1,()=>p,Ye,(W,Y)=>{var K=Ba(),$=n(K,!0);r(K);var z={};re(()=>{ee($,e(Y).name),z!==(z=e(Y).id)&&(K.value=(K.__value=e(Y).id)??"")}),A(W,K)}),r(G);var U;Ra(G),r(F);var O=i(F,2),q=i(n(O),2);X(q),r(O);var J=i(O,2),te=i(n(J),2);X(te),r(J);var k=i(J,2),y=i(n(k),2);X(y),r(k);var j=i(k,2),ae=i(n(j),2);X(ae),r(j),r(_),re(()=>{U!==(U=a().class)&&(G.value=(G.__value=a().class)??"",Kt(G,a().class)),Zt(q,a().level)}),Q(H,()=>a().name,W=>fe(P,b(a).name=W,b(a))),N("change",G,v),N("change",q,c),Q(te,()=>a().race,W=>fe(P,b(a).race=W,b(a))),Q(y,()=>a().background,W=>fe(P,b(a).background=W,b(a))),Q(ae,()=>a().alignment,W=>fe(P,b(a).alignment=W,b(a))),A(f,_)};ce(V,f=>{e(o)||f(M)})}r(h),re(()=>{we(g,"aria-label",e(o)?"Expand":"Collapse"),ee(L,e(o)?"▼":"▲")}),N("click",g,m),A(t,h),Ie(),d()}var Va=R('<div class="ability-card svelte-bbv1xt"><h3 class="svelte-bbv1xt"> </h3> <input type="number" class="ability-score svelte-bbv1xt" min="1" max="30"/> <div class="ability-modifier svelte-bbv1xt"> </div> <button class="roll-btn svelte-bbv1xt">Check</button> <div class="save-row svelte-bbv1xt"><input type="checkbox" class="svelte-bbv1xt"/> <label class="svelte-bbv1xt">Save</label> <button class="roll-btn-small svelte-bbv1xt">Roll</button></div></div>'),Wa=R('<div class="proficiency-bonus svelte-bbv1xt"><label for="profBonus">Proficiency Bonus</label> <input type="number" id="profBonus" class="prof-input svelte-bbv1xt"/></div> <div class="abilities-grid svelte-bbv1xt"></div>',1),Ya=R('<section><div class="header svelte-bbv1xt"><h2 class="svelte-bbv1xt">Ability Scores</h2> <button class="collapse-btn svelte-bbv1xt"> </button></div> <!></section>');function Xa(t,l){Ee(l,!1);const a=()=>me(Dt,"$abilityModifiers",p),s=()=>me(P,"$character",p),d=()=>me(Ve,"$searchFilter",p),[p,o]=Be(),v=I(),c=I(),m=lt();let h=I(!1);const T=[{key:"strength",label:"Strength"},{key:"dexterity",label:"Dexterity"},{key:"constitution",label:"Constitution"},{key:"intelligence",label:"Intelligence"},{key:"wisdom",label:"Wisdom"},{key:"charisma",label:"Charisma"}];function g(){ea()}function L(w){const U=a()[w],O=`1d20${U>=0?"+":""}${U}`;m("roll",O)}function V(w){const U=a()[w],O=s().saveProficiencies[w]?s().proficiencyBonus:0,q=U+O,J=`1d20${q>=0?"+":""}${q}`;m("roll",J)}function M(){u(h,!e(h))}xe(()=>d(),()=>{u(v,T.filter(({label:w})=>d()?w.toLowerCase().includes(d().toLowerCase()):!0))}),xe(()=>(e(v),d()),()=>{u(c,e(v).length>0||!d()||d().toLowerCase().includes("proficiency"))}),Xe(),Fe();var f=Ya();let _;var S=n(f),H=i(n(S),2),F=n(H,!0);r(H),r(S);var G=i(S,2);{var C=w=>{var U=Wa(),O=je(U),q=i(n(O),2);X(q),r(O);var J=i(O,2);Je(J,5,()=>e(v),Ye,(te,k)=>{let y=()=>e(k).key,j=()=>e(k).label;var ae=Va(),W=n(ae),Y=n(W,!0);r(W);var K=i(W,2);X(K);var $=i(K,2),z=n($);r($);var oe=i($,2),ie=i(oe,2),ne=n(ie);X(ne);var pe=i(ne,2),se=i(pe,2);r(ie),r(ae),re(Ce=>{ee(Y,Ce),ee(z,`${a(),y(),b(()=>a()[y()]>=0?"+":"")??""}${a(),y(),b(()=>a()[y()])??""}`),we(ne,"id",`${y()}-save`),we(pe,"for",`${y()}-save`)},[()=>(j(),b(()=>j().substring(0,3).toUpperCase()))]),Q(K,()=>s().abilities[y()],Ce=>fe(P,b(s).abilities[y()]=Ce,b(s))),N("change",K,g),N("click",oe,()=>L(y())),jt(ne,()=>s().saveProficiencies[y()],Ce=>fe(P,b(s).saveProficiencies[y()]=Ce,b(s))),N("click",se,()=>V(y())),A(te,ae)}),r(J),Q(q,()=>s().proficiencyBonus,te=>fe(P,b(s).proficiencyBonus=te,b(s))),A(w,U)};ce(G,w=>{e(h)||w(C)})}r(f),re(()=>{_=Ge(f,1,"ability-scores svelte-bbv1xt",null,_,{hidden:!e(c)}),we(H,"aria-label",e(h)?"Expand":"Collapse"),ee(F,e(h)?"▼":"▲")}),N("click",H,M),A(t,f),Ie(),o()}var Za=R('<div class="stats-grid svelte-1r5hyyb"><div class="stat-box svelte-1r5hyyb"><label for="armorClass" class="svelte-1r5hyyb">Armor Class</label> <input type="number" id="armorClass" class="stat-input svelte-1r5hyyb"/></div> <div class="stat-box svelte-1r5hyyb"><label for="initiative" class="svelte-1r5hyyb">Initiative</label> <input type="number" id="initiative" class="stat-input svelte-1r5hyyb"/></div> <div class="stat-box svelte-1r5hyyb"><label for="speed" class="svelte-1r5hyyb">Speed</label> <input type="text" id="speed" class="stat-input svelte-1r5hyyb"/></div></div> <div class="hp-section svelte-1r5hyyb"><h3 class="svelte-1r5hyyb">Hit Points</h3> <div class="hp-display svelte-1r5hyyb"><div class="hp-inputs svelte-1r5hyyb"><input type="number" class="hp-current svelte-1r5hyyb" min="0"/> <span class="hp-separator svelte-1r5hyyb">/</span> <input type="number" class="hp-max svelte-1r5hyyb" min="0"/></div> <div class="hp-controls svelte-1r5hyyb"><button class="hp-btn svelte-1r5hyyb">−</button> <button class="hp-btn svelte-1r5hyyb">+</button> <button class="hp-btn svelte-1r5hyyb">−5</button> <button class="hp-btn svelte-1r5hyyb">+5</button></div></div> <div class="temp-hp svelte-1r5hyyb"><label for="tempHP" class="svelte-1r5hyyb">Temp HP</label> <input type="number" id="tempHP" min="0" class="svelte-1r5hyyb"/></div></div> <div class="hit-dice-section svelte-1r5hyyb"><h3 class="svelte-1r5hyyb">Hit Dice</h3> <div class="hit-dice-display svelte-1r5hyyb"><input type="number" class="hit-dice-input svelte-1r5hyyb" min="0"/> <span>/</span> <input type="number" class="hit-dice-input svelte-1r5hyyb" min="0"/></div></div>',1),Ka=R('<section><div class="header svelte-1r5hyyb"><h2 class="svelte-1r5hyyb">Combat Stats</h2> <button class="collapse-btn svelte-1r5hyyb"> </button></div> <!></section>');function Qa(t,l){Ee(l,!1);const a=()=>me(Ve,"$searchFilter",d),s=()=>me(P,"$character",d),[d,p]=Be(),o=I();let v=I(!1);function c(_){P.update(S=>(S.currentHP=Math.max(0,Math.min(S.maxHP,S.currentHP+_)),S))}function m(){u(v,!e(v))}xe(()=>a(),()=>{u(o,!a()||"armor class".includes(a().toLowerCase())||"initiative".includes(a().toLowerCase())||"speed".includes(a().toLowerCase())||"hit points".includes(a().toLowerCase())||"hp".includes(a().toLowerCase())||"hit dice".includes(a().toLowerCase())||"combat".includes(a().toLowerCase()))}),Xe(),Fe();var h=Ka();let T;var g=n(h),L=i(n(g),2),V=n(L,!0);r(L),r(g);var M=i(g,2);{var f=_=>{var S=Za(),H=je(S),F=n(H),G=i(n(F),2);X(G),r(F);var C=i(F,2),w=i(n(C),2);X(w),r(C);var U=i(C,2),O=i(n(U),2);X(O),r(U),r(H);var q=i(H,2),J=i(n(q),2),te=n(J),k=n(te);X(k);var y=i(k,4);X(y),r(te);var j=i(te,2),ae=n(j),W=i(ae,2),Y=i(W,2),K=i(Y,2);r(j),r(J);var $=i(J,2),z=i(n($),2);X(z),r($),r(q);var oe=i(q,2),ie=i(n(oe),2),ne=n(ie);X(ne);var pe=i(ne,4);X(pe),r(ie),r(oe),re(()=>{we(k,"max",(s(),b(()=>s().maxHP))),we(ne,"max",(s(),b(()=>s().hitDice.max)))}),Q(G,()=>s().armorClass,se=>fe(P,b(s).armorClass=se,b(s))),Q(w,()=>s().initiative,se=>fe(P,b(s).initiative=se,b(s))),Q(O,()=>s().speed,se=>fe(P,b(s).speed=se,b(s))),Q(k,()=>s().currentHP,se=>fe(P,b(s).currentHP=se,b(s))),Q(y,()=>s().maxHP,se=>fe(P,b(s).maxHP=se,b(s))),N("click",ae,()=>c(-1)),N("click",W,()=>c(1)),N("click",Y,()=>c(-5)),N("click",K,()=>c(5)),Q(z,()=>s().tempHP,se=>fe(P,b(s).tempHP=se,b(s))),Q(ne,()=>s().hitDice.current,se=>fe(P,b(s).hitDice.current=se,b(s))),Q(pe,()=>s().hitDice.max,se=>fe(P,b(s).hitDice.max=se,b(s))),A(_,S)};ce(M,_=>{e(v)||_(f)})}r(h),re(()=>{T=Ge(h,1,"combat-stats svelte-1r5hyyb",null,T,{hidden:!e(o)}),we(L,"aria-label",e(v)?"Expand":"Collapse"),ee(V,e(v)?"▼":"▲")}),N("click",L,m),A(t,h),Ie(),p()}const _t={acrobatics:"dexterity",animalHandling:"wisdom",arcana:"intelligence",athletics:"strength",deception:"charisma",history:"intelligence",insight:"wisdom",intimidation:"charisma",investigation:"intelligence",medicine:"wisdom",nature:"intelligence",perception:"wisdom",performance:"charisma",persuasion:"charisma",religion:"intelligence",sleightOfHand:"dexterity",stealth:"dexterity",survival:"wisdom"};var es=R('<div class="skill-row svelte-1f1pl16"><input type="checkbox" class="svelte-1f1pl16"/> <label class="svelte-1f1pl16"> <span class="ability-tag svelte-1f1pl16"> </span></label> <span class="skill-modifier svelte-1f1pl16"> </span> <button class="roll-btn svelte-1f1pl16">Roll</button></div>'),ts=R('<div class="skills-grid svelte-1f1pl16"></div>'),as=R('<section><div class="header svelte-1f1pl16"><h2 class="svelte-1f1pl16">Skills</h2> <button class="collapse-btn svelte-1f1pl16"> </button></div> <!></section>');function ss(t,l){Ee(l,!1);const a=()=>me(Dt,"$abilityModifiers",p),s=()=>me(P,"$character",p),d=()=>me(Ve,"$searchFilter",p),[p,o]=Be(),v=I(),c=I(),m=lt();let h=I(!1);const T=[{key:"acrobatics",label:"Acrobatics"},{key:"animalHandling",label:"Animal Handling"},{key:"arcana",label:"Arcana"},{key:"athletics",label:"Athletics"},{key:"deception",label:"Deception"},{key:"history",label:"History"},{key:"insight",label:"Insight"},{key:"intimidation",label:"Intimidation"},{key:"investigation",label:"Investigation"},{key:"medicine",label:"Medicine"},{key:"nature",label:"Nature"},{key:"perception",label:"Perception"},{key:"performance",label:"Performance"},{key:"persuasion",label:"Persuasion"},{key:"religion",label:"Religion"},{key:"sleightOfHand",label:"Sleight of Hand"},{key:"stealth",label:"Stealth"},{key:"survival",label:"Survival"}];function g(C){const w=_t[C],U=a()[w],O=s().skillProficiencies[C]?s().proficiencyBonus:0;return U+O}function L(C){const w=g(C),U=`1d20${w>=0?"+":""}${w}`;m("roll",U)}function V(){u(h,!e(h))}xe(()=>d(),()=>{u(v,T.filter(({label:C})=>d()?C.toLowerCase().includes(d().toLowerCase()):!0))}),xe(()=>e(v),()=>{u(c,e(v).length>0)}),Xe(),Fe();var M=as();let f;var _=n(M),S=i(n(_),2),H=n(S,!0);r(S),r(_);var F=i(_,2);{var G=C=>{var w=ts();Je(w,5,()=>e(v),Ye,(U,O)=>{let q=()=>e(O).key,J=()=>e(O).label;const te=Oe(()=>(ze(_t),q(),b(()=>_t[q()]))),k=Oe(()=>(q(),b(()=>g(q()))));var y=es(),j=n(y);X(j);var ae=i(j,2),W=n(ae),Y=i(W),K=n(Y);r(Y),r(ae);var $=i(ae,2),z=n($);r($);var oe=i($,2);r(y),re(ie=>{we(j,"id",q()),we(ae,"for",q()),ee(W,`${J()??""} `),ee(K,`(${ie??""})`),ee(z,`${e(k)>=0?"+":""}${e(k)??""}`)},[()=>(ze(e(te)),b(()=>e(te).substring(0,3).toUpperCase()))]),jt(j,()=>s().skillProficiencies[q()],ie=>fe(P,b(s).skillProficiencies[q()]=ie,b(s))),N("click",oe,()=>L(q())),A(U,y)}),r(w),A(C,w)};ce(F,C=>{e(h)||C(G)})}r(M),re(()=>{f=Ge(M,1,"skills svelte-1f1pl16",null,f,{hidden:!e(c)}),we(S,"aria-label",e(h)?"Expand":"Collapse"),ee(H,e(h)?"▼":"▲")}),N("click",S,V),A(t,M),Ie(),o()}var ls=R('<div class="attack-card svelte-14o91c5"><div class="attack-header svelte-14o91c5"><input type="text" placeholder="Attack name" class="attack-name svelte-14o91c5"/> <button class="btn-remove svelte-14o91c5">×</button></div> <div class="attack-details svelte-14o91c5"><div class="attack-field svelte-14o91c5"><label class="svelte-14o91c5">Bonus</label> <input type="number" class="attack-bonus svelte-14o91c5"/></div> <div class="attack-field svelte-14o91c5"><label class="svelte-14o91c5">Damage</label> <input type="text" placeholder="e.g., 2d6+3" class="attack-damage svelte-14o91c5"/></div> <div class="attack-field svelte-14o91c5"><label class="svelte-14o91c5">Type</label> <input type="text" placeholder="e.g., slashing" class="attack-type svelte-14o91c5"/></div></div> <div class="attack-actions svelte-14o91c5"><button class="btn btn-primary">Roll Attack</button> <button class="btn btn-secondary">Roll Damage</button></div></div>'),is=R('<p class="no-attacks svelte-14o91c5">No attacks added yet. Click "Add Attack" to create one.</p>'),rs=R('<p class="no-attacks svelte-14o91c5">No attacks match your search.</p>'),ns=R('<button class="btn btn-secondary">Add Attack</button> <div class="attacks-list svelte-14o91c5"><!> <!></div>',1),os=R('<section><div class="header svelte-14o91c5"><h2 class="svelte-14o91c5">Attacks & Spells</h2> <button class="collapse-btn svelte-14o91c5"> </button></div> <!></section>');function cs(t,l){Ee(l,!1);const a=()=>me(P,"$character",d),s=()=>me(Ve,"$searchFilter",d),[d,p]=Be(),o=I(),v=I(),c=lt();let m=I(!1);function h(){P.update(C=>(C.attacks=[...C.attacks,{id:crypto.randomUUID(),name:"",bonus:0,damage:"",damageType:""}],C))}function T(C){P.update(w=>(w.attacks=w.attacks.filter(U=>U.id!==C),w))}function g(C){const w=`1d20${C.bonus>=0?"+":""}${C.bonus}`;c("roll",{notation:w,damageNotation:C.damage,attackName:C.name})}function L(C){if(!C.damage){alert(`${C.name}: No damage specified`);return}c("roll",{notation:C.damage})}function V(){u(m,!e(m))}xe(()=>(a(),s()),()=>{u(o,a().attacks.filter(C=>{if(!s())return!0;const w=s().toLowerCase();return C.name.toLowerCase().includes(w)||C.damageType.toLowerCase().includes(w)}))}),xe(()=>(s(),e(o)),()=>{u(v,!s()||e(o).length>0||"attack".includes(s().toLowerCase())||"spell".includes(s().toLowerCase()))}),Xe(),Fe();var M=os();let f;var _=n(M),S=i(n(_),2),H=n(S,!0);r(S),r(_);var F=i(_,2);{var G=C=>{var w=ns(),U=je(w),O=i(U,2),q=n(O);Je(q,1,()=>e(o),y=>y.id,(y,j,ae)=>{var W=ls(),Y=n(W),K=n(Y);X(K);var $=i(K,2);r(Y);var z=i(Y,2),oe=n(z),ie=i(n(oe),2);X(ie),r(oe);var ne=i(oe,2),pe=i(n(ne),2);X(pe),r(ne);var se=i(ne,2),Ce=i(n(se),2);X(Ce),r(se),r(z);var x=i(z,2),D=n(x),Z=i(D,2);r(x),r(W),Q(K,()=>e(j).name,B=>(e(j).name=B,rt(()=>(e(o),a(),s())))),N("click",$,()=>T(e(j).id)),Q(ie,()=>e(j).bonus,B=>(e(j).bonus=B,rt(()=>(e(o),a(),s())))),Q(pe,()=>e(j).damage,B=>(e(j).damage=B,rt(()=>(e(o),a(),s())))),Q(Ce,()=>e(j).damageType,B=>(e(j).damageType=B,rt(()=>(e(o),a(),s())))),N("click",D,()=>g(e(j))),N("click",Z,()=>L(e(j))),A(y,W)});var J=i(q,2);{var te=y=>{var j=is();A(y,j)},k=y=>{var j=tt(),ae=je(j);{var W=Y=>{var K=rs();A(Y,K)};ce(ae,Y=>{e(o),b(()=>e(o).length===0)&&Y(W)},!0)}A(y,j)};ce(J,y=>{a(),b(()=>a().attacks.length===0)?y(te):y(k,!1)})}r(O),N("click",U,h),A(C,w)};ce(F,C=>{e(m)||C(G)})}r(M),re(()=>{f=Ge(M,1,"attacks svelte-14o91c5",null,f,{hidden:!e(v)}),we(S,"aria-label",e(m)?"Expand":"Collapse"),ee(H,e(m)?"▼":"▲")}),N("click",S,V),A(t,M),Ie(),p()}var vs=R('<p class="no-features svelte-1kpvv0n">Select a class to see available features</p>'),ds=R('<p class="no-features svelte-1kpvv0n">No class features available at this level</p>'),us=R('<input type="checkbox" class="slot-checkbox svelte-1kpvv0n"/>'),ps=R('<div class="spell-slots svelte-1kpvv0n"><label class="svelte-1kpvv0n">1st Level Spell Slots</label> <div class="slots-tracker svelte-1kpvv0n"><!> <button class="btn-small svelte-1kpvv0n">Long Rest</button></div></div>'),fs=R('<div class="feature-box spellcasting svelte-1kpvv0n"><h3 class="svelte-1kpvv0n"> </h3> <div class="spell-stats svelte-1kpvv0n"><div class="spell-stat svelte-1kpvv0n"><label class="svelte-1kpvv0n">Spell Save DC</label> <div class="spell-value svelte-1kpvv0n"> </div></div> <div class="spell-stat svelte-1kpvv0n"><label class="svelte-1kpvv0n">Prepared Spells</label> <div class="spell-value svelte-1kpvv0n"> </div></div></div> <!> <div class="prepared-spells svelte-1kpvv0n"><label class="svelte-1kpvv0n">Prepared Spells</label> <textarea placeholder="List your prepared spells..." class="svelte-1kpvv0n"></textarea></div></div>'),bs=R('<p class="unlimited svelte-1kpvv0n">Unlimited Uses</p>'),hs=R('<input type="checkbox" class="use-checkbox svelte-1kpvv0n"/>'),ms=R('<input type="checkbox" class="use-checkbox svelte-1kpvv0n"/>'),gs=R('<!> <button class="btn-small svelte-1kpvv0n"> </button>',1),_s=R('<div class="uses-tracker svelte-1kpvv0n"><!></div>'),ys=R('<div class="pool-tracker svelte-1kpvv0n"><input type="number" min="0" class="pool-input svelte-1kpvv0n"/> <span> </span> <button class="btn-small svelte-1kpvv0n"> </button></div>'),ks=R('<div class="feature-box svelte-1kpvv0n"><h3 class="svelte-1kpvv0n"> </h3> <p class="feature-description svelte-1kpvv0n"> </p> <!></div>'),xs=R('<div class="features-grid svelte-1kpvv0n"><!> <!></div>'),Cs=R('<section><div class="header svelte-1kpvv0n"><h2 class="svelte-1kpvv0n">Class Features</h2> <button class="collapse-btn svelte-1kpvv0n"> </button></div> <!></section>');function $s(t,l){Ee(l,!1);const a=()=>me(P,"$character",p),s=()=>me(Dt,"$abilityModifiers",p),d=()=>me(Ve,"$searchFilter",p),[p,o]=Be(),v=I(),c=I(),m=I(),h=I(),T=I();let g=I(!1),L=I(0),V=I(0);function M(k,y){P.update(j=>(j.classFeatures.features[k]||(j.classFeatures.features[k]=[]),j.classFeatures.features[k]=Array(y).fill(!1),j))}function f(k,y){P.update(j=>(j.classFeatures.features[k]=y,j))}function _(){P.update(k=>(k.classFeatures.spellSlots=Array(e(m)).fill(!1),k))}function S(k){if(typeof k.maxUses=="function"){if(k.name==="Divine Sense"&&e(v)?.spellcastingAbility){const y=s()[e(v).spellcastingAbility];return k.maxUses(a().level,y)}return k.maxUses(a().level)}return k.maxUses||0}function H(k){return typeof k.maxPool=="function"?k.maxPool(a().level):k.maxPool||0}function F(k){return typeof k.description=="function"?k.description(a().level):k.description}function G(){u(g,!e(g))}xe(()=>(a(),et),()=>{u(v,a().class?et(a().class):null)}),xe(()=>(a(),Ht),()=>{u(c,a().class?Ht(a().class,a().level):[])}),xe(()=>(a(),Ut),()=>{u(m,a().class?Ut(a().class,a().level):0)}),xe(()=>(e(v),s(),a(),Ot),()=>{if(e(v)?.spellcaster&&e(v).spellcastingAbility){const k=s()[e(v).spellcastingAbility];u(L,Oa(a().class,k,a().proficiencyBonus)||0),u(V,Ot(a().class,a().level,k))}}),xe(()=>(e(c),d()),()=>{u(h,e(c).filter(k=>{if(!d())return!0;const y=d().toLowerCase();return k.name.toLowerCase().includes(y)||F(k).toLowerCase().includes(y)}))}),xe(()=>(d(),a(),e(h)),()=>{u(T,!d()||a().class||"class features".includes(d().toLowerCase())||"spellcasting".includes(d().toLowerCase())||e(h).length>0)}),Xe(),Fe();var C=Cs();let w;var U=n(C),O=i(n(U),2),q=n(O,!0);r(O),r(U);var J=i(U,2);{var te=k=>{var y=tt(),j=je(y);{var ae=Y=>{var K=vs();A(Y,K)},W=Y=>{var K=tt(),$=je(K);{var z=ie=>{var ne=ds();A(ie,ne)},oe=ie=>{var ne=xs(),pe=n(ne);{var se=x=>{var D=fs(),Z=n(D),B=n(Z);r(Z);var E=i(Z,2),ve=n(E),ge=i(n(ve),2),be=n(ge,!0);r(ge),r(ve);var Me=i(ve,2),$e=i(n(Me),2),Ne=n($e,!0);r($e),r(Me),r(E);var De=i(E,2);{var qe=he=>{var le=ps(),ue=i(n(le),2),ke=n(ue);Je(ke,1,()=>(e(m),b(()=>Array(e(m)))),Ye,(_e,Se,Te)=>{var Pe=us();X(Pe),jt(Pe,()=>a().classFeatures.spellSlots[Te],We=>fe(P,b(a).classFeatures.spellSlots[Te]=We,b(a))),A(_e,Pe)});var de=i(ke,2);r(ue),r(le),N("click",de,_),A(he,le)};ce(De,he=>{e(m)>0&&he(qe)})}var Re=i(De,2),ye=i(n(Re),2);ot(ye),r(Re),r(D),re(he=>{ee(B,`Spellcasting (${he??""})`),ee(be,e(L)),ee(Ne,e(V))},[()=>(e(v),b(()=>e(v).spellcastingAbility?.toUpperCase()))]),Q(ye,()=>a().classFeatures.preparedSpells,he=>fe(P,b(a).classFeatures.preparedSpells=he,b(a))),A(x,D)};ce(pe,x=>{e(v),b(()=>e(v)?.spellcaster)&&x(se)})}var Ce=i(pe,2);Je(Ce,1,()=>e(h),Ye,(x,D)=>{const Z=Oe(()=>(e(D),b(()=>e(D).name.replace(/\s+/g,"")))),B=Oe(()=>(a(),ze(e(Z)),b(()=>a().classFeatures.features[e(Z)]))),E=Oe(()=>(ze(e(B)),b(()=>Array.isArray(e(B))))),ve=Oe(()=>typeof e(B)=="number");var ge=ks(),be=n(ge),Me=n(be,!0);r(be);var $e=i(be,2),Ne=n($e,!0);r($e);var De=i($e,2);{var qe=ye=>{const he=Oe(()=>(e(D),b(()=>S(e(D)))));var le=_s(),ue=n(le);{var ke=_e=>{var Se=bs();A(_e,Se)},de=_e=>{var Se=gs(),Te=je(Se);Je(Te,1,()=>(ze(e(he)),b(()=>Array(e(he)))),Ye,(vt,At,Ze)=>{var Ft=tt(),ta=je(Ft);{var aa=Ke=>{var He=hs();X(He),re(()=>Rt(He,(ze(e(B)),b(()=>e(B)&&e(B)[Ze]||!1)))),N("change",He,dt=>{P.update(Ue=>{Ue.classFeatures.features[e(Z)]||(Ue.classFeatures.features[e(Z)]=[]);const ut=Ue.classFeatures.features[e(Z)];return ut[Ze]=dt.currentTarget.checked,Ue})}),A(Ke,He)},sa=Ke=>{var He=ms();X(He),Rt(He,!1),N("change",He,dt=>{P.update(Ue=>{Ue.classFeatures.features[e(Z)]||(Ue.classFeatures.features[e(Z)]=[]);const ut=Ue.classFeatures.features[e(Z)];return ut[Ze]=dt.currentTarget.checked,Ue})}),A(Ke,He)};ce(ta,Ke=>{e(E)?Ke(aa):Ke(sa,!1)})}A(vt,Ft)});var Pe=i(Te,2),We=n(Pe,!0);r(Pe),re(()=>ee(We,(e(D),b(()=>e(D).resetOn==="short"?"Short Rest":"Long Rest")))),N("click",Pe,()=>M(e(Z),e(he))),A(_e,Se)};ce(ue,_e=>{e(he)===1/0?_e(ke):_e(de,!1)})}r(le),A(ye,le)},Re=ye=>{var he=tt(),le=je(he);{var ue=ke=>{const de=Oe(()=>(e(D),b(()=>H(e(D)))));var _e=ys(),Se=n(_e);X(Se);var Te=i(Se,2),Pe=n(Te);r(Te);var We=i(Te,2),vt=n(We,!0);r(We),r(_e),re(()=>{Zt(Se,e(ve)&&e(B)!==void 0?e(B):e(de)),we(Se,"max",e(de)),ee(Pe,`/ ${e(de)??""}`),ee(vt,(e(D),b(()=>e(D).resetOn==="short"?"Short Rest":"Long Rest")))}),N("input",Se,At=>{P.update(Ze=>(Ze.classFeatures.features[e(Z)]=parseInt(At.currentTarget.value)||0,Ze))}),N("click",We,()=>f(e(Z),e(de))),A(ke,_e)};ce(le,ke=>{e(D),b(()=>e(D).type==="pool")&&ke(ue)},!0)}A(ye,he)};ce(De,ye=>{e(D),b(()=>e(D).type==="uses")?ye(qe):ye(Re,!1)})}r(ge),re(ye=>{ee(Me,(e(D),b(()=>e(D).name))),ee(Ne,ye)},[()=>(e(D),b(()=>F(e(D))))]),A(x,ge)}),r(ne),A(ie,ne)};ce($,ie=>{e(c),b(()=>e(c).length===0)?ie(z):ie(oe,!1)},!0)}A(Y,K)};ce(j,Y=>{a(),b(()=>!a().class)?Y(ae):Y(W,!1)})}A(k,y)};ce(J,k=>{e(g)||k(te)})}r(C),re(()=>{w=Ge(C,1,"class-features svelte-1kpvv0n",null,w,{hidden:!e(T)}),we(O,"aria-label",e(g)?"Expand":"Collapse"),ee(q,e(g)?"▼":"▲")}),N("click",O,G),A(t,C),Ie(),o()}var ws=R('<textarea placeholder="Enter features, traits, and special abilities..." class="svelte-wttn0l"></textarea> <h3 class="svelte-wttn0l">Equipment</h3> <textarea placeholder="List your equipment and inventory..." class="svelte-wttn0l"></textarea> <h3 class="svelte-wttn0l">Notes</h3> <textarea placeholder="Additional notes..." class="svelte-wttn0l"></textarea>',1),Ss=R('<section><div class="header svelte-wttn0l"><h2 class="svelte-wttn0l">Features & Traits</h2> <button class="collapse-btn svelte-wttn0l"> </button></div> <!></section>');function js(t,l){Ee(l,!1);const a=()=>me(Ve,"$searchFilter",d),s=()=>me(P,"$character",d),[d,p]=Be(),o=I();let v=I(!1);function c(){u(v,!e(v))}xe(()=>(a(),s()),()=>{u(o,!a()||"features".includes(a().toLowerCase())||"traits".includes(a().toLowerCase())||"equipment".includes(a().toLowerCase())||"notes".includes(a().toLowerCase())||s().features.toLowerCase().includes(a().toLowerCase())||s().equipment.toLowerCase().includes(a().toLowerCase())||s().notes.toLowerCase().includes(a().toLowerCase()))}),Xe(),Fe();var m=Ss();let h;var T=n(m),g=i(n(T),2),L=n(g,!0);r(g),r(T);var V=i(T,2);{var M=f=>{var _=ws(),S=je(_);ot(S);var H=i(S,4);ot(H);var F=i(H,4);ot(F),Q(S,()=>s().features,G=>fe(P,b(s).features=G,b(s))),Q(H,()=>s().equipment,G=>fe(P,b(s).equipment=G,b(s))),Q(F,()=>s().notes,G=>fe(P,b(s).notes=G,b(s))),A(f,_)};ce(V,f=>{e(v)||f(M)})}r(m),re(()=>{h=Ge(m,1,"notes svelte-wttn0l",null,h,{hidden:!e(o)}),we(g,"aria-label",e(v)?"Expand":"Collapse"),ee(L,e(v)?"▼":"▲")}),N("click",g,c),A(t,m),Ie(),p()}var Ds=R('<div class="loading svelte-1r90jgp"><p class="svelte-1r90jgp">Loading 3D dice...</p></div>'),Ls=R('<div class="custom-dice-selector svelte-1r90jgp"><h3 class="svelte-1r90jgp">Choose Dice to Roll</h3> <div class="dice-inputs svelte-1r90jgp"><div class="dice-input-group svelte-1r90jgp"><label for="d4" class="svelte-1r90jgp">d4</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d4" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d6" class="svelte-1r90jgp">d6</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d6" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d8" class="svelte-1r90jgp">d8</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d8" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d10" class="svelte-1r90jgp">d10</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d10" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d12" class="svelte-1r90jgp">d12</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d12" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d20" class="svelte-1r90jgp">d20</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d20" min="0" max="10"/></div></div> <div class="dice-controls svelte-1r90jgp"><button class="btn btn-primary use-enabled svelte-1r90jgp"> </button> <button class="btn btn-secondary use-enabled svelte-1r90jgp">Reset</button></div></div>'),As=R('<span class="crit-badge svelte-1r90jgp">CRITICAL!</span>'),Fs=R('<p class="svelte-1r90jgp"> </p>'),Es=R('<p class="modifier-text svelte-1r90jgp"> </p>'),Is=R('<button class="btn btn-follow-up svelte-1r90jgp"> </button>'),Ms=R('<div class="follow-up-actions svelte-1r90jgp"></div>'),Ns=R('<div class="result-header svelte-1r90jgp"><h3 class="svelte-1r90jgp"> </h3> <!></div> <div class="result-total svelte-1r90jgp"> </div> <div class="result-details svelte-1r90jgp"><!> <!></div> <!>',1),Rs=R('<div role="button" tabindex="-1"><div class="modal-content svelte-1r90jgp" role="dialog" tabindex="0"><div class="modal-header svelte-1r90jgp"><h2 class="svelte-1r90jgp">Dice Roller</h2> <button class="close-btn svelte-1r90jgp">×</button></div> <!> <div class="dice-main-area svelte-1r90jgp"><div class="dice-container svelte-1r90jgp"></div> <!></div> <div><!></div></div></div>');function Ts(t,l){Ee(l,!1);const a=I(),s=lt();let d=at(l,"notation",12,""),p=at(l,"visible",8,!1),o=at(l,"damageNotation",12,""),v=at(l,"attackName",12,""),c=null,m=I(void 0),h=I(!1),T=I(""),g=I(null),L=I(0),V=I(0),M=I(0),f=I(0),_=I(0),S=I(0),H=I(0),F=I([]),G=I(!1);function C(){if(window.DICE&&e(m))try{c&&e(m)&&ja(m,e(m).innerHTML="");const x=e(m).clientWidth||500,D=e(m).clientHeight||300;c=new window.DICE.dice_box(e(m),{w:x,h:D}),u(h,!0),console.log(`Dice box initialized with dimensions: ${x}x${D}`)}catch(x){console.error("Error initializing dice box:",x)}}Bt(()=>{const x=B=>new Promise((E,ve)=>{if(document.querySelector(`script[src="${B}"]`)){console.log(`Script already loaded: ${B}`),E(null);return}const be=document.createElement("script");be.src=B,be.onload=()=>{console.log(`Loaded: ${B}`),E(null)},be.onerror=()=>{console.error(`Failed to load: ${B}`),ve(new Error(`Failed to load ${B}`))},document.head.appendChild(be)});setTimeout(()=>{x(`${nt}/libs/three.min.js`).then(()=>x(`${nt}/libs/cannon.min.js`)).then(()=>x(`${nt}/libs/teal.js`)).then(()=>x(`${nt}/dice.js`)).then(()=>{console.log("All scripts loaded, initializing dice box..."),console.log("DICE available:",!!window.DICE),console.log("Container available:",!!e(m)),C()}).catch(B=>{console.error("Failed to load dice libraries:",B)})},100);const D=()=>{e(h)&&(console.log("Window resized, reinitializing dice box..."),C())},Z=B=>{p()&&B.key==="Escape"&&te()};return window.addEventListener("resize",D),window.addEventListener("keydown",Z),()=>{window.removeEventListener("resize",D),window.removeEventListener("keydown",Z)}});function w(x,D="other"){if(!c||!e(h))return;console.log("Rolling dice:",x,"type:",D),c.diceToRoll=x;const Z=E=>(console.log("Before roll:",E),null),B=E=>{if(console.log("After roll:",E),console.log("Result:",E.resultTotal),u(g,E),D==="attack"||D==="check"||D==="save"){const ve=E.results?.filter(ge=>ge.sides===20)||[];if(ve.length>0){const ge=ve[0].value;u(G,ge===20)}}if(u(F,[]),D==="attack"&&o())if(e(G)){const ve=q(o());e(F).push({label:`Roll Critical Damage (${ve})`,notation:ve})}else e(F).push({label:`Roll Damage (${o()})`,notation:o()})};c.start_throw(Z,B)}function U(){const x=[];e(L)>0&&x.push(`${e(L)}d4`),e(V)>0&&x.push(`${e(V)}d6`),e(M)>0&&x.push(`${e(M)}d8`),e(f)>0&&x.push(`${e(f)}d10`),e(_)>0&&x.push(`${e(_)}d12`),e(S)>0&&x.push(`${e(S)}d20`);let D=x.join("+")||"1d20";return e(H)!==0&&(D+=e(H)>=0?`+${e(H)}`:`${e(H)}`),D}function O(){const x=U();w(x)}function q(x){return x.replace(/(\d+)d(\d+)/g,(D,Z,B)=>`${parseInt(Z)*2}d${B}`)}function J(){u(L,0),u(V,0),u(M,0),u(f,0),u(_,0),u(S,0),u(H,0),u(g,null),u(F,[]),u(G,!1)}function te(){s("close"),d(""),o(""),v(""),u(T,""),u(g,null),J()}xe(()=>(e(L),e(V),e(M),e(f),e(_),e(S),e(H)),()=>{u(a,(()=>{const x=[];e(L)>0&&x.push(`${e(L)}d4`),e(V)>0&&x.push(`${e(V)}d6`),e(M)>0&&x.push(`${e(M)}d8`),e(f)>0&&x.push(`${e(f)}d10`),e(_)>0&&x.push(`${e(_)}d12`),e(S)>0&&x.push(`${e(S)}d20`);let D=x.join("+")||"1d20";return e(H)!==0&&(D+=e(H)>=0?`+${e(H)}`:`${e(H)}`),D})())}),xe(()=>(ze(d()),e(h),ze(p())),()=>{if(d()&&e(h)&&p()){u(T,d()),u(g,null),u(F,[]),u(G,!1);const x=d().includes("1d20")?"attack":"other";setTimeout(()=>w(d(),x),200)}}),Xe(),Fe();var k=Rs();let y;var j=n(k),ae=n(j),W=i(n(ae),2);r(ae);var Y=i(ae,2);{var K=x=>{var D=Ds();A(x,D)};ce(Y,x=>{e(h)||x(K)})}var $=i(Y,2),z=n($);xt(z,x=>u(m,x),()=>e(m));var oe=i(z,2);{var ie=x=>{var D=Ls(),Z=i(n(D),2),B=n(Z),E=i(n(B),2);X(E),r(B);var ve=i(B,2),ge=i(n(ve),2);X(ge),r(ve);var be=i(ve,2),Me=i(n(be),2);X(Me),r(be);var $e=i(be,2),Ne=i(n($e),2);X(Ne),r($e);var De=i($e,2),qe=i(n(De),2);X(qe),r(De);var Re=i(De,2),ye=i(n(Re),2);X(ye),r(Re),r(Z);var he=i(Z,2),le=n(he),ue=n(le);r(le);var ke=i(le,2);r(he),r(D),re(()=>{le.disabled=!e(h),ee(ue,`Roll ${e(a)??""}`)}),Q(E,()=>e(L),de=>u(L,de)),Q(ge,()=>e(V),de=>u(V,de)),Q(Me,()=>e(M),de=>u(M,de)),Q(Ne,()=>e(f),de=>u(f,de)),Q(qe,()=>e(_),de=>u(_,de)),Q(ye,()=>e(S),de=>u(S,de)),N("click",le,O),N("click",ke,J),A(x,D)};ce(oe,x=>{d()||x(ie)})}r($);var ne=i($,2);let pe;var se=n(ne);{var Ce=x=>{var D=Ns(),Z=je(D),B=n(Z),E=n(B,!0);r(B);var ve=i(B,2);{var ge=le=>{var ue=As();A(le,ue)};ce(ve,le=>{e(G)&&le(ge)})}r(Z);var be=i(Z,2),Me=n(be,!0);r(be);var $e=i(be,2),Ne=n($e);{var De=le=>{var ue=Fs(),ke=n(ue,!0);r(ue),re(()=>ee(ke,(e(g),b(()=>e(g).resultString)))),A(le,ue)};ce(Ne,le=>{e(g),b(()=>e(g).resultString)&&le(De)})}var qe=i(Ne,2);{var Re=le=>{var ue=Es(),ke=n(ue);r(ue),re(()=>ee(ke,`Modifier: ${e(g),b(()=>e(g).constant>=0?"+":"")??""}${e(g),b(()=>e(g).constant)??""}`)),A(le,ue)};ce(qe,le=>{e(g),b(()=>e(g).constant)&&le(Re)})}r($e);var ye=i($e,2);{var he=le=>{var ue=Ms();Je(ue,5,()=>e(F),Ye,(ke,de)=>{var _e=Is(),Se=n(_e,!0);r(_e),re(()=>ee(Se,(e(de),b(()=>e(de).label)))),N("click",_e,()=>w(e(de).notation,"damage")),A(ke,_e)}),r(ue),A(le,ue)};ce(ye,le=>{e(F),b(()=>e(F).length>0)&&le(he)})}re(()=>{ee(E,v()?`${v()} - Result`:"Result"),ee(Me,(e(g),b(()=>e(g).resultTotal)))}),A(x,D)};ce(se,x=>{e(g)&&x(Ce)})}r(ne),r(j),r(k),re(()=>{y=Ge(k,1,"modal-overlay svelte-1r90jgp",null,y,{hidden:!p()}),pe=Ge(ne,1,"roll-result svelte-1r90jgp",null,pe,{"has-result":e(g)})}),N("click",W,te),N("click",j,Qt(function(x){ct.call(this,l,x)})),N("keydown",j,function(x){ct.call(this,l,x)}),N("click",k,te),N("keydown",k,x=>x.key==="Escape"&&te()),A(t,k),Ie()}const Lt="https://api.github.com/gists";async function Ps(t,l,a){if(!l)throw new Error("GitHub token is required");const s=JSON.stringify(t,null,2),d=`${t.name||"character"}_dnd.json`,p={description:a||`D&D Character: ${t.name}`,public:!1,files:{[d]:{content:s}}},o=await fetch(Lt,{method:"POST",headers:{Authorization:`token ${l}`,"Content-Type":"application/json"},body:JSON.stringify(p)});if(!o.ok)throw new Error(`Failed to create gist: ${o.statusText}`);return(await o.json()).id}async function Hs(t,l,a){if(!l||!a)throw new Error("GitHub token and Gist ID are required");const s=JSON.stringify(t,null,2),p={files:{[`${t.name||"character"}_dnd.json`]:{content:s}}},o=await fetch(`${Lt}/${a}`,{method:"PATCH",headers:{Authorization:`token ${l}`,"Content-Type":"application/json"},body:JSON.stringify(p)});if(!o.ok)throw new Error(`Failed to update gist: ${o.statusText}`)}async function Us(t,l){if(!t)throw new Error("Gist ID is required");const a={"Content-Type":"application/json"};l&&(a.Authorization=`token ${l}`);const s=await fetch(`${Lt}/${t}`,{method:"GET",headers:a});if(!s.ok)throw new Error(`Failed to load gist: ${s.statusText}`);const d=await s.json(),p=Object.values(d.files);if(p.length===0)throw new Error("No files found in gist");const v=p[0].content;try{const c=JSON.parse(v);return c.attacks&&Array.isArray(c.attacks)&&(c.attacks=c.attacks.map(m=>({...m,id:m.id||crypto.randomUUID()}))),c.classFeatures?(c.classFeatures.features||(c.classFeatures.features={}),c.classFeatures.spellSlots||(c.classFeatures.spellSlots=[]),c.classFeatures.preparedSpells===void 0&&(c.classFeatures.preparedSpells="")):c.classFeatures={features:{},spellSlots:[],preparedSpells:""},c}catch{throw new Error("Invalid character data in gist")}}function Gt(t){typeof window<"u"&&localStorage.setItem("dnd_gist_config",JSON.stringify(t))}function Os(){if(typeof window<"u"){const t=localStorage.getItem("dnd_gist_config");if(t)return JSON.parse(t)}return{}}var Gs=R('<div class="error-message svelte-1jb5ckg"> </div>'),Bs=R('<div class="form-group svelte-1jb5ckg"><label for="gistId" class="svelte-1jb5ckg">Gist ID (leave empty to create new)</label> <input type="text" id="gistId" placeholder="Optional: existing Gist ID to update" class="svelte-1jb5ckg"/></div> <div class="form-group svelte-1jb5ckg"><label for="description" class="svelte-1jb5ckg">Description</label> <input type="text" id="description" placeholder="D&amp;D Character Sheet" class="svelte-1jb5ckg"/></div>',1),qs=R('<div class="form-group svelte-1jb5ckg"><label for="gistId" class="svelte-1jb5ckg">Gist ID *</label> <input type="text" id="gistId" placeholder="Enter Gist ID" required class="svelte-1jb5ckg"/></div>'),zs=R('<div class="modal-overlay svelte-1jb5ckg" role="button" tabindex="-1"><div class="modal-content svelte-1jb5ckg" role="dialog" tabindex="0"><div class="modal-header svelte-1jb5ckg"><h2 class="svelte-1jb5ckg"> </h2> <button class="close-btn svelte-1jb5ckg">×</button></div> <div class="modal-body svelte-1jb5ckg"><!> <div class="form-group svelte-1jb5ckg"><label for="token" class="svelte-1jb5ckg">GitHub Token (optional for public gists) <a href="https://github.com/settings/tokens" target="_blank" rel="noopener" class="svelte-1jb5ckg">Get token</a></label> <input type="password" id="token" placeholder="ghp_xxxxxxxxxxxxx" class="svelte-1jb5ckg"/></div> <!> <div class="modal-actions svelte-1jb5ckg"><button class="btn btn-primary svelte-1jb5ckg"><!></button> <button class="btn btn-secondary svelte-1jb5ckg">Cancel</button></div></div></div></div>');function Js(t,l){Ee(l,!1);const a=()=>me(P,"$character",s),[s,d]=Be(),p=lt();let o=at(l,"mode",8,"save"),v=I(""),c=I(""),m=I(""),h=I(!1),T=I("");const g=Os();g.token&&u(v,g.token),g.gistId&&u(c,g.gistId);async function L(){if(!e(v)){u(T,"GitHub token is required");return}u(h,!0),u(T,"");try{if(e(c))await Hs(a(),e(v),e(c)),alert("Character updated in Gist successfully!");else{const $=await Ps(a(),e(v),e(m));u(c,$),alert(`Character saved to Gist! ID: ${$}`)}Gt({token:e(v),gistId:e(c)}),p("close")}catch($){u(T,$.message||"Failed to save to Gist")}finally{u(h,!1)}}async function V(){if(!e(c)){u(T,"Gist ID is required");return}u(h,!0),u(T,"");try{const $=await Us(e(c),e(v)||void 0);P.set($),Gt({token:e(v),gistId:e(c)}),alert("Character loaded from Gist successfully!"),p("close")}catch($){u(T,$.message||"Failed to load from Gist")}finally{u(h,!1)}}function M(){p("close")}Fe();var f=zs(),_=n(f),S=n(_),H=n(S),F=n(H,!0);r(H);var G=i(H,2);r(S);var C=i(S,2),w=n(C);{var U=$=>{var z=Gs(),oe=n(z,!0);r(z),re(()=>ee(oe,e(T))),A($,z)};ce(w,$=>{e(T)&&$(U)})}var O=i(w,2),q=i(n(O),2);X(q),r(O);var J=i(O,2);{var te=$=>{var z=Bs(),oe=je(z),ie=i(n(oe),2);X(ie),r(oe);var ne=i(oe,2),pe=i(n(ne),2);X(pe),r(ne),re(()=>{ie.disabled=e(h),pe.disabled=e(h)}),Q(ie,()=>e(c),se=>u(c,se)),Q(pe,()=>e(m),se=>u(m,se)),A($,z)},k=$=>{var z=qs(),oe=i(n(z),2);X(oe),r(z),re(()=>oe.disabled=e(h)),Q(oe,()=>e(c),ie=>u(c,ie)),A($,z)};ce(J,$=>{o()==="save"?$(te):$(k,!1)})}var y=i(J,2),j=n(y),ae=n(j);{var W=$=>{var z=Et();re(()=>ee(z,o()==="save"?"Saving...":"Loading...")),A($,z)},Y=$=>{var z=Et();re(()=>ee(z,o()==="save"?"Save":"Load")),A($,z)};ce(ae,$=>{e(h)?$(W):$(Y,!1)})}r(j);var K=i(j,2);r(y),r(C),r(_),r(f),re(()=>{ee(F,o()==="save"?"Save to GitHub Gist":"Load from GitHub Gist"),q.disabled=e(h),j.disabled=e(h),K.disabled=e(h)}),N("click",G,M),Q(q,()=>e(v),$=>u(v,$)),N("click",j,function(...$){(o()==="save"?L:V)?.apply(this,$)}),N("click",K,M),N("click",_,Qt(function($){ct.call(this,l,$)})),N("keydown",_,function($){ct.call(this,l,$)}),N("click",f,M),N("keydown",f,$=>$.key==="Escape"&&M()),A(t,f),Ie(),d()}var Vs=R('<link rel="icon" type="image/png" href="/favicon.png"/>'),Ws=R('<div class="container svelte-1uha8ag"><header class="svelte-1uha8ag"><div class="header-top svelte-1uha8ag"><h1 class="svelte-1uha8ag">D&D Character Sheet</h1> <div class="header-controls svelte-1uha8ag"><input type="text" placeholder="🔍 Search (e.g., Religion, Strength, Attack...)" class="search-input svelte-1uha8ag"/> <div class="mode-toggle"><button> </button></div></div></div> <div class="header-actions svelte-1uha8ag"><button class="btn btn-secondary use-enabled">🎲 Roll Dice</button> <button class="btn btn-secondary">Save to Gist</button> <button class="btn btn-secondary">Load from Gist</button> <button class="btn btn-secondary">Export JSON</button> <button class="btn btn-secondary">Import JSON</button> <input type="file" accept=".json" style="display: none;"/></div></header> <main class="svelte-1uha8ag"><!> <!> <!> <!> <!> <!> <!></main></div> <!> <!>',1);function sl(t,l){Ee(l,!1);const a=()=>me(st,"$isEditMode",p),s=()=>me(P,"$character",p),d=()=>me(Ve,"$searchFilter",p),[p,o]=Be();let v=I(!1),c=I(!1),m=I("save"),h=I(void 0),T=I(""),g=I(""),L=I(""),V=I();function M(E){u(T,""),setTimeout(typeof E=="string"?()=>{u(T,E),u(g,""),u(L,"")}:()=>{u(T,E.notation),u(g,E.damageNotation||""),u(L,E.attackName||"")},0),u(v,!0)}function f(){console.log("toggleMode called, current isEditMode:",a()),st.update(E=>(console.log("Updating isEditMode from",E,"to",!E),!E))}Bt(()=>(console.log("onMount - initial isEditMode:",a()),console.log("onMount - body classes:",document.body.className),st.subscribe(ve=>{console.log("isEditMode subscription triggered, value:",ve),console.log("Body classes before:",document.body.className),ve?(document.body.classList.remove("use-mode"),console.log("Removed use-mode class (Edit Mode)")):(document.body.classList.add("use-mode"),console.log("Added use-mode class (Use Mode)")),console.log("Body classes after:",document.body.className)})));function _(){Ha(s())}function S(){e(h)?.click()}async function H(E){const ge=E.target.files?.[0];if(ge)try{const be=await Ua(ge);P.set(be),alert("Character imported successfully!")}catch{alert("Failed to import character file")}}Fe();var F=Ws();Fa("1uha8ag",E=>{var ve=Vs();Da(()=>{La.title="D&D Character Sheet"}),A(E,ve)});var G=je(F),C=n(G),w=n(C),U=i(n(w),2),O=n(U);X(O);var q=i(O,2),J=n(q);let te;var k=n(J,!0);r(J),r(q),r(U),r(w);var y=i(w,2),j=n(y),ae=i(j,2),W=i(ae,2),Y=i(W,2),K=i(Y,2),$=i(K,2);xt($,E=>u(h,E),()=>e(h)),r(y),r(C);var z=i(C,2),oe=n(z);Ja(oe,{});var ie=i(oe,2);Qa(ie,{});var ne=i(ie,2);Xa(ne,{$$events:{roll:E=>M(E.detail)}});var pe=i(ne,2);ss(pe,{$$events:{roll:E=>M(E.detail)}});var se=i(pe,2);cs(se,{$$events:{roll:E=>M(E.detail)}});var Ce=i(se,2);$s(Ce,{});var x=i(Ce,2);js(x,{}),r(z),r(G);var D=i(G,2);xt(Ts(D,{get notation(){return e(T)},get damageNotation(){return e(g)},get attackName(){return e(L)},get visible(){return e(v)},$$events:{close:()=>u(v,!1)},$$legacy:!0}),E=>u(V,E),()=>e(V));var Z=i(D,2);{var B=E=>{Js(E,{get mode(){return e(m)},$$events:{close:()=>u(c,!1)}})};ce(Z,E=>{e(c)&&E(B)})}re(()=>{te=Ge(J,1,"btn btn-mode svelte-1uha8ag",null,te,{"use-mode":!a()}),ee(k,a()?"📝 Edit Mode":"🎲 Use Mode")}),Q(O,d,E=>Aa(Ve,E)),N("click",J,f),N("click",j,()=>u(v,!0)),N("click",ae,()=>{u(m,"save"),u(c,!0)}),N("click",W,()=>{u(m,"load"),u(c,!0)}),N("click",Y,_),N("click",K,S),N("change",$,H),A(t,F),Ie(),o()}export{sl as component};
