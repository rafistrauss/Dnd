import{f as h,e as F,a as o,s as y,c as it,t as ut}from"../chunks/BmKkCgmR.js";import{i as mt}from"../chunks/AFJ5q3G2.js";import{c as Bt,o as Wt}from"../chunks/BwhX61NF.js";import{a6 as ga,i as ma,b1 as Fa,b2 as Ra,b3 as ca,J as wt,e as _a,b4 as ya,aa as Aa,b as i,r as ka,R as xa,g as Ia,B as _t,b5 as Xe,b6 as Lt,E as I,F as yt,s as n,a3 as A,G as l,I as t,H as s,d as e,C as ze,k as at,z as H,b7 as St,b8 as Gt,b9 as $a,an as Ca,ba as Ma}from"../chunks/CmcvLP-Y.js";import{s as lt,c as J,a as ft,r as we,e as ot,i as pt,b as Sa,u as Ea,d as Dt,f as ct,g as Yt,j as Qt,k as Pa,t as Ot,h as Ba,T as Ha,l as Ua,m as Ta}from"../chunks/BH0g7pxY.js";import{i as j,s as Ct,a as We,b as et,d as Na}from"../chunks/BibxXT0t.js";import{p as Et,b as ra}from"../chunks/BNYf2NzH.js";import{b as Nt,r as Ga}from"../chunks/DM5yfoKf.js";function Xt(r,u,a=!1){if(r.multiple){if(u==null)return;if(!ma(u))return Fa();for(var v of r.options)v.selected=u.includes(qt(v));return}for(v of r.options){var $=qt(v);if(Ra($,u)){v.selected=!0;return}}(!a||u!==void 0)&&(r.selectedIndex=-1)}function na(r){var u=new MutationObserver(()=>{Xt(r,r.__value)});u.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ga(()=>{u.disconnect()})}function La(r,u,a=u){var v=new WeakSet,$=!0;ca(r,"change",k=>{var w=k?"[selected]":":checked",N;if(r.multiple)N=[].map.call(r.querySelectorAll(w),qt);else{var f=r.querySelector(w)??r.querySelector("option:not([disabled])");N=f&&qt(f)}a(N),wt!==null&&v.add(wt)}),_a(()=>{var k=u();if(r===document.activeElement){var w=ya??wt;if(v.has(w))return}if(Xt(r,k,$),$&&k===void 0){var N=r.querySelector(":checked");N!==null&&(k=qt(N),a(k))}r.__value=k,$=!1}),na(r)}function qt(r){return"__value"in r?r.__value:r.value}function Ae(r,u,a=u){var v=new WeakSet;ca(r,"input",async $=>{var k=$?r.defaultValue:r.value;if(k=sa(r)?la(k):k,a(k),wt!==null&&v.add(wt),await Aa(),k!==(k=u())){var w=r.selectionStart,N=r.selectionEnd,f=r.value.length;if(r.value=k??"",N!==null){var q=r.value.length;w===N&&N===f&&q>f?(r.selectionStart=q,r.selectionEnd=q):(r.selectionStart=w,r.selectionEnd=Math.min(N,q))}}}),(xa&&r.defaultValue!==r.value||i(u)==null&&r.value)&&(a(sa(r)?la(r.value):r.value),wt!==null&&v.add(wt)),ka(()=>{var $=u();if(r===document.activeElement){var k=ya??wt;if(v.has(k))return}sa(r)&&$===la(r.value)||r.type==="date"&&!$&&!r.value||$!==r.value&&(r.value=$??"")})}function va(r,u,a=u){ca(r,"change",v=>{var $=v?r.defaultChecked:r.checked;a($)}),(xa&&r.defaultChecked!==r.checked||i(u)==null)&&a(r.checked),ka(()=>{var v=u();r.checked=!!v})}function sa(r){var u=r.type;return u==="number"||u==="range"}function la(r){return r===""?null:+r}function Oa(r,u,a){var v=Ia(r,u);v&&v.set&&(r[u]=a,ga(()=>{r[u]=null}))}function da(r){return function(...u){var a=u[0];return a.stopPropagation(),r?.apply(this,u)}}function Pt(r,u){var a=r.$$events?.[u.type],v=ma(a)?a.slice():a==null?[]:[a];for(var $ of v)$.call(this,u)}const qa="";function ja(...r){return Nt+qa+Ga(r[0],r[1])}const oa={paladin:{name:"Paladin",hitDice:"d10",spellcaster:!0,spellcastingAbility:"charisma",spellSlotsByLevel:{1:0,2:2,3:3,4:3,5:4,6:4,7:4,8:4,9:4,10:4,11:4,12:4,13:4,14:4,15:4,16:4,17:4,18:4,19:4,20:4},features:[{name:"Divine Sense",type:"uses",maxUses:(r,u=1)=>1+Math.max(1,u),resetOn:"long",description:"Detect celestials, fiends, and undead within 60 feet",minLevel:1},{name:"Lay on Hands",type:"pool",maxPool:r=>r*5,resetOn:"long",description:"Heal wounds or cure disease",minLevel:1},{name:"Divine Smite",type:"spellSlot",description:"Expend spell slot to deal extra radiant damage",minLevel:2,rollable:!0},{name:"Channel Divinity",type:"pool",maxPool:r=>r>=18?3:r>=6?2:1,resetOn:"short",description:"Sacred Weapon or Turn Undead",minLevel:3}]},fighter:{name:"Fighter",hitDice:"d10",spellcaster:!1,features:[{name:"Second Wind",type:"uses",maxUses:1,resetOn:"short",description:"Regain 1d10 + fighter level HP as bonus action",minLevel:1,rollable:!0,rollFormula:r=>`1d10+${r}`},{name:"Action Surge",type:"uses",maxUses:r=>r>=17?2:1,resetOn:"short",description:"Take one additional action on your turn",minLevel:2},{name:"Indomitable",type:"uses",maxUses:r=>r>=17?3:r>=13?2:1,resetOn:"long",description:"Reroll a failed saving throw",minLevel:9}],subclasses:{champion:{name:"Champion",features:[{name:"Improved Critical",type:"info",description:"Critical hit on 19-20",minLevel:3},{name:"Remarkable Athlete",type:"info",description:"Add half proficiency to STR/DEX/CON checks, increase long jump distance",minLevel:7},{name:"Additional Fighting Style",type:"info",description:"Choose a second fighting style",minLevel:10},{name:"Superior Critical",type:"info",description:"Critical hit on 18-20",minLevel:15},{name:"Survivor",type:"info",description:"Regain 5 + CON mod HP at start of turn if below half HP",minLevel:18}]},battlemaster:{name:"Battle Master",features:[{name:"Combat Superiority",type:"uses",maxUses:r=>r>=15?6:r>=7?5:4,resetOn:"short",description:r=>`Use superiority dice (${r>=18?"d12":r>=10?"d10":"d8"}) for maneuvers`,minLevel:3},{name:"Know Your Enemy",type:"info",description:"Learn capabilities of creatures you observe",minLevel:7},{name:"Improved Combat Superiority",type:"info",description:"Superiority dice become d10",minLevel:10},{name:"Relentless",type:"info",description:"Regain 1 superiority die if you have none at start of turn",minLevel:15}]}}},rogue:{name:"Rogue",hitDice:"d8",spellcaster:!1,features:[{name:"Sneak Attack",type:"info",description:r=>`Deal ${Math.ceil(r/2)}d6 extra damage once per turn with advantage or ally nearby`,minLevel:1,rollable:!0,rollFormula:r=>`${Math.ceil(r/2)}d6`},{name:"Cunning Action",type:"info",description:"Dash, Disengage, or Hide as a bonus action",minLevel:2},{name:"Uncanny Dodge",type:"info",description:"Use reaction to halve damage from an attack",minLevel:5},{name:"Evasion",type:"info",description:"Take no damage on successful Dex save (half on fail)",minLevel:7}]},wizard:{name:"Wizard",hitDice:"d6",spellcaster:!0,spellcastingAbility:"intelligence",spellSlotsByLevel:{1:2,2:3,3:4,4:4,5:4,6:4,7:4,8:4,9:4,10:4,11:4,12:4,13:4,14:4,15:4,16:4,17:4,18:4,19:4,20:4},features:[{name:"Arcane Recovery",type:"uses",maxUses:1,resetOn:"long",description:r=>`Recover spell slots totaling up to ${Math.ceil(r/2)} levels during short rest`,minLevel:1},{name:"Spell Mastery",type:"info",description:"Cast one 1st-level and one 2nd-level spell at will",minLevel:18}]},cleric:{name:"Cleric",hitDice:"d8",spellcaster:!0,spellcastingAbility:"wisdom",spellSlotsByLevel:{1:2,2:3,3:4,4:4,5:4,6:4,7:4,8:4,9:4,10:4,11:4,12:4,13:4,14:4,15:4,16:4,17:4,18:4,19:4,20:4},features:[{name:"Channel Divinity",type:"pool",maxPool:r=>r>=18?3:r>=6?2:1,resetOn:"short",description:"Turn Undead or domain-specific ability",minLevel:2},{name:"Destroy Undead",type:"info",description:r=>`Channel Divinity destroys undead of CR ${r>=17?4:r>=14?3:r>=11?2:r>=8?1:.5} or lower`,minLevel:5},{name:"Divine Intervention",type:"uses",maxUses:1,resetOn:"long",description:r=>`${r}% chance to succeed, implore deity for aid`,minLevel:10}],subclasses:{war:{name:"War Domain",features:[{name:"War Priest",type:"uses",maxUses:(r,u=1)=>Math.max(1,u),resetOn:"long",description:"Make one weapon attack as a bonus action",minLevel:1},{name:"Guided Strike",type:"channelDivinity",description:"Use your Channel Divinity to gain +10 to an attack roll. Make this choice after you see the roll, but before the DM says whether the attack hits or misses.",minLevel:2,resetOn:"short"},{name:"War God's Blessing",type:"channelDivinity",description:"Use reaction to grant +10 to an ally's attack roll within 30 feet. Consumes one use of Channel Divinity.",minLevel:6,resetOn:"short"},{name:"Divine Strike",type:"info",description:r=>`Deal extra ${r>=14?"2d8":"1d8"} weapon damage once per turn`,minLevel:8,rollable:!0,rollFormula:r=>r>=14?"2d8":"1d8"},{name:"Avatar of Battle",type:"info",description:"Gain resistance to nonmagical weapon damage",minLevel:17}]},life:{name:"Life Domain",features:[{name:"Disciple of Life",type:"info",description:"Healing spells restore additional 2 + spell level HP",minLevel:1},{name:"Preserve Life",type:"pool",maxPool:r=>r*5,resetOn:"short",description:"Restore HP to creatures within 30 feet",minLevel:2},{name:"Blessed Healer",type:"info",description:"Regain 2 + spell level HP when you cast healing spell",minLevel:6},{name:"Divine Strike",type:"info",description:r=>`Deal extra ${r>=14?"2d8":"1d8"} radiant damage once per turn`,minLevel:8,rollable:!0,rollFormula:r=>r>=14?"2d8":"1d8"},{name:"Supreme Healing",type:"info",description:"Maximize healing dice instead of rolling",minLevel:17}]}}},barbarian:{name:"Barbarian",hitDice:"d12",spellcaster:!1,features:[{name:"Rage",type:"uses",maxUses:r=>r>=20?1/0:r>=17?6:r>=12?5:r>=6?4:r>=3?3:2,resetOn:"long",description:r=>`+${r>=16?4:r>=9?3:2} damage, resistance to physical damage`,minLevel:1},{name:"Reckless Attack",type:"info",description:"Gain advantage on melee attacks, enemies get advantage on you",minLevel:2},{name:"Danger Sense",type:"info",description:"Advantage on Dex saves against effects you can see",minLevel:2}],subclasses:{berserker:{name:"Path of the Berserker",features:[{name:"Frenzy",type:"info",description:"While raging, make melee attack as bonus action (gain 1 exhaustion after rage)",minLevel:3},{name:"Mindless Rage",type:"info",description:"Cannot be charmed or frightened while raging",minLevel:6},{name:"Intimidating Presence",type:"info",description:"Use action to frighten creature within 30 feet",minLevel:10},{name:"Retaliation",type:"info",description:"When damaged by creature within 5 feet, make melee attack as reaction",minLevel:14}]}}}};function gt(r){const u=r.toLowerCase();return oa[u]||null}function zt(r,u,a){const v=gt(r);if(!v)return[];const $=v.features.filter(k=>!k.minLevel||k.minLevel<=u);if(a&&v.subclasses&&v.subclasses[a]){const k=v.subclasses[a].features.filter(w=>!w.minLevel||w.minLevel<=u);return[...$,...k]}return $}function ua(r){const u=gt(r);return!u||!u.subclasses?[]:Object.keys(u.subclasses).map(a=>({id:a,name:u.subclasses[a].name}))}function pa(r,u){const a=gt(r);return!a||!a.spellcaster||!a.spellSlotsByLevel?0:a.spellSlotsByLevel[u]||0}function fa(r,u,a){const v=gt(r);return!v||!v.spellcaster?0:Math.max(1,a+u)}function za(r,u,a){const v=gt(r);return!v||!v.spellcaster?null:8+u+a}function Wa(){return Object.keys(oa).map(r=>({id:r,name:oa[r].name}))}var Va=h("<option> </option>"),Ja=h("<option> </option>"),Ka=h('<div class="form-group svelte-172i2fj"><label for="characterSubclass" class="svelte-172i2fj">Subclass</label> <select id="characterSubclass" class="svelte-172i2fj"><option>Select Subclass</option><!></select></div>'),Qa=h('<div class="info-grid svelte-172i2fj"><div class="form-group svelte-172i2fj"><label for="characterName" class="svelte-172i2fj">Character Name</label> <input type="text" id="characterName" placeholder="Enter name" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterClass" class="svelte-172i2fj">Class</label> <select id="characterClass" class="svelte-172i2fj"><option>Select Class</option><!></select></div> <!> <div class="form-group svelte-172i2fj"><label for="characterLevel" class="svelte-172i2fj">Level</label> <input type="number" id="characterLevel" min="1" max="20" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterRace" class="svelte-172i2fj">Race</label> <input type="text" id="characterRace" placeholder="e.g., Human" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterBackground" class="svelte-172i2fj">Background</label> <input type="text" id="characterBackground" placeholder="e.g., Soldier" class="svelte-172i2fj"/></div> <div class="form-group svelte-172i2fj"><label for="characterAlignment" class="svelte-172i2fj">Alignment</label> <input type="text" id="characterAlignment" placeholder="e.g., Lawful Good" class="svelte-172i2fj"/></div></div>'),Xa=h('<section class="character-info svelte-172i2fj"><div class="header svelte-172i2fj"><h2 class="svelte-172i2fj">Character Info</h2> <button class="collapse-btn svelte-172i2fj"> </button></div> <!></section>');function Ya(r,u){_t(u,!1);const a=()=>We(J,"$character",$),v=()=>We(ft,"$collapsedStates",$),[$,k]=Ct(),w=A(),N=Wa();function f(ae){const de=ae.target;J.update(K=>(K.class=de.value,K.subclass="",K))}function q(ae){const de=ae.target;J.update(K=>(K.subclass=de.value,K))}function ee(ae){const de=ae.target;J.update(K=>(K.level=parseInt(de.value)||1,K)),Ea()}function U(){ft.update(ae=>({...ae,characterInfo:!ae.characterInfo}))}Xe(()=>(a(),ua),()=>{n(w,a().class?ua(a().class):[])}),Lt(),mt();var W=Xa(),pe=l(W),ve=t(l(pe),2),ye=l(ve,!0);s(ve),s(pe);var ge=t(pe,2);{var G=ae=>{var de=Qa(),K=l(de),se=t(l(K),2);we(se),s(K);var Q=t(K,2),P=t(l(Q),2),le=l(P);le.value=le.__value="";var ne=t(le);ot(ne,1,()=>N,pt,($e,Te)=>{var De=Va(),ke=l(De,!0);s(De);var _={};I(()=>{y(ke,(e(Te),i(()=>e(Te).name))),_!==(_=(e(Te),i(()=>e(Te).id)))&&(De.value=(De.__value=(e(Te),i(()=>e(Te).id)))??"")}),o($e,De)}),s(P);var ie;na(P),s(Q);var He=t(Q,2);{var x=$e=>{var Te=Ka(),De=t(l(Te),2),ke=l(De);ke.value=ke.__value="";var _=t(ke);ot(_,1,()=>e(w),pt,(Me,qe)=>{var Ke=Ja(),st=l(Ke,!0);s(Ke);var m={};I(()=>{y(st,(e(qe),i(()=>e(qe).name))),m!==(m=(e(qe),i(()=>e(qe).id)))&&(Ke.value=(Ke.__value=(e(qe),i(()=>e(qe).id)))??"")}),o(Me,Ke)}),s(De);var Ie;na(De),s(Te),I(()=>{Ie!==(Ie=(a(),i(()=>a().subclass)))&&(De.value=(De.__value=(a(),i(()=>a().subclass)))??"",Xt(De,(a(),i(()=>a().subclass))))}),F("change",De,q),o($e,Te)};j(He,$e=>{e(w),i(()=>e(w).length>0)&&$e(x)})}var X=t(He,2),te=t(l(X),2);we(te),s(X);var g=t(X,2),c=t(l(g),2);we(c),s(g);var R=t(g,2),fe=t(l(R),2);we(fe),s(R);var T=t(R,2),be=t(l(T),2);we(be),s(T),s(de),I(()=>{ie!==(ie=(a(),i(()=>a().class)))&&(P.value=(P.__value=(a(),i(()=>a().class)))??"",Xt(P,(a(),i(()=>a().class)))),Sa(te,(a(),i(()=>a().level)))}),Ae(se,()=>a().name,$e=>et(J,i(a).name=$e,i(a))),F("change",P,f),F("change",te,ee),Ae(c,()=>a().race,$e=>et(J,i(a).race=$e,i(a))),Ae(fe,()=>a().background,$e=>et(J,i(a).background=$e,i(a))),Ae(be,()=>a().alignment,$e=>et(J,i(a).alignment=$e,i(a))),o(ae,de)};j(ge,ae=>{v(),i(()=>!v().characterInfo)&&ae(G)})}s(W),I(()=>{lt(ve,"aria-label",(v(),i(()=>v().characterInfo?"Expand":"Collapse"))),y(ye,(v(),i(()=>v().characterInfo?"â–¼":"â–²")))}),F("click",ve,U),o(r,W),yt(),k()}var Za=h('<div class="ability-card svelte-bbv1xt"><h3 class="svelte-bbv1xt"> </h3> <input type="number" class="ability-score svelte-bbv1xt" min="1" max="30"/> <div class="ability-modifier svelte-bbv1xt"> </div> <button class="roll-btn svelte-bbv1xt">Check</button> <div class="save-row svelte-bbv1xt"><input type="checkbox" class="svelte-bbv1xt"/> <label class="svelte-bbv1xt">Save</label> <button class="roll-btn-small svelte-bbv1xt">Roll</button></div></div>'),es=h('<div class="proficiency-bonus svelte-bbv1xt"><label for="profBonus">Proficiency Bonus</label> <input type="number" id="profBonus" class="prof-input svelte-bbv1xt"/></div> <div class="abilities-grid svelte-bbv1xt"></div>',1),ts=h('<section><div class="header svelte-bbv1xt"><h2 class="svelte-bbv1xt">Ability Scores</h2> <button class="collapse-btn svelte-bbv1xt"> </button></div> <!></section>');function as(r,u){_t(u,!1);const a=()=>We(Yt,"$abilityModifiers",w),v=()=>We(J,"$character",w),$=()=>We(Dt,"$searchFilter",w),k=()=>We(ft,"$collapsedStates",w),[w,N]=Ct(),f=A(),q=A(),ee=Bt(),U=[{key:"strength",label:"Strength"},{key:"dexterity",label:"Dexterity"},{key:"constitution",label:"Constitution"},{key:"intelligence",label:"Intelligence"},{key:"wisdom",label:"Wisdom"},{key:"charisma",label:"Charisma"}];function W(){updateProficiencyBonus()}function pe(P){const le=a()[P],ne=`1d20${le>=0?"+":""}${le}`;ee("roll",ne)}function ve(P){const le=a()[P],ne=v().saveProficiencies[P]?v().proficiencyBonus:0,ie=le+ne,He=`1d20${ie>=0?"+":""}${ie}`;ee("roll",He)}function ye(){ft.update(P=>({...P,abilityScores:!P.abilityScores}))}Xe(()=>$(),()=>{n(f,U.filter(({label:P})=>$()?P.toLowerCase().includes($().toLowerCase()):!0))}),Xe(()=>(e(f),$()),()=>{n(q,e(f).length>0||!$()||$().toLowerCase().includes("proficiency"))}),Lt(),mt();var ge=ts();let G;var ae=l(ge),de=t(l(ae),2),K=l(de,!0);s(de),s(ae);var se=t(ae,2);{var Q=P=>{var le=es(),ne=ze(le),ie=t(l(ne),2);we(ie),s(ne);var He=t(ne,2);ot(He,5,()=>e(f),pt,(x,X)=>{let te=()=>e(X).key,g=()=>e(X).label;var c=Za(),R=l(c),fe=l(R,!0);s(R);var T=t(R,2);we(T);var be=t(T,2),$e=l(be);s(be);var Te=t(be,2),De=t(Te,2),ke=l(De);we(ke);var _=t(ke,2),Ie=t(_,2);s(De),s(c),I(Me=>{y(fe,Me),y($e,`${a(),te(),i(()=>a()[te()]>=0?"+":"")??""}${a(),te(),i(()=>a()[te()])??""}`),lt(ke,"id",`${te()}-save`),lt(_,"for",`${te()}-save`)},[()=>(g(),i(()=>g().substring(0,3).toUpperCase()))]),Ae(T,()=>v().abilities[te()],Me=>et(J,i(v).abilities[te()]=Me,i(v))),F("change",T,W),F("click",Te,()=>pe(te())),va(ke,()=>v().saveProficiencies[te()],Me=>et(J,i(v).saveProficiencies[te()]=Me,i(v))),F("click",Ie,()=>ve(te())),o(x,c)}),s(He),Ae(ie,()=>v().proficiencyBonus,x=>et(J,i(v).proficiencyBonus=x,i(v))),o(P,le)};j(se,P=>{k(),i(()=>!k().abilityScores)&&P(Q)})}s(ge),I(()=>{G=ct(ge,1,"ability-scores svelte-bbv1xt",null,G,{hidden:!e(q)}),lt(de,"aria-label",(k(),i(()=>k().abilityScores?"Expand":"Collapse"))),y(K,(k(),i(()=>k().abilityScores?"â–¼":"â–²")))}),F("click",de,ye),o(r,ge),yt(),N()}var ss=h('<span class="hit-dice-type"> </span>'),ls=h('<div class="stats-grid svelte-1r5hyyb"><div class="stat-box svelte-1r5hyyb"><label for="armorClass" class="svelte-1r5hyyb">Armor Class</label> <input type="number" id="armorClass" class="stat-input svelte-1r5hyyb"/></div> <div class="stat-box svelte-1r5hyyb"><label for="initiative" class="svelte-1r5hyyb">Initiative</label> <input type="number" id="initiative" class="stat-input svelte-1r5hyyb"/></div> <div class="stat-box svelte-1r5hyyb"><label for="speed" class="svelte-1r5hyyb">Speed</label> <input type="text" id="speed" class="stat-input svelte-1r5hyyb"/></div></div> <div class="hp-section svelte-1r5hyyb"><h3 class="svelte-1r5hyyb">Hit Points</h3> <div class="hp-display svelte-1r5hyyb"><div class="hp-inputs svelte-1r5hyyb"><input type="number" class="hp-current svelte-1r5hyyb" min="0"/> <span class="hp-separator svelte-1r5hyyb">/</span> <input type="number" class="hp-max svelte-1r5hyyb" min="0"/></div> <div class="hp-controls svelte-1r5hyyb"><button class="hp-btn svelte-1r5hyyb">âˆ’</button> <button class="hp-btn svelte-1r5hyyb">+</button> <button class="hp-btn svelte-1r5hyyb">âˆ’5</button> <button class="hp-btn svelte-1r5hyyb">+5</button></div></div> <div class="temp-hp svelte-1r5hyyb"><label for="tempHP" class="svelte-1r5hyyb">Temp HP</label> <input type="number" id="tempHP" min="0" class="svelte-1r5hyyb"/></div></div> <div class="hit-dice-section svelte-1r5hyyb"><h3 class="svelte-1r5hyyb">Hit Dice</h3> <div class="hit-dice-display svelte-1r5hyyb"><input type="number" class="hit-dice-input svelte-1r5hyyb" min="0"/> <span>/</span> <input type="number" class="hit-dice-input svelte-1r5hyyb" min="0"/> <!></div> <div class="hit-dice-controls"><label for="hitDiceCount" class="svelte-1r5hyyb">Roll</label> <input type="number" id="hitDiceCount" class="hit-dice-count-input svelte-1r5hyyb" min="1" value="1"/> <button class="btn btn-primary roll-hit-dice use-enabled svelte-1r5hyyb">ðŸŽ² Roll</button></div></div>',1),is=h('<section><div class="header svelte-1r5hyyb"><h2 class="svelte-1r5hyyb">Combat Stats</h2> <button class="collapse-btn svelte-1r5hyyb"> </button></div> <!></section>');function rs(r,u){_t(u,!1);const a=()=>We(J,"$character",w),v=()=>We(Yt,"$abilityModifiers",w),$=()=>We(Dt,"$searchFilter",w),k=()=>We(ft,"$collapsedStates",w),[w,N]=Ct(),f=A(),q=Bt();function ee(K){J.update(se=>(se.currentHP=Math.max(0,Math.min(se.maxHP,se.currentHP+K)),se))}function U(K=1){if(a().hitDice.current<=0){alert("No hit dice remaining!");return}if(!a().class){alert("Please select a class first!");return}const se=gt(a().class);if(!se){alert("Invalid class configuration!");return}const Q=Math.min(K,a().hitDice.current),P=se.hitDice,le=v().constitution,ne=le>=0?`+${le}`:`${le}`,ie=`${Q}${P}${ne}`;q("rollHitDice",{notation:ie,hitDie:P,count:Q})}function W(){ft.update(K=>({...K,combatStats:!K.combatStats}))}Xe(()=>$(),()=>{n(f,!$()||"armor class".includes($().toLowerCase())||"initiative".includes($().toLowerCase())||"speed".includes($().toLowerCase())||"hit points".includes($().toLowerCase())||"hp".includes($().toLowerCase())||"hit dice".includes($().toLowerCase())||"combat".includes($().toLowerCase()))}),Lt(),mt();var pe=is();let ve;var ye=l(pe),ge=t(l(ye),2),G=l(ge,!0);s(ge),s(ye);var ae=t(ye,2);{var de=K=>{var se=ls(),Q=ze(se),P=l(Q),le=t(l(P),2);we(le),s(P);var ne=t(P,2),ie=t(l(ne),2);we(ie),s(ne);var He=t(ne,2),x=t(l(He),2);we(x),s(He),s(Q);var X=t(Q,2),te=t(l(X),2),g=l(te),c=l(g);we(c);var R=t(c,4);we(R),s(g);var fe=t(g,2),T=l(fe),be=t(T,2),$e=t(be,2),Te=t($e,2);s(fe),s(te);var De=t(te,2),ke=t(l(De),2);we(ke),s(De),s(X);var _=t(X,2),Ie=t(l(_),2),Me=l(Ie);we(Me);var qe=t(Me,4);we(qe);var Ke=t(qe,2);{var st=B=>{const Fe=at(()=>(H(gt),a(),i(()=>gt(a().class))));var Le=it(),Ee=ze(Le);{var xe=S=>{const me=at(()=>(v(),i(()=>v().constitution)));var he=ss(),Ue=l(he);s(he),I(()=>y(Ue,`(${H(e(Fe)),i(()=>e(Fe).hitDice)??""}${(e(me)>=0?`+${e(me)}`:e(me))??""})`)),o(S,he)};j(Ee,S=>{e(Fe)&&S(xe)})}o(B,Le)};j(Ke,B=>{a(),i(()=>a().class)&&B(st)})}s(Ie);var m=t(Ie,2),O=t(l(m),2),V=t(O,2);s(m),s(_),I(()=>{lt(c,"max",(a(),i(()=>a().maxHP))),lt(Me,"max",(a(),i(()=>a().hitDice.max))),lt(O,"max",(a(),i(()=>a().hitDice.current))),V.disabled=(a(),i(()=>a().hitDice.current<=0||!a().class))}),Ae(le,()=>a().armorClass,B=>et(J,i(a).armorClass=B,i(a))),Ae(ie,()=>a().initiative,B=>et(J,i(a).initiative=B,i(a))),Ae(x,()=>a().speed,B=>et(J,i(a).speed=B,i(a))),Ae(c,()=>a().currentHP,B=>et(J,i(a).currentHP=B,i(a))),Ae(R,()=>a().maxHP,B=>et(J,i(a).maxHP=B,i(a))),F("click",T,()=>ee(-1)),F("click",be,()=>ee(1)),F("click",$e,()=>ee(-5)),F("click",Te,()=>ee(5)),Ae(ke,()=>a().tempHP,B=>et(J,i(a).tempHP=B,i(a))),Ae(Me,()=>a().hitDice.current,B=>et(J,i(a).hitDice.current=B,i(a))),Ae(qe,()=>a().hitDice.max,B=>et(J,i(a).hitDice.max=B,i(a))),F("input",O,B=>{const Fe=B.target,Le=parseInt(Fe.value);Le>a().hitDice.current&&(Fe.value=String(a().hitDice.current)),Le<1&&(Fe.value="1")}),F("click",V,()=>{const B=document.getElementById("hitDiceCount"),Fe=parseInt(B?.value||"1");U(Fe)}),o(K,se)};j(ae,K=>{k(),i(()=>!k().combatStats)&&K(de)})}s(pe),I(()=>{ve=ct(pe,1,"combat-stats svelte-1r5hyyb",null,ve,{hidden:!e(f)}),lt(ge,"aria-label",(k(),i(()=>k().combatStats?"Expand":"Collapse"))),y(G,(k(),i(()=>k().combatStats?"â–¼":"â–²")))}),F("click",ge,W),o(r,pe),yt(),N()}const ia={acrobatics:"dexterity",animalHandling:"wisdom",arcana:"intelligence",athletics:"strength",deception:"charisma",history:"intelligence",insight:"wisdom",intimidation:"charisma",investigation:"intelligence",medicine:"wisdom",nature:"intelligence",perception:"wisdom",performance:"charisma",persuasion:"charisma",religion:"intelligence",sleightOfHand:"dexterity",stealth:"dexterity",survival:"wisdom"};var ns=h('<div class="skill-row svelte-1f1pl16"><input type="checkbox" class="svelte-1f1pl16"/> <label class="svelte-1f1pl16"> <span class="ability-tag svelte-1f1pl16"> </span></label> <span class="skill-modifier svelte-1f1pl16"> </span> <button class="roll-btn svelte-1f1pl16">Roll</button></div>'),os=h('<div class="skills-grid svelte-1f1pl16"></div>'),cs=h('<section><div class="header svelte-1f1pl16"><h2 class="svelte-1f1pl16">Skills</h2> <button class="collapse-btn svelte-1f1pl16"> </button></div> <!></section>');function vs(r,u){_t(u,!1);const a=()=>We(Yt,"$abilityModifiers",w),v=()=>We(J,"$character",w),$=()=>We(Dt,"$searchFilter",w),k=()=>We(ft,"$collapsedStates",w),[w,N]=Ct(),f=A(),q=A(),ee=Bt(),U=[{key:"acrobatics",label:"Acrobatics"},{key:"animalHandling",label:"Animal Handling"},{key:"arcana",label:"Arcana"},{key:"athletics",label:"Athletics"},{key:"deception",label:"Deception"},{key:"history",label:"History"},{key:"insight",label:"Insight"},{key:"intimidation",label:"Intimidation"},{key:"investigation",label:"Investigation"},{key:"medicine",label:"Medicine"},{key:"nature",label:"Nature"},{key:"perception",label:"Perception"},{key:"performance",label:"Performance"},{key:"persuasion",label:"Persuasion"},{key:"religion",label:"Religion"},{key:"sleightOfHand",label:"Sleight of Hand"},{key:"stealth",label:"Stealth"},{key:"survival",label:"Survival"}];function W(Q){const P=ia[Q],le=a()[P],ne=v().skillProficiencies[Q]?v().proficiencyBonus:0;return le+ne}function pe(Q){const P=W(Q),le=`1d20${P>=0?"+":""}${P}`;ee("roll",le)}function ve(){ft.update(Q=>({...Q,skills:!Q.skills}))}Xe(()=>$(),()=>{n(f,U.filter(({label:Q})=>$()?Q.toLowerCase().includes($().toLowerCase()):!0))}),Xe(()=>e(f),()=>{n(q,e(f).length>0)}),Lt(),mt();var ye=cs();let ge;var G=l(ye),ae=t(l(G),2),de=l(ae,!0);s(ae),s(G);var K=t(G,2);{var se=Q=>{var P=os();ot(P,5,()=>e(f),pt,(le,ne)=>{let ie=()=>e(ne).key,He=()=>e(ne).label;const x=at(()=>(H(ia),ie(),i(()=>ia[ie()]))),X=at(()=>(ie(),i(()=>W(ie()))));var te=ns(),g=l(te);we(g);var c=t(g,2),R=l(c),fe=t(R),T=l(fe);s(fe),s(c);var be=t(c,2),$e=l(be);s(be);var Te=t(be,2);s(te),I(De=>{lt(g,"id",ie()),lt(c,"for",ie()),y(R,`${He()??""} `),y(T,`(${De??""})`),y($e,`${e(X)>=0?"+":""}${e(X)??""}`)},[()=>(H(e(x)),i(()=>e(x).substring(0,3).toUpperCase()))]),va(g,()=>v().skillProficiencies[ie()],De=>et(J,i(v).skillProficiencies[ie()]=De,i(v))),F("click",Te,()=>pe(ie())),o(le,te)}),s(P),o(Q,P)};j(K,Q=>{k(),i(()=>!k().skills)&&Q(se)})}s(ye),I(()=>{ge=ct(ye,1,"skills svelte-1f1pl16",null,ge,{hidden:!e(q)}),lt(ae,"aria-label",(k(),i(()=>k().skills?"Expand":"Collapse"))),y(de,(k(),i(()=>k().skills?"â–¼":"â–²")))}),F("click",ae,ve),o(r,ye),yt(),N()}let Jt=null,Kt=null;async function wa(){if(Jt)return Jt;try{return Jt=await(await fetch(ja("/data/spells.json"))).json(),Jt||[]}catch(r){return console.error("Failed to load spells:",r),[]}}async function ds(){if(Kt)return Kt;try{return Kt=await(await fetch(ja("/data/feats.json"))).json(),Kt||[]}catch(r){return console.error("Failed to load feats:",r),[]}}function ba(r,u){if(!u.trim())return r;const a=u.toLowerCase();return r.filter(v=>v.name.toLowerCase().includes(a)||v.school.toLowerCase().includes(a)||v.classes.some($=>$.toLowerCase().includes(a))||v.description.toLowerCase().includes(a))}function us(r,u){return u===null?r:r.filter(a=>a.level===u)}function ps(r,u){if(!u.trim())return r;const a=u.toLowerCase();return r.filter(v=>v.name.toLowerCase().includes(a)||v.description.toLowerCase().includes(a))}var fs=h('<button class="btn-remove svelte-14o91c5">Ã—</button>'),bs=h('<div class="spell-info-loading svelte-14o91c5">Loading spell info...</div>'),hs=h('<div class="spell-notes svelte-14o91c5"><h4 class="svelte-14o91c5">General Notes</h4> <p> </p></div>'),gs=h('<li class="svelte-14o91c5"><strong>At Higher Levels:</strong> </li>'),ms=h('<ul class="svelte-14o91c5"><li class="svelte-14o91c5"><strong>Level:</strong> </li> <li class="svelte-14o91c5"><strong>Casting Time:</strong> </li> <li class="svelte-14o91c5"><strong>Range:</strong> </li> <li class="svelte-14o91c5"><strong>Components:</strong> <!></li> <li class="svelte-14o91c5"><strong>Duration:</strong> <!> </li> <li class="svelte-14o91c5"><strong>Description:</strong> </li> <!></ul>'),_s=h("<option> </option>"),ys=h('<span class="scaled-damage svelte-14o91c5"><!> </span>'),ks=h('<span class="scaled-damage svelte-14o91c5"> </span>'),xs=h('<div class="target-condition svelte-14o91c5"><label class="svelte-14o91c5"><input type="checkbox" class="use-enabled svelte-14o91c5"/> Target is Fiend or Undead <!></label></div>'),$s=h('<div class="spell-level-selector svelte-14o91c5"><label class="svelte-14o91c5">Cast at Level:</label> <select class="spell-level-select use-enabled svelte-14o91c5"></select> <!></div> <!>',1),Cs=h('<div class="spell-level-selector svelte-14o91c5"><span style="color: #dc3545; font-weight: bold;">No spell slots available!</span></div>'),Ss=h('<!> <div class="spell-info svelte-14o91c5"><div class="spell-info-header svelte-14o91c5" role="button" tabindex="0"><h4 class="svelte-14o91c5">Spell Info</h4> <button class="collapse-btn-small svelte-14o91c5"> </button></div> <!></div> <!>',1),Ls=h('<div class="spell-info-missing svelte-14o91c5">Spell info not found.</div>'),js=h('<div class="attack-notes svelte-14o91c5"><label class="svelte-14o91c5">Notes</label> <textarea placeholder="e.g., DC 15 Dex save, Range 120 ft, Concentration" class="notes-input svelte-14o91c5" rows="2"></textarea></div>'),ws=h('<button class="btn btn-primary">Roll Attack</button>'),Ds=h('<button class="btn btn-secondary"><!></button>'),Fs=h('<button class="btn btn-secondary">Roll Damage</button>'),Rs=h('<div class="attack-card svelte-14o91c5"><div class="attack-header svelte-14o91c5"><input type="text" placeholder="Attack name" class="attack-name svelte-14o91c5"/> <!></div> <div class="attack-details svelte-14o91c5"><div class="attack-field svelte-14o91c5"><label class="svelte-14o91c5">Bonus</label> <input type="number" class="attack-bonus svelte-14o91c5"/></div> <div class="attack-field svelte-14o91c5"><label class="svelte-14o91c5">Damage</label> <input type="text" placeholder="e.g., 2d6+3" class="attack-damage svelte-14o91c5"/></div> <div class="attack-field svelte-14o91c5"><label class="svelte-14o91c5">Type</label> <input type="text" placeholder="e.g., slashing" class="attack-type svelte-14o91c5"/></div></div> <!> <!> <div class="attack-actions svelte-14o91c5"><!> <!></div></div>'),As=h('<p class="no-attacks svelte-14o91c5">No attacks added yet. Click "Add Attack" to create one.</p>'),Is=h('<p class="no-attacks svelte-14o91c5">No attacks match your search.</p>'),Ms=h('<button class="btn btn-secondary">Add Attack</button> <div class="attacks-list svelte-14o91c5"><!> <!></div>',1),Es=h('<section><div class="header svelte-14o91c5"><h2 class="svelte-14o91c5">Attacks & Spells</h2> <button class="collapse-btn svelte-14o91c5"> </button></div> <!></section>');function Ps(r,u){_t(u,!1);const a=()=>We(J,"$character",w),v=()=>We(Dt,"$searchFilter",w),$=()=>We(ft,"$collapsedStates",w),k=()=>We(Qt,"$isEditMode",w),[w,N]=Ct(),f=A(),q=A(),ee=Bt();let U=A({});function W(c){$a(U,e(U)[c]=!e(U)[c]),n(U,{...e(U)})}function pe(c){return c.description.toLowerCase().includes("regain")&&(c.description.toLowerCase().includes("hit point")||c.description.toLowerCase().includes("hp"))}function ve(){J.update(c=>(c.attacks=[...c.attacks,{id:crypto.randomUUID(),name:"",bonus:0,damage:"",damageType:"",notes:""}],c))}function ye(c){J.update(R=>(R.attacks=R.attacks.filter(fe=>fe.id!==c),R))}function ge(c){let R=c.damage;if(c.spellRef){const T=se(c.spellRef);if(T&&T.level>0){const be=c.castAtLevel||T.level;if(!Q(be)){alert(`No level ${be} spell slots available!`);return}R=P(c,T)}}const fe=`1d20${c.bonus>=0?"+":""}${c.bonus}`;ee("roll",{notation:fe,damageNotation:R,attackName:c.name})}function G(c){if(!c.damage){alert(`${c.name}: No damage specified`);return}let R=c.damage;if(c.spellRef){const fe=se(c.spellRef);if(fe&&fe.level>0){const T=c.castAtLevel||fe.level;if(!Q(T)){alert(`No level ${T} spell slots available!`);return}R=P(c,fe)}}ee("roll",{notation:R,attackName:c.name})}function ae(){ft.update(c=>({...c,attacks:!c.attacks}))}let de=A([]),K=A(!1);Wt(async()=>{n(de,await wa()),n(K,!0)});function se(c){return e(de).find(R=>R.name===c)}function Q(c){a().classFeatures.spellSlotsByLevel||et(J,i(a).classFeatures.spellSlotsByLevel={},i(a)),a().classFeatures.spellSlotsByLevel[c]||et(J,i(a).classFeatures.spellSlotsByLevel[c]=Array(2).fill(!1),i(a));const fe=a().classFeatures.spellSlotsByLevel[c].findIndex(T=>!T);return fe===-1?!1:(J.update(T=>(T.classFeatures.spellSlotsByLevel||(T.classFeatures.spellSlotsByLevel={}),T.classFeatures.spellSlotsByLevel[c]||(T.classFeatures.spellSlotsByLevel[c]=Array(2).fill(!1)),T.classFeatures.spellSlotsByLevel[c][fe]=!0,T)),!0)}function P(c,R){let fe=c.damage,T=0;if(R.higherLevelSlot&&c.castAtLevel){const ke=R.level,Ie=(c.castAtLevel||ke)-ke;if(Ie>0){const Me=R.higherLevelSlot.match(/(\d+)d(\d+)\s+for\s+each.*?level\s+above/i);if(Me){const[,qe]=Me;T+=Ie*parseInt(qe)}}}if(c.targetIsFiendOrUndead&&R.description.includes("Fiend or an Undead")){const ke=R.description.match(/increases by (\d+)d(\d+) if.*?Fiend or.*?Undead/i);if(ke){const[,_]=ke;T+=parseInt(_)}}const be=fe.match(/(\d+)d(\d+)/);if(!be)return fe;const[,$e,Te]=be;return`${parseInt($e)+T}d${Te}`}function le(c){const R=[];for(let T=c.level;T<=9;T++){const be=a().classFeatures.spellSlotsByLevel?.[T];be&&be.length>0&&R.push(T)}return R}Xe(()=>(a(),v()),()=>{n(f,a().attacks.filter(c=>{if(!v())return!0;const R=v().toLowerCase();return c.name.toLowerCase().includes(R)||c.damageType.toLowerCase().includes(R)}).sort((c,R)=>!c.spellRef&&R.spellRef?-1:c.spellRef&&!R.spellRef?1:0))}),Xe(()=>(v(),e(f)),()=>{n(q,!v()||e(f).length>0||"attack".includes(v().toLowerCase())||"spell".includes(v().toLowerCase()))}),Lt(),mt();var ne=Es();let ie;var He=l(ne),x=t(l(He),2),X=l(x,!0);s(x),s(He);var te=t(He,2);{var g=c=>{var R=Ms(),fe=ze(R),T=t(fe,2),be=l(T);ot(be,1,()=>e(f),ke=>ke.id,(ke,_,Ie)=>{var Me=Rs(),qe=l(Me),Ke=l(qe);we(Ke);var st=t(Ke,2);{var m=M=>{var E=fs();F("click",E,()=>ye(e(_).id)),o(M,E)};j(st,M=>{k()&&M(m)})}s(qe);var O=t(qe,2),V=l(O),B=t(l(V),2);we(B),s(V);var Fe=t(V,2),Le=t(l(Fe),2);we(Le),s(Fe);var Ee=t(Fe,2),xe=t(l(Ee),2);we(xe),s(Ee),s(O);var S=t(O,2);{var me=M=>{var E=it(),d=ze(E);{var D=L=>{var b=bs();o(L,b)},z=L=>{const b=at(()=>(e(_),i(()=>se(e(_).spellRef))));var ce=it(),je=ze(ce);{var _e=Se=>{var p=Ss(),re=ze(p);{var C=Ze=>{var tt=hs(),vt=t(l(tt),2),Ft=l(vt,!0);s(vt),s(tt),I(()=>y(Ft,(e(_),i(()=>e(_).generalNotes)))),o(Ze,tt)};j(re,Ze=>{e(_),i(()=>e(_).generalNotes)&&Ze(C)})}var ue=t(re,2),Pe=l(ue),Oe=t(l(Pe),2),oe=l(Oe,!0);s(Oe),s(Pe);var Be=t(Pe,2);{var Je=Ze=>{var tt=ms(),vt=l(tt),Ft=t(l(vt));s(vt);var Ht=t(vt,2),ea=t(l(Ht));s(Ht);var kt=t(Ht,2),Mt=t(l(kt));s(kt);var Rt=t(kt,2),Ut=t(l(Rt)),At=t(Ut);{var ta=rt=>{var nt=ut();I(()=>y(nt,`(${H(e(b)),i(()=>e(b).material)??""})`)),o(rt,nt)};j(At,rt=>{H(e(b)),i(()=>e(b).material)&&rt(ta)})}s(Rt);var Tt=t(Rt,2),Vt=t(l(Tt),2);{var aa=rt=>{var nt=ut("Concentration,");o(rt,nt)};j(Vt,rt=>{H(e(b)),i(()=>e(b).concentration)&&rt(aa)})}var bt=t(Vt,1,!0);s(Tt);var ht=t(Tt,2),dt=t(l(ht));s(ht);var xt=t(ht,2);{var jt=rt=>{var nt=gs(),$t=t(l(nt));s(nt),I(()=>y($t,` ${H(e(b)),i(()=>e(b).higherLevelSlot)??""}`)),o(rt,nt)};j(xt,rt=>{H(e(b)),i(()=>e(b).higherLevelSlot)&&rt(jt)})}s(tt),I(rt=>{y(Ft,` ${H(e(b)),i(()=>e(b).level)??""}`),y(ea,` ${H(e(b)),i(()=>e(b).castingTime||e(b).actionType)??""}`),y(Mt,` ${H(e(b)),i(()=>e(b).range)??""}`),y(Ut,` ${rt??""}`),y(bt,(H(e(b)),i(()=>e(b).duration))),y(dt,` ${H(e(b)),i(()=>e(b).description)??""}`)},[()=>(H(e(b)),i(()=>e(b).components.join(", ")))]),o(Ze,tt)};j(Be,Ze=>{e(U),e(_),i(()=>!e(U)[e(_).id])&&Ze(Je)})}s(ue);var Z=t(ue,2);{var Qe=Ze=>{const tt=at(()=>(H(e(b)),i(()=>le(e(b)))));var vt=it(),Ft=ze(vt);{var Ht=kt=>{var Mt=$s(),Rt=ze(Mt),Ut=l(Rt),At=t(Ut,2);I(()=>{e(_),St(()=>{e(tt)})}),ot(At,5,()=>e(tt),pt,(bt,ht)=>{var dt=_s(),xt=l(dt);s(dt);var jt={};I(()=>{y(xt,`Level ${e(ht)??""}`),jt!==(jt=e(ht))&&(dt.value=(dt.__value=e(ht))??"")}),o(bt,dt)}),s(At);var ta=t(At,2);{var Tt=bt=>{const ht=at(()=>(e(_),H(e(b)),i(()=>P(e(_),e(b)))));var dt=ys(),xt=l(dt);{var jt=$t=>{var It=ut("Healing");o($t,It)},rt=$t=>{var It=ut("Damage");o($t,It)};j(xt,$t=>{H(e(b)),i(()=>pe(e(b)))?$t(jt):$t(rt,!1)})}var nt=t(xt);s(dt),I(()=>y(nt,` ${e(ht)??""}`)),o(bt,dt)};j(ta,bt=>{e(_),H(e(b)),i(()=>e(_).castAtLevel&&e(_).castAtLevel>e(b).level)&&bt(Tt)})}s(Rt);var Vt=t(Rt,2);{var aa=bt=>{var ht=xs(),dt=l(ht),xt=l(dt);we(xt);var jt=t(xt,2);{var rt=nt=>{const $t=at(()=>(e(_),H(e(b)),i(()=>P(e(_),e(b)))));var It=ks(),Da=l(It);s(It),I(()=>y(Da,`(+1d8, total: ${e($t)??""})`)),o(nt,It)};j(jt,nt=>{e(_),i(()=>e(_).targetIsFiendOrUndead)&&nt(rt)})}s(dt),s(ht),va(xt,()=>e(_).targetIsFiendOrUndead,nt=>(e(_).targetIsFiendOrUndead=nt,St(()=>(e(f),a(),v())))),o(bt,ht)};j(Vt,bt=>{H(e(b)),i(()=>e(b).description.includes("Fiend or an Undead"))&&bt(aa)})}I(()=>{lt(Ut,"for",`castLevel-${e(_),i(()=>e(_).id)??""}`),lt(At,"id",`castLevel-${e(_),i(()=>e(_).id)??""}`)}),La(At,()=>e(_).castAtLevel,bt=>(e(_).castAtLevel=bt,St(()=>(e(f),a(),v())))),o(kt,Mt)},ea=kt=>{var Mt=Cs();o(kt,Mt)};j(Ft,kt=>{H(e(tt)),i(()=>e(tt).length>0)?kt(Ht):kt(ea,!1)})}o(Ze,vt)};j(Z,Ze=>{H(e(b)),i(()=>e(b).higherLevelSlot&&e(b).level>0)&&Ze(Qe)})}I(()=>{lt(Oe,"aria-label",(e(U),e(_),i(()=>e(U)[e(_).id]?"Expand":"Collapse"))),y(oe,(e(U),e(_),i(()=>e(U)[e(_).id]?"â–¼":"â–²")))}),F("click",Pe,()=>W(e(_).id)),F("keydown",Pe,Ze=>Ze.key==="Enter"&&W(e(_).id)),o(Se,p)},Ge=Se=>{var p=Ls();o(Se,p)};j(je,Se=>{e(b)?Se(_e):Se(Ge,!1)})}o(L,ce)};j(d,L=>{e(de),i(()=>e(de).length===0)?L(D):L(z,!1)})}o(M,E)};j(S,M=>{e(_),i(()=>e(_).spellRef)&&M(me)})}var he=t(S,2);{var Ue=M=>{var E=js(),d=t(l(E),2);Gt(d),s(E),Ae(d,()=>e(_).notes,D=>(e(_).notes=D,St(()=>(e(f),a(),v())))),o(M,E)};j(he,M=>{e(_),i(()=>!e(_).spellRef)&&M(Ue)})}var Ve=t(he,2),Ye=l(Ve);{var Re=M=>{var E=ws();F("click",E,()=>ge(e(_))),o(M,E)};j(Ye,M=>{e(_),i(()=>e(_).bonus!==0||!e(_).spellRef)&&M(Re)})}var Y=t(Ye,2);{var Ce=M=>{const E=at(()=>(e(_),i(()=>se(e(_).spellRef))));var d=Ds(),D=l(d);{var z=b=>{var ce=ut("Roll Healing");o(b,ce)},L=b=>{var ce=ut("Roll Damage");o(b,ce)};j(D,b=>{H(e(E)),i(()=>e(E)&&pe(e(E)))?b(z):b(L,!1)})}s(d),F("click",d,()=>G(e(_))),o(M,d)},Ne=M=>{var E=Fs();F("click",E,()=>G(e(_))),o(M,E)};j(Y,M=>{e(_),e(K),i(()=>e(_).spellRef&&e(K))?M(Ce):M(Ne,!1)})}s(Ve),s(Me),Ae(Ke,()=>e(_).name,M=>(e(_).name=M,St(()=>(e(f),a(),v())))),Ae(B,()=>e(_).bonus,M=>(e(_).bonus=M,St(()=>(e(f),a(),v())))),Ae(Le,()=>e(_).damage,M=>(e(_).damage=M,St(()=>(e(f),a(),v())))),Ae(xe,()=>e(_).damageType,M=>(e(_).damageType=M,St(()=>(e(f),a(),v())))),o(ke,Me)});var $e=t(be,2);{var Te=ke=>{var _=As();o(ke,_)},De=ke=>{var _=it(),Ie=ze(_);{var Me=qe=>{var Ke=Is();o(qe,Ke)};j(Ie,qe=>{e(f),i(()=>e(f).length===0)&&qe(Me)},!0)}o(ke,_)};j($e,ke=>{a(),i(()=>a().attacks.length===0)?ke(Te):ke(De,!1)})}s(T),F("click",fe,ve),o(c,R)};j(te,c=>{$(),i(()=>!$().attacks)&&c(g)})}s(ne),I(()=>{ie=ct(ne,1,"attacks svelte-14o91c5",null,ie,{hidden:!e(q)}),lt(x,"aria-label",($(),i(()=>$().attacks?"Expand":"Collapse"))),y(X,($(),i(()=>$().attacks?"â–¼":"â–²")))}),F("click",x,ae),o(r,ne),yt(),N()}var Bs=h('<p class="no-features svelte-1kpvv0n">Select a class to see available features</p>'),Hs=h('<p class="no-features svelte-1kpvv0n">No class features available at this level</p>'),Us=h('<input type="checkbox" class="slot-checkbox svelte-1kpvv0n"/>'),Ts=h('<div class="spell-slots svelte-1kpvv0n"><label class="svelte-1kpvv0n"> </label> <div class="slots-tracker svelte-1kpvv0n"></div></div>'),Ns=h('<div class="all-spell-slots"></div>'),Gs=h('<div class="feature-box spellcasting svelte-1kpvv0n"><h3 class="svelte-1kpvv0n"> </h3> <div class="spell-stats svelte-1kpvv0n"><div class="spell-stat svelte-1kpvv0n"><label class="svelte-1kpvv0n">Spell Save DC</label> <div class="spell-value svelte-1kpvv0n"> </div></div> <div class="spell-stat svelte-1kpvv0n"><label class="svelte-1kpvv0n">Prepared Spells</label> <div class="spell-value svelte-1kpvv0n"> </div></div></div> <!> <div class="prepared-spells svelte-1kpvv0n"><label class="svelte-1kpvv0n">Prepared Spells</label> <textarea placeholder="List your prepared spells..." class="svelte-1kpvv0n"></textarea></div></div>'),Os=h('<p class="unlimited svelte-1kpvv0n">Unlimited Uses</p>'),qs=h('<p class="no-uses svelte-1kpvv0n">No uses remaining</p>'),zs=h('<div class="uses-with-button svelte-1kpvv0n"><button class="btn btn-primary use-enabled"> </button> <div class="uses-info svelte-1kpvv0n"><span class="uses-remaining svelte-1kpvv0n"> </span> <span class="reset-info svelte-1kpvv0n"> </span></div> <!></div>'),Ws=h('<div class="uses-tracker svelte-1kpvv0n"><!></div>'),Vs=h('<div class="pool-tracker svelte-1kpvv0n"><input type="number" min="0" class="pool-input svelte-1kpvv0n"/> <span> </span> <button class="btn-small svelte-1kpvv0n"> </button></div>'),Js=h('<p class="no-uses svelte-1kpvv0n">No Channel Divinity uses remaining</p>'),Ks=h('<div class="channel-divinity-option svelte-1kpvv0n"><button class="btn btn-primary use-enabled svelte-1kpvv0n">Use Channel Divinity</button> <div class="uses-info svelte-1kpvv0n"><span class="reset-info svelte-1kpvv0n"> </span></div> <!></div>'),Qs=h('<div class="feature-box svelte-1kpvv0n"><h3 class="svelte-1kpvv0n"><!> </h3> <p class="feature-description svelte-1kpvv0n"> </p> <!></div>'),Xs=h('<div class="features-grid svelte-1kpvv0n"><!> <!></div>'),Ys=h('<section><div class="header svelte-1kpvv0n"><h2 class="svelte-1kpvv0n">Class Features</h2> <button class="collapse-btn svelte-1kpvv0n"> </button></div> <!></section>');function Zs(r,u){_t(u,!1);const a=()=>We(J,"$character",w),v=()=>We(Yt,"$abilityModifiers",w),$=()=>We(Dt,"$searchFilter",w),k=()=>We(ft,"$collapsedStates",w),[w,N]=Ct(),f=A(),q=A(),ee=A(),U=A(),W=A(),pe=A(),ve=A();let ye=A(0),ge=A(0);function G(g,c){J.update(R=>(R.classFeatures.features[g]=c,R))}function ae(){J.update(g=>(g.classFeatures.spellSlotsByLevel||(g.classFeatures.spellSlotsByLevel={}),e(U).forEach(({level:c,slots:R})=>{g.classFeatures.spellSlotsByLevel[c]||(g.classFeatures.spellSlotsByLevel[c]=Array(R).fill(!1))}),g))}function de(g){if(typeof g.maxUses=="function"){if((g.name==="Divine Sense"||g.name==="War Priest")&&e(f)?.spellcastingAbility){const c=v()[e(f).spellcastingAbility];return g.maxUses(a().level,c)}return g.maxUses(a().level)}return g.maxUses||0}function K(g){return typeof g.maxPool=="function"?g.maxPool(a().level):g.maxPool||0}function se(g){return typeof g.description=="function"?g.description(a().level):g.description}function Q(){const g="ChannelDivinity";J.update(c=>{const R=c.classFeatures.features[g];return typeof R=="number"&&R>0&&(c.classFeatures.features[g]=R-1),c})}function P(){ft.update(g=>({...g,classFeatures:!g.classFeatures}))}Xe(()=>(a(),gt),()=>{n(f,a().class?gt(a().class):null)}),Xe(()=>(a(),zt),()=>{n(q,a().class?zt(a().class,a().level,a().subclass):[])}),Xe(()=>(a(),pa),()=>{n(ee,a().class?pa(a().class,a().level):0)}),Xe(()=>(e(f),a()),()=>{n(U,(()=>{if(!e(f)?.spellcaster)return[];const g=a().level,c=[];return g>=1&&c.push({level:1,slots:Math.min(4,2+Math.floor(g/3))}),g>=3&&c.push({level:2,slots:Math.min(3,2+Math.floor((g-3)/4))}),g>=5&&c.push({level:3,slots:Math.min(3,2+Math.floor((g-5)/5))}),g>=7&&c.push({level:4,slots:Math.min(3,1+Math.floor((g-7)/6))}),g>=9&&c.push({level:5,slots:Math.min(2,1+Math.floor((g-9)/8))}),g>=11&&c.push({level:6,slots:1}),g>=13&&c.push({level:7,slots:1}),g>=15&&c.push({level:8,slots:1}),g>=17&&c.push({level:9,slots:1}),c})())}),Xe(()=>(e(f),v(),a(),fa),()=>{if(e(f)?.spellcaster&&e(f).spellcastingAbility){const g=v()[e(f).spellcastingAbility];n(ye,za(a().class,g,a().proficiencyBonus)||0),n(ge,fa(a().class,a().level,g))}}),Xe(()=>(a(),e(f),e(U)),()=>{a().class&&e(f)?.spellcaster&&e(U).length>0&&ae()}),Xe(()=>a(),()=>{n(W,(()=>{const c=a().classFeatures.features["ChannelDivinity"];return typeof c=="number"?c:0})())}),Xe(()=>(e(q),$()),()=>{n(pe,e(q).filter(g=>{if(!$())return!0;const c=$().toLowerCase();return g.name.toLowerCase().includes(c)||se(g).toLowerCase().includes(c)}))}),Xe(()=>($(),a(),e(pe)),()=>{n(ve,!$()||a().class||"class features".includes($().toLowerCase())||"spellcasting".includes($().toLowerCase())||e(pe).length>0)}),Lt(),mt();var le=Ys();let ne;var ie=l(le),He=t(l(ie),2),x=l(He,!0);s(He),s(ie);var X=t(ie,2);{var te=g=>{var c=it(),R=ze(c);{var fe=be=>{var $e=Bs();o(be,$e)},T=be=>{var $e=it(),Te=ze($e);{var De=_=>{var Ie=Hs();o(_,Ie)},ke=_=>{var Ie=Xs(),Me=l(Ie);{var qe=st=>{var m=Gs(),O=l(m),V=l(O);s(O);var B=t(O,2),Fe=l(B),Le=t(l(Fe),2),Ee=l(Le,!0);s(Le),s(Fe);var xe=t(Fe,2),S=t(l(xe),2),me=l(S,!0);s(S),s(xe),s(B);var he=t(B,2);{var Ue=Re=>{var Y=Ns();ot(Y,5,()=>e(U),pt,(Ce,Ne)=>{let M=()=>e(Ne).level,E=()=>e(Ne).slots;const d=at(()=>(a(),M(),E(),i(()=>a().classFeatures.spellSlotsByLevel?.[M()]||Array(E()).fill(!1))));var D=Ts(),z=l(D),L=l(z);s(z);var b=t(z,2);ot(b,5,()=>(E(),i(()=>Array(E()))),pt,(ce,je,_e)=>{var Ge=Us();we(Ge),I(()=>Pa(Ge,(H(e(d)),i(()=>e(d)[_e]||!1)))),F("change",Ge,Se=>{J.update(p=>(p.classFeatures.spellSlotsByLevel||(p.classFeatures.spellSlotsByLevel={}),p.classFeatures.spellSlotsByLevel[M()]||(p.classFeatures.spellSlotsByLevel[M()]=Array(E()).fill(!1)),p.classFeatures.spellSlotsByLevel[M()][_e]=Se.currentTarget.checked,p))}),o(ce,Ge)}),s(b),s(D),I(()=>y(L,`${M()===1?"1st":M()===2?"2nd":M()===3?"3rd":`${M()}th`} Level Spell Slots`)),o(Ce,D)}),s(Y),o(Re,Y)};j(he,Re=>{e(U),i(()=>e(U).length>0)&&Re(Ue)})}var Ve=t(he,2),Ye=t(l(Ve),2);Gt(Ye),s(Ve),s(m),I(Re=>{y(V,`Spellcasting (${Re??""})`),y(Ee,e(ye)),y(me,e(ge))},[()=>(e(f),i(()=>e(f).spellcastingAbility?.toUpperCase()))]),Ae(Ye,()=>a().classFeatures.preparedSpells,Re=>et(J,i(a).classFeatures.preparedSpells=Re,i(a))),o(st,m)};j(Me,st=>{e(f),i(()=>e(f)?.spellcaster)&&st(qe)})}var Ke=t(Me,2);ot(Ke,1,()=>e(pe),pt,(st,m)=>{const O=at(()=>(e(m),i(()=>e(m).name.replace(/\s+/g,"")))),V=at(()=>(a(),H(e(O)),i(()=>a().classFeatures.features[e(O)]))),B=at(()=>(H(e(V)),i(()=>Array.isArray(e(V))))),Fe=at(()=>typeof e(V)=="number");var Le=Qs(),Ee=l(Le),xe=l(Ee);{var S=Y=>{var Ce=ut("Channel Divinity:");o(Y,Ce)};j(xe,Y=>{e(m),i(()=>e(m).type==="channelDivinity")&&Y(S)})}var me=t(xe);s(Ee);var he=t(Ee,2),Ue=l(he,!0);s(he);var Ve=t(he,2);{var Ye=Y=>{const Ce=at(()=>(e(m),i(()=>de(e(m))))),Ne=at(()=>(H(e(B)),H(e(Ce)),H(e(V)),i(()=>e(B)?e(V).filter(L=>!L).length:e(Ce))));var M=Ws(),E=l(M);{var d=z=>{var L=Os();o(z,L)},D=z=>{var L=zs(),b=l(L),ce=l(b);s(b);var je=t(b,2),_e=l(je),Ge=l(_e);s(_e);var Se=t(_e,2),p=l(Se);s(Se),s(je);var re=t(je,2);{var C=ue=>{var Pe=qs();o(ue,Pe)};j(re,ue=>{e(Ne)<=0&&ue(C)})}s(L),I(()=>{b.disabled=e(Ne)<=0,y(ce,`Use ${e(m),i(()=>e(m).name)??""}`),y(Ge,`${e(Ne)??""} / ${e(Ce)??""} uses`),y(p,`Resets on ${e(m),i(()=>e(m).resetOn==="short"?"Short Rest":"Long Rest")??""}`)}),F("click",b,()=>{J.update(ue=>{ue.classFeatures.features[e(O)]||(ue.classFeatures.features[e(O)]=Array(e(Ce)).fill(!1));const Pe=ue.classFeatures.features[e(O)],Oe=Pe.findIndex(oe=>!oe);return Oe!==-1&&(Pe[Oe]=!0),ue})}),o(z,L)};j(E,z=>{e(Ce)===1/0?z(d):z(D,!1)})}s(M),o(Y,M)},Re=Y=>{var Ce=it(),Ne=ze(Ce);{var M=d=>{const D=at(()=>(e(m),i(()=>K(e(m)))));var z=Vs(),L=l(z);we(L);var b=t(L,2),ce=l(b);s(b);var je=t(b,2),_e=l(je,!0);s(je),s(z),I(()=>{Sa(L,e(Fe)&&e(V)!==void 0?e(V):e(D)),lt(L,"max",e(D)),y(ce,`/ ${e(D)??""}`),y(_e,(e(m),i(()=>e(m).resetOn==="short"?"Short Rest":"Long Rest")))}),F("input",L,Ge=>{J.update(Se=>(Se.classFeatures.features[e(O)]=parseInt(Ge.currentTarget.value)||0,Se))}),F("click",je,()=>G(e(O),e(D))),o(d,z)},E=d=>{var D=it(),z=ze(D);{var L=b=>{var ce=Ks(),je=l(ce),_e=t(je,2),Ge=l(_e),Se=l(Ge);s(Ge),s(_e);var p=t(_e,2);{var re=C=>{var ue=Js();o(C,ue)};j(p,C=>{e(W)<=0&&C(re)})}s(ce),I(()=>{je.disabled=e(W)<=0,y(Se,`Resets on ${e(m),i(()=>e(m).resetOn==="short"?"Short Rest":"Long Rest")??""}`)}),F("click",je,Q),o(b,ce)};j(z,b=>{e(m),i(()=>e(m).type==="channelDivinity")&&b(L)},!0)}o(d,D)};j(Ne,d=>{e(m),i(()=>e(m).type==="pool")?d(M):d(E,!1)},!0)}o(Y,Ce)};j(Ve,Y=>{e(m),i(()=>e(m).type==="uses")?Y(Ye):Y(Re,!1)})}s(Le),I(Y=>{y(me,` ${e(m),i(()=>e(m).name)??""}`),y(Ue,Y)},[()=>(e(m),i(()=>se(e(m))))]),o(st,Le)}),s(Ie),o(_,Ie)};j(Te,_=>{e(q),i(()=>e(q).length===0)?_(De):_(ke,!1)},!0)}o(be,$e)};j(R,be=>{a(),i(()=>!a().class)?be(fe):be(T,!1)})}o(g,c)};j(X,g=>{k(),i(()=>!k().classFeatures)&&g(te)})}s(le),I(()=>{ne=ct(le,1,"class-features svelte-1kpvv0n",null,ne,{hidden:!e(ve)}),lt(He,"aria-label",(k(),i(()=>k().classFeatures?"Expand":"Collapse"))),y(x,(k(),i(()=>k().classFeatures?"â–¼":"â–²")))}),F("click",He,P),o(r,le),yt(),N()}var el=h('<textarea placeholder="Enter features, traits, and special abilities..." class="svelte-wttn0l"></textarea> <h3 class="svelte-wttn0l">Equipment</h3> <textarea placeholder="List your equipment and inventory..." class="svelte-wttn0l"></textarea> <h3 class="svelte-wttn0l">Notes</h3> <textarea placeholder="Additional notes..." class="svelte-wttn0l"></textarea>',1),tl=h('<section><div class="header svelte-wttn0l"><h2 class="svelte-wttn0l">Features & Traits</h2> <button class="collapse-btn svelte-wttn0l"> </button></div> <!></section>');function al(r,u){_t(u,!1);const a=()=>We(Dt,"$searchFilter",k),v=()=>We(J,"$character",k),$=()=>We(ft,"$collapsedStates",k),[k,w]=Ct(),N=A();function f(){ft.update(ge=>({...ge,notes:!ge.notes}))}Xe(()=>(a(),v()),()=>{n(N,!a()||"features".includes(a().toLowerCase())||"traits".includes(a().toLowerCase())||"equipment".includes(a().toLowerCase())||"notes".includes(a().toLowerCase())||v().features.toLowerCase().includes(a().toLowerCase())||v().equipment.toLowerCase().includes(a().toLowerCase())||v().notes.toLowerCase().includes(a().toLowerCase()))}),Lt(),mt();var q=tl();let ee;var U=l(q),W=t(l(U),2),pe=l(W,!0);s(W),s(U);var ve=t(U,2);{var ye=ge=>{var G=el(),ae=ze(G);Gt(ae);var de=t(ae,4);Gt(de);var K=t(de,4);Gt(K),Ae(ae,()=>v().features,se=>et(J,i(v).features=se,i(v))),Ae(de,()=>v().equipment,se=>et(J,i(v).equipment=se,i(v))),Ae(K,()=>v().notes,se=>et(J,i(v).notes=se,i(v))),o(ge,G)};j(ve,ge=>{$(),i(()=>!$().notes)&&ge(ye)})}s(q),I(()=>{ee=ct(q,1,"notes svelte-wttn0l",null,ee,{hidden:!e(N)}),lt(W,"aria-label",($(),i(()=>$().notes?"Expand":"Collapse"))),y(pe,($(),i(()=>$().notes?"â–¼":"â–²")))}),F("click",W,f),o(r,q),yt(),w()}var sl=h('<div class="color-picker-section svelte-1r90jgp"><h3 class="svelte-1r90jgp">Dice Colors</h3> <div class="color-inputs svelte-1r90jgp"><div class="color-input-group svelte-1r90jgp"><label for="dice-color" class="svelte-1r90jgp">Dice Color</label> <input type="color" id="dice-color" class="svelte-1r90jgp"/></div> <div class="color-input-group svelte-1r90jgp"><label for="label-color" class="svelte-1r90jgp">Label Color</label> <input type="color" id="label-color" class="svelte-1r90jgp"/></div> <div class="color-input-group svelte-1r90jgp"><label for="desk-color" class="svelte-1r90jgp">Background Color</label> <input type="color" id="desk-color" class="svelte-1r90jgp"/></div></div></div>'),ll=h('<div class="loading svelte-1r90jgp"><p class="svelte-1r90jgp">Loading 3D dice...</p></div>'),il=h('<div class="custom-dice-selector svelte-1r90jgp"><h3 class="svelte-1r90jgp">Choose Dice to Roll</h3> <div class="dice-inputs svelte-1r90jgp"><div class="dice-input-group svelte-1r90jgp"><label for="d4" class="svelte-1r90jgp">d4</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d4" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d6" class="svelte-1r90jgp">d6</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d6" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d8" class="svelte-1r90jgp">d8</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d8" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d10" class="svelte-1r90jgp">d10</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d10" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d12" class="svelte-1r90jgp">d12</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d12" min="0" max="10"/></div> <div class="dice-input-group svelte-1r90jgp"><label for="d20" class="svelte-1r90jgp">d20</label> <input class="use-enabled svelte-1r90jgp" type="number" id="d20" min="0" max="10"/></div></div> <div class="dice-controls svelte-1r90jgp"><button class="btn btn-primary use-enabled svelte-1r90jgp"> </button> <button class="btn btn-secondary use-enabled svelte-1r90jgp">Reset</button></div></div>'),rl=h('<span class="crit-badge svelte-1r90jgp">CRITICAL!</span>'),nl=h('<p class="svelte-1r90jgp"> </p>'),ol=h('<p class="modifier-text svelte-1r90jgp"> </p>'),cl=h('<button class="btn btn-follow-up svelte-1r90jgp"> </button>'),vl=h('<button class="btn btn-guided-strike svelte-1r90jgp">âš¡ Use Guided Strike (+10)</button>'),dl=h('<div class="follow-up-actions svelte-1r90jgp"><!> <!></div>'),ul=h('<div class="result-header svelte-1r90jgp"><h3 class="svelte-1r90jgp"> </h3> <!></div> <div class="result-total svelte-1r90jgp"> </div> <div class="result-details svelte-1r90jgp"><!> <!></div> <!>',1),pl=h('<div role="button" tabindex="-1"><div class="modal-content svelte-1r90jgp" role="dialog" tabindex="0"><div class="modal-header svelte-1r90jgp"><h2 class="svelte-1r90jgp">Dice Roller</h2> <div class="header-buttons svelte-1r90jgp"><button class="color-btn svelte-1r90jgp" title="Customize dice colors">ðŸŽ¨</button> <button class="close-btn svelte-1r90jgp">Ã—</button></div></div> <!> <!> <div class="dice-main-area svelte-1r90jgp"><div class="dice-container svelte-1r90jgp"></div> <!></div> <div><!></div></div></div>');function fl(r,u){_t(u,!1);const a=()=>We(J,"$character",v),[v,$]=Ct(),k=A(),w=A(),N=A(),f=Bt();let q=Et(u,"notation",12,""),ee=Et(u,"visible",8,!1),U=Et(u,"damageNotation",12,""),W=Et(u,"attackName",12,""),pe=null,ve=A(void 0),ye=A(!1),ge=A(""),G=A(null);function ae(){return e(G)?.resultTotal??null}let de=A(0),K=A(0),se=A(0),Q=A(0),P=A(0),le=A(0),ne=A(0),ie=A([]),He=A(!1),x=A("other"),X=A(!1),te=A("#051e0a"),g=A("#ffffff"),c=A("#3a2004"),R=A(!1);function fe(d){return d.length===9&&d.startsWith("#")?d.substring(0,7):d}function T(d,D="ff"){return d.length===7&&d.startsWith("#")?d+D:d}function be(){if(window.DICE&&e(ve))try{pe&&e(ve)&&$a(ve,e(ve).innerHTML="");const d=e(ve).clientWidth||500,D=e(ve).clientHeight||300;pe=new window.DICE.dice_box(e(ve),{w:d,h:D}),n(ye,!0)}catch(d){console.error("Error initializing dice box:",d)}}Wt(()=>{const d=L=>new Promise((b,ce)=>{if(document.querySelector(`script[src="${L}"]`)){console.log(`Script already loaded: ${L}`),b(null);return}const _e=document.createElement("script");_e.src=L,_e.onload=()=>{console.log(`Loaded: ${L}`),b(null)},_e.onerror=()=>{console.error(`Failed to load: ${L}`),ce(new Error(`Failed to load ${L}`))},document.head.appendChild(_e)});setTimeout(()=>{d(`${Nt}/libs/three.min.js`).then(()=>d(`${Nt}/libs/cannon.min.js`)).then(()=>d(`${Nt}/libs/teal.js`)).then(()=>d(`${Nt}/dice.js`)).then(()=>{if(console.log("All scripts loaded, initializing dice box..."),console.log("DICE available:",!!window.DICE),console.log("Container available:",!!e(ve)),window.DICE){const L=window.DICE.getColors();n(te,fe(L.dice_color)),n(g,fe(L.label_color)),n(c,fe(L.desk_color))}be()}).catch(L=>{console.error("Failed to load dice libraries:",L)})},100);const D=()=>{e(ye)&&(console.log("Window resized, reinitializing dice box..."),be())},z=L=>{ee()&&L.key==="Escape"&&Ke()};return window.addEventListener("resize",D),window.addEventListener("keydown",z),()=>{window.removeEventListener("resize",D),window.removeEventListener("keydown",z)}});function $e(d,D="other"){if(!pe||!e(ye))return;console.log("Rolling dice:",d,"type:",D),n(x,D),n(X,!1),pe.diceToRoll=d;const z=b=>(console.log("Before roll:",b),null),L=b=>{if(console.log("After roll:",b),console.log("Result:",b.resultTotal),n(G,b),D==="attack"||D==="check"||D==="save"){const ce=b.results?.filter(je=>je.sides===20)||[];if(ce.length>0){const je=ce[0].value;n(He,je===20)}}if(n(ie,[]),D==="attack"&&U())if(e(He)){const ce=ke(U());e(ie).push({label:`Roll Critical Damage (${ce})`,notation:ce})}else e(ie).push({label:`Roll Damage (${U()})`,notation:U()})};pe.start_throw(z,L)}function Te(){const d=[];e(de)>0&&d.push(`${e(de)}d4`),e(K)>0&&d.push(`${e(K)}d6`),e(se)>0&&d.push(`${e(se)}d8`),e(Q)>0&&d.push(`${e(Q)}d10`),e(P)>0&&d.push(`${e(P)}d12`),e(le)>0&&d.push(`${e(le)}d20`);let D=d.join("+")||"1d20";return e(ne)!==0&&(D+=e(ne)>=0?`+${e(ne)}`:`${e(ne)}`),D}function De(){const d=Te();$e(d)}function ke(d){return d.replace(/(\d+)d(\d+)/g,(D,z,L)=>`${parseInt(z)*2}d${L}`)}function _(){n(de,0),n(K,0),n(se,0),n(Q,0),n(P,0),n(le,0),n(ne,0),n(G,null),n(ie,[]),n(He,!1),n(x,"other"),n(X,!1)}function Ie(){window.DICE&&(window.DICE.setColors({dice_color:T(e(te),"ff"),label_color:T(e(g),"ff"),desk_color:e(c)}),pe&&(pe.updateDeskColor(e(c)),pe.updateDiceColors()))}function Me(){n(R,!e(R))}function qe(){!e(G)||e(w)<=0||e(X)||(n(G,{...e(G),resultTotal:e(G).resultTotal+10,resultString:e(G).resultString+" + 10 (Guided Strike)"}),J.update(d=>{const D="ChannelDivinity",z=d.classFeatures.features[D];return typeof z=="number"&&z>0&&(d.classFeatures.features[D]=z-1),d}),n(X,!0))}function Ke(){f("close"),q(""),U(""),W(""),n(ge,""),n(G,null),n(X,!1),_()}Xe(()=>(a(),zt),()=>{n(k,a().class?zt(a().class,a().level,a().subclass).some(D=>D.name==="Guided Strike"):!1)}),Xe(()=>a(),()=>{n(w,(()=>{const D=a().classFeatures.features["ChannelDivinity"];return typeof D=="number"?D:0})())}),Xe(()=>(e(de),e(K),e(se),e(Q),e(P),e(le),e(ne)),()=>{n(N,(()=>{const d=[];e(de)>0&&d.push(`${e(de)}d4`),e(K)>0&&d.push(`${e(K)}d6`),e(se)>0&&d.push(`${e(se)}d8`),e(Q)>0&&d.push(`${e(Q)}d10`),e(P)>0&&d.push(`${e(P)}d12`),e(le)>0&&d.push(`${e(le)}d20`);let D=d.join("+")||"1d20";return e(ne)!==0&&(D+=e(ne)>=0?`+${e(ne)}`:`${e(ne)}`),D})())}),Xe(()=>(H(q()),e(ye),H(ee()),e(ge),H(U()),H(W())),()=>{if(q()&&e(ye)&&ee()&&q()!==e(ge)){n(ge,q()),n(G,null),n(ie,[]),n(He,!1),n(X,!1);const d=q().includes("1d20")?"attack":"other";console.log("Auto-roll triggered. notation:",q(),"damageNotation:",U(),"attackName:",W()),setTimeout(()=>$e(q(),d),200)}}),Lt();var st={getLastRollTotal:ae};mt();var m=pl();let O;var V=l(m),B=l(V),Fe=t(l(B),2),Le=l(Fe),Ee=t(Le,2);s(Fe),s(B);var xe=t(B,2);{var S=d=>{var D=sl(),z=t(l(D),2),L=l(z),b=t(l(L),2);we(b),s(L);var ce=t(L,2),je=t(l(ce),2);we(je),s(ce);var _e=t(ce,2),Ge=t(l(_e),2);we(Ge),s(_e),s(z),s(D),Ae(b,()=>e(te),Se=>n(te,Se)),F("change",b,Ie),Ae(je,()=>e(g),Se=>n(g,Se)),F("change",je,Ie),Ae(Ge,()=>e(c),Se=>n(c,Se)),F("change",Ge,Ie),o(d,D)};j(xe,d=>{e(R)&&d(S)})}var me=t(xe,2);{var he=d=>{var D=ll();o(d,D)};j(me,d=>{e(ye)||d(he)})}var Ue=t(me,2),Ve=l(Ue);ra(Ve,d=>n(ve,d),()=>e(ve));var Ye=t(Ve,2);{var Re=d=>{var D=il(),z=t(l(D),2),L=l(z),b=t(l(L),2);we(b),s(L);var ce=t(L,2),je=t(l(ce),2);we(je),s(ce);var _e=t(ce,2),Ge=t(l(_e),2);we(Ge),s(_e);var Se=t(_e,2),p=t(l(Se),2);we(p),s(Se);var re=t(Se,2),C=t(l(re),2);we(C),s(re);var ue=t(re,2),Pe=t(l(ue),2);we(Pe),s(ue),s(z);var Oe=t(z,2),oe=l(Oe),Be=l(oe);s(oe);var Je=t(oe,2);s(Oe),s(D),I(()=>{oe.disabled=!e(ye),y(Be,`Roll ${e(N)??""}`)}),Ae(b,()=>e(de),Z=>n(de,Z)),Ae(je,()=>e(K),Z=>n(K,Z)),Ae(Ge,()=>e(se),Z=>n(se,Z)),Ae(p,()=>e(Q),Z=>n(Q,Z)),Ae(C,()=>e(P),Z=>n(P,Z)),Ae(Pe,()=>e(le),Z=>n(le,Z)),F("click",oe,De),F("click",Je,_),o(d,D)};j(Ye,d=>{q()||d(Re)})}s(Ue);var Y=t(Ue,2);let Ce;var Ne=l(Y);{var M=d=>{var D=ul(),z=ze(D),L=l(z),b=l(L,!0);s(L);var ce=t(L,2);{var je=oe=>{var Be=rl();o(oe,Be)};j(ce,oe=>{e(He)&&oe(je)})}s(z);var _e=t(z,2),Ge=l(_e,!0);s(_e);var Se=t(_e,2),p=l(Se);{var re=oe=>{var Be=nl(),Je=l(Be,!0);s(Be),I(()=>y(Je,(e(G),i(()=>e(G).resultString)))),o(oe,Be)};j(p,oe=>{e(G),i(()=>e(G).resultString)&&oe(re)})}var C=t(p,2);{var ue=oe=>{var Be=ol(),Je=l(Be);s(Be),I(()=>y(Je,`Modifier: ${e(G),i(()=>e(G).constant>=0?"+":"")??""}${e(G),i(()=>e(G).constant)??""}`)),o(oe,Be)};j(C,oe=>{e(G),i(()=>e(G).constant)&&oe(ue)})}s(Se);var Pe=t(Se,2);{var Oe=oe=>{var Be=dl(),Je=l(Be);ot(Je,1,()=>e(ie),pt,(Ze,tt)=>{var vt=cl(),Ft=l(vt,!0);s(vt),I(()=>y(Ft,(e(tt),i(()=>e(tt).label)))),F("click",vt,()=>$e(e(tt).notation,"damage")),o(Ze,vt)});var Z=t(Je,2);{var Qe=Ze=>{var tt=vl();I(()=>{tt.disabled=e(w)<=0,lt(tt,"title",e(w)<=0?"No Channel Divinity uses remaining":"Use Channel Divinity to add +10 to this attack roll")}),F("click",tt,qe),o(Ze,tt)};j(Z,Ze=>{e(k)&&e(x)==="attack"&&!e(X)&&Ze(Qe)})}s(Be),o(oe,Be)};j(Pe,oe=>{e(ie),e(k),e(x),e(X),i(()=>e(ie).length>0||e(k)&&e(x)==="attack"&&!e(X))&&oe(Oe)})}I(()=>{y(b,W()?`${W()} - Result`:"Result"),y(Ge,(e(G),i(()=>e(G).resultTotal)))}),o(d,D)};j(Ne,d=>{e(G)&&d(M)})}s(Y),s(V),s(m),I(()=>{O=ct(m,1,"modal-overlay svelte-1r90jgp",null,O,{hidden:!ee()}),Ce=ct(Y,1,"roll-result svelte-1r90jgp",null,Ce,{"has-result":e(G)})}),F("click",Le,Me),F("click",Ee,Ke),F("click",V,da(function(d){Pt.call(this,u,d)})),F("keydown",V,function(d){Pt.call(this,u,d)}),F("click",m,Ke),F("keydown",m,d=>d.key==="Escape"&&Ke()),o(r,m),Oa(u,"getLastRollTotal",ae);var E=yt(st);return $(),E}const Zt="https://api.github.com/gists";async function bl(r,u,a){if(!u)throw new Error("GitHub token is required");const v=JSON.stringify(r,null,2),$=`${r.name||"character"}_dnd.json`,k={description:a||`D&D Character: ${r.name}`,public:!1,files:{[$]:{content:v}}},w=await fetch(Zt,{method:"POST",headers:{Authorization:`token ${u}`,"Content-Type":"application/json"},body:JSON.stringify(k)});if(!w.ok)throw new Error(`Failed to create gist: ${w.statusText}`);return(await w.json()).id}async function hl(r,u,a){if(!u||!a)throw new Error("GitHub token and Gist ID are required");const v=JSON.stringify(r,null,2),k={files:{[`${r.name||"character"}_dnd.json`]:{content:v}}},w=await fetch(`${Zt}/${a}`,{method:"PATCH",headers:{Authorization:`token ${u}`,"Content-Type":"application/json"},body:JSON.stringify(k)});if(!w.ok)throw new Error(`Failed to update gist: ${w.statusText}`)}async function gl(r,u){if(!r)throw new Error("Gist ID is required");const a={"Content-Type":"application/json"};u&&(a.Authorization=`token ${u}`);const v=await fetch(`${Zt}/${r}`,{method:"GET",headers:a});if(!v.ok)throw new Error(`Failed to load gist: ${v.statusText}`);const $=await v.json(),k=Object.values($.files);if(k.length===0)throw new Error("No files found in gist");const N=k[0].content;try{const f=JSON.parse(N);return f.attacks&&Array.isArray(f.attacks)&&(f.attacks=f.attacks.map(q=>({...q,id:q.id||crypto.randomUUID()}))),f.classFeatures?(f.classFeatures.features||(f.classFeatures.features={}),f.classFeatures.spellSlots||(f.classFeatures.spellSlots=[]),f.classFeatures.preparedSpells===void 0&&(f.classFeatures.preparedSpells="")):f.classFeatures={features:{},spellSlots:[],preparedSpells:""},f}catch{throw new Error("Invalid character data in gist")}}function ha(r){typeof window<"u"&&localStorage.setItem("dnd_gist_config",JSON.stringify(r))}function ml(){if(typeof window<"u"){const r=localStorage.getItem("dnd_gist_config");if(r)return JSON.parse(r)}return{}}async function _l(r,u=30){if(!r)throw new Error("GitHub token is required to list gists");const a=await fetch(`${Zt}?per_page=${u}`,{method:"GET",headers:{Authorization:`token ${r}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`Failed to list gists: ${a.statusText}`);return await a.json()}var yl=h('<div class="error-message svelte-1jb5ckg"> </div>'),kl=h('<div class="toggle-container svelte-1jb5ckg"><button type="button" class="toggle-btn svelte-1jb5ckg"> </button></div>'),xl=h('<div class="form-group svelte-1jb5ckg"><label for="gistId" class="svelte-1jb5ckg">Gist ID (leave empty to create new)</label> <input type="text" id="gistId" placeholder="Optional: existing Gist ID to update" class="svelte-1jb5ckg"/></div>'),$l=h('<div class="loading-message svelte-1jb5ckg">Loading your gists...</div>'),Cl=h('<button type="button"><div class="gist-item-header svelte-1jb5ckg"><span class="gist-description svelte-1jb5ckg"> </span> <span class="gist-visibility svelte-1jb5ckg"> </span></div> <div class="gist-item-meta svelte-1jb5ckg"><span class="gist-id svelte-1jb5ckg"> </span> <span class="gist-date svelte-1jb5ckg"> </span></div></button>'),Sl=h('<div class="form-group svelte-1jb5ckg"><div class="gist-list-label svelte-1jb5ckg">Select a Gist to Update (or leave unselected to create new)</div> <div class="gist-list svelte-1jb5ckg"></div></div>'),Ll=h('<div class="info-message svelte-1jb5ckg">No gists found. A new one will be created.</div>'),jl=h('<!> <div class="form-group svelte-1jb5ckg"><label for="description" class="svelte-1jb5ckg"> </label> <input type="text" id="description" placeholder="D&amp;D Character Sheet" class="svelte-1jb5ckg"/></div>',1),wl=h('<div class="form-group svelte-1jb5ckg"><label for="gistId" class="svelte-1jb5ckg">Gist ID *</label> <input type="text" id="gistId" placeholder="Enter Gist ID (for public or your private gists)" required class="svelte-1jb5ckg"/></div>'),Dl=h('<div class="loading-message svelte-1jb5ckg">Loading your gists...</div>'),Fl=h('<button type="button"><div class="gist-item-header svelte-1jb5ckg"><span class="gist-description svelte-1jb5ckg"> </span> <span class="gist-visibility svelte-1jb5ckg"> </span></div> <div class="gist-item-meta svelte-1jb5ckg"><span class="gist-id svelte-1jb5ckg"> </span> <span class="gist-date svelte-1jb5ckg"> </span></div></button>'),Rl=h('<div class="form-group svelte-1jb5ckg"><div class="gist-list-label svelte-1jb5ckg">Select a Gist to Load</div> <div class="gist-list svelte-1jb5ckg"></div></div>'),Al=h('<div class="info-message svelte-1jb5ckg">No gists found. Enter a Gist ID manually or create a new one in Save mode.</div>'),Il=h('<div class="modal-overlay svelte-1jb5ckg" role="button" tabindex="-1"><div class="modal-content svelte-1jb5ckg" role="dialog" tabindex="0"><div class="modal-header svelte-1jb5ckg"><h2 class="svelte-1jb5ckg"> </h2> <button class="close-btn svelte-1jb5ckg">Ã—</button></div> <div class="modal-body svelte-1jb5ckg"><!> <div class="form-group svelte-1jb5ckg"><label for="token" class="svelte-1jb5ckg"> <a href="https://github.com/settings/tokens" target="_blank" rel="noopener" class="svelte-1jb5ckg">Get token</a></label> <input type="password" id="token" placeholder="ghp_xxxxxxxxxxxxx" class="svelte-1jb5ckg"/></div> <!> <!> <div class="modal-actions svelte-1jb5ckg"><button class="btn btn-primary svelte-1jb5ckg"><!></button> <button class="btn btn-secondary svelte-1jb5ckg">Cancel</button></div></div></div></div>');function Ml(r,u){_t(u,!1);const a=()=>We(J,"$character",v),[v,$]=Ct(),k=Bt();let w=Et(u,"mode",8,"save"),N=A(""),f=A(""),q=A(""),ee=A(!1),U=A(""),W=A(!1),pe=A(!1),ve=A([]),ye=A(null);const ge=ml();ge.token&&n(N,ge.token),ge.gistId&&n(f,ge.gistId),Wt(async()=>{e(N)&&!e(W)&&await G()});async function G(){if(e(N)){n(pe,!0),n(U,"");try{n(ve,await _l(e(N))),e(f)&&n(ye,e(ve).find(m=>m.id===e(f))||null)}catch(m){n(U,m.message||"Failed to load gists"),n(ve,[])}finally{n(pe,!1)}}}function ae(m){n(ye,m),n(f,m.id)}function de(){n(W,!e(W)),n(U,""),!e(W)&&e(N)&&G()}async function K(){if(!e(N)){n(U,"GitHub token is required");return}const m=e(ye)?.id||e(f);n(ee,!0),n(U,"");try{if(m)await hl(a(),e(N),m),n(f,m),Ot.add("Character updated in Gist successfully!","success");else{const O=await bl(a(),e(N),e(q));n(f,O),Ot.add(`Character saved to Gist! ID: ${O}`,"success")}ha({token:e(N),gistId:e(f)}),k("close")}catch(O){n(U,O.message||"Failed to save to Gist")}finally{n(ee,!1)}}async function se(){const m=e(ye)?.id||e(f);if(!m){n(U,"Please select a gist or enter a Gist ID");return}n(ee,!0),n(U,"");try{const O=await gl(m,e(N)||void 0);J.set(O),n(f,m),ha({token:e(N),gistId:e(f)}),Ot.add("Character loaded from Gist successfully!","success"),k("close")}catch(O){n(U,O.message||"Failed to load from Gist")}finally{n(ee,!1)}}function Q(){k("close")}mt();var P=Il(),le=l(P),ne=l(le),ie=l(ne),He=l(ie,!0);s(ie);var x=t(ie,2);s(ne);var X=t(ne,2),te=l(X);{var g=m=>{var O=yl(),V=l(O,!0);s(O),I(()=>y(V,e(U))),o(m,O)};j(te,m=>{e(U)&&m(g)})}var c=t(te,2),R=l(c),fe=l(R);Ca(),s(R);var T=t(R,2);we(T),s(c);var be=t(c,2);{var $e=m=>{var O=kl(),V=l(O),B=l(V,!0);s(V),s(O),I(()=>{V.disabled=e(ee),y(B,e(W)?"ðŸ“‹ Show My Gists":"âœï¸ Enter Gist ID Manually")}),F("click",V,de),o(m,O)};j(be,m=>{(w()==="load"||w()==="save"&&e(N))&&m($e)})}var Te=t(be,2);{var De=m=>{var O=jl(),V=ze(O);{var B=me=>{var he=xl(),Ue=t(l(he),2);we(Ue),s(he),I(()=>Ue.disabled=e(ee)),Ae(Ue,()=>e(f),Ve=>n(f,Ve)),o(me,he)},Fe=me=>{var he=it(),Ue=ze(he);{var Ve=Re=>{var Y=$l();o(Re,Y)},Ye=Re=>{var Y=it(),Ce=ze(Y);{var Ne=E=>{var d=Sl(),D=t(l(d),2);ot(D,5,()=>e(ve),pt,(z,L)=>{var b=Cl();let ce;var je=l(b),_e=l(je),Ge=l(_e,!0);s(_e);var Se=t(_e,2),p=l(Se,!0);s(Se),s(je);var re=t(je,2),C=l(re),ue=l(C);s(C);var Pe=t(C,2),Oe=l(Pe);s(Pe),s(re),s(b),I(oe=>{ce=ct(b,1,"gist-item svelte-1jb5ckg",null,ce,{selected:e(ye)?.id===e(L).id}),b.disabled=e(ee),y(Ge,(e(L),i(()=>e(L).description||"Untitled"))),y(p,(e(L),i(()=>e(L).public?"ðŸŒ Public":"ðŸ”’ Private"))),y(ue,`ID: ${e(L),i(()=>e(L).id)??""}`),y(Oe,`Updated: ${oe??""}`)},[()=>(e(L),i(()=>new Date(e(L).updated_at).toLocaleDateString()))]),F("click",b,()=>ae(e(L))),o(z,b)}),s(D),s(d),o(E,d)},M=E=>{var d=it(),D=ze(d);{var z=L=>{var b=Ll();o(L,b)};j(D,L=>{e(N)&&L(z)},!0)}o(E,d)};j(Ce,E=>{e(ve),i(()=>e(ve).length>0)?E(Ne):E(M,!1)},!0)}o(Re,Y)};j(Ue,Re=>{e(pe)?Re(Ve):Re(Ye,!1)},!0)}o(me,he)};j(V,me=>{e(W)||!e(N)?me(B):me(Fe,!1)})}var Le=t(V,2),Ee=l(Le),xe=l(Ee);s(Ee);var S=t(Ee,2);we(S),s(Le),I(()=>{y(xe,`Description ${e(f)?"(optional)":""}`),S.disabled=e(ee)}),Ae(S,()=>e(q),me=>n(q,me)),o(m,O)},ke=m=>{var O=it(),V=ze(O);{var B=Le=>{var Ee=wl(),xe=t(l(Ee),2);we(xe),s(Ee),I(()=>xe.disabled=e(ee)),Ae(xe,()=>e(f),S=>n(f,S)),o(Le,Ee)},Fe=Le=>{var Ee=it(),xe=ze(Ee);{var S=he=>{var Ue=Dl();o(he,Ue)},me=he=>{var Ue=it(),Ve=ze(Ue);{var Ye=Y=>{var Ce=Rl(),Ne=t(l(Ce),2);ot(Ne,5,()=>e(ve),pt,(M,E)=>{var d=Fl();let D;var z=l(d),L=l(z),b=l(L,!0);s(L);var ce=t(L,2),je=l(ce,!0);s(ce),s(z);var _e=t(z,2),Ge=l(_e),Se=l(Ge);s(Ge);var p=t(Ge,2),re=l(p);s(p),s(_e),s(d),I(C=>{D=ct(d,1,"gist-item svelte-1jb5ckg",null,D,{selected:e(ye)?.id===e(E).id}),d.disabled=e(ee),y(b,(e(E),i(()=>e(E).description||"Untitled"))),y(je,(e(E),i(()=>e(E).public?"ðŸŒ Public":"ðŸ”’ Private"))),y(Se,`ID: ${e(E),i(()=>e(E).id)??""}`),y(re,`Updated: ${C??""}`)},[()=>(e(E),i(()=>new Date(e(E).updated_at).toLocaleDateString()))]),F("click",d,()=>ae(e(E))),o(M,d)}),s(Ne),s(Ce),o(Y,Ce)},Re=Y=>{var Ce=it(),Ne=ze(Ce);{var M=E=>{var d=Al();o(E,d)};j(Ne,E=>{e(N)&&E(M)},!0)}o(Y,Ce)};j(Ve,Y=>{e(ve),i(()=>e(ve).length>0)?Y(Ye):Y(Re,!1)},!0)}o(he,Ue)};j(xe,he=>{e(pe)?he(S):he(me,!1)},!0)}o(Le,Ee)};j(V,Le=>{e(W)||!e(N)?Le(B):Le(Fe,!1)})}o(m,O)};j(Te,m=>{w()==="save"?m(De):m(ke,!1)})}var _=t(Te,2),Ie=l(_),Me=l(Ie);{var qe=m=>{var O=ut();I(()=>y(O,w()==="save"?"Saving...":"Loading...")),o(m,O)},Ke=m=>{var O=ut();I(()=>y(O,w()==="save"?"Save":"Load")),o(m,O)};j(Me,m=>{e(ee)?m(qe):m(Ke,!1)})}s(Ie);var st=t(Ie,2);s(_),s(X),s(le),s(P),I(()=>{y(He,w()==="save"?"Save to GitHub Gist":"Load from GitHub Gist"),y(fe,`GitHub Token ${w()==="load"?"(optional for public gists)":"(required)"} `),T.disabled=e(ee),Ie.disabled=e(ee),st.disabled=e(ee)}),F("click",x,Q),Ae(T,()=>e(N),m=>n(N,m)),F("blur",T,()=>{e(N)&&!e(W)&&G()}),F("click",Ie,function(...m){(w()==="save"?K:se)?.apply(this,m)}),F("click",st,Q),F("click",le,da(function(m){Pt.call(this,u,m)})),F("keydown",le,function(m){Pt.call(this,u,m)}),F("click",P,Q),F("keydown",P,m=>m.key==="Escape"&&Q()),o(r,P),yt(),$()}var El=h('<div class="loading svelte-1ngjemu">Loading D&D data...</div>'),Pl=h("<option> </option>"),Bl=h('<select class="level-filter svelte-1ngjemu"><option>All Levels</option><option>Cantrip</option><!></select>'),Hl=h('<div class="no-results svelte-1ngjemu"> </div>'),Ul=h('<div class="item-meta svelte-1ngjemu"> </div>'),Tl=h('<div class="item-meta svelte-1ngjemu"> </div>'),Nl=h('<button><div class="item-name svelte-1ngjemu"> </div> <!></button>'),Gl=h('<p class="higher-levels"><strong>At Higher Levels:</strong> </p>'),Ol=h('<p class="cantrip-upgrade"><strong>Cantrip Upgrade:</strong> </p>'),ql=h('<h3 class="svelte-1ngjemu"> </h3> <p class="spell-meta svelte-1ngjemu"><!> <!></p> <p class="spell-classes"><strong>Classes:</strong> </p> <div class="spell-stats svelte-1ngjemu"><div><strong>Casting Time:</strong> </div> <div><strong>Range:</strong> </div> <div><strong>Components:</strong> <!></div> <div><strong>Duration:</strong> <!> </div></div> <p class="description svelte-1ngjemu"> </p> <!> <!>',1),zl=h('<p class="prerequisite svelte-1ngjemu"><strong>Prerequisite:</strong> </p>'),Wl=h('<h3 class="svelte-1ngjemu"> </h3> <!> <p class="description svelte-1ngjemu"> </p> <a target="_blank" rel="noopener" class="source-link svelte-1ngjemu">View Full Details â†’</a>',1),Vl=h('<div class="item-details svelte-1ngjemu"><!></div>'),Jl=h('<div class="controls svelte-1ngjemu"><div class="tabs svelte-1ngjemu"><button> </button> <button> </button></div> <div class="search-controls svelte-1ngjemu"><input type="text" placeholder="Search by name or description..." class="search-input svelte-1ngjemu"/> <!></div></div> <div class="content-container svelte-1ngjemu"><div class="items-list svelte-1ngjemu"><!></div> <!></div>',1),Kl=h('<div class="modal-backdrop svelte-1ngjemu" role="presentation"><div class="modal svelte-1ngjemu" role="dialog" aria-modal="true" tabindex="-1"><div class="modal-header svelte-1ngjemu"><h2 class="svelte-1ngjemu">Browse D&D Spells & Feats</h2> <button class="close-btn svelte-1ngjemu" aria-label="Close">&times;</button></div> <div class="modal-body svelte-1ngjemu"><!></div> <div class="modal-footer svelte-1ngjemu"><button class="btn-secondary svelte-1ngjemu">Cancel</button> <button class="btn-primary svelte-1ngjemu">Add to Character Sheet</button></div></div></div>');function Ql(r,u){_t(u,!1);const a=A(),v=A(),$=A();let k=Et(u,"onClose",8),w=A("spell"),N=A(!0),f=A(""),q=A(null),ee=A([]),U=A([]),W=A(null);Wt(async()=>{n(N,!0);try{n(ee,await wa()),n(U,await ds())}catch(x){console.error("Failed to load data:",x)}finally{n(N,!1)}});function pe(x){n(W,x)}function ve(x){const X=x.match(/(\d+d\d+(?:\s*\+\s*\d+)?)/i);return X?X[1]:""}function ye(x){const X=x.split(/\.( |$)/)[0].trim(),te=Array.from(x.matchAll(/\*\*(.*?)\*\*/g)).map(c=>c[1].replace(/\.$/,""));let g=X;return te.length&&(g+=" | Effects: "+te.join(", ")),g}function ge(){if(e(W)){if(e(w)==="spell"){const x=e(W);J.update(X=>{const g=[];x.range&&g.push(`Range: ${x.range}`),x.castingTime&&g.push(`Cast: ${x.castingTime}`),x.duration&&g.push(`Duration: ${x.duration}`),x.actionType==="Save"&&g.push("Saving throw spell"),x.components&&x.components.length>0&&g.push(`Components: ${x.components.join(", ")}`),x.material&&g.push(`Material: ${x.material}`);const c=g.join(" | "),R=ye(x.description),fe={id:crypto.randomUUID(),name:`${x.name}${x.concentration?" (C)":""}${x.ritual?" (R)":""}`,bonus:x.actionType==="Attack"?5:0,damage:ve(x.description),damageType:`${x.school} (Lvl ${x.level})`,spellRef:x.name,infoNotes:c,generalNotes:R,castAtLevel:x.level};return X.attacks=[...X.attacks,fe],X})}else if(e(w)==="feat"){const x=e(W);J.update(X=>{const te=`${x.name}${x.prerequisite?` (Req: ${x.prerequisite})`:""}
${x.description}
`;return X.features=X.features?`${X.features}
${te}`:te,X})}n(W,null),k()()}}Xe(()=>(e(q),e(ee),e(f)),()=>{n(a,e(q)!==null?us(ba(e(ee),e(f)),e(q)):ba(e(ee),e(f)))}),Xe(()=>(e(U),e(f)),()=>{n(v,ps(e(U),e(f)))}),Xe(()=>(e(w),e(a),e(v)),()=>{n($,e(w)==="spell"?e(a):e(v))}),Lt(),mt();var G=Kl(),ae=l(G),de=l(ae),K=t(l(de),2);s(de);var se=t(de,2),Q=l(se);{var P=x=>{var X=El();o(x,X)},le=x=>{var X=Jl(),te=ze(X),g=l(te),c=l(g);let R;var fe=l(c);s(c);var T=t(c,2);let be;var $e=l(T);s(T),s(g);var Te=t(g,2),De=l(Te);we(De);var ke=t(De,2);{var _=V=>{var B=Bl();I(()=>{e(q),St(()=>{})});var Fe=l(B);Fe.value=(Fe.__value=null)??"";var Le=t(Fe);Le.value=Le.__value=0;var Ee=t(Le);ot(Ee,0,()=>[1,2,3,4,5,6,7,8,9],pt,(xe,S)=>{var me=Pl(),he=l(me);s(me);var Ue={};I(()=>{y(he,`Level ${S??""}`),Ue!==(Ue=S)&&(me.value=(me.__value=S)??"")}),o(xe,me)}),s(B),La(B,()=>e(q),xe=>n(q,xe)),o(V,B)};j(ke,V=>{e(w)==="spell"&&V(_)})}s(Te),s(te);var Ie=t(te,2),Me=l(Ie),qe=l(Me);{var Ke=V=>{var B=Hl(),Fe=l(B);s(B),I(()=>y(Fe,`No ${e(w)??""}s found`)),o(V,B)},st=V=>{var B=it(),Fe=ze(B);ot(Fe,1,()=>e($),pt,(Le,Ee)=>{var xe=Nl();let S;var me=l(xe),he=l(me,!0);s(me);var Ue=t(me,2);{var Ve=Re=>{const Y=at(()=>e(Ee));var Ce=Ul(),Ne=l(Ce);s(Ce),I(()=>y(Ne,`Level ${H(e(Y)),i(()=>e(Y).level)??""} â€¢ ${H(e(Y)),i(()=>e(Y).school)??""}`)),o(Re,Ce)},Ye=Re=>{const Y=at(()=>e(Ee));var Ce=it(),Ne=ze(Ce);{var M=E=>{var d=Tl(),D=l(d,!0);s(d),I(()=>y(D,(H(e(Y)),i(()=>e(Y).prerequisite)))),o(E,d)};j(Ne,E=>{H(e(Y)),i(()=>e(Y).prerequisite)&&E(M)})}o(Re,Ce)};j(Ue,Re=>{e(w)==="spell"?Re(Ve):Re(Ye,!1)})}s(xe),I(()=>{S=ct(xe,1,"item-card svelte-1ngjemu",null,S,{selected:e(W)?.name===e(Ee).name}),y(he,(e(Ee),i(()=>e(Ee).name)))}),F("click",xe,()=>pe(e(Ee))),o(Le,xe)}),o(V,B)};j(qe,V=>{e($),i(()=>e($).length===0)?V(Ke):V(st,!1)})}s(Me);var m=t(Me,2);{var O=V=>{var B=Vl(),Fe=l(B);{var Le=xe=>{const S=at(()=>e(W));var me=ql(),he=ze(me),Ue=l(he,!0);s(he);var Ve=t(he,2),Ye=l(Ve);{var Re=Z=>{var Qe=ut();I(()=>y(Qe,`${H(e(S)),i(()=>e(S).school)??""} cantrip`)),o(Z,Qe)},Y=Z=>{var Qe=ut();I(()=>y(Qe,`Level ${H(e(S)),i(()=>e(S).level)??""} ${H(e(S)),i(()=>e(S).school)??""}`)),o(Z,Qe)};j(Ye,Z=>{H(e(S)),i(()=>e(S).level===0)?Z(Re):Z(Y,!1)})}var Ce=t(Ye,2);{var Ne=Z=>{var Qe=ut("(ritual)");o(Z,Qe)};j(Ce,Z=>{H(e(S)),i(()=>e(S).ritual)&&Z(Ne)})}s(Ve);var M=t(Ve,2),E=t(l(M));s(M);var d=t(M,2),D=l(d),z=t(l(D));s(D);var L=t(D,2),b=t(l(L));s(L);var ce=t(L,2),je=t(l(ce)),_e=t(je);{var Ge=Z=>{var Qe=ut();I(()=>y(Qe,`(${H(e(S)),i(()=>e(S).material)??""})`)),o(Z,Qe)};j(_e,Z=>{H(e(S)),i(()=>e(S).material)&&Z(Ge)})}s(ce);var Se=t(ce,2),p=t(l(Se),2);{var re=Z=>{var Qe=ut("Concentration,");o(Z,Qe)};j(p,Z=>{H(e(S)),i(()=>e(S).concentration)&&Z(re)})}var C=t(p,1,!0);s(Se),s(d);var ue=t(d,2),Pe=l(ue,!0);s(ue);var Oe=t(ue,2);{var oe=Z=>{var Qe=Gl(),Ze=t(l(Qe));s(Qe),I(()=>y(Ze,` ${H(e(S)),i(()=>e(S).higherLevelSlot)??""}`)),o(Z,Qe)};j(Oe,Z=>{H(e(S)),i(()=>e(S).higherLevelSlot)&&Z(oe)})}var Be=t(Oe,2);{var Je=Z=>{var Qe=Ol(),Ze=t(l(Qe));s(Qe),I(()=>y(Ze,` ${H(e(S)),i(()=>e(S).cantripUpgrade)??""}`)),o(Z,Qe)};j(Be,Z=>{H(e(S)),i(()=>e(S).cantripUpgrade)&&Z(Je)})}I((Z,Qe)=>{y(Ue,(H(e(S)),i(()=>e(S).name))),y(E,` ${Z??""}`),y(z,` ${H(e(S)),i(()=>e(S).castingTime||e(S).actionType)??""}`),y(b,` ${H(e(S)),i(()=>e(S).range)??""}`),y(je,` ${Qe??""}`),y(C,(H(e(S)),i(()=>e(S).duration))),y(Pe,(H(e(S)),i(()=>e(S).description)))},[()=>(H(e(S)),i(()=>e(S).classes.join(", "))),()=>(H(e(S)),i(()=>e(S).components.join(", ").toUpperCase()))]),o(xe,me)},Ee=xe=>{const S=at(()=>e(W));var me=Wl(),he=ze(me),Ue=l(he,!0);s(he);var Ve=t(he,2);{var Ye=Ne=>{var M=zl(),E=t(l(M));s(M),I(()=>y(E,` ${H(e(S)),i(()=>e(S).prerequisite)??""}`)),o(Ne,M)};j(Ve,Ne=>{H(e(S)),i(()=>e(S).prerequisite)&&Ne(Ye)})}var Re=t(Ve,2),Y=l(Re,!0);s(Re);var Ce=t(Re,2);I(()=>{y(Ue,(H(e(S)),i(()=>e(S).name))),y(Y,(H(e(S)),i(()=>e(S).description))),lt(Ce,"href",(H(e(S)),i(()=>e(S).source)))}),o(xe,me)};j(Fe,xe=>{e(w)==="spell"?xe(Le):xe(Ee,!1)})}s(B),o(V,B)};j(m,V=>{e(W)&&V(O)})}s(Ie),I(()=>{R=ct(c,1,"tab svelte-1ngjemu",null,R,{active:e(w)==="spell"}),y(fe,`ðŸ“œ Spells (${e(ee),i(()=>e(ee).length)??""})`),be=ct(T,1,"tab svelte-1ngjemu",null,be,{active:e(w)==="feat"}),y($e,`â­ Feats (${e(U),i(()=>e(U).length)??""})`)}),F("click",c,()=>{n(w,"spell"),n(W,null),n(f,"")}),F("click",T,()=>{n(w,"feat"),n(W,null),n(f,"")}),Ae(De,()=>e(f),V=>n(f,V)),o(x,X)};j(Q,x=>{e(N)?x(P):x(le,!1)})}s(se);var ne=t(se,2),ie=l(ne),He=t(ie,2);s(ne),s(ae),s(G),I(()=>He.disabled=!e(W)),F("click",K,function(...x){k()?.apply(this,x)}),F("click",ie,function(...x){k()?.apply(this,x)}),F("click",He,ge),F("click",ae,da(function(x){Pt.call(this,u,x)})),F("keydown",ae,function(x){Pt.call(this,u,x)}),F("click",G,function(...x){k()?.apply(this,x)}),F("keydown",G,x=>x.key==="Escape"&&k()()),o(r,G),yt()}var Xl=h('<link rel="icon" type="image/png" href="/favicon.png"/> <meta name="viewport" content="width=device-width, initial-scale=1"/>',1),Yl=h('<span class="character-name svelte-1uha8ag"> </span>'),Zl=h("<span> </span>"),ei=h('<div class="spell-slots-header svelte-1uha8ag"></div>'),ti=h('<div class="rest-menu svelte-1uha8ag"><button class="rest-option svelte-1uha8ag">â˜• Short Rest</button> <button class="rest-option svelte-1uha8ag">ðŸ›ï¸ Long Rest</button></div>'),ai=h('<div class="container svelte-1uha8ag"><header class="svelte-1uha8ag"><div class="header-top svelte-1uha8ag"><div class="header-title svelte-1uha8ag"><div class="title-row svelte-1uha8ag"><h1 class="svelte-1uha8ag">D&D Character Sheet</h1> <!></div> <!></div> <div class="header-right svelte-1uha8ag"><div class="header-controls svelte-1uha8ag"><button class="btn btn-secondary use-enabled"><span class="btn-icon svelte-1uha8ag">ðŸŽ²</span><span class="btn-text svelte-1uha8ag">Roll Dice</span></button> <div class="rest-button-container svelte-1uha8ag"><button class="btn btn-secondary use-enabled"><span class="btn-icon svelte-1uha8ag">ðŸ˜´</span><span class="btn-text svelte-1uha8ag">Rest</span></button> <!></div> <div class="mode-toggle"><button><span class="btn-icon svelte-1uha8ag"> </span><span class="btn-text svelte-1uha8ag"> </span></button></div></div> <div class="header-search svelte-1uha8ag"><input type="text" placeholder="ðŸ” Search..." class="search-input use-enabled svelte-1uha8ag"/></div></div></div> <div class="header-actions svelte-1uha8ag"><button class="btn btn-mode svelte-1uha8ag">ðŸ“š Browse Spells & Feats</button> <button class="btn btn-secondary">Save to Gist</button> <button class="btn btn-secondary">Load from Gist</button> <button class="btn btn-secondary">Export JSON</button> <button class="btn btn-secondary">Import JSON</button> <input type="file" accept=".json" style="display: none;"/></div></header> <main class="svelte-1uha8ag"><!> <!> <!> <!> <!> <!> <!></main></div> <!> <!> <!> <!>',1);function di(r,u){_t(u,!1);const a=()=>We(J,"$character",k),v=()=>We(Qt,"$isEditMode",k),$=()=>We(Dt,"$searchFilter",k),[k,w]=Ct();function N(){const p=[],re=a().classFeatures.spellSlotsByLevel||{};for(let C=1;C<=9;C++){const ue=re[C];if(ue&&ue.length>0){const Pe=ue.length,Oe=ue.filter(oe=>oe).length;p.push({level:C,available:Pe-Oe,total:Pe})}}return p}let f=A(!1),q=A(!1),ee=A(!1),U=A("save"),W=A(void 0),pe=A(""),ve=A(""),ye=A(""),ge=A(),G=!1,ae=A(!1);function de(){const p=[];J.update(C=>{const ue=C.hitDice.current;C.hitDice.current=Math.min(C.hitDice.max,C.hitDice.current+Math.max(1,Math.floor(C.hitDice.max/2)));const Pe=C.hitDice.current-ue;return Pe>0&&p.push(`${Pe} hit ${Pe===1?"die":"dice"}`),C.classFeatures.features&&Object.keys(C.classFeatures.features).forEach(Oe=>{const oe=se(Oe);if(oe?.resetOn==="short"){if(Array.isArray(C.classFeatures.features[Oe])){const Be=oe.maxUses,Je=typeof Be=="function"?Be(C.level):Be;C.classFeatures.features[Oe]=Array(Je).fill(!1),p.push(oe.name)}else if(typeof C.classFeatures.features[Oe]=="number"){const Be=oe.maxPool,Je=typeof Be=="function"?Be(C.level):Be;Je!==void 0&&(C.classFeatures.features[Oe]=Je,p.push(oe.name))}}}),C}),n(ae,!1);const re=p.length>0?`Short rest taken! Restored: ${p.join(", ")}`:"Short rest taken!";Ot.add(re,"success")}function K(){const p=[];J.update(C=>{const ue=C.maxHP-C.currentHP;ue>0&&p.push(`${ue} HP`),C.currentHP=C.maxHP,C.tempHP=0;const Pe=C.hitDice.max-C.hitDice.current;Pe>0&&p.push(`${Pe} hit ${Pe===1?"die":"dice"}`),C.hitDice.current=C.hitDice.max;let Oe=0;return C.classFeatures.spellSlotsByLevel&&Object.keys(C.classFeatures.spellSlotsByLevel).forEach(oe=>{const Be=C.classFeatures.spellSlotsByLevel[parseInt(oe)];if(Be){const Je=Be.filter(Z=>Z).length;Oe+=Je,C.classFeatures.spellSlotsByLevel[parseInt(oe)]=Array(Be.length).fill(!1)}}),Oe>0&&p.push(`${Oe} spell ${Oe===1?"slot":"slots"}`),C.classFeatures.features&&(Object.keys(C.classFeatures.features).forEach(oe=>{const Be=se(oe);if(Be){if(Array.isArray(C.classFeatures.features[oe])){const Je=Be.maxUses,Z=typeof Je=="function"?Je(C.level):Je;C.classFeatures.features[oe]=Array(Z).fill(!1)}else if(typeof C.classFeatures.features[oe]=="number"){const Je=Be.maxPool,Z=typeof Je=="function"?Je(C.level):Je;Z!==void 0&&(C.classFeatures.features[oe]=Z)}}}),Object.keys(C.classFeatures.features).length>0&&p.push("all class features")),C}),n(ae,!1);const re=p.length>0?`Long rest taken! Restored: ${p.join(", ")}`:"Long rest taken! Fully rested.";Ot.add(re,"success")}function se(p){return(a().class?gt(a().class):null)?zt(a().class,a().level,a().subclass).find(ue=>ue.name.replace(/\s+/g,"")===p):null}function Q(p){n(pe,""),n(ve,""),n(ye,""),G=!1,typeof p=="string"?n(pe,p):(n(pe,p.notation),n(ve,p.damageNotation||""),n(ye,p.attackName||"")),n(f,!0)}function P(p){const{notation:re}=p.detail;n(pe,""),G=!0,setTimeout(()=>{n(pe,re),n(ve,""),n(ye,"Hit Die")},0),n(f,!0)}function le(){if(n(f,!1),G&&e(ge)){const p=e(ge).getLastRollTotal();if(p!==null){const re=Math.max(1,p);J.update(C=>(C.hitDice.current=Math.max(0,C.hitDice.current-1),C.currentHP=Math.min(C.maxHP,C.currentHP+re),C))}G=!1}}function ne(){console.log("toggleMode called, current isEditMode:",v()),Qt.update(p=>(console.log("Updating isEditMode from",p,"to",!p),!p))}function ie(p){p.target.closest(".rest-button-container")||n(ae,!1)}Wt(()=>{console.log("onMount - initial isEditMode:",v()),console.log("onMount - body classes:",document.body.className);const p=Qt.subscribe(re=>{console.log("isEditMode subscription triggered, value:",re),console.log("Body classes before:",document.body.className),re?(document.body.classList.remove("use-mode"),console.log("Removed use-mode class (Edit Mode)")):(document.body.classList.add("use-mode"),console.log("Added use-mode class (Use Mode)")),console.log("Body classes after:",document.body.className)});return document.addEventListener("click",ie),()=>{p(),document.removeEventListener("click",ie)}});function He(){Ua(a())}function x(){e(W)?.click()}async function X(p){const C=p.target.files?.[0];if(C)try{const ue=await Ta(C);J.set(ue),alert("Character imported successfully!")}catch{alert("Failed to import character file")}}mt();var te=ai();Ba("1uha8ag",p=>{var re=Xl();Ca(2),_a(()=>{Ma.title="D&D Character Sheet"}),o(p,re)});var g=ze(te),c=l(g),R=l(c),fe=l(R),T=l(fe),be=t(l(T),2);{var $e=p=>{var re=Yl(),C=l(re,!0);s(re),I(()=>y(C,a().name)),o(p,re)};j(be,p=>{a().name&&p($e)})}s(T);var Te=t(T,2);{var De=p=>{var re=ei();ot(re,5,N,pt,(C,ue)=>{var Pe=Zl();let Oe;var oe=l(Pe);s(Pe),I(()=>{Oe=ct(Pe,1,"slot-badge svelte-1uha8ag",null,Oe,{depleted:e(ue).available===0}),y(oe,`Lv${e(ue).level??""}: ${e(ue).available??""}/${e(ue).total??""}`)}),o(C,Pe)}),s(re),o(p,re)};j(Te,p=>{N().length>0&&p(De)})}s(fe);var ke=t(fe,2),_=l(ke),Ie=l(_),Me=t(Ie,2),qe=l(Me),Ke=t(qe,2);{var st=p=>{var re=ti(),C=l(re),ue=t(C,2);s(re),F("click",C,de),F("click",ue,K),o(p,re)};j(Ke,p=>{e(ae)&&p(st)})}s(Me);var m=t(Me,2),O=l(m);let V;var B=l(O),Fe=l(B,!0);s(B);var Le=t(B),Ee=l(Le,!0);s(Le),s(O),s(m),s(_);var xe=t(_,2),S=l(xe);we(S),s(xe),s(ke),s(R);var me=t(R,2),he=l(me),Ue=t(he,2),Ve=t(Ue,2),Ye=t(Ve,2),Re=t(Ye,2),Y=t(Re,2);ra(Y,p=>n(W,p),()=>e(W)),s(me),s(c);var Ce=t(c,2),Ne=l(Ce);Ya(Ne,{});var M=t(Ne,2);rs(M,{$$events:{rollHitDice:P}});var E=t(M,2);as(E,{$$events:{roll:p=>Q(p.detail)}});var d=t(E,2);vs(d,{$$events:{roll:p=>Q(p.detail)}});var D=t(d,2);Ps(D,{$$events:{roll:p=>Q(p.detail)}});var z=t(D,2);Zs(z,{});var L=t(z,2);al(L,{}),s(Ce),s(g);var b=t(g,2);ra(fl(b,{get notation(){return e(pe)},get damageNotation(){return e(ve)},get attackName(){return e(ye)},get visible(){return e(f)},$$events:{close:le},$$legacy:!0}),p=>n(ge,p),()=>e(ge));var ce=t(b,2);{var je=p=>{Ml(p,{get mode(){return e(U)},$$events:{close:()=>n(q,!1)}})};j(ce,p=>{e(q)&&p(je)})}var _e=t(ce,2);{var Ge=p=>{Ql(p,{onClose:()=>n(ee,!1)})};j(_e,p=>{e(ee)&&p(Ge)})}var Se=t(_e,2);Ha(Se,{}),I(()=>{V=ct(O,1,"btn btn-mode svelte-1uha8ag",null,V,{"use-mode":!v()}),y(Fe,v()?"ðŸ“":"ðŸŽ²"),y(Ee,v()?"Edit Mode":"Use Mode")}),F("click",Ie,()=>n(f,!0)),F("click",qe,()=>n(ae,!e(ae))),F("click",O,ne),Ae(S,$,p=>Na(Dt,p)),F("click",he,()=>n(ee,!0)),F("click",Ue,()=>{n(U,"save"),n(q,!0)}),F("click",Ve,()=>{n(U,"load"),n(q,!0)}),F("click",Ye,He),F("click",Re,x),F("change",Y,X),o(r,te),yt(),w()}export{di as component};
